window.__require=function e(t,i,o){function n(a,c){if(!i[a]){if(!t[a]){var l=a.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!c&&r)return r(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+a+"'")}}var h=i[a]={exports:{}};t[a][0].call(h.exports,function(e){return n(t[a][1][e]||e)},h,h.exports,e,t,i,o)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({Achievement:[function(e,t,i){"use strict";cc._RF.push(t,"6033decpyFJIopbLwqaFHw5","Achievement");var o=e("Utils"),n=e("EnumDefine"),s=n.LevelResult,a=e("LocalStorage"),c=e("EnumDefine").ActorType,l=e("BaseUI"),r=o.ProduceType,h=n.EnterKind;cc.Class({extends:l,properties:{role1:cc.Node,role2:cc.Node,role3:cc.Node,role4:cc.Node,role5:cc.Node,Win:cc.Node,Lose:cc.Node,uiBase:cc.Node,star1:cc.Node,star2:cc.Node,star3:cc.Node,continue:cc.Node,midbk:cc.Node,freeSpin:cc.Node,freeSpinlabel:{default:null,type:cc.Label},scorelabel:{default:null,type:cc.Label},coinlabel:{default:null,type:cc.Label},diamondlabel:{default:null,type:cc.Label},word:{default:null,type:cc.Label},audioWin:{type:cc.AudioSource,default:null},audioLose:{type:cc.AudioSource,default:null}},onLoad:function(){this.Win.active=!1,this.Lose.active=!1,this.coinlabel.string="0",this.diamondlabel.string="0",this.star1.active=!1,this.star2.active=!1,this.star3.active=!1,this.continue.scale=0},start:function(){var e=o.levelID,t=o.levelResultData,i=t.levelResult,n=t.coinNum,c=t.diamondNum,l=t.score;this.showScore(l);var r=o.FreeSpinVal;i===s.Win?(this.Win.active=!0,this.word.string="\u5f88\u597d!",0===a.instance.getLevelPassed(e)&&a.instance.setLevelPassed(e,1),e>0&&e%5==0&&(r+=3)):(this.Lose.active=!0,this.word.string="\u7ee7\u7eed\u52a0\u6cb9!");var h=a.instance.getFreeSpinVal();h+=r,a.instance.setFreeSpinVal(h),this.coinlabel.string=n+"",this.diamondlabel.string=c+"";var u=function(){switch(this.produceCoin(n),this.produceDiamond(c),this.showActors(i),i){case s.Win:this.winAudio(),this.Lose.active=!1,this.Win.active=!0,this.Win.getComponent("Win").showWin();var t=function(e){var t=1;o.passLevelStars=3;var i=parseInt(e.OneStarsIntegral),n=parseInt(e.TwoStarsIntegral),s=parseInt(e.ThreeStarsIntegral);l>=i&&l<n?t=1:l>n&&l<s?t=2:l>=s&&(t=3),o.passLevelStars=t,o.levelResultData.star=t,this.showStars(t),this.showContinue(),this.showFreeSpinVal(r)}.bind(this);this.loadStarScoreData(e,t);break;case s.Lose:this.loseAudio(),this.Win.active=!1,this.Lose.active=!0}}.bind(this);this.scaleShow(this.midbk,u)},showScore:function(e){this.scorelabel.string=e+""},showFreeSpinVal:function(e){var t=this;if(e>0){var i=new cc.Node(""),o=i.addComponent("cc.Sprite");i.parent=this.freeSpin.parent,i.position=cc.v2(-186,0);cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame("keyup");o.spriteFrame=i});var n=cc.moveTo(.5,this.freeSpin.position),s=cc.callFunc(function(){t.freeSpinlabel.string=e+"",i.destroy()},this);i.runAction(cc.sequence(n,s))}},showContinue:function(){var e=cc.scaleTo(.5,1).easing(cc.easeOut(3));this.continue.runAction(e)},showStars:function(e){var t=[];1===e?(this.star1.active=!0,this.star2.active=!1,this.star3.active=!1,t.push(this.star1)):2===e?(this.star1.active=!0,this.star2.active=!0,this.star3.active=!1,t.push(this.star1),t.push(this.star2)):3===e&&(this.star1.active=!0,this.star2.active=!0,this.star3.active=!0,t.push(this.star1),t.push(this.star2),t.push(this.star3));for(var i=[],o=0;o<t.length;o++){var n=t[o],s=cc.callFunc(this.showStar.bind(this,n));i.push(s),i.push(cc.delayTime(.1))}i.length>0&&this.node.runAction(cc.sequence(i))},showStar:function(e){var t=e.scale;e.scale=0;var i=cc.scaleTo(.5,t).easing(cc.easeBounceInOut());e.runAction(i)},showActors:function(e){for(var t=[c.Actor1,c.Actor2,c.Actor3,c.Actor4,c.Actor5],i=[this.role1,this.role2,this.role3,this.role4,this.role5],n=0;n<t.length;n++){var l=t[n],r=i[n],h=r.getChildByName("skeleton"),u=r.getChildByName("box");h.active=!1,u.active=!1;var p=a.instance.getRoleData(l);p?function(){h.active=!0;var t=p.roletype,i=p.level,n="spine/actor/"+o.getActorSpineName(t,i),a=h.getComponent("sp.Skeleton");cc.loader.loadRes(n,sp.SkeletonData,function(t,i){t&&cc.error(t),a.skeletonData=i,e===s.Win?a.setAnimation(0,"idle",!0):a.setAnimation(0,"idle2",!0)})}():u.active=!0}},produceDiamond:function(e){if(!(e<=0)&&this.uiBase){var t=this.uiBase.getComponent("UIBase"),i=(t.coinlabel,t.diamondlabel),n=this.diamondlabel,s=n.node.parent.convertToWorldSpaceAR(n.node.position);s=this.node.convertToNodeSpaceAR(s);var a=this.node,c=i.node.parent.convertToWorldSpaceAR(i.node.position);c=this.node.convertToNodeSpaceAR(c);var l=e/1,h=function(){t.updateDiamond(l),t.playCoin()}.bind(this);o.produceRandomNodeLineMove(r.Diamond,1,s,c,a,h)}},produceCoin:function(e){if(!(e<=0)&&this.uiBase){var t=this.uiBase.getComponent("UIBase"),i=t.coinlabel,n=(t.diamondlabel,this.coinlabel),s=n.node.parent.convertToWorldSpaceAR(n.node.position);s=this.node.convertToNodeSpaceAR(s);var a=this.node,c=i.node.parent.convertToWorldSpaceAR(i.node.position);c=this.node.convertToNodeSpaceAR(c);var l=parseInt(e/10)+parseInt(e%10),h=function(){t.updateCoin(e),t.playCoin()}.bind(this);o.produceRandomNodeLineMove(r.ButtonCoin,l,s,c,a,h)}},onBtnContinueClicked:function(){cc.director.loadScene("SpinChest",function(){var e=cc.director.getScene()._children[0].getComponent("CanvasInit");e&&e.setEnterCode(h.Map)}.bind(this))},winAudio:function(){this.audioWin.play()},loseAudio:function(){this.audioLose.play()},loadStarScoreData:function(e,t){cc.loader.loadRes("json/StarScore",function(i,o){for(var n=o.json,s=0;s<n.length;s++){var a=n[s];parseInt(a.levelID)===e&&t&&t(a)}})}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],ActorShoot:[function(e,t,i){"use strict";cc._RF.push(t,"f07f8A9gUpHlJ1Cj1JAS9ca","ActorShoot");var o=e("EnumDefine").ActorType,n=(e("EnumDefine").HurtFont,e("Board")),s=e("PlayFightAudio"),a=e("RPGManager"),c=cc.v2();cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._fireDelay=.15,this._startFire=!1},start:function(){},shootBulletlist:function(e,t,i,o,n,s){for(var c=this,l=[],r=function(r){var h=o[r],u=cc.callFunc(function(){var o=function(e){a.instance.getMonster()||s&&s()}.bind(c);c.shootBullet(e,t,i,h,n,o)},c);l.push(u),l.push(cc.delayTime(c._fireDelay))},h=0;h<o.length;h++)r(h);var u=cc.callFunc(function(){s&&s()},this);if(l.push(u),l.length>0){this.node.stopActionByTag(10);var p=cc.sequence(l);p.setTag(10),this.node.runAction(p)}},shootBullet:function(e,t,i,o,n,c){var l=this,r=o.getComponent("Cell").celltype,h=a.instance.getMonster();if(h){var u=h.getComponent("Monster"),p=0;r===u.getAttackAddtionCellType()&&(p=parseInt(1*t)),s.instance.playShootbullet(),this.node.getComponent("sp.Skeleton").setAnimation(0,"attack",!1);var d=cc.callFunc(function(){var s,a=l.getBoneName(e),u=cc.v2(),d=l.findBone(a);u.x=d[0],u.y=d[1],s=d[2],u.x+=l.node.x,u.y+=l.node.y,o.zIndex=10,o.group=l.node.group,o.parent=l.node.parent,o.x=u.x,o.y=u.y,o.rotation=s;var f=cc.misc.degreesToRadians(s),m=Math.sin(f)*o.width*.5,v=Math.cos(f)*o.height*.5;o.x+=m,o.y+=v;var g=t+p;g+=g*i,l.shootMonster(o,r,n,h,g,c)},this);this.node.runAction(cc.sequence(cc.delayTime(.1),d))}else c&&c(!0)},shootMonster:function(e,t,i,o,n,s){if(o){var a=o.getComponent("Monster");a.isHaveShield()?this.shootToMonsterShield(e,t,o,a):this.shootToMonsterSkeleton(e,t,i,o,a,n,s)}else this.shootDone(!0)},shootToMonsterShield:function(e,t,i,o){var n=this,s=o.MonsterShield.getShieldData().pos,a=e.position;s.sub(a,c);var l=c.mag()/200*.1,r=cc.callFunc(function(){var i=e.parent,s=cc.v2(e.x,e.y);if(n.bulletEffect(s,i),o.attackShield(t,1))n.deSpawnBullet(e);else{var a=cc.moveBy(.2,cc.v2(0,-50)),c=cc.callFunc(function(){n.deSpawnBullet(e)},n);e.runAction(cc.sequence(a,c))}},this),h=cc.scaleTo(.1,.6).easing(cc.easeOut(3)),u=cc.moveTo(l,s).easing(cc.easeOut(3)),p=cc.sequence(h,u,r);e.runAction(p)},shootToMonsterSkeleton:function(e,t,i,o,n,s,a){var l=this,r=o.position;r.y+=o.height/2;var h=e.position;r.sub(h,c);var u=c.mag()/200*.1,p=cc.callFunc(function(){var o=e.parent,c=cc.v2(e.x,e.y);if(l.bulletEffect(c,o),t===n.getDefenceCellType()){var r=cc.moveBy(.2,cc.v2(0,-50)),h=cc.callFunc(function(){l.deSpawnBullet(e)},l);e.runAction(cc.sequence(r,h))}else n.hurt(s,a,i),l.deSpawnBullet(e)},this),d=cc.scaleTo(.1,.6).easing(cc.easeOut(3)),f=cc.moveTo(u,r).easing(cc.easeOut(3)),m=cc.sequence(d,f,p);e.runAction(m)},deSpawnBullet:function(e){n.instance.deSpawnCell(e)},findBone:function(e){var t=this.node.getComponent("sp.Skeleton"),i=t.findBone(e);return i?(t.updateWorldTransform(),[i.data.length*i.a+i.worldX,i.data.length*i.c+i.worldY,i.getWorldRotationX()]):[]},getBoneName:function(e){switch(e){case o.Actor1:case o.Actor2:return"pipe";case o.Actor3:case o.Actor4:return"head";case o.Actor5:return"gun04"}},bulletEffect:function(e,t){cc.loader.loadRes("sprite/bulletHit",cc.SpriteFrame,function(i,o){var n=new cc.Node("");n.addComponent(cc.Sprite).spriteFrame=o,n.scale=1,n.parent=t,n.position=e;var s=cc.scaleTo(.4,0).easing(cc.easeOut(2)),a=cc.sequence(s,cc.removeSelf());n.runAction(a)})}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",PlayFightAudio:"PlayFightAudio",RPGManager:"RPGManager"}],ActorSkill:[function(e,t,i){"use strict";cc._RF.push(t,"81cc8taglJBjL9rnkqi2raT","ActorSkill");var o=e("EnumDefine").ActorType,n=(e("EnumDefine").CellType,e("EnumDefine").PetRoleSkillType,e("EnumDefine").CellGroupType),s=(e("EnumDefine").HurtFont,e("PoolMng"),e("RPGManager")),a=(e("CameraManager"),e("PlayFightAudio"),e("JsonData"),e("Board"),e("ProcessBoardCell"));e("Game");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.Actor=this.node.getComponent("Actor"),this.oldNodeScale=this.node.scale},tripSkill:function(e,t){var i=function(){this.spawnSkill(e,t)}.bind(this);return this.skillAction(i)+e},spawnSkill:function(e,t){var i=n.UnKnown;switch(this.node.getComponent("Actor").roletype){case o.Actor1:i=n.Cell1;break;case o.Actor2:i=n.Cell2;break;case o.Actor3:i=n.Cell3;break;case o.Actor4:i=n.Cell4;break;case o.Actor5:i=n.Cell5}var a=s.instance.boardNode,c=this.Actor.getWorldPos();c=a.convertToNodeSpaceAR(c);var l=e;s.instance.ShootSkill.spawnSkill(a,c,"UI",t,i,l,null)},tripFlashSkill:function(e){var t=this,i=n.UnKnown;switch(this.node.getComponent("Actor").roletype){case o.Actor1:i=n.Cell1;break;case o.Actor2:i=n.Cell2;break;case o.Actor3:i=n.Cell3;break;case o.Actor4:i=n.Cell4;break;case o.Actor5:i=n.Cell5}for(var s=a.instance.randomCellUseCellType(i,6),c=[],l=function(i){var o=s[i],n=cc.callFunc(function(){var i=function(){this.shootFlash(o,e)}.bind(t);t.skillAction(i)},t);c.push(n),c.push(cc.delayTime(.2))},r=0;r<s.length;r++)l(r);var h=cc.sequence(c);return this.node.runAction(h),.2*s.length+.2},shootFlash:function(e,t){var i=s.instance.boardNode,o=this.Actor.getWorldPos();o=i.convertToNodeSpaceAR(o);var n=t;s.instance.ShootSkill.spawnFlashSkill(e,i,o,"UI",n,null)},skillAction:function(e){this.node.scale=this.oldNodeScale,this.node.skewX=0,this.node.skewY=0;var t=this.node.scale,i=cc.scaleTo(.1,1.2*this.oldNodeScale).easing(cc.easeBounceInOut()),o=cc.scaleTo(.1,t).easing(cc.easeBounceInOut()),n=cc.sequence(i,o),s=cc.jumpBy(.05,cc.v2(0,0),40,1).easing(cc.easeOut(3)),a=cc.jumpBy(.05,cc.v2(0,0),-40,1).easing(cc.easeOut(3)),c=cc.skewTo(.05,0,2),l=cc.skewTo(.05,0,0),r=cc.sequence(c,l),h=(cc.sequence(s,a),cc.spawn(n,r)),u=cc.callFunc(function(){e&&e()},this),p=cc.sequence(cc.delayTime(.1),h,u);return this.node.runAction(p),.2}}),cc._RF.pop()},{Board:"Board",CameraManager:"CameraManager",EnumDefine:"EnumDefine",Game:"Game",JsonData:"JsonData",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",ProcessBoardCell:"ProcessBoardCell",RPGManager:"RPGManager"}],ActorUIPage:[function(e,t,i){"use strict";cc._RF.push(t,"6fc3cXofbhDOLHyVjw7rA7B","ActorUIPage");var o=e("JsonData"),n=e("LocalStorage"),s=e("EnumDefine").ActorType,a=e("Utils");cc.Class({extends:cc.Component,properties:{roleName:cc.Label,level:cc.Label,skillDescription:cc.Label,role:sp.Skeleton,skillSp:cc.Sprite,levelBk:cc.Node,glare:cc.Node,extractionStar:cc.Node,showRoleBtn:cc.Button,unlockNode:cc.Node,UIBaseNode:cc.Node,Pets:cc.Node},onLoad:function(){this.lock=!0;var e=20,t=cc.rotateBy(e,360),i=cc.repeatForever(t);this.glare.runAction(i),e=30,t=cc.rotateBy(e,360),i=cc.repeatForever(t),this.extractionStar.runAction(i),this.uibase=this.UIBaseNode.getComponent("UIBase")},start:function(){},unlockRole:function(e,t){this.lock=!1,this.role.node.color=cc.Color.WHITE,this.levelBk.active=!0,this.extractionStar.active=!0,this.initRole(e,t),this.initSkillDescription(e),this.initSkillSp(e),this.unlockNode.active=!1,this.showRoleBtn.interactable=!0},init:function(e){var t=n.instance.getRoleData(e);if(t)this.unlockRole(e,t.level);else{this.lock=!0;this.role.node.color=cc.Color.BLACK,this.extractionStar.active=!1,this.levelBk.active=!1,this.initRole(e,1),this.initSkillDescription(e),this.initSkillSp(e),this.unlockNode.active=!0,this.showRoleBtn.interactable=!1;var i=this.unlockNode.getChildByName("num").getComponent("cc.Label");o.instance.getBuyRoleData(e+1,function(e){e&&(i.string=e.BuyPrice+"")})}switch(this.roleName.string=a.getRoleName(e),e){case s.Actor1:var c=this.glare.getComponent(cc.Sprite);a.SetUISpriteFrame(c,"redglare"),this.levelBk.color=cc.color(213,60,31,255);break;case s.Actor2:var l=this.glare.getComponent(cc.Sprite);a.SetUISpriteFrame(l,"blueglare"),this.levelBk.color=cc.color(83,101,195,255);break;case s.Actor3:var r=this.glare.getComponent(cc.Sprite);a.SetUISpriteFrame(r,"yellowglare"),this.levelBk.color=cc.color(224,155,66,255);break;case s.Actor4:var h=this.glare.getComponent(cc.Sprite);a.SetUISpriteFrame(h,"greenglare"),this.levelBk.color=cc.color(72,224,66,255);break;case s.Actor5:var u=this.glare.getComponent(cc.Sprite);a.SetUISpriteFrame(u,"whiteglare"),this.levelBk.color=cc.color(230,205,233,255)}this.initPets(e)},initSkillSp:function(e){switch(e){case s.Actor1:this.loadSkill("horialProp");break;case s.Actor2:this.loadSkill("circleProp");break;case s.Actor3:this.loadSkill("crossProp");break;case s.Actor4:this.loadSkill("xProp");break;case s.Actor5:this.loadSkill("colorBrush")}},loadSkill:function(e){var t=this.skillSp;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(i,o){var n=o.getSpriteFrame(e);t.spriteFrame=n})},initSkillDescription:function(e){var t=this;o.instance.getBuyRoleData(e+1,function(e){if(e){var i=e.skill_chinese;t.skillDescription.string=i}})},initRole:function(e,t){var i=this.role,n=this;o.instance.loadRoleUpgradeData(e+1,t,function(t){if(t){n.level.string=t.level+"";var o="spine/actor/"+a.getActorSpineName(e,t.level),s=i.getComponent("sp.Skeleton");cc.loader.loadRes(o,sp.SkeletonData,function(e,t){e&&cc.error(e),s.skeletonData=t,n.lock||s.setAnimation(0,"idle",!0)})}})},onBtnUnlockRole:function(e,t){var i=e.target,a=parseInt(t),c=this;o.instance.getBuyRoleData(a+1,function(e){if(e){var l=parseInt(e.BuyPrice);if(c.buyRoleDiamond(l)){o.instance.loadRoleUpgradeData(a+1,1,function(e){var i={};i.roletype=a,i.level=e.level,i.attack=e.attack,n.instance.setRoleData(i),c.unlockRole(a,e.level);switch(a){case s.Actor1:c.unlockSkill(t,20);break;case s.Actor2:c.unlockSkill(t,30);break;case s.Actor3:c.unlockSkill(t,40);break;case s.Actor4:c.unlockSkill(t,50);break;case s.Actor5:c.unlockSkill(t,60)}}),i.destroy()}}})},buyRoleDiamond:function(e){var t=!1;this.uibase&&(this.uibase.getDiamondNum()>=e&&(t=!0,this.uibase.updateDiamond(-e)));return t},initPets:function(e){this.Pets.getComponent("Pets").show(e,this.uibase)},unlockSkill:function(e,t){var i="",o=n.instance.getRoleSkill(e);if(!(o.indexOf(t+"")>=0)){for(var s=0;s<o.length;s++)i+=o[s]+",";i+=t+"",n.instance.setRoleSkill(e,i)}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],ActorUI:[function(e,t,i){"use strict";cc._RF.push(t,"f471bZSbipJGJ3L3zIwKauG","ActorUI");var o=e("EnumDefine").EnterKind,n=e("BaseUI");cc.Class({extends:n,properties:{PageView:cc.PageView,baseNode:cc.Node,midbk:cc.Node},onLoad:function(){this.uibase=this.baseNode.getComponent("UIBase")},start:function(){},onBtnCloseActorUI:function(){var e=function(){var e=o.Main,t=cc.find("Canvas").getComponent("CanvasInit");switch(t&&(e=t.enterCode),e){case o.Main:cc.director.loadScene("Main");break;case o.Map:cc.director.loadScene("Map")}}.bind(this);this.scaleClose(this.midbk,e)},onBtnCloseSubActorUI:function(){this.UpGradeNode.active=!1,this.PageView.node.active=!0},onBtnShowRole:function(e,t){var i=cc.director.getScene()._children[0],o=this;cc.loader.loadRes("prefab/UpGradeActorUI",function(e,n){var s=cc.instantiate(n);s.parent=i,s.position=cc.v2(0,0),s.active=!0;var a=s.getComponent("UpGradeActorUI"),c=parseInt(t);a.init(c,o.uibase);var l=s.getChildByName("UIBase");l&&(l.active=!1)})}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine"}],Actor:[function(e,t,i){"use strict";var o;function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}cc._RF.push(t,"d7905Le0oVD250k6gtCpB0J","Actor");var s=e("EnumDefine").ActorType,a=e("EnumDefine").HurtFont,c=e("RPGManager"),l=e("CameraManager"),r=e("JsonData"),h=e("Game"),u=cc.v2();cc.Class((n(o={extends:cc.Component,properties:{},ctor:function(){this.skillID=-1,this.roleData={},this.roletype=s.UnKnown,this.celllist=[],this._fireDelay=.15,this._startFire=!1,this.roleSkeleton=null,this._hurtfont=a.Red,this.skeletonName=""},onLoad:function(){},setData:function(e){this.roleData=e,this.roletype=e.roletype;var t=this.roleData.level,i=this;r.instance.loadRoleUpgradeData(this.roletype+1,t,function(e){i.roleData.attack=e.attack}),this.roleSkeleton=this.node.getComponent(sp.Skeleton)},start:function(){},onDisable:function(){},setAntiAliasTexParameters:function(){this.roleSkeleton&&this.roleSkeleton.skeletonData.textures[0].setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR)},getAttack:function(e){var t=c.instance.getMonster();if(!t)return 0;var i=t.getComponent("Monster"),o=this.roleData.attack,n=0;return e===i.getDefenceCellType()?0:(e===i.getAttackAddtionCellType()&&(n=parseInt(1*o)),o+n)},tripSkill:function(e,t){return this.node.getComponent("ActorSkill").tripSkill(e,t)},tripFlashSkill:function(e){return this.node.getComponent("ActorSkill").tripFlashSkill(e)},IsAttack:function(){return this._startFire},getWorldPos:function(){var e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());return l.instance.battleCameraNode.getComponent("cc.Camera").getWorldToCameraPoint(e,u),u}},"start",function(){}),n(o,"pushCell",function(e){this.celllist.push(e)}),n(o,"fire",function(){if(!this._startFire){var e=0;if(c.instance.getMonster()&&0!=this.celllist.length){this.node.getComponent("sp.Skeleton").timeScale=2;var t=this.celllist.length;t<=3?this._hurtfont=a.Red:t<=5?this._hurtfont=a.Purble:t<=10?this._hurtfont=a.Orange:(this._hurtfont=a.ScoreRed,h.instance.showCombo("",!0),e=.2);var i=function(){this.fireOver()}.bind(this),o=this.roleData.attack;return this.node.getComponent("ActorShoot").shootBulletlist(this.roletype,o,e,this.celllist,this._hurtfont,i),this.celllist.length=0,void(this._startFire=!0)}this.fireOver()}}),n(o,"fireOver",function(){this.idle(),this.node.stopActionByTag(10),this._startFire=!1,c.instance.fireOver()}),n(o,"idle",function(){var e=this.node.getComponent("sp.Skeleton");e.setAnimation(0,"idle",!0),e.timeScale=1}),o)),cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",Game:"Game",JsonData:"JsonData",RPGManager:"RPGManager"}],AddTime:[function(e,t,i){"use strict";cc._RF.push(t,"3ac26QOzNpK0KrWZ2PDtHXN","AddTime");var o=e("RPGManager"),n=(e("Game"),e("Utils")),s=e("LocalStorage"),a=e("BaseUI");cc.Class({extends:a,properties:{},onLoad:function(){this.scaleShow(this.node),this.uibaseData=s.instance.getUIBase()},start:function(){},onBtnCloseClicked:function(e){var t=function(){o.instance.lose(),this.node.removeFromParent()}.bind(this);this.close(t)},onBtnAddTimeClicked:function(e){if(this.uibaseData.diamond>=10){this.uibaseData.diamond-=10;var t=function(){o.instance.addBossTime(.3),this.node.removeFromParent()}.bind(this);this.close(t)}else;},onBtnLookAdsClicked:function(e){},close:function(e){var t=this.node.scale,i=cc.scaleTo(.06,1.1*t,1.1*t).easing(cc.easeBounceInOut()),o=cc.scaleTo(.06,0).easing(cc.easeBounceInOut()),n=cc.callFunc(function(){e&&e()},this),s=cc.sequence(i,o,n);this.node.runAction(s)},onDisable:function(){n.writeUIBaseData(this.uibaseData)}}),cc._RF.pop()},{BaseUI:"BaseUI",Game:"Game",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],AudioEngineControl:[function(e,t,i){"use strict";cc._RF.push(t,"2bb054pDyBLErZjuQZx5d9W","AudioEngineControl");var o=e("Utils");cc.Class({extends:cc.Component,properties:{audio:{type:cc.AudioClip,default:null}},_updateLabel:function(){},onLoad:function(){this.maxNum=cc.audioEngine.getMaxAudioInstance(),this.audioPool=[],this._updateLabel();var e=cc.director.getScene().name;"Main"===e||"Map"===e?this.playMain():"Farm"===e&&this.playFight()},removeAudio:function(e){var t=this.audioPool.indexOf(e);t>-1&&this.audioPool.splice(t,1),this._updateLabel()},playMain:function(){if(this.audio){var e=o.mainSceneAudioID;-1!==e?this.resume(e):o.mainSceneAudioID=cc.audioEngine.play(this.audio,!0,1)}},playFight:function(){if(this.audio){var e=o.fightSceneAudioID;-1!==e?this.resume(e):o.fightSceneAudioID=cc.audioEngine.play(this.audio,!0,1)}},stopFight:function(){var e=o.fightSceneAudioID;cc.audioEngine.stop(e),o.fightSceneAudioID=-1},resume:function(e){cc.audioEngine.resume(e)},stopAll:function(){cc.audioEngine.stopAll()},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()},onDisable:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{Utils:"Utils"}],AudioSourceControl:[function(e,t,i){"use strict";cc._RF.push(t,"bf9167xLLBBI6Al16DO7Wt/","AudioSourceControl"),cc.Class({extends:cc.Component,properties:{audioSource:{type:cc.AudioSource,default:null},label:{type:cc.Label,default:null}},onLoad:function(){},play:function(){this.audioSource.play()},pause:function(){this.audioSource.pause()},stop:function(){this.audioSource.stop()},resume:function(){this.audioSource.resume()}}),cc._RF.pop()},{}],BaseUI:[function(e,t,i){"use strict";cc._RF.push(t,"def68NpuulJUp+oXqi8EQIx","BaseUI"),cc.Class({extends:cc.Component,properties:{},start:function(){},scaleShow:function(e,t){var i=this.node.scale,o=cc.scaleTo(.08,1.08*i,1.08*i).easing(cc.easeBounceInOut()),n=cc.scaleTo(.08,1*i,1*i).easing(cc.easeBounceInOut()),s=cc.scaleTo(.08,1.05*i,1.05*i).easing(cc.easeBounceInOut()),a=cc.scaleTo(.08,1*i,1*i).easing(cc.easeBounceInOut()),c=cc.callFunc(function(){t&&t()},this),l=cc.sequence(o,n,s,a,c,null);e.runAction(l)},scaleClose:function(e,t){var i=this.node.scale,o=cc.scaleTo(.1,1.1*i,1.1*i).easing(cc.easeBounceInOut()),n=cc.scaleTo(.1,0).easing(cc.easeBounceInOut()),s=cc.callFunc(function(){t&&t()},this),a=cc.sequence(o,n,s);e.runAction(a)}}),cc._RF.pop()},{}],BattleGuide:[function(e,t,i){"use strict";cc._RF.push(t,"7913bjGh3xJao7cTOSSkV8V","BattleGuide");var o=e("Utils");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=o.levelID;switch(e=parseInt(e)){case 1:this.showRolePet()}},start:function(){},onBtnOkClicked:function(e){this.node.removeFromParent()},showBossFight:function(){var e=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/BossFightGuide",function(t,i){t&&cc.error(t);var o=cc.instantiate(i);o.zIndex=10,o.parent=e})},showRolePet:function(){var e=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/RolePetGuide",function(t,i){t&&cc.error(t);var o=cc.instantiate(i);o.zIndex=10,o.parent=e})},showOpenBox:function(){var e=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/OpenBoxGuide",function(t,i){t&&cc.error(t);var o=cc.instantiate(i);o.zIndex=10,o.parent=e})}}),cc._RF.pop()},{Utils:"Utils"}],BattlePets:[function(e,t,i){"use strict";cc._RF.push(t,"f34eaBxzT9Ov7oONUlQr6e9","BattlePets");e("JsonData");var o=e("LocalStorage"),n=(e("EnumDefine").ActorType,e("Utils"));cc.Class({extends:cc.Component,properties:{itemTemplate:{default:null,type:cc.Node},scrollView:{default:null,type:cc.ScrollView},spawnCount:0,totalCount:0,spacing:0},ctor:function(){this.petDatas={}},onLoad:function(){this.content=this.scrollView.content,this.items=[],this.updateTimer=0,this.updateInterval=.2,this.lastContentPosY=0,this.spawnBattlelist()},initialize:function(){for(var e=0;e<5;++e){var t=cc.instantiate(this.itemTemplate);this.content.addChild(t),t.setPosition(50+t.width*e+this.spacing*(e+1),0),this.items.push(t)}},spawnBattlelist:function(){var e=o.instance.getBattlePetData();if(e)for(var t in e){var i=e[t];i&&this.createOnePet(i)}},createOnePet:function(e){var t="spine/pet/";t+=n.getPetFileName(e.ID-1);var i=this;cc.loader.loadRes(t,sp.SkeletonData,function(t,o){t&&cc.error(t);var n=new cc.Node;n.scale=1.5;var s=n.addComponent("sp.Skeleton");s.skeletonData=o,n.parent=i.content,n.name=e.ID+"",i.items.push(n),i.petDatas[e.ID]=e,i.writePetData(),i.arrageContent();var a=cc.callFunc(function(){s.setAnimation(0,"idle",!0)});n.runAction(cc.sequence(cc.delayTime(.01),a))})},addOnePet:function(e){if(e){for(var t in this.petDatas)if(t===e.ID)return;this.createOnePet(e)}},removeOnePet:function(e){delete this.petDatas[e.ID];var t=e.ID+"",i=this.items,o=this.content,n=o.getChildByName(t);if(n){var s=i.indexOf(n);i.splice(s,1),o.removeChild(n),this.arrageContent()}this.writePetData()},arrageContent:function(){var e=0,t=null;if(!(this.items.length<=0)){for(var i=0;i<this.items.length;i++){var o=this.items[i];e+=o.width*o.scale+this.spacing}(t=this.items[0]).setPosition(50,-50);for(var n=1;n<this.items.length;n++){var s=this.items[n];s.setPosition(t.x+t.width*t.scale/2+s.width*s.scale/2+this.spacing,t.y),t=s}this.content.width=e+500}},writePetData:function(){o.instance.setBattlePetData(this.petDatas)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],BlockCover:[function(e,t,i){"use strict";cc._RF.push(t,"a9a14u+CAFPhq0DKnA31AJ/","BlockCover");var o=e("Board");cc.Class({extends:cc.Component,properties:{salives:{default:[],type:cc.Node}},onLoad:function(){for(var e=0;e<this.salives.length;e++){this.salives[e].active=!1}},start:function(){},init:function(e){if(this._lv=e,e>0)for(var t=0;t<e;t++){this.salives[t].active=!0}},spawnSaliveDust:function(e,t){var i="prefab/particle/";i+="saliveDustParticle",cc.loader.loadRes(i,function(i,o){i&&cc.error(i);var n=cc.instantiate(o);n.parent=e,n.position=t,n.zIndex=10,n.runAction(cc.sequence(cc.delayTime(.5),cc.removeSelf()))})},hurt:function(){this.hurtSalive()},IsAllRemoved:function(){return this._lv<=0},hurtSalive:function(){if(this._lv>0){var e=this._lv-1,t=this.salives[e],i=t.parent,n=t.position;t.active=!1,i=o.instance.node,n=this.node.parent.convertToWorldSpaceAR(this.node.position),n=i.convertToNodeSpaceAR(n),this.spawnSaliveDust(i,n),this._lv-=1}}}),cc._RF.pop()},{Board:"Board"}],BlockSide:[function(e,t,i){"use strict";cc._RF.push(t,"bfa0bogDUNOgbn2h8Sg+1Iz","BlockSide");var o=e("EnumDefine"),n=o.CellsRelativeDir,s=(o.GameStages,e("Board")),a=e("Utils"),c=e("ProcessStory");cc.Class({extends:cc.Component,properties:{sideLNodes:{default:[],type:cc.Node},sideRNodes:{default:[],type:cc.Node},sideTNodes:{default:[],type:cc.Node},sideBNodes:{default:[],type:cc.Node}},onLoad:function(){var e=a.levelData.StageID;this.initStage(e);for(var t=0;t<this.sideLNodes.length;t++){this.sideLNodes[t].active=!1}for(var i=0;i<this.sideRNodes.length;i++){this.sideRNodes[i].active=!1}for(var o=0;o<this.sideTNodes.length;o++){this.sideTNodes[o].active=!1}for(var n=0;n<this.sideBNodes.length;n++){this.sideBNodes[n].active=!1}this._data=null},start:function(){},init:function(e){this._data=e;JSON.stringify(e);if(e.sideLNum>0)for(var t=0;t<e.sideLNum;t++){this.sideLNodes[t].active=!0}if(e.sideRNum>0)for(var i=0;i<e.sideRNum;i++){this.sideRNodes[i].active=!0}if(e.sideTNum>0)for(var o=0;o<e.sideTNum;o++){this.sideTNodes[o].active=!0}if(e.sideBNum>0)for(var n=0;n<e.sideBNum;n++){this.sideBNodes[n].active=!0}},spawnBufferDust:function(e,t){var i="prefab/particle/";i+="killBlockBuffer",cc.loader.loadRes(i,function(i,o){i&&cc.error(i);var n=cc.instantiate(o);n.zIndex=10,n.parent=e,n.position=t})},IsSideAllRemoved:function(){var e=!1;return(this._data.sideLNum>0||this._data.sideRNum>0||this._data.sideTNum>0||this._data.sideBNum>0)&&(e=!1),e},hurt:function(e){switch(e){case n.Left:this.hurtLeft();break;case n.Right:this.hurtRight();break;case n.Top:this.hurtTop();break;case n.Bottom:this.hurtBottom();break;case n.AllDir:this.skillHurt()}},skillHurt:function(){this.hurtLeft(),this.hurtRight(),this.hurtTop(),this.hurtBottom()},hurtLeft:function(){if(this._data.sideLNum>0){var e=this._data.sideLNum-1,t=this.sideLNodes[e],i=t.parent,o=t.position;t.active=!1,i=s.instance.node,o=this.node.parent.convertToWorldSpaceAR(this.node.position),o=i.convertToNodeSpaceAR(o),this.spawnBufferDust(i,o),this._data.sideLNum-=1}},hurtRight:function(){if(this._data.sideRNum>0){var e=this._data.sideRNum-1,t=this.sideRNodes[e],i=t.parent,o=t.position;t.active=!1,i=s.instance.node,o=this.node.parent.convertToWorldSpaceAR(this.node.position),o=i.convertToNodeSpaceAR(o),this.spawnBufferDust(i,o),this._data.sideRNum-=1}},hurtTop:function(){if(this._data.sideTNum>0){var e=this._data.sideTNum-1,t=this.sideTNodes[e],i=t.parent,o=t.position;t.active=!1,i=s.instance.node,o=this.node.parent.convertToWorldSpaceAR(this.node.position),o=i.convertToNodeSpaceAR(o),this.spawnBufferDust(i,o),this._data.sideTNum-=1}},hurtBottom:function(){if(this._data.sideBNum>0){var e=this._data.sideBNum-1,t=this.sideBNodes[e];t.active=!1;var i=t.parent,o=t.position;i=s.instance.node,o=this.node.parent.convertToWorldSpaceAR(this.node.position),o=i.convertToNodeSpaceAR(o),this.spawnBufferDust(i,o),this._data.sideBNum-=1}},initStage:function(e){for(var t=c.instance.stageFileNamesData,i=(t.path,a.StageSpriteAtlas.getSpriteFrame(t.topin)),o=0;o<this.sideLNodes.length;o++){this.sideLNodes[o].getComponent("cc.Sprite").spriteFrame=i}for(var n=0;n<this.sideRNodes.length;n++){this.sideRNodes[n].getComponent("cc.Sprite").spriteFrame=i}for(var s=0;s<this.sideTNodes.length;s++){this.sideTNodes[s].getComponent("cc.Sprite").spriteFrame=i}for(var l=0;l<this.sideBNodes.length;l++){this.sideBNodes[l].getComponent("cc.Sprite").spriteFrame=i}}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",ProcessStory:"ProcessStory",Utils:"Utils"}],Board:[function(e,t,i){"use strict";cc._RF.push(t,"674aeUIoG1B7ZSSZD734Nj9","Board");var o=e("Utils").NUMROWS,n=e("Utils").NUMCOLUMNS,s=e("PoolMng"),a=e("Utils"),c=(e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT,e("EnumDefine").CellType),l=e("EnumDefine").CellAnimationType,r=e("EnumDefine").DrawlineKind,h=e("EnumDefine").CellsRelativeDir,u=(e("EnumDefine").Direction,e("RPGManager")),p=e("PlayFightAudio"),d=e("ShowFloatWord"),f=e("Game"),m=(e("JsonData"),cc.Class({extends:cc.Component,properties:{RPGNode:cc.Node,UI:cc.Node,UIMask:cc.Node,CloseTouch:cc.Node,DrawlineMask:cc.Node,circle:cc.Prefab,PetSkillNode:cc.Node,RoleSkillNode:cc.Node,switchPet:cc.Node,switchRole:cc.Node,continueSkillBtn:cc.Node},onLoad:function(){m.instance=this,this.touchlist=[],this.sideProplist=[],this.lastTouchCell=null,this.DropCell=this.node.getComponent("DropCell"),this.Portal=this.node.getComponent("Portal"),this.SpawnCells=this.node.getComponent("SpawnCells"),this.RemoveCells=this.node.getComponent("RemoveCells"),this.CellAttack=this.node.getComponent("CellAttack"),this.skillUI=this.UI.getComponent("PetSkillUI"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.PropCellAttackArea=this.node.getComponent("PropCellAttackArea"),this.CellsAnimation=this.node.getComponent("CellsAnimation"),this.Drawline=this.node.getComponent("DrawLine"),this.userInteract=!1,this.UIMask.active=!1,this.DrawlineMask.zIndex=1,this.DrawlineMask.active=!1,this._cellsAttackDone=!1,this._cellAttackDoneCallback=null,this._potralDone=!1,this._circleNode=null,this.continueSkillBtn.active=!1,this.isShowSwitch=!1,this.PetSkillUI=this.UI.getComponent("PetSkillUI"),this.registerTouch()},start:function(){(this.switchPet.active||this.switchRole.active)&&(this.isShowSwitch=!0),this.PetSkillNode.active=!1,this.RoleSkillNode.active=!1},init:function(e){this.game=e},statics:{instance:null},drawGuideline:function(){this.Drawline.drawGuideline()},getlineKind:function(){return r.Normal},spawnCells:function(e){var t=function(){this.setUserInteract(!0)}.bind(this);this.SpawnCells.createBoardCell(e,t)},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t,e)},e),e.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.touchMove(t,e)},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd(t,e)},e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.touchEnd(t,e)},e)},touchBegin:function(e,t){this.Drawline.clearlines();var i=e.getTouches()[0].getLocation(),o=t.touchOneCell(i);if(null!=o){var n=o.getComponent("Cell");if(n.normalCell()||n.propNormalCell()){var s=this.getlineKind(n);return t.touchlist.push(o),t.lastTouchCell=o,o.zIndex=3,n.touch(),this.skillUI.addSkill(n.celltype),this.Drawline.setlineNodes(this.touchlist),this.Drawline.drawline(s),this.Drawline.removeGuideline(),this.DrawlineMask.active=!0,this.changeCellsZIndex(n,3),this.showPropsArea(this.touchlist),this.drawlineHurtMonster(this.touchlist),void(this.isShowSwitch&&(this.switchPet&&(this.switchPet.active=!1),this.switchRole&&(this.switchRole.active=!1),this.continueSkillBtn&&(this.continueSkillBtn.active=!1)))}}},touchMove:function(e,t){var i=e.getTouches()[0].getLocation(),o=t.touchOneCell(i);if(o&&o!==this.lastTouchCell){var n=this.touchlist.length;if(n>=2){var s=n-2,a=this.touchlist[s].getComponent("Cell"),c=o.getComponent("Cell");if(a.row===c.row&&a.column===c.column){this.Drawline.deleteline(this.lastTouchCell);var l=this.touchlist.pop();this.lastTouchCell=this.touchlist[this.touchlist.length-1];var r=this.PropCellAttackArea.moveBacklink(this.touchlist,this.lastTouchCell,l);r&&(l=r);var h=l.getComponent("Cell");return h.unTouch(),this.lastTouchCell=this.touchlist[this.touchlist.length-1],this.Drawline.setlineNodes(this.touchlist),this.skillUI.decSkill(h.celltype),this.collectSidePropCells(this.touchlist),this.showPropsArea(this.touchlist),this.drawlineHurtMonster(this.touchlist),void this.showCircle(this.touchlist)}}var u=t.lastTouchCell;if(t.canConnect(o,u)){if(this.touchlist.indexOf(o)<0){var d=o.getComponent("Cell"),f=this.getlineKind(d);o.zIndex=3,d.touch(),this.touchlist.push(o),this.PropCellAttackArea.moveForWardlink(this.touchlist,this.lastTouchCell,o),this.lastTouchCell=this.touchlist[this.touchlist.length-1],this.Drawline.setlineNodes(this.touchlist),this.skillUI.addSkill(d.celltype),this.Drawline.drawline(f);var m=this.touchlist.length;p.instance.playCellConnect(m),this.collectSidePropCells(this.touchlist),this.showPropsArea(this.touchlist),this.drawlineHurtMonster(this.touchlist),this.showCircle(this.touchlist)}}else;}},touchEnd:function(e,t){if(this.lastTouchCell){var i=this.lastTouchCell.getComponent("Cell");this.changeCellsZIndex(i,0)}this.touchlist.length>=3?this.Drawline.guideDone():this.Drawline.drawGuideline();for(var o=0;o<this.touchlist.length;o++){var n=this.touchlist[o];n.zIndex=0,n.getComponent("Cell").unTouch()}if(this.touchlist.length<3){for(var s=0;s<t.touchlist.length;s++){var a=t.touchlist[s].getComponent("Cell");this.skillUI.decSkill(a.celltype),a.unTouch()}this.PropCellAttackArea.reSetPropCells(this.touchlist),this.touchlist.length=0,this.lastTouchCell=null,this.skillUI.hideAllSkill(),this.setUserInteract(!0),this.drawlineHurtMonsterOver(),this.isShowSwitch&&(this.switchPet&&(this.switchPet.active=!0),this.switchRole&&(this.switchRole.active=!0),this.continueSkillBtn&&(this.continueSkillBtn.active=!1))}else this.setUserInteract(!1),this.removeCells(t.touchlist),this.touchlist.length=0,this.lastTouchCell=null;this.removeSidePropCells(),t.Drawline.clearlines(),this.DrawlineMask.active=!1,this.ProcessBoardCell.showAllCircles(!1),this.PropCellAttackArea.clear(),this.showCircle(this.touchlist)},touchOneCell:function(e,t){for(var i=0;i<o;i++)for(var s=0;s<n;s++){var a=this.ProcessBoardCell.getCell(s,i);if(a){var c=a.getComponent("Cell"),l=a.parent.convertToNodeSpaceAR(e);if(c.IsCellNodeSprite()||(l.x-=a.width*c.cellscale/2),a.getBoundingBox().contains(l))return a}}return null},removeCells:function(e){var t=this;u.instance.RPGAttack=!0,f.instance.updateStep(-1),this.openUIMask(!0);for(var i=[],o=e.length,n=cc.callFunc(function(){t.PetSkillNode&&(t.PetSkillNode.destroy(),t.PetSkillNode=null),t.RoleSkillNode&&(t.RoleSkillNode.destroy(),t.RoleSkillNode=null),t.PetSkillUI.showRoleSkill(!1),t.switchRole.active=!1,t.switchPet.active=!1,t.continueSkillBtn.active=!1,t.isShowSwitch=!1,t.removeCellsDone(),d.instance.showlines(o)},this),s=[],a=0;a<this.sideProplist.length;a++){var c=this.sideProplist[a];s.push(c)}s.length>0&&this.RemoveCells.pushProplist(s),this.RemoveCells.removeCells(e,i,n),i.length>=2?this.node.runAction(cc.sequence(i)):(i.push(null),this.node.runAction(cc.sequence(i)))},cellsAttackDone:function(e){(this._cellsAttackDone=!0,this._cellAttackDoneCallback=e,this._potralDone)&&(u.instance.RPGAttack||(this.openUIMask(!1),this.DropCell.animateFalling(e)))},portalDone:function(){this._potralDone=!0,this._cellsAttackDone&&(this.openUIMask(!1),this.DropCell.animateFalling(this._cellAttackDoneCallback))},removeCellsDone:function(){this.RemoveCells.reset(),this._potralDone=!1,this._cellsAttackDone=!1,this._cellAttackDoneCallback=null;var e=function(){this.portalDone()}.bind(this);this.Portal.openPortal(e),this.CellAttack.cellsAttack()},setUserInteract:function(e){this.CloseTouch.active=!e},getUserInteract:function(){return this.userInteract},openUIMask:function(e){},canConnect:function(e,t){if(!e||!t)return!1;var i=e.getComponent("Cell"),o=t.getComponent("Cell");if(!this.ProcessBoardCell.checkCellConnect(o,i))return!1;if(!i.IsSameCellGroup(o))return!1;if(i.IsSideProp()||o.IsSideProp())return!1;var n=a.cellDirWithCell(e,t),s=this.ProcessBoardCell.getSideCell(i.column,i.row),c=this.ProcessBoardCell.getSideCell(o.column,o.row),l=null,r=null;switch(s&&(l=s.getComponent("SideCell")),c&&(r=c.getComponent("SideCell")),n){case h.Left:if(l&&l.sideRNum()>0||r&&r.sideLNum()>0)return!1;break;case h.Right:if(l&&l.sideLNum()>0||r&&r.sideRNum()>0)return!1;break;case h.Top:if(l&&l.sideBNum()>0||r&&r.sideTNum()>0)return!1;break;case h.Bottom:if(l&&l.sideTNum()>0||r&&r.sideBNum()>0)return!1}return!0},removeCell:function(e){this.ProcessBoardCell.setCellNull(e),this.deSpawnCell(e)},deSpawnCell:function(e){if(e){var t=e.getComponent("Cell").celltype;s.instance.returnCell(e,t)}},spawnMonsterCell:function(e,t){var i=e.getComponent("Cell"),o=this.SpawnCells.Salive,n=this.SpawnCells.createPrefabCell(i.column,i.row,t,o);if(n){this.ProcessBoardCell.setCell(i.column,i.row,n);(i=n.getComponent("Cell")).init(t,1),this.deSpawnCell(e)}},changeCellsZIndex:function(e,t){for(var i=0;i<o;i++)for(var s=0;s<n;s++){var a=this.ProcessBoardCell.getCell(s,i);if(a){var c=a.getComponent("Cell");c.IsBlock()?a.zIndex=t:c.IsSameCellGroup(e)&&(a.zIndex=t)}}},cellsIdle:function(e,t){this.CellsAnimation.showAnimation(l.Idle,e,t)},cellsBonustime:function(e,t){this.CellsAnimation.showAnimation(l.Bonustime,e,t)},cellsReady:function(e,t){this.CellsAnimation.showAnimation(l.Ready,e,t)},cellsCrazy:function(e,t){this.CellsAnimation.showAnimation(l.Crazy,e,t)},timeUp:function(e){this.CellsAnimation.showAnimation(l.TimeUp,e,1.2)},removeSidePropCells:function(){this.sideProplist.length=0},collectSidePropCells:function(e){if(this.sideProplist.length=0,e.length>=3)for(var t=[],i=0;i<e.length;i++){var o=e[i].getComponent("Cell"),n=o.row,s=o.column;this.ProcessBoardCell.getFourConorCells(s,n,t);for(var a=0;a<t.length;a++){var c=t[a],l=c.getComponent("Cell"),r=l.IsSideProp(),h=l.IsBlockCoverRemoved();if(r&&h)this.sideProplist.indexOf(c)<0&&this.sideProplist.push(c)}}},showPropsArea:function(e){this.PropCellAttackArea.clearCircles(),this.ProcessBoardCell.showAllCircles(!1),this.PropCellAttackArea.showPropsArea(e),this.PropCellAttackArea.showSidePropAreas(this.sideProplist)},spawnCell:function(e,t,i,o,n){this.SpawnCells.createOneCell(e,t,i,o,n)},spawnOneCell:function(e,t,i){return this.SpawnCells.spawnOneCell(e,t,i)},drawlineHurtMonster:function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){var o=e[i].getComponent("Cell");if(o.normalCell()||o.propNormalCell()){var n=o.celltype;o.propNormalCell()&&(n=o.cellPropNormalType),t+=u.instance.getDamage(n)}}var s=u.instance.getMonster();s&&s.getComponent("Monster").drawlineHurt(t)},drawlineHurtMonsterOver:function(){var e=u.instance.getMonster();e&&e.getComponent("Monster").drawlineHurtOver()},showCircle:function(e){if(e.length<3)this._circleNode&&(this._circleNode.active=!1);else{var t=u.instance.getMonster();if(t){var i="",o=e[0].getComponent("Cell"),n=c.UnKnown;if(o.normalCell()||o.propNormalCell())switch(n=o.celltype,o.propNormalCell()&&(n=o.cellPropNormalType),n){case c.Cell1:i="redcircle";break;case c.Cell2:i="ziseCircle";break;case c.Cell3:i="yellowCircle";break;case c.Cell4:i="greenCircle";break;case c.Cell5:i="whiteCircle"}var s=t.getComponent("Monster");if(n===s.getAttackAddtionCellType()||n===s.getDefenceCellType()){if(!this._circleNode){var a=cc.instantiate(this.circle);a.zIndex=10,a.parent=this.node,this._circleNode=a;var l=cc.scaleTo(.4,1.15,1.15).easing(cc.easeOut(3)),r=cc.scaleTo(.4,1,1).easing(cc.easeOut(3)),h=cc.sequence(l,r);a.runAction(cc.repeatForever(h))}this._circleNode.active=!0;var p=e[e.length-1];this._circleNode.x=p.x+p.width/2,this._circleNode.y=p.y+p.height/2;var d=this._circleNode.getComponent(cc.Sprite);if(cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var o=t.getSpriteFrame(i);d.spriteFrame=o}),n===s.getAttackAddtionCellType()){var f=this._circleNode.getChildByName("attack"),m=this._circleNode.getChildByName("defence");f&&(f.active=!0),m&&(m.active=!1)}else if(n===s.getDefenceCellType()){var v=this._circleNode.getChildByName("attack"),g=this._circleNode.getChildByName("defence");v&&(v.active=!1),g&&(g.active=!0)}}}}},onBtnRoleSkill:function(){this.UIMask.active=!0,this.RoleSkillNode.active=!0,this.PetSkillNode.active=!1,this.switchRole.active=!1,this.switchPet.active=!1,this.RoleSkillNode.getComponent("SwitchRoleSkill").openSkills(!0),this.continueSkillBtn.active=!0},onBtnPetSkill:function(){this.UIMask.active=!0,this.PetSkillNode.active=!0,this.RoleSkillNode.active=!1,this.switchRole.active=!1,this.switchPet.active=!1,this.PetSkillNode.getComponent("SwitchPetSkill").openSkills(!0),this.continueSkillBtn.active=!0},onBtnContinueFunc:function(){var e=this.RoleSkillNode.getComponent("SwitchRoleSkill");e.openSkills(!1),(e=this.PetSkillNode.getComponent("SwitchPetSkill")).openSkills(!1),this.PetSkillNode.active=!1,this.RoleSkillNode.active=!1,this.switchRole.active=!0,this.switchPet.active=!0,e.showSwitchBtn(!0),this.continueSkillBtn.active=!1,this.UIMask.active=!1}}));cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",JsonData:"JsonData",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",RPGManager:"RPGManager",ShowFloatWord:"ShowFloatWord",Utils:"Utils"}],BombEffectPool:[function(e,t,i){"use strict";cc._RF.push(t,"b07b8zS7CVLabT5JykOJIec","BombEffectPool");var o=cc.Class({name:"BombEffectPool",properties:{prefab:cc.Prefab,size:0},ctor:function(){},init:function(){this._pool=new cc.NodePool(""),this._count=0},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab),this._count++),e},put:function(e){this._pool.put(e)}});t.exports=o,cc._RF.pop()},{}],BossFightGuide:[function(e,t,i){"use strict";cc._RF.push(t,"3d4b0DtLJ5LoYCcq70jwhyM","BossFightGuide");e("Utils");var o=e("RPGManager");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.guideDone=!1,this.registerTouch();var t=cc.callFunc(function(){e.guideDone=!0},this);this.node.runAction(cc.sequence(cc.delayTime(1),t))},start:function(){},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t)},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd(t)},e)},touchBegin:function(e){},touchEnd:function(e){this.guideDone&&(o.instance.bossFightStart(),this.node.removeFromParent())}}),cc._RF.pop()},{RPGManager:"RPGManager",Utils:"Utils"}],BossRoad:[function(e,t,i){"use strict";cc._RF.push(t,"739e9RCOMZGeI4F1bWSXRRy","BossRoad");var o=e("EnumDefine"),n=e("Utils"),s=o.FightKind,a=e("JsonData");cc.Class({extends:cc.Component,properties:{skeleton:{default:null,type:sp.Skeleton},roadBar:cc.ProgressBar},onLoad:function(){switch(n.levelData.StageType){case s.NormalFight:case s.BossFight:default:this.node.active=!1}this.init()},start:function(){},init:function(){var e=this,t=n.levelID;a.instance.loadLevelData(t,function(t){t.StageType;var i=t.WaveEnemyID.split(";");if(i.length>0){var o=i[0].split(":");if(o.length>0){var n=o[0],s=parseInt(n);a.instance.loadMonsterData(s,function(t){e.loadSkeletonData(t)})}}})},loadSkeletonData:function(e){var t=this,i="spine/monster/"+e.AnimeRes;cc.loader.loadRes(i,sp.SkeletonData,function(e,i){t.skeleton.skeletonData=i,t.skeleton.setAnimation(0,"idle",!0)})},updateRoadBar:function(e){this.roadBar.progress>=1||(this.roadBar.progress+=e)},IsTimeOver:function(){return this.roadBar.progress>=1}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",Utils:"Utils"}],Boxes:[function(e,t,i){"use strict";cc._RF.push(t,"799c7HxV4VEjK65lR/1jK6i","Boxes");var o=e("Utils").NUMROWS,n=e("Utils").NUMCOLUMNS,s=(e("EnumDefine").CellType,e("JsonData"),e("PoolMng"),e("Utils")),a=(e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT,e("EnumDefine").FightKind,e("EnumDefine").GameStages,e("ProcessStory"));cc.Class({extends:cc.Component,properties:{boxFarm1_1:{default:null,type:cc.SpriteFrame},boxFarm1_2:{default:null,type:cc.SpriteFrame}},onLoad:function(){},start:function(){},spawnBoxes:function(){s.levelData;var e=a.instance.stageFileNamesData,t=e.box1,i=e.box2,o=s.StageSpriteAtlas,n=o.getSpriteFrame(t),c=o.getSpriteFrame(i);this.createBoxes(n,c)},createBoxes:function(e,t){for(var i=!1,s=!1,a=-1;a<=o;a++){s=0!=i,i=!i;for(var c=-5;c<n+5;c++){var l=new cc.Node(""),r=l.addComponent(cc.Sprite);r.spriteFrame=s?e:t,s=!s,r.sizeMode=cc.Sprite.SizeMode.CUSTOM,r.type=cc.Sprite.Type.SLICED,l.parent=this.node;var h=this.node.width/8,u=this.node.height/8;l.setContentSize(h+1,u+1);var p=h/2+c*h-this.node.width/2,d=-this.node.height/2+u/2+a*u;l.setPosition(p,d),l.zIndex=-2,(c<0||c>=n||a<0)&&this.createOutSideBox(c,a)}}},createOutSideBox:function(e,t){var i=this;cc.loader.loadRes("prefab/cell/WeedBox",function(o,n){o&&cc.error(o);var s=cc.instantiate(n);s.parent=i.node;var a=i.node.width/8,c=i.node.height/8;s.setContentSize(a,c);var l=a/2+e*a-i.node.width/2,r=-i.node.height/2+c/2+t*c;s.setPosition(l,r),s.zIndex=-2})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",PoolMng:"PoolMng",ProcessStory:"ProcessStory",Utils:"Utils"}],BulletPool:[function(e,t,i){"use strict";cc._RF.push(t,"452c4ocJ8tKzbUajB1JuwDb","BulletPool");var o=cc.Class({name:"BulletPool",properties:{prefab:cc.Prefab,size:0},ctor:function(){},init:function(){this._pool=new cc.NodePool("Bullet"),this._count=0},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab),this._count++),e},put:function(e){this._pool.put(e)}});t.exports=o,cc._RF.pop()},{}],Bullet:[function(e,t,i){"use strict";cc._RF.push(t,"e66dd4Ip0xNQqSdFr4mK+Ck","Bullet");e("EnumDefine").HurtFont;var o=e("PoolMng"),n=cc.v2();cc.Class({extends:cc.Component,properties:{bullettype:-1,moveSpeed:1e3},ctor:function(){this.damage=0,this._callback=null,this._movedt=0,this._moveDelay=1,this._hurtfont=0},init:function(e,t,i,o,n){var s=Math.atan2(i.y,i.x),a=-cc.misc.radiansToDegrees(s),c=90-a;this.node.rotation=c,this.deg=a,this.direction=i.normalize(),this.isMoving=!0,this.bullettype=o,this._callback=n,this._hurtfont=e,this.shootMonster(t)},onLoad:function(){},shootDone:function(e){o.instance.putBullet(this.node,this.bullettype),this._callback&&this._callback(e)},shootMonster:function(e){if(e){var t=e.getComponent("Monster");t.isHaveShield()?this.shootToMonsterShield(t):this.shootToMonsterSkeleton(t)}else this.shootDone(!0)},shootToMonsterShield:function(e){var t=this,i=e.MonsterShield.getShieldData().pos,s=this.node.position;i.sub(s,n);var a=n.mag()/200*.1,c=cc.moveTo(a,i).easing(cc.easeOut(3)),l=cc.callFunc(function(){var i=t.node.parent,n=cc.v2(t.node.x,t.node.y);if(t.bulletEffect(n,i),e.attackShield(t.bullettype,1))o.instance.putBullet(t.node,t.bullettype);else{var s=cc.moveBy(.2,cc.v2(0,-50)),a=cc.callFunc(function(){o.instance.putBullet(t.node,t.bullettype)},t);t.node.runAction(cc.sequence(s,a))}},this),r=cc.sequence(c,l);this.node.runAction(r)},shootToMonsterSkeleton:function(e){var t=this,i=e.node,s=i.position;s.y+=i.height/2;var a=this.node.position;s.sub(a,n);var c=n.mag()/200*.1,l=cc.moveTo(c,s).easing(cc.easeOut(3)),r=cc.callFunc(function(){var i=t.node.parent,n=cc.v2(t.node.x,t.node.y);if(t.bulletEffect(n,i),t.bullettype===e.getDefenceCellType()){var s=cc.moveBy(.2,cc.v2(0,-50)),a=cc.callFunc(function(){o.instance.putBullet(t.node,t.bullettype)},t);t.node.runAction(cc.sequence(s,a))}else e.hurt(t.damage,t._callback,t._hurtfont),o.instance.putBullet(t.node,t.bullettype)},this),h=cc.sequence(l,r);this.node.runAction(h)},bulletEffect:function(e,t){cc.loader.loadRes("sprite/bulletHit",cc.SpriteFrame,function(i,o){var n=new cc.Node("");n.addComponent(cc.Sprite).spriteFrame=o,n.scale=1,n.parent=t,n.position=e;var s=cc.scaleTo(.4,0).easing(cc.easeOut(2)),a=cc.sequence(s,cc.removeSelf());n.runAction(a)})},start:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine",PoolMng:"PoolMng"}],CameraControl:[function(e,t,i){"use strict";cc._RF.push(t,"d1e93YcLzhOiohXX6bHj9ay","CameraControl");var o=e("RPGManager"),n=cc.v2(),s=cc.v2();cc.Class({extends:cc.Component,properties:{RPGNode:{default:null,type:cc.Node},cameraNode:cc.Node,jumpZoom:!1,centerAtStart:!1,smoothFollow:!1,followX:{default:0,visible:function(){return this.smoothFollow}},followY:{default:0,visible:function(){return this.smoothFollow}},minFollowDist:{default:0,visible:function(){return this.smoothFollow}},followRatio:{default:0,visible:function(){return this.smoothFollow}},overview:!0,overviewTargets:{default:[],type:[cc.Node],visible:function(){return this.overview}},overviewMargin:{default:0,visible:function(){return this.overview}},speedZoom:!1,zoomInSpeed:{default:0,visible:function(){return this.speedZoom}},zoomOutSpeed:{default:0,visible:function(){return this.speedZoom}},canShake:!1,shakeDuration:{default:0,visible:function(){return this.canShake}},pointerPan:!1,pointerXMult:{default:0,visible:function(){return this.pointerPan}},pointerYMult:{default:0,visible:function(){return this.pointerPan}},useBoundaries:!1,topBound:{default:0,visible:function(){return this.useBoundaries}},bottomBound:{default:0,visible:function(){return this.useBoundaries}},leftBound:{default:0,visible:function(){return this.useBoundaries}},rightBound:{default:0,visible:function(){return this.useBoundaries}}},ctor:function(){this._zoomIn=!1,this._zoomOut=!1,this._zoomCallback=null,this._zoomStep=.2,this._work=!1},onLoad:function(){var e=this;this.overview=!0,this.startFollow=!1,this.anim=this.node.getComponent("cc.Animation"),this.visibleSize=cc.view.getVisibleSize(),this.cameraNode&&(this.camera=this.cameraNode.getComponent("cc.Camera"),this.initZoomRatio=this.camera.zoomRatio,this.ratioZoomIn=this.camera.zoomRatio,this.ratioZoomOut=this.ratioZoomIn-.1),this.centerAtStart,this.previousPos=this.cameraNode.position,this.pointerPan&&(this.overview=!1,this.speedZoom=!1,this.pointerPos=null),this.overview&&(this.jumpZoom=!1,this.speedZoom=!1),this.speedZoom&&(this.jumpZoom=!1);var t=cc.callFunc(function(){e._work=!0},this);this.node.runAction(cc.sequence(cc.delayTime(.5),t))},start:function(){s.x=this.cameraNode.x,s.y=this.cameraNode.y},onEnable:function(){},onDisable:function(){},lateUpdate:function(e){if(this.RPGNode&&this._work){var t=void 0;if(t=this.overview?this.RPGNode.convertToWorldSpaceAR(this.getOverviewTargetsMidpoint()):this.RPGNode.convertToWorldSpaceAR(this.RPGNode.position),this.pointerPan&&this.pointerPos){var i=this.pointerPos.x/(this.visibleSize.width/2)-1,o=this.pointerPos.y/(this.visibleSize.height/2)-1;i*=this.pointerXMult,o*=this.pointerYMult,t=cc.pAdd(t,cc.v2(i,o))}if(s=this.cameraNode.parent.convertToNodeSpaceAR(t),this.smoothFollow?((Math.abs(t.x-s.x)>=this.followX||Math.abs(t.y-s.y)>=this.followY)&&(this.startFollow=!0),this.startFollow&&(s=s.lerp(t,this.followRatio),t.sub(s,n),n.mag<=this.minFollowDist&&(this.startFollow=!1))):s=this.cameraNode.parent.convertToNodeSpaceAR(t),this.useBoundaries){var a=this.visibleSize.width/2/this.camera.zoomRatio,c=this.visibleSize.height/2/this.camera.zoomRatio,l=(s.x,s.x,s.y-c),r=s.y+c;l<this.bottomBound&&(s.y=this.bottomBound+c),r>this.topBound&&(s.y=this.topBound-c),s.y=0}this.cameraNode.position=this.cameraNode.position.lerp(s,.1),this.zoomUpdate(e)}},getOverviewTargetsMidpoint:function(){return o.instance.getTargetMidPoint()},shakeCamera:function(){this.canShake&&(this.anim.play("shake"),this.scheduleOnce(this.stopShake.bind(this),this.shakeDuration))},stopShake:function(){this.anim.stop()},onMouseMove:function(e){this.pointerPos=e.getLocation()},onTouchMove:function(e){this.pointerPos=e.getLocation()},zoomUpdate:function(e){if(this._zoomIn){if(Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=1e-5)return this.camera.zoomRatio=this.ratioZoomIn,this._zoomIn=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomIn,this._zoomStep)}if(this._zoomOut){if(Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,this._zoomOut=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomOut,this._zoomStep)}},isZoom:function(){return this._zoomIn||this._zoomOut},isZoomOut:function(){return Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=1e-5},isZoomIn:function(){return Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=1e-5},resetZoom:function(){this._zoomIn=!1,this._zoomOut=!1},zoomIn:function(e){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomIn=!0},zoomOut:function(e){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomOut=!0}}),cc._RF.pop()},{RPGManager:"RPGManager"}],CameraManager:[function(e,t,i){"use strict";cc._RF.push(t,"67bb7Vj4G1KJI7OmZqcSsG4","CameraManager");var o=cc.Class({extends:cc.Component,properties:{skyCameraNode:cc.Node,midOneCameraNode:cc.Node,battleCameraNode:cc.Node,uiCameraNode:cc.Node},onLoad:function(){o.instance=this},statics:{instance:null},start:function(){}});cc._RF.pop()},{}],CanvasInit:[function(e,t,i){"use strict";cc._RF.push(t,"207a7XD14lAgqW7MavNl3Bk","CanvasInit");var o=e("EnumDefine").EnterKind;cc.Class({extends:cc.Component,properties:{},ctor:function(){this.enterCode=o.Main},setEnterCode:function(e){this.enterCode=e},onLoad:function(){},start:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine"}],CellAttack:[function(e,t,i){"use strict";cc._RF.push(t,"2c5e2o9ZWlK5bu/4z1IpREx","CellAttack");e("Utils").NUMROWS,e("Utils").NUMCOLUMNS,e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT,e("Utils");var o=e("EnumDefine").RemoveCellEffect,n=e("RPGManager"),s=e("CameraManager"),a=e("PoolMng"),c=(e("Game"),10),l=cc.v2(),r=cc.v2();cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.board=this.node.getComponent("Board"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.celllist=[],this.longestDurationFire=0,this.longestDurationShootMonster=0},start:function(){},hurt:function(e){if(e&&e.parent&&e.parent.parent){var t=e.getComponent("Cell");if(this.ProcessBoardCell.getCell(t.column,t.row)){var i=function(e,t){e&&(t.getComponent("Cell").normalCell()?this.removeCell(t):this.board.removeCell(t))}.bind(this);t.hurt(i)}}},removeCell:function(e){var t=e.getComponent("Cell"),i=t.celltype,o=t.row,s=t.column,a=e.getPosition();if(a.x+=e.width/2,a.y+=e.height/2,this.ProcessBoardCell.setCell(s,o,null),this.createCellBlood(a,t),n.instance.getActor(i)){var c=this.shootToActor(e);this.longestDurationShootMonster=this.longestDurationShootMonster<c?c:this.longestDurationShootMonster}else{var l=this.shootToMonster(e);this.longestDurationFire=this.longestDurationFire<l?l:this.longestDurationFire}},cellsAttack:function(){var e=this,t=cc.callFunc(function(){n.instance.fire(e.celllist),e.celllist.length=0},this);this.node.runAction(cc.sequence(cc.delayTime(this.longestDurationFire),t));var i=cc.callFunc(function(){n.instance.fireOver()},this);this.node.runAction(cc.sequence(cc.delayTime(this.longestDurationShootMonster),i))},shootToActor:function(e){var t=this;if(e&&e.parent&&e.parent.parent){var i=e.getComponent("Cell").celltype;e.group="UI";var o=n.instance.getActor(i).getComponent("Actor").getWorldPos();o.x-=e.width/2;var s=e.parent.parent;o=s.convertToNodeSpaceAR(o);var a=e.parent.convertToWorldSpaceAR(e.getPosition());a=s.convertToNodeSpaceAR(a),e.removeFromParent(!1),e.setPosition(a),e.parent=s,e.scale=.6,o.sub(a,l);var c=cc.callFunc(function(){e.scale=0,t.celllist.push(e)},this),r=cc.moveTo(.5,o).easing(cc.easeOut(3)),h=cc.scaleTo(0,0).easing(cc.easeOut(3)),u=cc.sequence(cc.delayTime(.475),h),p=cc.sequence(cc.spawn(r,u),c);return e.runAction(p),.5}},shootToMonster:function(e){e.group="UI";var t=n.instance.getMonster();return n.instance.RPGAttack=!0,t?this.shootMonster(e,t):(this.deSpawnCell(e),0)},deSpawnCell:function(e){this.board.deSpawnCell(e)},createCellBlood:function(e,t){var i=t.getRemoveCellEffect(),n=t.celltype;switch(i){case o.FruitJuice:var s=a.instance.getCellBlood(n);if(s){var c=s.getComponent("CellBlood");s.parent=this.node,s.setPosition(e);c.celltype=n,c.play(function(){a.instance.putCellBlood(s,n)})}break;case o.BombEffect1:var l=a.instance.getBombEffect();if(l){l.parent=this.node,l.position=e;var r=l.getComponent("PlayAnimation");if(r){r.play(function(){a.instance.putBombEffect(l)})}}}},shootMonster:function(e,t){return t.getComponent("Monster").isHaveShield()?this.shootToMonsterShield(e,t):this.shootToMonsterSkeleton(e,t)},shootToMonsterShield:function(e,t){var i=this,o=e.getComponent("Cell"),n=t.getComponent("Monster"),a=n.MonsterShield.getShieldData(),c=t.convertToWorldSpaceAR(a.node.getPosition());(c=s.instance.battleCameraNode.getComponent("cc.Camera").getWorldToCameraPoint(c,r)).x-=e.width/2,c.y-=a.node.height/2;var h=e.parent.parent;c=h.convertToNodeSpaceAR(c);var u=e.parent.convertToWorldSpaceAR(e.getPosition());u=h.convertToNodeSpaceAR(u),e.removeFromParent(!1),e.setPosition(u),e.parent=h,c.sub(u,l);var p=l.mag()/200*.1,d=cc.moveTo(p,c).easing(cc.easeOut(3)),f=cc.callFunc(function(){var t=e.parent,s=cc.v2(e.x+e.width*e.scale/2,e.y+e.height*e.scale/2);if(i.bulletEffect(s,t),n.attackShield(o.celltype,1))i.deSpawnCell(e);else{var a=cc.moveBy(.2,cc.v2(0,-50)),c=cc.callFunc(function(){i.deSpawnCell(e)},i);e.runAction(cc.sequence(a,c))}},this),m=cc.sequence(d,f);return e.runAction(m),p},shootToMonsterSkeleton:function(e,t){var i=this,o=e.getComponent("Cell"),n=t.getComponent("Monster"),s=n.getWorldPos();s.x-=e.width/2,s.y+=.35*e.height;var a=e.parent.parent;s=a.convertToNodeSpaceAR(s);var r=e.parent.convertToWorldSpaceAR(e.getPosition());r=a.convertToNodeSpaceAR(r),e.removeFromParent(!1),e.setPosition(r),e.parent=a,s.sub(r,l);var h=l.mag()/200*.1,u=cc.moveTo(h,s).easing(cc.easeOut(3)),p=cc.callFunc(function(){var t=e.parent,a=cc.v2(s);if(i.bulletEffect(a,t),o.celltype===n.getDefenceCellType()){var l=cc.moveBy(.2,cc.v2(0,-50)),r=cc.callFunc(function(){i.deSpawnCell(e)},i);e.runAction(cc.sequence(l,r))}else o.celltype===n.getAttackAddtionCellType()&&(c=parseInt(2*c)),i.deSpawnCell(e),n.hurt(c)},this),d=cc.sequence(u,p);return e.runAction(d),h},bulletEffect:function(e,t){cc.loader.loadRes("sprite/bulletHit",cc.SpriteFrame,function(i,o){var n=new cc.Node("");n.addComponent(cc.Sprite).spriteFrame=o,n.scale=1,n.parent=t,n.position=e,n.group="UI",n.zIndex=10;var s=cc.scaleTo(.4,0).easing(cc.easeOut(2)),a=cc.sequence(s,cc.removeSelf());n.runAction(a)})}}),cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",Game:"Game",PoolMng:"PoolMng",RPGManager:"RPGManager",Utils:"Utils"}],CellBloodPool:[function(e,t,i){"use strict";cc._RF.push(t,"2d4ecdB5k1BCbH++9j0rK7v","CellBloodPool");var o=cc.Class({name:"CellBloodPool",properties:{prefab:cc.Prefab,size:0},ctor:function(){},init:function(){this._pool=new cc.NodePool("CellBlood"),this._count=0},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab),this._count++),e},put:function(e){this._pool.put(e)}});t.exports=o,cc._RF.pop()},{}],CellBlood:[function(e,t,i){"use strict";cc._RF.push(t,"d0dbaO+Ax1CWrAvGpFW2pKD","CellBlood"),cc.Class({extends:cc.Component,properties:{bloodName:""},onLoad:function(){this.finished=null},start:function(){},onFinished:function(){this.finished&&this.finished()},play:function(e){this.finished=e;var t=this.node.getComponent(cc.Animation);t.on("finished",this.onFinished,this),t.play(this.bloodName)},onAnimCompleted:function(){},unuse:function(){this.node.getComponent(cc.Animation).stop()},reuse:function(){}}),cc._RF.pop()},{}],CellPool:[function(e,t,i){"use strict";cc._RF.push(t,"f7b70HRp5VG34ifNiaMDZHo","CellPool");var o=cc.Class({name:"CellPool",properties:{prefab:cc.Prefab,size:0},ctor:function(){},init:function(){this._pool=new cc.NodePool("Cell"),this._count=0},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab),this._count++),e},put:function(e){this._pool.put(e)}});t.exports=o,cc._RF.pop()},{}],CellsAnimation:[function(e,t,i){"use strict";cc._RF.push(t,"e31211RBMxK8ZJ9geV5r+0N","CellsAnimation");var o=e("Utils").NUMROWS,n=e("Utils").NUMCOLUMNS,s=e("EnumDefine").CellAnimationType;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell")},start:function(){},showAnimation:function(e,t,i,a){for(var c=0;c<o;c++)for(var l=0;l<n;l++){var r=this.ProcessBoardCell.getCell(l,c);if(r){var h=r.getComponent("Cell");if(h&&h.normalCell())switch(e){case s.Idle:h.idle();break;case s.Ready:h.ready(!1);break;case s.Bonustime:h.bonustime(!1);break;case s.Crazy:h.crazy(!1);break;case s.TimeUp:h.timeUp()}}}var u=cc.callFunc(function(){t&&t()},this);this.node.runAction(cc.sequence(cc.delayTime(i),u))}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],Cell:[function(e,t,i){"use strict";cc._RF.push(t,"b82dfwP+GpJCo2SX2ZwVlnj","Cell");var o=e("JsonData"),n=e("EnumDefine").CellType,s=e("EnumDefine").CellGroupType,a=e("EnumDefine").RemoveCellEffect,c=e("EnumDefine").CellBlockType,l=e("EnumDefine").CellsRelativeDir,r=e("ProcessBoardCell"),h=e("Board"),u=e("Utils"),p=e("Game"),d=e("Utils").NUMROWS,f=e("Utils").NUMCOLUMNS,m=cc.Class({extends:cc.Component,properties:{cellNode:cc.Node},ctor:function(){this.row=0,this.column=0,this.fillHoled=!1,this.celltype=n.UnKnown,this.cellGroup=s.UnKnown,this.blockData=null,this.cellscale=1,this._circleParticle=null,this._lv=0,this.blockCover=null,this.datacell=null,this._RemoveCellEffect=a.FruitJuice,this.idle(!1)},onLoad:function(){},moveDown:function(e){if(this.normalCell()){var t=this.node.position,i=cc.v2(t.x,t.y);i.y+=2*this.node.height,this.node.position=i;this.moveTo(.5,e,.1,t)}},setColor:function(e){var t=this.cellNode.getChildByName("sprite");t&&(t.color=e)},switchType:function(e){var t=void 0;t=e.celltype,e.celltype=this.celltype,this.celltype=t,t=e.cellGroup,e.cellGroup=this.cellGroup,this.cellGroup=t},setRemoveCellEffect:function(e){this._RemoveCellEffect=e},getRemoveCellEffect:function(){return this._RemoveCellEffect},IsCellNodeSprite:function(){return!!this.cellNode.getComponent("cc.Sprite")},setDataCell:function(e){this.datacell=e},getDataCell:function(){return this.datacell},init:function(e,t){this.celltype=e,this.setCellGroup(e),this._lv=t;var i=this;o.instance.loadBlockData(e,function(e){if(e){var t={};t.BlockId=e.BlockId,t.BlockName=e.BlockName,t.Fall=e.Fall,t.BlockType=e.BlockType,i.blockData=t}})},setCellGroup:function(e){switch(e){case n.Cell1:case n.One_Horinal:case n.One_Vertical:case n.One_XCross:case n.One_PrismBomb:case n.One_Brush:case n.SOne_TwoHorinal:case n.SOne_TwoVertical:case n.SOne_Bomb:this.cellGroup=s.Cell1;break;case n.Cell2:case n.Two_Horinal:case n.Two_Vertical:case n.Two_XCross:case n.Two_PrismBomb:case n.Two_Brush:case n.STwo_TwoHorinal:case n.STwo_TwoVertical:case n.STwo_Flash:this.cellGroup=s.Cell2;break;case n.Cell3:case n.Three_Horinal:case n.Three_Vertical:case n.Three_XCross:case n.Three_PrismBomb:case n.Three_Brush:case n.SThree_TwoHorinal:case n.SThree_TwoVertical:case n.SThree_Posion:this.cellGroup=s.Cell3;break;case n.Cell4:case n.Four_Horinal:case n.Four_Vertical:case n.Four_XCross:case n.Four_PrismBomb:case n.Four_Brush:case n.SFour_TwoHorinal:case n.SFour_TwoVertical:case n.SFour_Point:this.cellGroup=s.Cell4;break;case n.Cell5:case n.Five_Horinal:case n.Five_Vertical:case n.Five_XCross:case n.Five_PrismBomb:case n.Five_Brush:case n.SFive_TwoHorinal:case n.SFive_TwoVertical:case n.SFive_SameColor:this.cellGroup=s.Cell5}},addBlockCover:function(e){var t=this;cc.loader.loadRes("prefab/cell/blockCover",function(i,o){i&&cc.error(i);var n=cc.instantiate(o);n.active=!0,n.parent=t.node,n.position=cc.v2(t.node.width/2,t.node.height/2);var s=t.cellNode.getComponent("cc.Sprite");n.position=s?cc.v2(0,0):cc.v2(t.node.width/2,t.node.height/2),t.blockCover=n.getComponent("BlockCover"),t.blockCover.init(e.lv)})},canRemove:function(){var e=!0;return this._lv<=0&&(e=!1),this.blockData&&this.blockData.BlockType===c.NotRemoved&&(e=!1),e},hurt:function(e){if(!(this._lv<=0))if(this.blockCover){this.blockCover.hurt(),this.blockCover.IsAllRemoved()&&(this.blockCover.node.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf())),this.blockCover=null)}else{this.blockData?this.blockData.BlockType===c.NormalRemove&&(this._lv-=1,this.processBlock(this._lv)):this._lv-=1;var t=0===this._lv;t&&(this.DieHurt(),p.instance.updateCell(this.celltype,1)),e&&e(t,this.node)}},processBlock:function(e){var t=this.node.parent,i=this.node.position;i.x+=this.node.width/2,i.y+=this.node.height/2,this.spawnBlockDust(t,i);var o="";switch(this.celltype){case n.Fence:2===e?o="fence2":1===e&&(o="fence3");var s=this.cellNode;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame(o);s.getComponent("cc.Sprite").spriteFrame=i});break;case n.Weeds:2===e?o="weed2":1===e&&(o="weed3");var a=this.cellNode;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame(o);a.getComponent("cc.Sprite").spriteFrame=i});break;case n.Stakes:2===e?o="wood2":1===e&&(o="wood3");var c=this.cellNode;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame(o);c.getComponent("cc.Sprite").spriteFrame=i})}},IsBlockCoverRemoved:function(){return!this.blockCover},collectDiamond:function(){u.showDiamond(this.node.parent,this.node.position,10,null),p.instance.updateDiamond(10),h.instance.removeCell(this.node)},collectSpinKey:function(){},spawnBlockDust:function(e,t){var i="prefab/particle/";switch(i+="killDustParticle",this.celltype){case n.Salive:i="prefab/particle/saliveDustParticle";break;default:i="prefab/particle/killDustParticle"}cc.loader.loadRes(i,function(i,o){i&&cc.error(i);var n=cc.instantiate(o);n.parent=e,n.position=t,n.runAction(cc.sequence(cc.delayTime(.5),cc.removeSelf()))})},ChangeCell:function(e,t){},scaleAction:function(){var e=this.node.getComponent(cc.Animation);e&&e.play()},touchScaleAction:function(){var e=this.node.getComponent(cc.Animation);e&&e.play()},openChest:function(e){this.callback=e;var t=this.cellNode.getComponent(cc.Animation);t&&(t.on("finished",this.shitcallback,this),t.play())},shitcallback:function(){this.callback&&this.callback()},moveTo:function(e,t,i,o){var n=this;this.fillHoled=!1;var s=cc.moveTo(t,o).easing(cc.easeIn(1.5)),a=cc.callFunc(function(){n.scaleAction()},this);this.node.stopActionByTag(10);var c=cc.sequence(cc.delayTime(e),s,a);c.setTag(10),this.node.runAction(c)},NotRemoved:function(){return!(!this.blockData||-1!==this.blockData.BlockType)},IsKey:function(){return this.celltype===n.KeyUp||this.celltype===n.KeyDown||this.celltype===n.KeyLeft||this.celltype===n.KeyRight},IsBlockCell:function(){return!(!this.blockData||0!==this.blockData.Fall)},IsBlock:function(){return!(!this.blockCover||this.blockCover.IsAllRemoved())||!(!this.blockData||0!==this.blockData.Fall)},ready:function(e){if(this.cellNode){var t=this.cellNode.getComponent("sp.Skeleton");t&&(t.timeScale=1,t.setAnimation(0,"ready",e))}},crazy:function(e){if(this.cellNode){var t=this.cellNode.getComponent("sp.Skeleton");t&&(t.timeScale=1,t.setAnimation(0,"crazy",e))}},bonustime:function(e){if(this.cellNode){var t=this.cellNode.getComponent("sp.Skeleton");t&&(t.timeScale=1,t.setAnimation(0,"bonustime",e))}},idle:function(e){if(this.cellNode){var t=this.cellNode.getComponent("sp.Skeleton");t&&(t.timeScale=1,t.setAnimation(0,"idle",e))}},timeUp:function(){if(this.cellNode){var e=this.cellNode.getComponent("sp.Skeleton");e&&(e.timeScale=2,e.setAnimation(0,"time up",!1))}},setAntiAliasTexParameters:function(){if(this.cellNode){var e=this.cellNode.getComponent("sp.Skeleton");if(e)e.skeletonData.textures[0].setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR)}},touch:function(){if(!this.IsBlockCell()&&(this.touchScaleAction(),this.cellNode)){var e=this.cellNode.getComponent("sp.Skeleton");e&&(e.setAnimation(0,"idle02",!1),e.timeScale=2.5)}},unTouch:function(){if(!this.IsBlockCell()&&(this.touchScaleAction(),this.cellNode)){var e=this.cellNode.getComponent("sp.Skeleton");e&&(e.setAnimation(0,"idle",!1),e.timeScale=1)}},unuse:function(){this.row=-1,this.column=-1,this.node.rotation=0,this.node.scale=.8,this.celltype=n.UnKnown,this.cellGroup=s.UnKnown,this._lv=0,this.fillHoled=!1,this._RemoveCellEffect=a.FruitJuice,this.node.group="board"},reuse:function(){this.idle()},haveBlockOrCover:function(){return!!this.blockCover||!(this.normalCell()||!this.blockData||this.blockData.BlockType!==c.NormalRemove)},DieHurt:function(){var e=function(e,t){e&&h.instance.removeCell(t)}.bind(this),t=this.node.getComponent("Cell");if(t.normalCell()){var i=t.row,o=t.column,n=r.instance.getSideCell(o,i);if(n){var s=n.getComponent("SideCell");if(s)s.sideLNum()>0&&s.hurt(l.Left),s.sideRNum()>0&&s.hurt(l.Right),s.sideTNum()>0&&s.hurt(l.Top),s.sideBNum()>0&&s.hurt(l.Bottom)}if(o-1>=0){var a=r.instance.getSideCell(o-1,i);if(a){var c=a.getComponent("SideCell");if(c)c.sideRNum()>0&&c.hurt(l.Right)}var u=r.instance.getCell(o-1,i);if(u){var p=u.getComponent("Cell");p.haveBlockOrCover()&&p.hurt(e)}}if(o+1<f){var m=r.instance.getSideCell(o+1,i);if(m){var v=m.getComponent("SideCell");if(v)v.sideLNum()>0&&v.hurt(l.Left)}var g=r.instance.getCell(o+1,i);if(g){var C=g.getComponent("Cell");C.haveBlockOrCover()&&C.hurt(e)}}if(i+1<d){var _=r.instance.getSideCell(o,i+1);if(_){var S=_.getComponent("SideCell");if(S)S.sideBNum()>0&&S.hurt(l.Bottom)}var b=r.instance.getCell(o,i+1);if(b){var k=b.getComponent("Cell");k.haveBlockOrCover()&&k.hurt(e)}}if(i-1>=0){var y=r.instance.getSideCell(o,i-1);if(y){var w=y.getComponent("SideCell");if(w)w.sideTNum()>0&&w.hurt(l.Top)}var B=r.instance.getCell(o,i-1);if(B){var P=B.getComponent("Cell");P.haveBlockOrCover()&&P.hurt(e)}}}},IsSideProp:function(){switch(this.celltype){case n.SOne_Bomb:case n.STwo_Flash:case n.SFive_SameColor:case n.SThree_Posion:case n.SFour_Point:return!0}return!1},IsProp:function(){switch(this.celltype){case n.One_Horinal:case n.One_Vertical:case n.One_XCross:case n.One_PrismBomb:case n.One_Brush:case n.SOne_TwoHorinal:case n.SOne_TwoVertical:case n.SOne_Bomb:case n.Two_Horinal:case n.Two_Vertical:case n.Two_XCross:case n.Two_PrismBomb:case n.Two_Brush:case n.STwo_TwoHorinal:case n.STwo_TwoVertical:case n.STwo_Flash:case n.Three_Horinal:case n.Three_Vertical:case n.Three_XCross:case n.Three_PrismBomb:case n.Three_Brush:case n.SThree_TwoHorinal:case n.SThree_TwoVertical:case n.SThree_Posion:case n.Four_Horinal:case n.Four_Vertical:case n.Four_XCross:case n.Four_PrismBomb:case n.Four_Brush:case n.SFour_TwoHorinal:case n.SFour_TwoVertical:case n.SFour_Point:case n.Five_Horinal:case n.Five_Vertical:case n.Five_XCross:case n.Five_PrismBomb:case n.Five_Brush:case n.SFive_TwoHorinal:case n.SFive_TwoVertical:case n.SFive_SameColor:case n.ClearBombProp:return!0}return!1},normalCell:function(){return this.celltype==n.Cell1||this.celltype==n.Cell2||this.celltype==n.Cell3||this.celltype==n.Cell4||this.celltype==n.Cell5},propNormalCell:function(){switch(this.celltype){case n.One_Horinal:case n.One_Vertical:case n.One_XCross:case n.One_PrismBomb:case n.One_Brush:case n.SOne_TwoHorinal:case n.SOne_TwoVertical:case n.Two_Horinal:case n.Two_Vertical:case n.Two_XCross:case n.Two_PrismBomb:case n.Two_Brush:case n.STwo_TwoHorinal:case n.STwo_TwoVertical:case n.Three_Horinal:case n.Three_Vertical:case n.Three_XCross:case n.Three_PrismBomb:case n.Three_Brush:case n.SThree_TwoHorinal:case n.SThree_TwoVertical:case n.Four_Horinal:case n.Four_Vertical:case n.Four_XCross:case n.Four_PrismBomb:case n.Four_Brush:case n.SFour_TwoHorinal:case n.SFour_TwoVertical:case n.Five_Horinal:case n.Five_Vertical:case n.Five_XCross:case n.Five_PrismBomb:case n.Five_Brush:case n.SFive_TwoHorinal:case n.SFive_TwoVertical:case n.ClearBombProp:if(this.cellGroup===s.Cell1||this.cellGroup===s.Cell2||this.cellGroup===s.Cell3||this.cellGroup===s.Cell4||this.cellGroup===s.Cell5)return!0}return!1},IsSameCellGroup:function(e){return this.cellGroup===e.cellGroup}});t.exports=m,cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",Game:"Game",JsonData:"JsonData",ProcessBoardCell:"ProcessBoardCell",Utils:"Utils"}],ChestReWard:[function(e,t,i){"use strict";cc._RF.push(t,"f2287ycVshAToVFxBeyUV6P","ChestReWard");e("EnumDefine").EnterKind;var o=e("Utils"),n=o.ProduceType,s=e("LocalStorage");cc.Class({extends:cc.Component,properties:{chest:cc.Node,glare:cc.Node,role:cc.Node,bk:cc.Node,audioReWard:{type:cc.AudioSource,default:null}},onLoad:function(){this.glare.active=!1,this.role.active=!1,this.uibase=null},showChest:function(e,t,i){var o=this;this.uibase=t,this.chest.active=!0;var n=this.chest.getComponent(cc.Animation);if(n){n.play("chestShake");var s=cc.callFunc(function(){n.stop(),n.on("finished",o.shitcallback,o),n.play("openChest");var t=function(){this.playReWardAudio(),this.showReWard(e,i),this.showflashEffect(this.chest,cc.v2(0,0)),n.stop()}.bind(o);o.openchestAnimationFinishedCallback=t},this);this.chest.runAction(cc.sequence(cc.delayTime(.5),s,cc.delayTime(1),cc.removeSelf()))}},shitcallback:function(){this.openchestAnimationFinishedCallback&&this.openchestAnimationFinishedCallback()},showflashEffect:function(e,t){cc.loader.loadRes("prefab/particle/killDustParticle",function(i,o){var n=cc.instantiate(o);n&&(n.scale=1,n.parent=e,n.position=t,n.runAction(cc.sequence(cc.delayTime(2),cc.removeSelf())))});cc.loader.loadRes("prefab/flashEffect",function(i,o){var n=cc.instantiate(o);if(n){n.scale=.5,n.parent=e,n.position=t;var s=n.getComponent(cc.Animation);s&&s.play(),n.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf()))}})},showReWard:function(e,t){var i=function(e){var i=e.role;if(""===i||void 0===i)this.rewardCoinAndDiamond(e,t);else{var o=parseInt(i),n=s.instance.getRoleData(o);n?this.rewardCoinAndDiamond(e,t):((n={}).roletype=o,n.lock=!1,n.level=1,s.instance.setRoleData(n),this.reWardOneRole(t))}}.bind(this);this.loadScoreReWardData(e,i)},reWardOneRole:function(e){var t=this;this.glare.active=!0,this.role.active=!0,this.bk.active=!0;var i=this.glare;i.active=!0;var n=cc.repeatForever(cc.rotateBy(3,360));i.runAction(n);var s=[cc.v2(-o.randomRange(20,30),o.randomRange(100,200)/8),cc.v2(-o.randomRange(20,30),o.randomRange(100,200)/8),cc.v2(0,0)],a=cc.bezierBy(.2,s),c=cc.callFunc(function(){var e=cc.jumpBy(.5,cc.v2(0,0),10,1).easing(cc.easeOut(2)),i=cc.jumpBy(.5,cc.v2(0,0),-10,1).easing(cc.easeOut(2));t.role.runAction(cc.sequence(e,i))}),l=cc.callFunc(function(){e&&e()},this);this.role.runAction(cc.sequence(a,c,cc.delayTime(2.4),l))},rewardCoinAndDiamond:function(e,t){(function(){}).bind(this);var i=parseInt(e.coin),o=parseInt(e.diamond),n=this.rewardCoin(i),s=this.rewardDiamond(o),a=n>s?n:s,c=cc.callFunc(function(){t&&t()},this),l=cc.sequence(cc.delayTime(a),c);this.node.runAction(l),this.bk.active=!1},showCoinDiamondPicture:function(e,t,i){cc.loader.loadRes("prefab/chest/ChestCoinDiamonds",function(o,n){var s=cc.instantiate(n);s&&(s.scale=1,s.parent=e,s.position=t,s.scale=0,i&&i(s))})},rewardCoin:function(e){var t=this.uibase.coinlabel,i=this.chest.parent.convertToWorldSpaceAR(this.chest.position);i=this.node.convertToNodeSpaceAR(i);var s=this.node,a=t.node.parent.convertToWorldSpaceAR(t.node.position);a=this.node.convertToNodeSpaceAR(a);var c=e/10,l=function(){this.uibase.updateCoin(c),this.uibase.playCoin()}.bind(this);return o.produceRandomNodeLineMove(n.ButtonCoin,10,i,a,s,l)},rewardDiamond:function(e){var t=this.chest.parent.convertToWorldSpaceAR(this.chest.position);t=this.node.convertToNodeSpaceAR(t);var i=this.node,s=this.uibase.diamondlabel,a=s.node.parent.convertToWorldSpaceAR(s.node.position);a=this.node.convertToNodeSpaceAR(a);var c=e,l=e/c,r=function(){this.uibase.updateDiamond(l),this.uibase.playCoin()}.bind(this);return o.produceRandomNodeLineMove(n.Diamond,c,t,a,i,r)},start:function(){},playReWardAudio:function(){this.audioReWard&&this.audioReWard.play()},loadScoreReWardData:function(e,t){cc.loader.loadRes("json/StarReward",function(i,o){for(var n=o.json,s=0;s<n.length;s++){var a=n[s],c=parseInt(a.star);if(e>=c){t&&t(a);break}}})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],CloudMove:[function(e,t,i){"use strict";cc._RF.push(t,"cdc91HgZ7pHT7trhpeYegEa","CloudMove"),cc.Class({extends:cc.Component,properties:{clouds:{default:[],type:cc.Node},offsets:{default:[],type:cc.Float},s1:cc.Node,s2:cc.Node,s3:cc.Node,sun:cc.Node},start:function(){this.sun.position=this.s1.position;var e=[this.s1.position,this.s2.position,this.s3.position],t=cc.cardinalSplineTo(400,e,0);this.sun.runAction(t)},update:function(e){cc.view.getVisibleOrigin();for(var t=cc.view.getVisibleSize(),i=0;i<this.clouds.length;i++){var o=this.clouds[i],n=o.x+this.offsets[i];n>t.width+o.width&&(n=-o.width/2-t.width/2),o.x=n}}}),cc._RF.pop()},{}],CoinPool:[function(e,t,i){"use strict";cc._RF.push(t,"2266bC4iapDcKV28fhTERMV","CoinPool");var o=cc.Class({name:"CoinPool",properties:{prefab:cc.Prefab,size:0,linePrefab:cc.Prefab,linesize:2,slantLine:cc.Prefab,slantsize:2,scorelabelPrefab:cc.Prefab,scorelabelSize:5,redlabelPrefab:cc.Prefab,redlabelSize:5,purblelabelPrefab:cc.Prefab,purblelabelSize:5,orangelabelPrefab:cc.Prefab,orangelabelSize:5},ctor:function(){},init:function(){this._pool=new cc.NodePool("Coin"),this._count=0,this._linepool=new cc.NodePool("linenode"),this._linecount=0,this._slantLinePool=new cc.NodePool("slantlinenode"),this._slantcount=0,this._scorelabelPool=new cc.NodePool(""),this._scorelabelCount=0,this._redlabelPool=new cc.NodePool(""),this._redlabelCount=0,this._purblelabelPool=new cc.NodePool(""),this._purblelabelCount=0,this._orangelabelPool=new cc.NodePool(""),this._orangelabelCount=0},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab),this._count++),e},put:function(e){this._pool.put(e)},getScoreLabel:function(){var e=this._scorelabelPool.get();return e||(e=cc.instantiate(this.scorelabelPrefab),this._scorelabelCount++),e},putScoreLabel:function(e){this._scorelabelPool.put(e),this._scorelabelCount--},getRedLabel:function(){var e=this._redlabelPool.get();return e||(e=cc.instantiate(this.redlabelPrefab),this._redlabelCount++),e},putRedLabel:function(e){this._redlabelPool.put(e),this._redlabelCount--},getPurbleLabel:function(){var e=this._purblelabelPool.get();return e||(e=cc.instantiate(this.purblelabelPrefab),this._purblelabelCount++),e},putPurbleLabel:function(e){this._purblelabelPool.put(e),this._purblelabelCount--},getOrangeLabel:function(){var e=this._orangelabelPool.get();return e||(e=cc.instantiate(this.orangelabelPrefab),this._orangelabelCount++),e},putOrangeLabel:function(e){this._orangelabelPool.put(e),this._orangelabelCount--},getline:function(){var e=this._linepool.get();return e||(e=cc.instantiate(this.linePrefab),this._linecount++),e},putline:function(e){this._linepool.put(e)},getslantline:function(){var e=this._slantLinePool.get();return e||(e=cc.instantiate(this.slantLine),this._slantcount++),e},putslantline:function(e){this._slantLinePool.put(e),this._slantcount--}});t.exports=o,cc._RF.pop()},{}],CoinUI:[function(e,t,i){"use strict";cc._RF.push(t,"4a3ddjecaRLypdAwkHyeV14","CoinUI");var o=e("Utils"),n=o.ProduceType,s=(e("LocalStorage"),e("BaseUI"));cc.Class({extends:s,properties:{coinNum1:{default:null,type:cc.Label},diamondNum1:{default:null,type:cc.Label},coinNum2:{default:null,type:cc.Label},diamondNum2:{default:null,type:cc.Label},coinNum3:{default:null,type:cc.Label},diamondNum3:{default:null,type:cc.Label},coinNum4:{default:null,type:cc.Label},diamondNum4:{default:null,type:cc.Label}},onLoad:function(){this.scaleShow(this.node),this.coinNums=[1e3,1e4,1e5,21e4],this.diamondNums=[10,80,750,1200],this.numlabels=[this.coinNum1,this.coinNum2,this.coinNum3,this.coinNum4],this.diamondlabels=[this.diamondNum1,this.diamondNum2,this.diamondNum3,this.diamondNum4];for(var e=this.coinNums,t=this.diamondNums,i=0;i<this.numlabels.length;i++)this.numlabels[i].string=e[i]+"",this.diamondlabels[i].string=t[i]+""},start:function(){},setUIBase:function(e){this.uibase=e},onBtnBuy:function(e,t){if(this.uibase){var i=parseInt(t),s=this.numlabels[i],a=this.coinNums[i],c=this.diamondNums[i];if(!(this.uibase.getDiamondNum()<c)){this.uibase.updateDiamond(-c);var l=this.uibase.coinlabel,r=s,h=r.node.parent.convertToWorldSpaceAR(r.node.position);h=this.node.convertToNodeSpaceAR(h);var u=this.node,p=l.node.parent.convertToWorldSpaceAR(l.node.position);p=this.node.convertToNodeSpaceAR(p);var d=a/20,f=function(){this.uibase.updateCoin(d),this.uibase.playCoin()}.bind(this),m=parseInt(20);o.produceRandomNodeLineMove(n.ButtonCoin,m,h,p,u,f)}}},onBtnCloseClicked:function(e){var t=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t)}}),cc._RF.pop()},{BaseUI:"BaseUI",LocalStorage:"LocalStorage",Utils:"Utils"}],DayReWard:[function(e,t,i){"use strict";cc._RF.push(t,"0f9e75K5+5FeaU8Q4apADb8","DayReWard");e("EnumDefine");var o=e("Utils"),n=o.ProduceType,s=e("LocalStorage"),a=e("BaseUI");cc.Class({extends:a,properties:{receiveNodes:{default:[],type:cc.Node},bk:cc.Node,glare:cc.Node,role:cc.Node,audioReWard:{type:cc.AudioSource,default:null}},onLoad:function(){this.roleBuy=!0;var e=o.DayReWardRoleID,t=s.instance.getRoleData(e);t&&!t.lock||(this.roleBuy=!1),this.rewards=[],this.uibase=null,this.role.active=!1,this.glare.active=!1,this.scaleShow(this.node,null);for(var i=0;i<this.receiveNodes.length;i++){var n=this.receiveNodes[i];this.processA(n)}},setUIBase:function(e){this.uibase=e},start:function(){},onBtnCloseClicked:function(e){var t=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t)},onBtnReceiveClicked:function(e,t){for(var i=null,o=0;o<this.rewards.length;o++){var n=this.rewards[o];if(parseInt(n.index)===parseInt(t)){i=n;break}}if(i){var a=i.roleID,c=this.receiveNodes[t].getChildByName("GetBtn"),l=c.getChildByName("Label"),r=c.getComponent(cc.Button);if(r.interactable=!1,r.node.color=cc.Color.GRAY,l.getComponent(cc.Label).string="\u5df2\u9886\u53d6",-1===a)this.rewardCoinAndDiamond(i);else{var h=s.instance.getRoleData(a);h?this.rewardCoinAndDiamond(i,null):((h={}).roletype=a,h.lock=!1,h.level=1,s.instance.setRoleData(h),this.reWardOneRole(null))}var u=t+1;u>7&&(u=1),s.instance.setDayReWard(u);var p=new Date,d=p.getMonth(),f=p.getDay(),m={};m.month=parseInt(d),m.day=parseInt(f),s.instance.setDayReWardDateTime(m)}},processA:function(e){var t=0,i=0,n=e.getChildByName("coinlabel"),a=e.getChildByName("diamondlabel"),c=e.getChildByName("buttonDiamond"),l=e.getChildByName("role"),r=e.name,h=s.instance.getDayReWard();h=parseInt(h);var u=e.getChildByName("GetBtn"),p=u.getChildByName("Label"),d=u.getComponent(cc.Button),f=this.checkTime(),m=0;"A1"===r?(t=1e3,i=10,m=1):"A2"===r?(t=1500,i=15,m=2):"A3"===r?(i=20,m=3):"A4"===r?(t=3e3,i=30,m=4):"A5"===r?(t=5e3,i=40,m=5):"A6"===r?(t=8e3,i=50,m=6):(t=1e4,i=80,m=7);var v=n.getComponent(cc.Label);if(v.string=t+"",(v=a.getComponent(cc.Label)).string=i+"",l&&(this.roleBuy?(l.active=!1,l=null):(c.active=!1,a.active=!1)),h===m)f?d.interactable=!0:(d.interactable=!1,d.node.color=cc.Color.GRAY,p.getComponent(cc.Label).string="\u5df2\u9886\u53d6");else if(h>m){d.interactable=!1,d.node.color=cc.Color.GRAY,p.getComponent(cc.Label).string="\u5df2\u9886\u53d6"}else if(h<m){d.interactable=!1,d.node.color=cc.Color.GRAY,p.getComponent(cc.Label).string="\u9886\u53d6"}var g={};g.coin=t,g.diamond=i,g.roleID=l?o.DayReWardRoleID:-1,g.coinlabel=n,g.diamondlabel=a,g.button=d,g.index=m-1,this.rewards.push(g)},checkTime:function(){var e=!1,t=new Date,i=t.getMonth(),o=t.getDay();i=parseInt(i),o=parseInt(o);var n=s.instance.getDayReWardDateTime();return n.month=parseInt(n.month),n.day=parseInt(n.day),i!==n.month?e=!0:i===n.month&&o!==n.day&&(e=!0),e},rewardCoinAndDiamond:function(e,t){var i=parseInt(e.coin),o=parseInt(e.diamond),n=this.rewardCoin(i,e.coinlabel),s=this.rewardDiamond(o,e.diamondlabel),a=n>s?n:s,c=cc.callFunc(function(){t&&t()},this),l=cc.sequence(cc.delayTime(a),c);this.node.runAction(l),this.bk.active=!1},rewardCoin:function(e,t){var i=t.parent.convertToWorldSpaceAR(t.position);i=this.node.convertToNodeSpaceAR(i);var s=this.node,a=(t=this.uibase.coinlabel).node.parent.convertToWorldSpaceAR(t.node.position);a=this.node.convertToNodeSpaceAR(a);var c=e/10,l=function(){this.uibase.updateCoin(c),this.uibase.playCoin()}.bind(this);return o.produceRandomNodeLineMove(n.ButtonCoin,10,i,a,s,l)},rewardDiamond:function(e,t){var i=t.parent.convertToWorldSpaceAR(t.position);i=this.node.convertToNodeSpaceAR(i);var s=this.node,a=this.uibase.diamondlabel,c=a.node.parent.convertToWorldSpaceAR(a.node.position);c=this.node.convertToNodeSpaceAR(c);var l=e,r=e/l,h=function(){this.uibase.updateDiamond(r),this.uibase.playCoin()}.bind(this);return o.produceRandomNodeLineMove(n.Diamond,l,i,c,s,h)},reWardOneRole:function(e){var t=this;this.glare.active=!0,this.role.active=!0,this.bk.active=!0;var i=this.glare;i.active=!0;var n=cc.repeatForever(cc.rotateBy(3,360));i.runAction(n);var s=[cc.v2(-o.randomRange(20,30),o.randomRange(100,200)/8),cc.v2(-o.randomRange(20,30),o.randomRange(100,200)/8),cc.v2(0,0)],a=cc.bezierBy(.2,s),c=cc.callFunc(function(){var e=cc.jumpBy(.5,cc.v2(0,0),10,1).easing(cc.easeOut(2)),i=cc.jumpBy(.5,cc.v2(0,0),-10,1).easing(cc.easeOut(2));t.role.runAction(cc.sequence(e,i))}),l=cc.callFunc(function(){t.glare.active=!1,t.role.active=!1,e&&e()},this);this.role.runAction(cc.sequence(a,c,cc.delayTime(2.4),l))},playReWardAudio:function(){this.audioReWard&&this.audioReWard.play()}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],DiamondUI:[function(e,t,i){"use strict";cc._RF.push(t,"71ff6IGRuVOFokfJ6td7q3n","DiamondUI");var o=e("Utils"),n=o.ProduceType,s=e("BaseUI");cc.Class({extends:s,properties:{rmb1:{default:null,type:cc.Label},num1:{default:null,type:cc.Label},rmb2:{default:null,type:cc.Label},num2:{default:null,type:cc.Label},rmb3:{default:null,type:cc.Label},num3:{default:null,type:cc.Label},rmb4:{default:null,type:cc.Label},num4:{default:null,type:cc.Label},rmb5:{default:null,type:cc.Label},num5:{default:null,type:cc.Label}},ctor:function(){this.uibase=null},onLoad:function(){this.scaleShow(this.node),this.nums=[60,190,640,1980,3450],this.rmbs=[6,18,60,180,300],this.numlabels=[this.num1,this.num2,this.num3,this.num4,this.num5],this.rmblabels=[this.rmb1,this.rmb2,this.rmb3,this.rmb4,this.rmb5];for(var e=this.nums,t=this.rmbs,i=0;i<this.numlabels.length;i++)this.numlabels[i].string=e[i]+"",this.rmblabels[i].string=t[i]+""},start:function(){},setUIBase:function(e){this.uibase=e},onBtnBuy:function(e,t){if(this.uibase){var i=parseInt(t),s=this.numlabels[i],a=this.nums[i],c=(this.uibase.coinlabel,this.uibase.diamondlabel),l=s,r=l.node.parent.convertToWorldSpaceAR(l.node.position);r=this.node.convertToNodeSpaceAR(r);var h=this.node,u=c.node.parent.convertToWorldSpaceAR(c.node.position);u=this.node.convertToNodeSpaceAR(u);var p=a/20,d=function(){this.uibase.updateDiamond(p),this.uibase.playCoin()}.bind(this);o.produceRandomNodeLineMove(n.Diamond,20,r,u,h,d)}},onBtnCloseClicked:function(e){var t=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t)}}),cc._RF.pop()},{BaseUI:"BaseUI",Utils:"Utils"}],DrawLine:[function(e,t,i){"use strict";cc._RF.push(t,"33409TPtkZM9Z4iMRGMbjXc","DrawLine");var o=e("Utils"),n=e("PoolMng"),s=e("EnumDefine").DrawlineKind;cc.Enum({normalToNormal:0,normalToProp:1,propToNormal:2,propToProp:3});cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.board=this.node.getComponent("Board"),this.spawnCells=this.node.getComponent("SpawnCells"),this.processBoardCell=this.node.getComponent("ProcessBoardCell");var e=o.levelID;1===parseInt(e)?this.needDrawline=!0:this.needDrawline=!1},ctor:function(){this.lineNodelist=[],this.templisthv=[],this.templistslant=[],this.guideNode=null,this.needDrawline=!1,this._guideDone=!1},start:function(){},clearlines:function(){for(var e=0;e<this.templisthv.length;e++){var t=this.templisthv[e];n.instance.putline(t)}for(var i=0;i<this.templistslant.length;i++){var o=this.templistslant[i];n.instance.putslantline(o)}this.templisthv.length=0,this.templistslant.length=0,this.lineNodelist.length=0},setlineNodes:function(e){this.lineNodelist.length=0;for(var t=0;t<e.length;t++)this.lineNodelist[t]=e[t]},deleteline:function(e){var t=this.lineNodelist.indexOf(e);if(t>=0&&this.lineNodelist.splice(t,1),this.templisthv.length>0){var i=this.templisthv[this.templisthv.length-1];n.instance.putline(i);var o=this.templisthv.length-1;this.templisthv.splice(o,1)}},drawline:function(e){if(!(this.lineNodelist.length<=1)){var t=this.lineNodelist[this.lineNodelist.length-1],i=this.lineNodelist[this.lineNodelist.length-2].position,o=t.position,n=this.node;this.spawnlineNode(i,o,n,e),this.lineNodelist.push(t)}},spawnlineNode:function(e,t,i,o){var n=this.createOneline(e,t,i,o);if(n){switch(o){case s.Normal:this.templisthv.push(n);break;case s.AttackAddtion:this.templistslant.push(n);break;case s.Defence:this.templisthv.push(n)}var a=n.position,c=cc.callFunc(function(){n.position=a},this),l=e.sub(t).normalize(),r=-l.x*Math.abs(e.x-t.x)*.5,h=-l.y*Math.abs(e.y-t.y)*.5,u=cc.moveBy(.5,cc.v2(r,h)),p=cc.sequence(cc.show(),u,c),d=cc.repeatForever(p);n.stopAllActions(),n.runAction(d)}},createOneline:function(e,t,i,o){var a=t.sub(e),c=Math.atan2(a.y,a.x),l=-cc.misc.radiansToDegrees(c),r=null;switch(o){case s.Normal:(r=n.instance.getline()).getChildByName("attack").active=!1,r.getChildByName("defence").active=!1;break;case s.AttackAddtion:(r=n.instance.getline()).getChildByName("attack").active=!0,r.getChildByName("defence").active=!1;break;case s.Defence:(r=n.instance.getline()).getChildByName("attack").active=!1,r.getChildByName("defence").active=!0}if(r){r.parent=i,r.rotation=l,r.zIndex=2;var h=cc.v2();return h.x=(e.x+t.x)/2,h.y=(e.y+t.y)/2,r.x=h.x-r.width/2+37.5,r.y=h.y-r.height/2+37.5,r}},getGuideIsDone:function(){return this._guideDone},guideDone:function(){this._guideDone=!0},removeGuideline:function(){this.guideNode&&(this.guideNode.removeFromParent(),this.guideNode=null)},drawGuideline:function(){if(this.needDrawline&&!0!==this._guideDone);}}),cc._RF.pop()},{EnumDefine:"EnumDefine",PoolMng:"PoolMng",Utils:"Utils"}],DropCell:[function(e,t,i){"use strict";cc._RF.push(t,"dc389MgnitNNITbrDvFbrs3","DropCell");var o=e("Utils").NUMROWS,n=e("Utils").NUMCOLUMNS,s=(e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT),a=e("Utils"),c=e("EnumDefine").CellType,l=e("Game");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.board=this.node.getComponent("Board"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.spawnCells=this.node.getComponent("SpawnCells"),this.DropFromSide=this.node.getComponent("DropFromSide")},ctor:function(){this._falldoneFunc=null},start:function(){},checkSideTop:function(e,t){var i=this.ProcessBoardCell.getSideCell(e,t);return i?i.getComponent("SideCell").sideTNum():0},checkSideBottom:function(e,t){var i=this.ProcessBoardCell.getSideCell(e,t);return i?i.getComponent("SideCell").sideBNum():0},dropPosition:function(e,t,i){return a.DropCellPosition(e,t,i,this.node.width,this.node.height)},animateFalling:function(e){var t=this;null!=e&&(this._falldoneFunc=e);var i=[];this.fillHoles(i,!0);for(var o=0,n=0;n<i.length;n++)for(var a=0,c=i[n],l=0;l<c.length;l++){var r=c[l],h=r.getComponent("Cell"),u=r.getPosition(),p=h.celltype,d=this.dropPosition(p,h.column,h.row),f=.15*a;a+=1;var m=(u.y-d.y)/s*.07;o=Math.max(o,m+f),h.moveTo(f,m,.1,d)}var v=cc.callFunc(function(){t.openBottomBox();var e=t.DropFromSide.fillSideHoles(),i=cc.callFunc(function(){var e=[];if(t.fillHoles(e,!1),e.length>0)t.animateFalling(null);else{var i=[];t.topUpCell(i),t.animateNewCellFalling(i)}},t),o=cc.sequence(cc.delayTime(e),i);t.node.runAction(o)},this),g=cc.sequence(cc.delayTime(o),v);this.node.runAction(g)},animateNewCellFalling:function(e){for(var t=this,i=0,o=0;o<e.length;o++)for(var n=e[o],s=n[0],a=s.getComponent("Cell").row+1,c=0,l=0;l<n.length;l++){var r=(s=n[l]).getComponent("Cell"),h=this.dropPosition(r.celltype,r.column,a);s.position=h;var u=.15*(n.length-c-1),p=.07*(a-r.row);c+=1,i=Math.max(i,p+u);var d=r.celltype,f=this.dropPosition(d,r.column,r.row);r.moveTo(u,p,.06,f)}var m=cc.callFunc(function(){var e=t.DropFromSide.fillSideHoles(),i=cc.callFunc(function(){e>0?t.animateFalling():t.DropCellDone()},t),o=cc.sequence(cc.delayTime(e),i);t.node.runAction(o)},this);this.node.runAction(cc.sequence(cc.delayTime(i),m))},DropCellDone:function(){var e=this,t=cc.callFunc(function(){e._falldoneFunc&&(e._falldoneFunc(),e._falldoneFunc=null)},this);this.node.runAction(cc.sequence(cc.delayTime(.1),t))},dropPropCell:function(e,t){var i=null;if(a.PropFlashCnt>0){a.PropFlashCnt=0;var o=c.PropFlash;i=this.spawnCells.spawnPropCell(e,t,o)}return i},dropKey:function(){},fillHoles:function(e,t){for(var i=0;i<n;i++){for(var s=[],a=0;a<o;a++){if(!(this.checkSideTop(i,a)>0))if(!this.ProcessBoardCell.getCell(i,a))for(var c=a+1;c<o;c++){var l=!1,r=this.ProcessBoardCell.getCell(i,c);if(r){var h=r.getComponent("Cell");if(h.IsBlock())break;if(this.checkSideBottom(i,c)>0)break;h.IsBlock()||this.checkSideBottom(i,c)<=0&&(l=!0)}if(r&&l){if(t)this.ProcessBoardCell.setCell(i,c,null),this.ProcessBoardCell.setCell(i,a,r),r.getComponent("Cell").row=a;s.push(r);break}if(this.checkSideTop(i,c)>0)break}}s.length>0&&e.push(s)}},topUpCell:function(e){for(var t=0;t<n;t++){for(var i=[],s=o-1;s>=0&&!this.ProcessBoardCell.getCell(t,s)&&!(this.checkSideTop(t,s)>0);--s){var a=null;(a=this.dropPropCell(t,s))||(a=this.spawnCells.randomSpawnCell(t,s)),a&&i.push(a)}i.length>0&&e.push(i)}},openBottomBox:function(){for(var e=[],t=0;t<n;t++){var i=this.ProcessBoardCell.getCell(t,0);if(i){var o=i.getComponent("Cell");o.celltype===c.DropBottomBox&&o.IsBlockCoverRemoved()&&e.push(i)}}if(e.length>0)for(var s=0;s<e.length;s++){var r=e[s],h=r.getComponent("Cell").celltype;a.showBaby(r.parent,r.position),this.board.removeCell(r),l.instance.updateCell(h,1)}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",Utils:"Utils"}],DropFromSide:[function(e,t,i){"use strict";cc._RF.push(t,"d17e3uG/wRLwYHlepg405lF","DropFromSide");var o=e("Utils").NUMROWS,n=e("Utils").NUMCOLUMNS,s=(e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT,e("Utils")),a=(e("EnumDefine").CellType,e("Game"),cc.v2());cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell")},start:function(){},checkColumnBlocks:function(e,t){for(var i=t;i<o;i++){var n=this.ProcessBoardCell.getCell(e,i);if(n)if(n.getComponent("Cell").IsBlock())return!0;var s=this.ProcessBoardCell.getSideCell(e,i);if(s){var a=s.getComponent("SideCell");if(a&&a.sideTNum()>0)return!0;if(a&&a.sideBNum()>0)return!0}}return!1},GetFillCell:function(e,t){var i=this.ProcessBoardCell.getCell(e,t);if(i){var o=!0,n=i.getComponent("Cell"),s=n.IsBlock();if(!n.fillHoled&&!s&&!n.IsKey()){var a=this.ProcessBoardCell.getSideCell(e,t);if(a)a.getComponent("SideCell").sideBNum()>0&&(o=!1);if(o)return i}}return null},searchRightBottom:function(e,t){for(var i=t,o=e;o<n&&i>=0;o+=1,i-=1){if(this.ProcessBoardCell.getCell(o,i))break}return[o-1,i+1]},searchLeftBottom:function(e,t){for(var i=t,o=e;o>=0&&i>=0;o-=1,i-=1){if(this.ProcessBoardCell.getCell(o,i))break}return[o+1,i+1]},fillSideHoles:function(){var e=0,t=0,i=this.getHoleslist();if(i.length>0)for(var o=0;o<i.length;o++){for(var n=i[o],c=0,l=0;l<n.length;l++){var r=n[l],h=r.position,u=r.getComponent("Cell"),p=u.celltype,d=s.DropCellPosition(p,u.column,u.row,this.node.width,this.node.height),f=.15*c;c+=1,d.sub(h,a);var m=a.mag()/100*.1;e=Math.max(e,m+f),u.moveTo(f+t,m,.1,d)}t+=.05}return e+t},getHoleslist:function(){for(var e=[],t=n-1;t>=0;t--){for(var i=[],s=0;s<o-1;s++){this.ProcessBoardCell.getCell(t,s)||this.checkColumnBlocks(t,s)&&this.fillBlockHole(i,t,s)}i.length>0&&e.push(i)}return e},fillBlockHole:function(e,t,i){for(var s=!1,a=t+1,c=i+1;a<n&&c<o;){var l=this.ProcessBoardCell.getCell(a,c);if(l){var r=l.getComponent("Cell");if(r.IsBlock()||r.IsKey())break}if(l=this.GetFillCell(a,c)){var h=this.searchLeftBottom(a-1,c-1),u=h[0],p=h[1];this.ProcessBoardCell.setCell(a,c,null),this.ProcessBoardCell.setCell(u,p,l);var d=l.getComponent("Cell");d.row=p,d.column=u,d.fillHoled=!0,e.push(l),s=!0}a+=1,c+=1}if(s)return!0;for(a=t-1,c=i+1;a>=0&&c<o;){var f=this.ProcessBoardCell.getCell(a,c);if(f){var m=f.getComponent("Cell");if(m.IsBlock()||m.IsKey())break}if(f=this.GetFillCell(a,c)){var v=this.searchRightBottom(a+1,c-1),g=v[0],C=v[1];this.ProcessBoardCell.setCell(a,c,null),this.ProcessBoardCell.setCell(g,C,f);var _=f.getComponent("Cell");_.row=C,_.column=g,_.fillHoled=!0,e.push(f)}a-=1,c+=1}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",Utils:"Utils"}],EnumDefine:[function(e,t,i){"use strict";cc._RF.push(t,"7650b51u9ZMDKSLy0dY8S+o","EnumDefine");var o=cc.Enum({Red:0,Purble:1,Orange:2,ScoreRed:3}),n=cc.Enum({Cell1:0,Cell2:1,Cell3:2,Cell4:3,Cell5:4}),s=cc.Enum({Idle:0,Ready:1,Bonustime:2,Crazy:3,TimeUp:4}),a=cc.Enum({Prop:0,Coin:1,Diamond:2,Skill:3,UnKnown:-1}),c=cc.Enum({FruitJuice:0,BombEffect1:1}),l=cc.Enum({Normal:0,AttackAddtion:1,Defence:2}),r=cc.Enum({NormalFight:0,BossFight:1,UnKnown:-1}),h=cc.Enum({NormalRemove:1,DropBottomRemove:2,SkillRemove:3,NotRemove:4}),u=cc.Enum({Cell1:0,Cell2:1,Cell3:2,Cell4:3,Cell5:4,ClearBomb:5,DropBox:6,Chest:7,Step:8,Block:9}),p=cc.Enum({Left:0,Right:1,Top:2,Bottom:3,LeftUpper:5,RightUpper:6,LeftLower:7,RightLower:8,UnKnown:-1}),d=cc.Enum({Cell1:0,Cell2:1,Cell3:2,Cell4:3,Cell5:4,UnKnown:1e3}),f=cc.Enum({Role1:50,Role2:51,Role3:52,Role4:53,Role5:54,Pet1:1,Pet2:2,Pet3:3,Pet4:4,Pet5:5,Pet6:6,Pet7:7,Pet8:8,Pet9:9,Pet10:10,Pet11:11,Pet12:12,Pet13:13,Pet14:14,Pet15:15,Pet16:16,UnKnown:1e3}),m=cc.Enum({Cell1:0,Cell2:1,Cell3:2,Cell4:3,Cell5:4,RXCellType:7,One_Horinal:20,One_Vertical:21,One_XCross:22,One_PrismBomb:23,One_Brush:24,SOne_TwoHorinal:101,SOne_TwoVertical:102,SOne_Bomb:103,Two_Horinal:30,Two_Vertical:31,Two_XCross:32,Two_PrismBomb:33,Two_Brush:34,STwo_TwoHorinal:104,STwo_TwoVertical:105,STwo_Flash:106,Three_Horinal:40,Three_Vertical:41,Three_XCross:42,Three_PrismBomb:43,Three_Brush:44,SThree_TwoHorinal:107,SThree_TwoVertical:108,SThree_Posion:109,Four_Horinal:50,Four_Vertical:51,Four_XCross:52,Four_PrismBomb:53,Four_Brush:54,SFour_TwoHorinal:110,SFour_TwoVertical:111,SFour_Point:112,Five_Horinal:60,Five_Vertical:61,Five_XCross:62,Five_PrismBomb:63,Five_Brush:64,SFive_TwoHorinal:113,SFive_TwoVertical:114,SFive_SameColor:115,Salive:200,Weeds:201,Fence:202,Stakes:203,KeyUp:204,KeyDown:205,KeyLeft:206,KeyRight:207,Chest:208,BlockDiamond:209,DropBottomBox:210,BlockSide:211,BlockCover:212,SpinKey:213,NoneCell:214,SolidCell:215,ClearBombProp:216,UnKnown:1e3}),v=cc.Enum({Actor1:0,Actor2:1,Actor3:2,Actor4:3,Actor5:4,UnKnown:-1}),g=cc.Enum({BattleCamera:0,SkyCamera:1,MidOneCamera:2}),C=cc.Enum({kHorinal:0,kVertical:1}),_=cc.Enum({Win:0,Lose:1,TimeUp:2,Fighting:3,UnKnown:4}),S=cc.Enum({Main:0,Map:1,Story:2}),b=cc.Enum({Coin:0,Diamond:1,PetA:2,PetB:3,DoubleSpin:4,SpinKey:5,UnKnown:10}),k=cc.Enum({Farm1:10001,Farm2:10002,Farm3:10003,Forest1:20001,Forest2:20002,Forest3:20003,Snow1:30001,Snow2:30002,Snow3:30003,Volcano1:40001,Volcano2:40002,Volcano3:40003});var y=cc.Enum({Salive:0,UnKnown:-1});t.exports={CellType:m,PetRoleSkillType:f,CellGroupType:d,CellBlockType:h,ActorType:v,CameraType:g,ChestType:a,Direction:C,SpinType:b,PetInfo:function(){this.petid=-1,this.attack=10},LevelResult:_,EnterKind:S,GameStages:k,FightKind:r,CellsRelativeDir:p,DrawlineKind:l,RemoveCellEffect:c,CellAnimationType:s,LevelEditorID:u,HurtFont:o,MonsterSkillType:y,MonsterShieldType:n},cc._RF.pop()},{}],EveryDayLogin:[function(e,t,i){"use strict";cc._RF.push(t,"d9a1f6yJjhAeZOFC5TJ3PGT","EveryDayLogin"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],Exploration:[function(e,t,i){"use strict";cc._RF.push(t,"d2d62sH3OxHAY07fLnRqz1Q","Exploration");var o=e("BaseUI"),n=e("Utils"),s=e("LocalStorage"),a=e("EnumDefine").LevelResult;cc.Class({extends:o,properties:{stage_title:cc.Label,exploration_title:cc.Label,explorationDesri:cc.Label,midbk:cc.Node,levelNodes:{default:[],type:cc.Node},blueBtn:{default:null,type:cc.SpriteFrame},grayBtn:{default:null,type:cc.SpriteFrame},redBtn:{default:null,type:cc.SpriteFrame},greenBtn:{default:null,type:cc.SpriteFrame},FlagNode:cc.Node},onLoad:function(){this.stageID=-1,this.explorationID=-1,this.itemID=-1,this.closeFunc=null,this.unlockNextExploration=null,this.oneStageExplorationCnt=1,this.oneExplorationItemCnt=1,this.oneItemCnt=5,this.levelIDlist=[],this.MapStage=null,this.Flag=this.FlagNode.getComponent("Flag"),this.FlagNode.active=!1,this.scaleShow(this.node,null)},init:function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.MapStage=a,this.stageID=e,this.explorationID=t,this.lastExplorationID=i,this.itemID=o,this.closeFunc=n,this.explorationID<this.lastExplorationID?this.FlagNode.active=!1:this.FlagNode.active=!0;for(var c=0;c<=this.levelNodes.length;c++){var l=this.levelNodes[c];if(l){var r=l.getComponent("LevelNode");if(r){var h=(e-1)*(this.oneStageExplorationCnt*this.oneExplorationItemCnt*this.oneItemCnt)+(t-1)*(this.oneExplorationItemCnt*this.oneItemCnt)+c*(o-1)+c+1,u=s.instance.getStoryLevelData(h),p=s.instance.getLevelStars(h),d=!0;u&&(d=u.lock),r.init(h,e,t,d,p),this.levelIDlist.push(h)}}}this.initLevels(),this.nextlevel()},initLevels:function(){for(var e=-1,t=0;t<this.levelIDlist.length;t++){var i=this.levelIDlist[t],o=s.instance.getStoryLevelData(i);if(o&&o.lock||!o){e=i-1,this.Flag.init(t-1);break}}-1===e&&(e=this.levelIDlist[this.levelIDlist.length-1],this.Flag.init(this.levelIDlist.length-1)),this.lastUnlockID=e;for(var n=0;n<this.levelIDlist.length;n++){var a=this.levelIDlist[n],c=s.instance.getStoryLevelData(a),l=this.levelNodes[n];if(c&&!c.lock&&(this.unlockNode(l,a,!1),a<e?this.ChangeBtn(l,this.greenBtn):this.ChangeBtn(l,this.redBtn)),c&&c.lock||!c){var r=l.getComponent("cc.Button");r&&(r.interactable=!1)}}},nextlevel:function(){var e=n.levelResultData;if(e){e.stageID,e.explorationID;var t=e.levelID,i=this.getlevelNode(t);if(i){var o=this.levelIDlist.indexOf(t),c=this.levelIDlist.indexOf(this.lastUnlockID);switch(e.levelResult){case a.Win:var l=s.instance.getLevelStars(t);if(n.passLevelStars>l&&(l=n.passLevelStars,this.showWinStars(i,t,l)),this.lastUnlockID>t||this.lastExplorationID>this.explorationID)return;var r=function(){this.ChangeBtn(i,this.greenBtn);var e={};if(e.levelID=t+1,e.lock=!1,s.instance.setStoryLevelData(e),(i=this.getlevelNode(t+1))&&(this.unlockNode(i,t+1,!0),this.ChangeBtn(i,this.redBtn)),o+1>=this.oneItemCnt){var n=function(){this.MapStage.winUnlockExploration(this.explorationID+1)}.bind(this);this.unlockNextExploration=n}}.bind(this);c+1>=this.oneItemCnt?r&&r():this.Flag.nextlevel(r);break;case a.Lose:this.ChangeBtn(null,this.grayBtn)}}}},ChangeBtn:function(e,t){e.getComponent("cc.Sprite").spriteFrame=t},unlockNode:function(e,t){var i=e.getChildByName("lock"),o=e.getChildByName("level"),n=e.getComponent("cc.Button");if(n&&(n.interactable=!0),o){o.active=!0;var s=o.getComponent("cc.Label");s&&(s.string=t+"")}i&&(i.active=!1)},showWinStars:function(e,t,i){e.getComponent("LevelNode").showWinStar(i),s.instance.setLevelStars(t,i)},showStars:function(e,t){},getlevelNode:function(e){for(var t=0;t<this.levelIDlist.length;t++){if(this.levelIDlist[t]===e)return this.levelNodes[t]}return null},onBtnBackClicked:function(){var e=function(){this.closeFunc&&this.closeFunc(),this.unlockNextExploration&&this.unlockNextExploration(),n.levelResultData=null,this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,e)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],FightUI:[function(e,t,i){"use strict";cc._RF.push(t,"530910GpJdFIqaHhaC9A3/3","FightUI");e("JsonData"),e("LocalStorage"),e("EnumDefine").ActorType;var o=e("Utils"),n=e("EnumDefine").CellType,s=e("EnumDefine").LevelEditorID,a=e("EnumDefine").LevelResult;e("RPGManager"),e("EnumDefine").FightKind;cc.Class({extends:cc.Component,properties:{coin:{default:null,type:cc.SpriteFrame},coinlabel:{default:null,type:cc.Label},diamondlabel:{default:null,type:cc.Label},scorelabel:{default:null,type:cc.Label},steplabel:{default:null,type:cc.Label},wavelabel:{default:null,type:cc.Label},bossTargetLabel:{default:null,type:cc.Label},stepbk:cc.Node,leftbk:cc.Node,timeBar:cc.ProgressBar,gole:cc.Node,goleMonster:cc.Node,goleCell:cc.Node,goleDropBox:cc.Node,goleSp:cc.Node,combo:cc.Node},ctor:function(){this.StageType=0,this.bossTime=200,this.timeDt=0,this.timeDelay=1,this.bossTimeOver=!1,this.startTimeUpdate=!1},onLoad:function(){this.coinlabel.string="0",this.diamondlabel.string="0",this.scorelabel.string="0",this.coinVal=0,this.diamondVal=0,this.scoreVal=0,this.playSteps=0,this.monsterTarget={},this.cellTargets={},this.goleMonster.active=!1,this.goleCell.active=!1,this.goleDropBox.active=!1,this.goleSp.active=!1,this.stepbk.active=!0,this.timeBar.node.active=!1,this.bossTargetLabel.node.active=!1;o.levelID,o.levelData.StageType},showCombo:function(e,t){if(this.combo&&(this.combo&&(this.combo.active=t),e)){var i=combo.getChildByName("num");if(i)i.getComponent("cc.Label").string=e+""}},showGole:function(){if(null!==o.LevelEditorLevelGoles){var e=o.LevelEditorLevelGoles;this.showGoleData(e)}else this.showGoleFromXls(o.levelData)},showGoleFromXls:function(e){var t={};t[n.Cell1]=e.TomatoNum,t[n.Cell2]=e.EggplantNum,t[n.Cell3]=e.OrangeNum,t[n.Cell4]=e.AppleNum,t[n.Cell5]=e.PeachNum,t[n.Chest]=e.DemandTreasure;var i=e.WaveEnemyID,o=i.length;";"===i[o-1]&&(i=i.substring(0,o-1));var s=i.split(";").length,a={};a.StepNum=e.playSteps,a.WaveNum=s,a.GoleCells=t,this.showGoleData(a)},showGoleData:function(e){var t=e.WaveNum,i=e.GoleCells,o=i[s.Step];this.playSteps=o,this.steplabel.string=this.playSteps+"";var n=0;if(t>0){var a=cc.instantiate(this.goleMonster);a.active=!0,a.parent=this.leftbk,a.addComponent(cc.Widget);var c=a.getComponent(cc.Widget);c.left=-33,c.top=33,c.isAlignTop=!0,c.isAlignLeft=!0,c.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE,n+=1;var l=a.getChildByName("num").getComponent("cc.Label");l.string=t+"",this.monsterTarget.num=t,this.monsterTarget.label=l}for(var r in i){var h=i[r];if(h>0){var u=parseInt(r);switch(u){case s.Cell1:case s.Cell2:case s.Cell3:case s.Cell4:case s.Cell5:this.spawncell(u,h,-33,33,n,50),n+=1;break;case s.DropBox:this.spawnDropBox(u,h,-33,33,n,50),n+=1;break;case s.ClearBomb:this.spawnSp(u,"bomb",h,-33,33,n,50),n+=1;break;case s.Block:this.spawnSp(u,"wood1",h,-33,33,n,50),n+=1;break;case s.Chest:this.spawnSp(u,"chest1",h,-33,33,n,50),n+=1}}}},spawncell:function(e,t,i,n,s,a){var c=cc.instantiate(this.goleCell);c.active=!0,c.parent=this.leftbk,c.position=cc.v2(i,n-s*a),c.addComponent(cc.Widget);var l=c.getComponent(cc.Widget);l.left=i,l.top=n+s*a,l.isAlignTop=!0,l.isAlignLeft=!0,l.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE;var r=o.getCellName(e),h=c.getChildByName("target");h.scale=.4;var u="spine/fruite/"+r;cc.loader.loadRes(u,sp.SkeletonData,function(e,t){e&&cc.error(e),h.getComponent("sp.Skeleton").skeletonData=t});var p=c.getChildByName("num").getComponent("cc.Label");p.string=t+"";var d={};d.num=t,d.label=p,this.cellTargets[e]=d},spawnDropBox:function(e,t,i,o,n,s){var a=cc.instantiate(this.goleDropBox);a.active=!0,a.parent=this.leftbk,a.position=cc.v2(i,o-n*s),a.addComponent(cc.Widget);var c=a.getComponent(cc.Widget);c.left=i,c.top=o+n*s,c.isAlignTop=!0,c.isAlignLeft=!0,c.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE;var l=a.getChildByName("target");l.scale=.35;cc.loader.loadRes("spine/baby/lockbaby",sp.SkeletonData,function(e,t){e&&cc.error(e),l.getComponent("sp.Skeleton").skeletonData=t});var r=a.getChildByName("num").getComponent("cc.Label");r.string=t+"";var h={};h.num=t,h.label=r,this.cellTargets[e]=h},spawnSp:function(e,t,i,o,n,s,a){var c=cc.instantiate(this.goleSp);c.active=!0,c.parent=this.leftbk,c.position=cc.v2(o,n-s*a),c.addComponent(cc.Widget);var l=c.getComponent(cc.Widget);l.left=o,l.top=n+s*a,l.isAlignTop=!0,l.isAlignLeft=!0,l.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE;var r=c.getChildByName("target");r.scale=.5;var h=r.getComponent("cc.Sprite");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,i){var o=i.getSpriteFrame(t);h.spriteFrame=o});var u=c.getChildByName("num").getComponent("cc.Label");u.string=i+"";var p={};p.num=i,p.label=u,this.cellTargets[e]=p},start:function(){},getSteps:function(){return this.playSteps},checkResult:function(){return this.checkTarget()?this.playSteps>=0?a.Win:a.Lose:this.playSteps<=0?a.Lose:a.Fighting},checkTarget:function(){var e=!0,t=!0;for(var i in this.cellTargets){if(this.cellTargets[i].num>0){e=!1;break}}return this.monsterTarget.num>0&&(t=!1),e&&t},updateStep:function(e){this.playSteps+=e,this.playSteps<0&&(this.playSteps=0),this.steplabel.string=this.playSteps+""},updateWave:function(e){this.monsterTarget.num-=e,this.monsterTarget.num<0&&(this.monsterTarget.num=0);var t=this.monsterTarget.num;this.monsterTarget.label.string=t+""},updateCell:function(e,t){var i=e=parseInt(e);switch(e){case n.Cell1:case n.Cell2:case n.Cell3:case n.Cell4:case n.Cell5:i=e;break;case n.ClearBombProp:i=s.ClearBomb;break;case n.Chest:i=s.Chest;break;case n.DropBottomBox:i=s.DropBox;break;case n.Weeds:case n.Fence:case n.Stakes:i=s.Block}for(var o in this.cellTargets)if(i===(o=parseInt(o))){var a=this.cellTargets[o];a.num-=t,a.num<0&&(a.num=0),a.label.string=a.num+"",this.cellTargets[o]=a}},updateRemoveCells:function(e){var t=function(e){var t=o.levelResultData,i=e.Coin,n=e.Integral;this.scoreVal+=n,this.scorelabel.string=this.scoreVal+"",t.score=this.scoreVal,this.coinVal+=i,this.coinlabel.string=this.coinVal+"",t.coinNum=this.coinVal}.bind(this);this.loadLineHarvestData(e,t)},updateCoin:function(e){this.coinVal+=e,this.coinlabel.string=this.coinVal+"",o.levelResultData.coinNum=this.coinVal},updateDiamond:function(e){this.diamondVal+=e,this.diamondlabel.string=this.diamondVal+"",o.levelResultData.diamondNum=this.diamondVal},updateScore:function(e){this.scoreVal+=e,this.scorelabel.string=this.scoreVal+"",o.levelResultData.score=this.scoreVal},addBossTime:function(e){this.timeBar.progress+=.3,this.bossTimeOver=!1,this.startTimeUpdate=!0},getBossTimeOver:function(){return this.bossTimeOver},resumeTimeUpdate:function(){this.startTimeUpdate=!0},onBtnPauseClicked:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/PauseUI",function(e,i){var o=cc.instantiate(i);o&&(o.parent=t,o.active=!0)});var i=o.fightSceneAudioID;cc.audioEngine.pause(i)},loadLineHarvestData:function(e,t){cc.loader.loadRes("json/LineHarvest",function(i,o){for(var n=o.json,s=0;s<n.length;s++){var a=n[s];if(e===parseInt(a.Line)){t&&t(a);break}}})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],Flag:[function(e,t,i){"use strict";cc._RF.push(t,"02b79Z3kupANK2Rob0DLZCo","Flag"),cc.Class({extends:cc.Component,properties:{tipNodes:{default:[],type:cc.Node},levelNodes:{default:[],type:cc.Node},flag:cc.Node},onLoad:function(){this.index=0},start:function(){},init:function(e){var t=this.levelNodes[e];if(t){this.tipNodes[3*e];this.node.position=cc.v2(t.x+t.width/2,t.y+t.height/2),this.index=e}},nextlevel:function(e){var t=this.index,i=(this.tipNodes[3*t+0],this.tipNodes[3*t+1]),o=this.tipNodes[3*t+2],n=[cc.v2(i.x,i.y),cc.v2(o.x,o.y)],s=cc.cardinalSplineTo(2,n,0),a=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(s,a))}}),cc._RF.pop()},{}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"57ffdIDOCJLb55qK4pUkjBB","Game");e("JsonData");var o=e("LocalStorage"),n=e("Utils"),s=e("RPGManager"),a=e("EnumDefine").LevelResult,c=e("EnumDefine").FightKind,l=cc.Class({extends:cc.Component,properties:{Board:cc.Node,BoxesNode:cc.Node,RPG:cc.Node,UINode:cc.Node,FightUI:cc.Node,Root:cc.Node,bossRoadNode:cc.Node},statics:{instance:null},ctor:function(){this.ActorFiring=!1,this.roleDatas=[],this.battlePetDatas=[],this.levelID=-1,this.fightUI=null},onLoad:function(){l.instance=this,this.levelID=n.levelID;var e=n.levelResultData;e.coinNum=0,e.diamondNum=0,e.levelResult=a.Fighting,this.loadStorageData(),this.playBkAudio=this.Root.getComponent("PlayBkAudios"),this.BossRoad=this.bossRoadNode.getComponent("BossRoad"),this._stageType=n.levelData.StageType,this.poolMng=this.node.getComponent("PoolMng"),this.poolMng.init(),this.Boxes=this.BoxesNode.getComponent("Boxes"),this.Boxes.spawnBoxes(),this.board=this.Board.getComponent("Board"),this.board.init(this),this.fightUI=this.FightUI.getComponent("FightUI")},start:function(){this.createGame(this.levelID),this.fightUI.showGole()},loadFightUI:function(){},loadStorageData:function(){for(var e=[0,1,2,3,4],t=0;t<e.length;t++){var i=e[t],n=o.instance.getRoleData(i);n&&this.roleDatas.push(n)}var s=o.instance.getBattlePetData();for(var a in s){var c=s[a];this.battlePetDatas.push(c)}},createGame:function(e){this.board.spawnCells(e),s.instance.createRPG(e)},showCombo:function(e,t){this.fightUI.showCombo(e,t)},addBossTime:function(e){this.fightUI.addBossTime(e)},getBossTimeOver:function(){return this.fightUI.getBossTimeOver()},resumeTimeUpdate:function(){this.fightUI.resumeTimeUpdate()},updateCoin:function(e){this.fightUI.updateCoin(e)},updateRemoveCells:function(e){this.fightUI.updateRemoveCells(e)},updateDiamond:function(e){this.fightUI.updateDiamond(e)},updateStep:function(e){this.fightUI.updateStep(e)},updateScore:function(e){this.fightUI.updateScore(e)},updateCell:function(e,t){this.fightUI.updateCell(e,t)},updateWave:function(e){this.fightUI.updateWave(e)},checkResult:function(){switch(this._stageType){case c.NormalFight:case c.BossFight:return this.fightUI.checkResult()}},fireOver:function(){this.ActorFiring=!1},removeCell:function(e){this.board.removeCell(e)},getFightUI:function(){return this.fightUI},getSteps:function(){return this.fightUI.getSteps()},stopAudio:function(){this.playBkAudio.stop()},pauseAudio:function(){this.playBkAudio.pause()},playAudio:function(){this.playBkAudio.play()},resumeAudio:function(){this.playBkAudio.resume()},updateBossRoad:function(e){this.BossRoad.updateRoadBar(e)}});cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],HurtCell:[function(e,t,i){"use strict";cc._RF.push(t,"f82edCac5xFm5G/V6C8y7kr","HurtCell");e("JsonData"),e("EnumDefine").CellType,e("EnumDefine").CellBlockType;var o=e("EnumDefine").CellsRelativeDir,n=e("ProcessBoardCell"),s=(e("Board"),e("Utils"),e("Game"),e("Utils").NUMROWS),a=e("Utils").NUMCOLUMNS;cc.Class({extends:cc.Component,properties:{},start:function(){},DieHurt:function(){var e=this.node.getComponent("Cell");if(e.normalCell()){var t=e.row,i=e.column;n.instance.printCells();var c=n.instance.getSideCell(i,t);if(c){var l=c.getComponent("SideCell");if(l){if(l.sideLNum()>0)return void l.hurt(o.Left);if(l.sideRNum()>0)return void l.hurt(o.Right);if(l.sideTNum()>0)return void l.hurt(o.Top);if(l.sideBNum()>0)return void l.hurt(o.Bottom)}}if(i-1>=0){var r=n.instance.getSideCell(i-1,t);if(r){var h=r.getComponent("SideCell");if(h)if(h.sideRNum()>0)return void h.hurt(o.Right)}var u=n.instance.getCell(i-1,t);if(u){var p=u.getComponent("Cell");if(p.IsblockCover())return void p.hurt()}}if(i+1<a){var d=n.instance.getSideCell(i+1,t);if(d){var f=d.getComponent("SideCell");if(f)if(f.sideLNum()>0)return void f.hurt(o.Left)}var m=n.instance.getCell(i+1,t);if(m){var v=m.getComponent("Cell");if(v.IsblockCover())return void v.hurt()}}if(t+1<s){var g=n.instance.getSideCell(i,t+1);if(g){var C=g.getComponent("SideCell");if(C)if(C.sideBNum()>0)return void C.hurt(o.Bottom)}var _=n.instance.getCell(i,t+1);if(_){var S=_.getComponent("Cell");if(S.IsblockCover())return void S.hurt()}}if(t-1>=0){var b=n.instance.getSideCell(i,t-1);if(b){var k=b.getComponent("SideCell");if(k)if(k.sideTNum()>0)return void k.hurt(o.Top)}var y=n.instance.getCell(i,t-1);if(y){var w=y.getComponent("Cell");if(w.IsblockCover())return void w.hurt()}}}}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",Game:"Game",JsonData:"JsonData",ProcessBoardCell:"ProcessBoardCell",Utils:"Utils"}],JsonDataType:[function(e,t,i){"use strict";function o(e){e?this.set(e):(this.BlockId=0,this.BlockName="",this.BlockType=0,this.BlockLv=0)}function n(e){e?this.set(e):(this.ID=0,this.MonsterName="",this.AnimeRes="",this.Life=0,this.Skill=0,this.DeathCoin=0,this.DeathIntegral=0,this.DeathDiamondOdds=0,this.DeathDiamondNumber,this.Atk=0,this.AttriBute=0)}function s(e){e?this.set(e):(this.LevelId=0,this.StageID=0,this.StageType=0,this.WaveEnemyID="",this.MonsterNum=0,this.PlaySteps=0,this.GoldAward=0,this.DiamondAward=10,this.ItemAward="",this.AppleDropWeight=0,this.OrangeDropWeight=0,this.PeachDropWeight=0,this.TomatoDropWeight=0,this.EggplantDropWeight=0,this.AppleNum=0,this.OrangeNum=0,this.PeachNum=0,this.TomatoNum=0,this.EggplantNum=0,this.DemandTreasure=0,this.GameBgm=0)}function a(e){e?this.set(e):(this.LevelID=0,this.Row1="",this.Row2="",this.Row3="",this.Row4="",this.Row5="",this.Row6="",this.Row7="",this.Row8="")}function c(e){e?this.set(e):(this.roletype=-1,this.level=-1,this.attack=-1,this.upgradecoin=0)}function l(e){e&&this.set(e)}function r(e){e?this.set(e):(this.ID=-1,this.Level=-1,this.Attack=-1,this.UpgradeNumber=0,this.Levelupexp=0)}function h(e){e&&this.set(e)}cc._RF.push(t,"b466fvZQNRB+JWJO6mC9w3U","JsonDataType"),o.prototype.set=function(e){this.BlockId=e.BlockId,this.BlockName=e.BlockName,this.Fall=e.Fall,this.BlockType=e.BlockType,this.BlockLv=e.BlockLv},n.prototype.set=function(e){this.ID=e.ID,this.MonsterName=e.MonsterName,this.AnimeRes=e.AnimeRes,this.Life=e.Life,this.Skill=e.Skill,this.DeathCoin=e.DeathCoin,this.DeathIntegral=e.DeathIntegral,this.DeathDiamondOdds=e.DeathDiamondOdds,this.DeathDiamondNumber=e.DeathDiamondNumber,this.Atk=e.Atk,this.AttriBute=e.AttriBute},s.prototype.set=function(e){this.LevelId=e.LevelId,this.StageID=e.StageID,this.StageType=e.StageType,this.WaveEnemyID=e.WaveEnemyID,this.MonsterNum=e.MonsterNum,this.PlaySteps=e.PlaySteps,this.GoldAward=e.GoldAward,this.DiamondAward=e.DiamondAward,this.ItemAward=e.ItemAward,this.AppleDropWeight=e.AppleDropWeight,this.OrangeDropWeight=e.OrangeDropWeight,this.PeachDropWeight=e.PeachDropWeight,this.TomatoDropWeight=e.TomatoDropWeight,this.EggplantDropWeight=e.EggplantDropWeight,this.AppleNum=e.AppleNum,this.OrangeNum=e.OrangeNum,this.PeachNum=e.PeachNum,this.TomatoNum=e.TomatoNum,this.EggplantNum=e.EggplantNum,this.DemandTreasure=e.DemandTreasure,this.GameBgm=e.GameBgm},a.prototype.set=function(e){this.LevelID=e.LevelID,this.Row1=e.Row1,this.Row2=e.Row2,this.Row3=e.Row3,this.Row4=e.Row4,this.Row5=e.Row5,this.Row6=e.Row6,this.Row7=e.Row7,this.Row8=e.Row8},c.prototype.set=function(e){this.roletype=e.roletype,this.level=e.level,this.attack=e.attack,this.upgradecoin=e.upgradecoin},l.prototype.set=function(e){this.ID=e.ID,this.BuyType=e.BuyType,this.BuyPrice=e.BuyPrice,this.skill_chinese=e.skill_chinese},r.prototype.set=function(e){this.ID=e.ID,this.Level=e.Level,this.Attack=e.Attack,this.UpgradeNumber=e.UpgradeNumber,this.Levelupexp=e.Levelupexp},h.prototype.set=function(e){this.ID=e.ID,this.Pic=e.Pic,this.Star=e.Star,this.PetSkill=e.PetSkill,this.china=e.china,this.usa=e.usa},t.exports={LevelTitleData:a,LevelData:s,BlockData:o,MonsterData:n,RoleUpGradeJsonData:c,PetData:r,PetDetailData:h,BuyRoleData:l},cc._RF.pop()},{}],JsonData:[function(e,t,i){"use strict";cc._RF.push(t,"f089fKz3x1AZKuQqtZAUol2","JsonData");var o=e("JsonDataType"),n=o.LevelTitleData,s=(o.BlockData,o.MonsterData),a=o.LevelData,c=o.RoleUpGradeJsonData,l=o.PetData,r=o.BuyRoleData,h=o.PetDetailData,u=cc.Class({extends:cc.Component,properties:{},statics:{instance:null},ctor:function(){this.levelTitleDatas={},this.levelDatas={},this.blockDatas={},this.monsterDatas={},this.buyRoleDatas={},this.roleUpgradeDatas=[],this.petDatas=[],this.petDetails={}},onLoad:function(){u.instance=this},start:function(){},loadPetDetailDatas:function(e){var t=this;if("{}"===JSON.stringify(this.petDetails)){cc.loader.loadRes("json/PetDetail",function(i,o){for(var n=o.json,s=0;s<n.length;s++){var a=n[s],c=new h(a);t.petDetails[a.ID]=c}e(t.petDetails)})}else e(t.petDetails)},loadPetDetailData:function(e,t){var i=this;if("{}"===JSON.stringify(this.petDetails)){cc.loader.loadRes("json/PetDetail",function(o,n){for(var s=n.json,a=0;a<s.length;a++){var c=s[a];i.petDetails[c.ID]=c}var l=i.petDetails[e];t(l)})}else{var o=i.petDetails[e];t(o)}},loadPetDatas:function(e){var t=this;if(0===this.petDatas.length){cc.loader.loadRes("json/Pet",function(i,o){for(var n=o.json,s=0;s<n.length;s++){var a=n[s],c=new l(a);t.petDatas.push(c)}e(t.petDatas)})}else e(t.petDatas)},loadPetData:function(e,t,i){var o=this;if(0===this.petDatas.length){cc.loader.loadRes("json/Pet",function(n,s){for(var a=s.json,c=0;c<a.length;c++){var l=a[c];o.petDatas.push(l)}var r=o.findPetData(e,t);i(r)})}else{var n=this.findPetData(e,t);i(n)}},findPetData:function(e,t){for(var i=0;i<this.petDatas.length;i++){var o=this.petDatas[i];if(o.ID===e&&o.Level===t)return o}},getBuyRoleData:function(e,t){var i=this;if("{}"===JSON.stringify(this.buyRoleDatas)){cc.loader.loadRes("json/BuyRole",function(o,n){for(var s=n.json,a=0;a<s.length;a++){var c=s[a],l=new r(c);i.buyRoleDatas[c.ID]=l}var h=i.buyRoleDatas[e];t(h)})}else{var o=this.buyRoleDatas[e];t(o)}},loadRoleUpgradeData:function(e,t,i){var o=this;if(0==this.roleUpgradeDatas.length){cc.loader.loadRes("json/RoleUpgrade",function(n,s){for(var a=s.json,l=0;l<a.length;l++){var r=a[l],h=new c(r);o.roleUpgradeDatas.push(h)}var u=o.findRoleUpgradeData(e,t);i(u)})}else{var n=this.findRoleUpgradeData(e,t);i(n)}},findRoleUpgradeData:function(e,t){for(var i=0;i<this.roleUpgradeDatas.length;i++){var o=this.roleUpgradeDatas[i];if(o.roletype===e&&o.level===t)return o}},loadLevelTitleData:function(e,t){var i=this;if("{}"===JSON.stringify(i.levelTitleDatas)){cc.loader.loadRes("json/levelTilesData",function(o,s){for(var a=s.json,c=0;c<a.length;c++){var l=a[c],r=new n(l);i.levelTitleDatas[l.LevelID]=r}var h=i.levelTitleDatas[e];t(h)})}else{var o=i.levelTitleDatas[e];t(o)}},loadLevelData:function(e,t){var i=this;if("{}"===JSON.stringify(this.levelDatas)){cc.loader.loadRes("json/level",function(o,n){for(var s=n.json,c=0;c<s.length;c++){var l=s[c],r=new a(l);i.levelDatas[l.LevelId]=r}var h=i.levelDatas[e];t(h)})}else{var o=i.levelDatas[e];t(o)}},loadMonsterData:function(e,t){var i=this;if("{}"===JSON.stringify(this.monsterDatas)){cc.loader.loadRes("json/Monster",function(o,n){for(var a=n.json,c=0;c<a.length;c++){var l=a[c],r=new s(l);i.monsterDatas[l.ID]=r}var h=i.monsterDatas[e];t(h)})}else{var o=i.monsterDatas[e];t(o)}},loadBlockData:function(e,t){var i=this;if("{}"===JSON.stringify(this.blockDatas)){cc.loader.loadRes("json/Block",function(o,n){for(var s=n.json,a=0;a<s.length;a++){var c=s[a];i.blockDatas[c.BlockId]=c}var l=i.blockDatas[e];t(l)})}else{var o=i.blockDatas[e];t(o)}},loadJsonSkillData:function(e,t){cc.loader.loadRes("json/Skill",function(i,o){for(var n=o.json,s=0;s<n.length;s++){var a=n[s];if(e===parseInt(a.ID)){t&&t(a);break}}})}});cc._RF.pop()},{JsonDataType:"JsonDataType"}],LabelLocalized:[function(e,t,i){"use strict";cc._RF.push(t,"e4f88adp3hERoJ48DZ2PSAl","LabelLocalized");var o=e("i18n");cc.Class({extends:cc.Label,properties:{textKey:{default:"TEXT_KEY",multiline:!0,tooltip:"Enter i18n key here",notify:function(){this.string=this.localizedString}},localizedString:{override:!0,tooltip:"Here shows the localized string of Text Key",get:function(){return o.t(this.textKey)},set:function(e){this.textKey=e}}},onLoad:function(){this.localizedString&&(this.string=this.localizedString)}}),cc._RF.pop()},{i18n:"i18n"}],LevelBtn:[function(e,t,i){"use strict";cc._RF.push(t,"4674c9rc2JNEIg1ywfS5LvG","LevelBtn");var o=e("JsonData"),n=e("Utils"),s=e("LocalStorage"),a=(e("EnumDefine"),e("LoadlevelEditor")),c=e("EnumDefine").LevelResult;cc.Class({extends:cc.Component,properties:{blueBtn:{default:null,type:cc.SpriteFrame},grayBtn:{default:null,type:cc.SpriteFrame},redBtn:{default:null,type:cc.SpriteFrame},greenBtn:{default:null,type:cc.SpriteFrame},scrollView:{default:null,type:cc.ScrollView},contentNode:cc.Node,allMapNode:{default:[],type:cc.Node},UI:cc.Node},onLoad:function(){this.maxlevel=80,this.levelsUnit=10,this.oneMapSize=cc.size(640,1609),this.content=this.scrollView.content,this.lastUnlockID=-1},start:function(){},initLevels:function(){var e=1,t=0;for(t=1;t<=this.maxlevel;t++){var i=s.instance.getStoryLevelData(t);if(i&&i.lock||!i){e=t-1;break}}for(t=1;t<=this.maxlevel;t++){var o=this.getlevelNode(t);if(o){var n=s.instance.getStoryLevelData(t);if(n&&n.lock||!n){var a=o.getChildByName("lock");o.getChildByName("levelID").active=!1,a.active=!0;var c=o.getComponent("cc.Button");c&&(c.interactable=!0)}else this.unlockNode(o,t,!1),t<e?this.ChangeBtn(o,this.greenBtn):this.ChangeBtn(o,this.redBtn);this.addBoss(o,t);var l=s.instance.getLevelStars(t);this.showStars(o,l)}}this.setMapContentSize(e),this.lastUnlockID=e;var r=this.getlevelNode(e);if(r){var h=r.position;this.contentNode.position=cc.v2(0,50-h.y)}},setMapContentSize:function(e){var t=0,i=parseInt(e/this.levelsUnit);t=0===parseInt(e%this.levelsUnit)?i-1:i,t+=1;var o=(t=(t+=1)>=8?8:t)*this.oneMapSize.height;this.content.height=o;for(var n=2*t+1;n<this.allMapNode.length;n++){this.allMapNode[n].active=!1}},nextlevel:function(e){var t=parseInt(n.levelID),i=e.levelResult,o=this.getlevelNode(t);if(o)switch(i){case c.Win:var a=s.instance.getLevelStars(t);if(n.passLevelStars>a&&(a=n.passLevelStars,this.showWinStars(o,t)),t>=this.maxlevel)return;if(this.lastUnlockID>t)return void this.jumpScrollView(this.lastUnlockID);if(o){this.ChangeBtn(o,this.greenBtn),t+=1;var l={};l.levelID=t,l.lock=!1,s.instance.setStoryLevelData(l),(o=this.getlevelNode(t))&&(this.unlockNode(o,t,!0),this.ChangeBtn(o,this.redBtn))}break;case c.Lose:this.ChangeBtn(o,this.grayBtn)}},jumpScrollView:function(e){},getlevelNode:function(e){var t=this.node.children;if(e<=t.length)return t[e-1]},ChangeBtn:function(e,t){e.getComponent("cc.Sprite").spriteFrame=t},unlockNode:function(e,t,i){var o=e.getChildByName("lock"),n=e.getChildByName("levelID"),s=e.getComponent("cc.Button");if(s&&(s.interactable=!0),n){n.active=!0;var a=n.getComponent("cc.Label");a&&(a.string=t+"")}o&&(o.active=!1)},showWinStars:function(e,t){var i=e.getChildByName("star1"),o=e.getChildByName("star2"),a=e.getChildByName("star3"),c=[];i&&c.push(i),o&&c.push(o),a&&c.push(a);var l=s.instance.getLevelStars(t),r=n.passLevelStars;if(r>l){var h=r-l;this.UI.getComponent("MapUI").collectStars(t,c,h);for(var u=0;u<h;u++){var p=c[u];p&&(p.active=!0)}}},showStars:function(e,t){var i=e.getChildByName("star1"),o=e.getChildByName("star2"),n=e.getChildByName("star3"),s=[];i&&s.push(i),o&&s.push(o),n&&s.push(n);var a=0;for(t>=s.length&&(t=s.length);a<t;a++){var c=s[a];c&&(c.active=!0)}for(;a<s.length;a++){var l=s[a];l&&(l.active=!1)}},addBoss:function(e,t){var i=this;o.instance.loadLevelData(t,function(t){var n=t.StageType,s=t.WaveEnemyID;if(1===n){var a=s.split(";");if(a.length>0){var c=a[0].split(":");if(c.length>0){var l=c[0],r=parseInt(l);o.instance.loadMonsterData(r,function(t){i.spawnMonster(t,e)})}}}})},spawnMonster:function(e,t){var i="prefab/monster/"+e.AnimeRes;cc.loader.loadRes(i,function(i,o){i&&(cc.error(i),cc.log("monster name:",e.AnimeRes));var n=cc.instantiate(o);n.setAnchorPoint(.5,0),n.addComponent("Monster"),n.parent=t.parent,n.position=t.position,n.x-=n.width;var s=n.getComponent("Monster");s.idle(),s.hideHp()})},onBtnLevelClicked:function(e,t){t=parseInt(t),n.levelID=t,n.levelResultData.levelID=t;var i=cc.director.getScene()._children[0],s=this;cc.loader.loadRes("prefab/LevelGole",function(e,c){var l=cc.instantiate(c);l.parent=i;var r=l.getComponent("LevelGole");r&&o.instance.loadLevelData(t,function(e){n.levelData=e;var i=function(){r.showGole()}.bind(s);a.instance.loadLevels(t,i)})})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LoadlevelEditor:"LoadlevelEditor",LocalStorage:"LocalStorage",Utils:"Utils"}],LevelGole:[function(e,t,i){"use strict";cc._RF.push(t,"25006Jb9d5H44YenC127Ut1","LevelGole");var o=e("JsonData"),n=e("Utils"),s=(e("EnumDefine").CellType,e("LoadlevelEditor"),e("EnumDefine").LevelEditorID);e("EnumDefine").GameStages;cc.Class({extends:cc.Component,properties:{midbk:cc.Node,gole_monster:cc.Node,gole_cell:cc.Node,gole_sp:cc.Node,gole_dropbox:cc.Node,startBtn:cc.Node},onLoad:function(){this.gole_monster.active=!1,this.gole_cell.active=!1,this.gole_sp.active=!1,this.gole_dropbox.active=!1},start:function(){},showGole:function(e){this.explorationID=e;var t=n.LevelEditorLevelGoles,i=t.WaveNum,o=t.GoleCells,a=(o[s.Step],0);for(var c in o){o[c]>0&&(a+=1)}i>0&&(a+=1);var l=this.midbk.getContentSize().height+55*(a-1);this.midbk.height=l,this.startBtn.active=!0,this.startBtn.y=-this.midbk.height-this.startBtn.height/2-5;var r=0;if(i>0){var h=cc.instantiate(this.gole_monster);h.active=!0,h.parent=this.midbk,h.position=cc.v2(11,-75-65*r),r+=1,h.getChildByName("num").getComponent("cc.Label").string=i+""}for(var u in o){var p=o[u];if(p>0){var d=parseInt(u);switch(d){case s.DropBox:this.spawnDropBox(p,11,-75,r,65),r+=1;break;case s.Cell1:case s.Cell2:case s.Cell3:case s.Cell4:case s.Cell5:this.spawncell(d,p,11,-75,r,65),r+=1;break;case s.Block:this.spawnSp("wood1",p,11,-75,r,65),r+=1;break;case s.ClearBomb:this.spawnSp("bomb",p,11,-75,r,65),r+=1;break;case s.Chest:this.spawnSp("chest1",p,11,-75,r,65),r+=1}}}var f=this.midbk.scale;this.midbk.scale=1;var m=cc.scaleTo(.06,1.15*f,1.15*f).easing(cc.easeBounceInOut()),v=cc.scaleTo(.06,1*f,1*f).easing(cc.easeBounceInOut()),g=cc.scaleTo(.06,1.1*f,1.1*f).easing(cc.easeBounceInOut()),C=cc.scaleTo(.06,1*f,1*f).easing(cc.easeBounceInOut()),_=cc.sequence(m,v,g,C,null);this.midbk.runAction(_)},spawncell:function(e,t,i,o,s,a){var c=cc.instantiate(this.gole_cell);c.active=!0,c.parent=this.midbk,c.position=cc.v2(i,o-s*a);var l=n.getCellName(e),r=c.getChildByName("target"),h="spine/fruite/"+l;cc.loader.loadRes(h,sp.SkeletonData,function(e,t){e&&cc.error(e),r.getComponent("sp.Skeleton").skeletonData=t}),c.getChildByName("num").getComponent("cc.Label").string=t+""},spawnDropBox:function(e,t,i,o,n){var s=cc.instantiate(this.gole_dropbox);s.active=!0,s.parent=this.midbk,s.position=cc.v2(t,i-o*n);var a=s.getChildByName("target");cc.loader.loadRes("spine/baby/lockbaby",sp.SkeletonData,function(e,t){e&&cc.error(e),a.getComponent("sp.Skeleton").skeletonData=t}),s.getChildByName("num").getComponent("cc.Label").string=e+""},spawnSp:function(e,t,i,o,n,s){var a=cc.instantiate(this.gole_sp);a.active=!0,a.parent=this.midbk,a.position=cc.v2(i,o-n*s);var c=a.getChildByName("target").getComponent("cc.Sprite");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(t,i){var o=i.getSpriteFrame(e);c.spriteFrame=o}),a.getChildByName("num").getComponent("cc.Label").string=t+""},onBtnCloseClicked:function(e){this.node.removeFromParent()},onBtnStartClicked:function(e){var t=this,i=n.levelID;o.instance.loadLevelData(i,function(e){n.levelData=e,t.loadStoryRes(i,e)})},loadStoryRes:function(e,t){var i=n.GetExplorattionPath(this.explorationID),o=this;cc.loader.loadRes(i,cc.SpriteAtlas,function(e,i){n.StageSpriteAtlas=i,o.enterStory(t)})},enterStory:function(e){cc.audioEngine.pause(n.mainSceneAudioID);e.StageID;var t=n.mainSceneAudioID;cc.audioEngine.stop(t),n.mainSceneAudioID=-1,n.passLevelStars=-1,n.FreeSpinVal=0;cc.director.getScene()._children[0];cc.director.loadScene("scene/Farm")}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LoadlevelEditor:"LoadlevelEditor",Utils:"Utils"}],LevelNode:[function(e,t,i){"use strict";cc._RF.push(t,"6e4178nhetFu5L3ZdbVf1dd","LevelNode");var o=e("JsonData"),n=e("Utils"),s=e("LoadlevelEditor");cc.Class({extends:cc.Component,properties:{levelLabel:cc.Label,lockNode:cc.Node,stars:{default:[],type:cc.Node}},onLoad:function(){this.levelID=-1,this.stageID=-1,this.explorationID=-1,this.lock=!1,this.starcnt=0;for(var e=0;e<this.stars.length;e++){this.stars[e].active=!1}},start:function(){},init:function(e,t,i,o,n){this.levelID=e,this.stageID=t,this.explorationID=i,this.lock=o,this.starcnt=n,this.levelLabel.string=this.levelID+"";for(var s=0;s<n;s++){this.stars[s].active=!0}},onBtnLevelClicked:function(e){var t=parseInt(this.levelID);n.levelID=t;var i={};i.levelID=t,i.stageID=this.stageID,i.explorationID=this.explorationID,n.levelResultData=i;var a=cc.director.getScene()._children[0],c=this;cc.loader.loadRes("prefab/LevelGole",function(e,i){o.instance.loadLevelData(t,function(e){n.levelData=e;var o=function(){var e=cc.instantiate(i);e.parent=a,e.getComponent("LevelGole").showGole(c.explorationID)}.bind(c);s.instance.loadLevels(t,o)})})},showWinStar:function(e){for(var t=0;t<e;t++){var i=this.stars[t];if(i&&!i.active){i.active=!0;var o=i.scale;i.scale=0;var n=cc.scaleTo(.5,o).easing(cc.easeOut(3));i.runAction(n)}}},showflashEffect:function(e,t){cc.loader.loadRes("prefab/flashEffect",function(i,o){var n=cc.instantiate(o);if(n){n.scale=.5,n.parent=e,n.position=t;var s=n.getComponent(cc.Animation);s&&s.play(),n.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf()))}})}}),cc._RF.pop()},{JsonData:"JsonData",LoadlevelEditor:"LoadlevelEditor",Utils:"Utils"}],LoadingBarCtrl:[function(e,t,i){"use strict";cc._RF.push(t,"102a9wU40RJd4SnQqQQzQT9","LoadingBarCtrl");var o=e("i18n");cc.Class({extends:cc.Component,properties:{progressBar:{default:null,type:cc.ProgressBar},progressTips:{default:null,type:cc.Label}},onLoad:function(){this._urls=[],this.resource=null,this.progressBar.progress=0,this._clearAll(),this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.3"),this.node.on(cc.Node.EventType.TOUCH_START,function(){this.resource||cc.loader.load(this._urls,this._progressCallback.bind(this),this._completeCallback.bind(this))},this),cc.profiler.hideStats()},_clearAll:function(){for(var e=0;e<this._urls.length;++e){var t=this._urls[e];cc.loader.release(t)}},_progressCallback:function(e,t,i){this.progress=e/t,this.resource=i,this.completedCount=e,this.totalCount=t},_completeCallback:function(e,t){},update:function(e){if(this.resource){var t=this.progressBar.progress;if(t>=1)return this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.1"),this.progressBar.node.active=!1,this.enabled=!1,void this.loadStages();t<this.progress&&(t+=e),this.progressBar.progress=t,this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.2")+this.resource.id+" ("+this.completedCount+"/"+this.totalCount+")"}},loadStages:function(){cc.loader.loadRes(e,cc.SpriteAtlas,function(e,t){});var e="texture/";cc.loader.loadResDir(folderName,cc.SpriteFrame,function(e,t){cc.log("assets",t)})}}),cc._RF.pop()},{i18n:"i18n"}],LoadingBar:[function(e,t,i){"use strict";cc._RF.push(t,"21ddbSSQDlA76zWhYasyATC","LoadingBar");var o=e("i18n"),n=e("Utils");cc.Class({extends:cc.Component,properties:{progressBar:{default:null,type:cc.ProgressBar},progressTips:{default:null,type:cc.Label}},onLoad:function(){this._loadindex=0,this._urls=[cc.url.raw("resources/texture/UI"),cc.url.raw("resources/texture/Effect"),cc.url.raw("resources/texture/farm"),cc.url.raw("resources/texture/forest"),cc.url.raw("resources/texture/snow"),cc.url.raw("resources/texture/volcano"),cc.url.raw("resources/prefab/Rocket.prefab"),cc.url.raw("resources/bkSounds/MainScene"),cc.url.raw("resources/bkSounds/crazy"),cc.url.raw("resources/bkSounds/boss fight"),cc.url.raw("resources/bkSounds/jazz fight")],this.resource=null,this.progressBar.progress=0,this._clearAll(),this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.3"),this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),this.resource||(cc.loader.load(this._urls,this._progressCallback.bind(this),this._completeCallback.bind(this)),cc.view.enableAntiAlias(!1),cc.debug.setDisplayStats(!1))},_clearAll:function(){for(var e=0;e<this._urls.length;++e){var t=this._urls[e];cc.loader.release(t)}},_progressCallback:function(e,t,i){switch(this.progress=e/t,this.resource=i,this.completedCount=e,this.totalCount=t,e){case 1:n.UISpriteAtals=i;break;case 2:break;case 3:n.FarmStageSpriteAtlas=i;break;case 4:n.ForestStageSpriteAtlas=i;break;case 5:n.SnowStageSpriteAtlas=i;break;case 6:n.VolcanoStageSpriteAtlas=i}},_completeCallback:function(e,t){},update:function(e){if(this.resource){var t=this.progressBar.progress;if(t>=1)return this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.1"),this.progressBar.node.active=!1,this.enabled=!1,this.node.runAction(cc.fadeOut(1)),void this.loadXX();t<this.progress&&(t+=e),this.progressBar.progress=t,this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.2")+this.resource.id+" ("+this.completedCount+"/"+this.totalCount+")"}},loadXX:function(){cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){n.UISpriteAtlas=t,cc.director.loadScene("Main")})}}),cc._RF.pop()},{Utils:"Utils",i18n:"i18n"}],LoadlevelEditor:[function(e,t,i){"use strict";cc._RF.push(t,"da6b88QxLJMCq04eE1djSxH","LoadlevelEditor");e("Utils").NUMROWS,e("Utils").NUMCOLUMNS,e("EnumDefine").CellType,e("JsonData"),e("PoolMng");var o=e("Utils"),n=cc.Class({extends:cc.Component,properties:{},onLoad:function(){n.instance=this},start:function(){},statics:{instance:null},loadLevels:function(e,t){var i,n=cc.director.getScene()._children[0];if(""!==(i=this.getlevelPath(e))){var s=function(e){var i=e.getComponent("levelEditor");if(i){var n=i.readBoardCells(),s=i.readGoles();o.LevelEditorBoardData=n,o.LevelEditorLevelGoles=s,t()}}.bind(this);cc.loader.loadRes(i,function(e,i){e&&cc.error(e);var o=cc.instantiate(i);o.parent=n,o.addComponent("levelEditor"),o.active=!1,o?s(o):t()})}else t()},getlevelPath:function(e){return"levels/"+["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24","level25","level26","level27","level28","level29","level30","level31","level32","level33","level34","level35","level36","level37","level38","level39","level40","level41","level42","level43","level44","level45","level46","level47","level48","level49","level50"][e-1]}});cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",PoolMng:"PoolMng",Utils:"Utils"}],LocalStorage:[function(e,t,i){"use strict";cc._RF.push(t,"d5db7dxwa1DcoULa01a/lbE","LocalStorage");var o=e("JsonData"),n=e("EnumDefine").ActorType,s=e("EnumDefine").CellType,a=cc.Class({extends:cc.Component,properties:{},statics:{instance:null},ctor:function(){},onLoad:function(){a.instance=this},start:function(){},setRoleData:function(e){var t="roledata164"+e.roletype;cc.sys.localStorage.setItem(t,JSON.stringify(e))},getRoleData:function(e){var t="roledata164"+e,i=JSON.parse(cc.sys.localStorage.getItem(t));if(!i&&e===n.Actor1){var s={};return s.roletype=e,s.level=1,s.attack=-1,o.instance.loadRoleUpgradeData(s.roletype+1,s.level,function(e){s.attack=e.attack}),s}return i},setPetData:function(e){var t="petdata164"+e.ID;cc.sys.localStorage.setItem(t,JSON.stringify(e))},getPetData:function(e){var t="petdata164"+e;return JSON.parse(cc.sys.localStorage.getItem(t))},setBattlePetData:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("battlePet164",t)},getBattlePetData:function(){var e=cc.sys.localStorage.getItem("battlePet164");return JSON.parse(e)},setStoryLevelData:function(e){var t="levelKey164:"+e.levelID,i=JSON.stringify(e);cc.sys.localStorage.setItem(t,i)},getStoryLevelData:function(e){var t="levelKey164:"+e,i=cc.sys.localStorage.getItem(t),o=JSON.parse(i);return 1===e?{levelID:1,lock:!1}:o},setExplorationData:function(e){var t="explorationKey164:"+e.ID,i=JSON.stringify(e);cc.sys.localStorage.setItem(t,i)},getExplorationData:function(e){var t="explorationKey164:"+e,i=cc.sys.localStorage.getItem(t),o=JSON.parse(i);return 1===e?{ID:1,lock:!1}:o},setUIBase:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("UIBaseKey10164",t)},getUIBase:function(){var e=cc.sys.localStorage.getItem("UIBaseKey10164"),t=JSON.parse(e);return t||((t={}).coin=2e6,t.diamond=1e5),t},getLevelStepAward:function(e){var t="LevelStepsAward164"+e,i=cc.sys.localStorage.getItem(t);return i&&void 0!==i||(i=!1),i},setLevelStepAward:function(e,t){var i="LevelStepsAward164"+e;cc.sys.localStorage.setItem(i,t)},getBattleGuideRolePetCell:function(){var e=cc.sys.localStorage.getItem("BattleGuideRolePetCell164");return e&&void 0!==e||(e=!1),e},setBattleGuideRolePetCell:function(e){cc.sys.localStorage.setItem("BattleGuideRolePetCell164",e)},getLevelStars:function(e){var t="LevelStars164"+e,i=cc.sys.localStorage.getItem(t);return i&&void 0!==i||(i=0),i=parseInt(i)},setLevelStars:function(e,t){var i="LevelStars164"+e;cc.sys.localStorage.setItem(i,t)},getStarReWard:function(e){var t="StarReWard164"+e,i=cc.sys.localStorage.getItem(t);return i&&void 0!==i||(i=0),i=parseInt(i)},setStarReWard:function(e,t){var i="StarReWard164"+e;cc.sys.localStorage.setItem(i,t)},getDayReWard:function(){var e=cc.sys.localStorage.getItem("DayReWard164");return e&&void 0!==e||(e=1),e=parseInt(e)},setDayReWard:function(e){cc.sys.localStorage.setItem("DayReWard164",e)},getDayReWardDateTime:function(){var e=cc.sys.localStorage.getItem("DayReWardDateTime164"),t=JSON.parse(e);return t&&void 0!==t?t:((t={}).month=-1,t.day=-1,t)},setDayReWardDateTime:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("DayReWardDateTime164",t)},getSetData:function(){var e=cc.sys.localStorage.getItem("SetKey164"),t=JSON.parse(e);return t&&void 0!==t?t:((t={}).musicOnOff=!0,t.soundOnOff=!0,t)},setSetData:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("SetKey164",t)},getFreeSpinVal:function(){var e=cc.sys.localStorage.getItem("FreeSpinKey164");return e&&void 0!==e||(e=3),e=parseInt(e)},setFreeSpinVal:function(e){cc.sys.localStorage.setItem("FreeSpinKey164",e)},getLevelPassed:function(e){var t="LevelPassed164"+e,i=cc.sys.localStorage.getItem(t);return i&&void 0!==i||(i=0),i=parseInt(i)},setLevelPassed:function(e,t){var i="LevelPassed164"+e;cc.sys.localStorage.setItem(i,t)},getPetSkill:function(e){var t="PetSkill164"+e,i=cc.sys.localStorage.getItem(t),o=[];i&&(","===i[i.length-1]&&(i=i.substring(0,i.length-1)),o=i.split(","));for(var n=0;n<o.length;n++)o[n]=parseInt(o[n]);return o},setPetSkill:function(e,t){var i="PetSkill164"+e;cc.sys.localStorage.setItem(i,t)},getRoleSkill:function(e){var t="RoleSkill1164"+e,i=cc.sys.localStorage.getItem(t),o=[];return i?(","===i[i.length-1]&&(i=i.substring(0,i.length-1)),o=i.split(",")):i&&""!==i||0===e&&(o=[s.One_Horinal]),o},setRoleSkill:function(e,t){var i="RoleSkill1164"+e;cc.sys.localStorage.setItem(i,t)}});cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData"}],MainUI:[function(e,t,i){"use strict";cc._RF.push(t,"4c758/jNTpLr69GwewnE8wt","MainUI");e("JsonData");var o=e("Utils"),n=e("EnumDefine"),s=n.LevelResult,a=n.EnterKind;cc.Class({extends:cc.Component,properties:{buttonSet:cc.Button,buttonStart:cc.Button,buttonHelp:cc.Button,buttonRole:cc.Button,buttonPet:cc.Button,mainfront:cc.Node,logo:cc.Node,cloud1:cc.Node,cloud2:cc.Node,cloud3:cc.Node,UIBase:cc.Node},onLoad:function(){this.moveMainFront(),this.cloud1.active=!1,this.cloud2.active=!1,this.cloud3.active=!1,this.uibase=this.UIBase.getComponent("UIBase")},moveMainFront:function(){var e=this,t=cc.moveTo(.5,cc.v2(0,-252)).easing(cc.easeOut(3)),i=cc.callFunc(function(){e.moveClouds(),e.moveLogo()},this);this.mainfront.runAction(cc.sequence(t,i))},moveLogo:function(){var e=cc.moveTo(.2,cc.v2(0,350)).easing(cc.easeBounceInOut());this.logo.runAction(cc.sequence(e,null))},moveClouds:function(){this.cloud1.active=!0,this.cloud2.active=!0,this.cloud3.active=!0;var e=this.cloud1.scale;this.cloud1.scale=0;var t=cc.scaleTo(.5,e).easing(cc.easeOut(3));this.cloud1.runAction(t),e=this.cloud2.scale,this.cloud2.scale=0,t=cc.scaleTo(.5,e).easing(cc.easeOut(3)),this.cloud2.runAction(t),e=this.cloud3.scale,this.cloud3.scale=0,t=cc.scaleTo(.5,e).easing(cc.easeOut(3)),this.cloud3.runAction(t)},start:function(){},onBtnSpinClicked:function(){cc.director.loadScene("SpinChest",function(){var e=cc.director.getScene()._children[0].getComponent("CanvasInit");e&&e.setEnterCode(a.Main)}.bind(this))},onBtnSetClicked:function(){var e=function(){this.buttonSet.interactable=!0}.bind(this);this.buttonSet.interactable=!1;var t=cc.director.getScene()._children[0];if(null===t.getChildByName("set")){var i=this.buttonSet.node,o=i.parent.convertToWorldSpaceAR(i.position);(o=t.convertToNodeSpaceAR(o)).y+=50,cc.loader.loadRes("prefab/set",function(i,n){var s=cc.instantiate(n);s.parent=t,s.position=o,s.active=!0,s.name="set",s.getComponent("Set").show(e)})}else t.getChildByName("set").getComponent("Set").hide(e)},onBtnStartClicked:function(){o.levelID=-1;var e={};e.levelResult=s.UnKnown,e.levelID=-1,o.levelResultData=e,cc.director.loadScene("Map")},onBtnHelpClicked:function(){},onBtnRoleClicked:function(){cc.director.loadScene("ActorUI")},onBtnPetClicked:function(){cc.director.loadScene("PetUI")},onBtnAddCountClicked:function(){},onBtnAddProcessClicked:function(){},onSignInBtnClicked:function(){var e=cc.director.getScene()._children[0],t=this;cc.loader.loadRes("prefab/SignIn",function(i,o){var n=cc.instantiate(o);n&&(n.parent=e,n.getComponent("DayReWard").uibase=t.uibase)})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",Utils:"Utils"}],MapFlag:[function(e,t,i){"use strict";cc._RF.push(t,"163ef6eqBNMG4kvJXNMKX6I","MapFlag"),cc.Class({extends:cc.Component,properties:{tips:cc.Node,explorations:cc.Node},onLoad:function(){this.index=0},start:function(){},init:function(e){var t=this.explorations.children[e];this.node.position=cc.v2(t.x+t.width/2,t.y+t.height/2),this.index=e},nextlevel:function(e){var t=this.index,i=this.tips.children,o=i[3*t+0],n=i[3*t+1],s=i[3*t+2],a=[cc.v2(o.x,o.y),cc.v2(n.x,n.y),cc.v2(s.x,s.y)],c=cc.cardinalSplineTo(3,a,0),l=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(c,l))}}),cc._RF.pop()},{}],MapStage:[function(e,t,i){"use strict";cc._RF.push(t,"d25b4a628ZKe6PNHe3BSwCG","MapStage");var o=e("Utils"),n=e("LocalStorage"),s=e("EnumDefine").LevelResult;cc.Class({extends:cc.Component,properties:{scrollView:{default:null,type:cc.ScrollView},contentNode:cc.Node,allMapNode:{default:[],type:cc.Node},explorationNodes:{default:[],type:cc.Node},FlagNode:cc.Node,CloseTouch:cc.Node,UI:cc.Node},onLoad:function(){this.maxlevel=48,this.levelsUnit=1,this.oneMapSize=cc.size(640,1609),this.content=this.scrollView.content,this.lastUnlockID=-1,this.MapFlag=this.FlagNode.getComponent("MapFlag")},start:function(){this.initExplorations(),this.nextExploration()},initExplorations:function(){var e=-1,t=0;for(t=1;t<=this.maxlevel;t++){var i=n.instance.getExplorationData(t);if(i&&i.lock||!i){e=t-1,this.MapFlag.init(e-1);break}}for(-1===e&&(e=this.maxlevel,this.MapFlag.init(e-1)),t=1;t<=this.maxlevel;t++){var o=this.getExplorationNode(t);if(o){var s=n.instance.getExplorationData(t);if(s&&!s.lock&&this.unlockNode(o,t,!1),s&&s.lock||!s){var a=o.getComponent("cc.Button");a&&(a.interactable=!1)}}}this.setMapContentSize(e),this.lastUnlockID=e;var c=this.getExplorationNode(e);if(c){var l=c.position;this.contentNode.position=cc.v2(0,250-l.y)}},nextExploration:function(){if(o.levelResultData){var e=o.levelResultData;if(e){var t=e.stageID,i=e.explorationID;if(this.getExplorationNode(i))switch(e.levelResult){case s.Win:case s.Lose:this.spawnExploration(t,i)}}}},winUnlockExploration:function(e){var t=this.getExplorationNode(e);if(t&&!(this.lastUnlockID>e)){this.CloseTouch&&(this.CloseTouch.active=!0);var i=function(){var i={};i.ID=e,i.lock=!1,n.instance.setExplorationData(i),this.unlockNode(t,e,!0),this.CloseTouch&&(this.CloseTouch.active=!1)}.bind(this);this.MapFlag.nextlevel(i)}},getExplorationNode:function(e){return e<this.explorationNodes.length?this.explorationNodes[e-1]:null},unlockNode:function(e,t){var i=e.getChildByName("lock"),o=e.getChildByName("levelID"),n=e.getComponent("cc.Button");if(n&&(n.interactable=!0),o){o.active=!0;var s=o.getComponent("cc.Label");s&&(s.string=t+"")}i&&(i.active=!1)},setMapContentSize:function(e){var t=0,i=parseInt(e/this.levelsUnit);t=0===parseInt(e%this.levelsUnit)?i-1:i,t+=1;var o=(t=(t+=1)>=8?8:t)*this.oneMapSize.height;this.content.height=o;for(var n=2*t+1;n<this.allMapNode.length;n++){this.allMapNode[n].active=!1}},spawnExploration:function(e,t){var i=this,o=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/map/Exploration",function(n,s){n&&cc.error(n);var a=cc.instantiate(s);a.parent=o;var c=a.getComponent("Exploration");if(c){var l=function(){var e=o.getChildByName("Mask");e&&(e.active=!1)}.bind(this);c.init(e,t,i.lastUnlockID,1,l,i)}var r=o.getChildByName("Mask");r&&(r.active=!0)})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],MapUI:[function(e,t,i){"use strict";cc._RF.push(t,"ca612+QyO5GqolxSYGIrV8E","MapUI");var o=e("EnumDefine").EnterKind,n=e("Utils"),s=n.ProduceType,a=e("LocalStorage");cc.Class({extends:cc.Component,properties:{chestBox:cc.Node,star:cc.Node,starlabel:cc.Label,chestTip:cc.Node,chestBtn:cc.Button,UIBase:cc.Node,audioStar:{type:cc.AudioSource,default:null}},onLoad:function(){this.maxlevel=80,this.stageStarCnt=0,this.chestTip.active=!1;for(var e=0,t=1;t<=this.maxlevel;t++){var i=a.instance.getLevelStars(t);e+=parseInt(i)}this.starcnt=e,this.starlabel.string=e+"",this.checkOpenChestTip(),this.uibase=this.UIBase.getComponent("UIBase"),this.chestBtn.interactable=!1},start:function(){},checkOpenChestTip:function(){var e=function(e){this.stageStarCnt=e,this.openChestTip()}.bind(this);this.loadScoreReWardData(this.starcnt,e)},addStar:function(e){this.starcnt+=e,this.starlabel.string=this.starcnt+""},openChestTip:function(){this.chestTip.active=!0,this.chestTip.getComponent(cc.Animation).play("arrow"),this.chestBtn.interactable=!0},onOpenChestBox:function(){a.instance.setStarReWard(this.stageStarCnt,1);var e=this;cc.loader.loadRes("prefab/ChestReWard",function(t,i){t&&cc.error(t);var o=cc.instantiate(i);o.parent=e.node.parent,o.position=cc.v2();var n=o.getComponent("ChestReWard"),s=function(){o.removeFromParent(),e.checkOpenChestTip()}.bind(e);e.chestBtn.interactable=!1,e.chestTip.active=!1,n.showChest(e.starcnt,e.uibase,s)})},onBtnBackClicked:function(){cc.director.loadScene("Main")},onBtnRoleClicked:function(){cc.director.loadScene("ActorUI",function(){var e=cc.director.getScene()._children[0].getComponent("CanvasInit");e&&e.setEnterCode(o.Map)}.bind(this))},onBtnPetClicked:function(){cc.director.loadScene("PetUI",function(){var e=cc.director.getScene()._children[0].getComponent("CanvasInit");e&&e.setEnterCode(o.Map)}.bind(this))},collectStars:function(e,t,i){var o=this,c=t.length,l=t[n.randomRangeInt(0,c)];if(l&&void 0!==l){var r=l.parent.convertToWorldSpaceAR(l.position);r=this.node.convertToNodeSpaceAR(r);var h=this.star,u=h.parent.convertToWorldSpaceAR(h.position);(u=this.node.convertToNodeSpaceAR(u)).x-=40;var p=this.node,d=function(){this.addStar(1),this.starAudio()}.bind(this),f=n.produceRandomNodeLineMove(s.Star,i,r,u,p,d),m=cc.callFunc(function(){a.instance.setLevelStars(e,i),o.checkOpenChestTip()},this);this.node.runAction(cc.sequence(cc.delayTime(f),m))}},loadScoreReWardData:function(e,t){cc.loader.loadRes("json/StarReward",function(i,o){for(var n=o.json,s=0;s<n.length;s++){var c=n[s],l=parseInt(c.star);if(e>=l)if(0===a.instance.getStarReWard(l)){t&&t(l);break}}})},starAudio:function(){this.audioStar&&this.audioStar.play()}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],MonsterMove:[function(e,t,i){"use strict";cc._RF.push(t,"e4be7UIDSdHwaG5aFo099X0","MonsterMove"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._movedt=0,this._moveDelay=.1,this._moveUnitVal=5,this.canMove=!1},start:function(){},setMove:function(e){this.canMove=e},move:function(e){(this._movedt+=e,this._movedt>=this._moveDelay)&&(this._movedt=0,this.node.position.x+=this._moveUnitVal)},update:function(e){this.canMove&&this.move(e)}}),cc._RF.pop()},{}],MonsterShield:[function(e,t,i){"use strict";cc._RF.push(t,"b4022szjOlPkLJs8KyTRXT1","MonsterShield");e("EnumDefine").CellType,e("EnumDefine").MonsterSkillType;var o=e("EnumDefine").MonsterShieldType;e("RPGManager"),e("Utils"),e("CameraManager"),e("PoolMng"),e("PlayFightAudio"),e("ProcessBoardCell");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.shieldDatalist=[]},onDisable:function(){},start:function(){},init:function(e){if(e&&0!==e.length)for(var t=10,i=0;i<e.length;i++){var o=e[i];this.initShieldData(i,o,t),t-=1}},initShieldData:function(e,t,i){if(t){this.shieldData=t;var n="prefab/monster/",s="";switch(t.type){case o.Cell1:s="RedMonsterShield";break;case o.Cell2:s="BlueMonsterShield";break;case o.Cell3:s="YellowMonsterShield";break;case o.Cell4:s="GreenMonsterShield";break;case o.Cell5:s="WhiteMonsterShield"}n+=s;var a=this;cc.loader.loadRes(n,function(e,o){var n=cc.instantiate(o);if(n){n.zIndex=i;var s=a.node.getComponent("Monster");n.parent=a.node;var c=s.skeleton.width/n.width,l=s.skeleton.height/n.height;n.scale=.8*Math.min(c,l),n.position=cc.v2(s.skeleton.x-n.width*n.scale,s.skeleton.y+n.height*n.scale/2);var r=n.getChildByName("num").getComponent("cc.Label");r.string=t.num+"";var h=a.node.convertToWorldSpaceAR(n.getPosition());h=a.node.parent.convertToNodeSpaceAR(h);var u={};u.label=r,u.type=t.type,u.node=n,u.num=t.num,u.pos=h,a.shieldDatalist.push(u)}})}},showflashEffect:function(e,t,i,n){var s="prefab/particle/",a="";switch(i){case o.Cell1:a="RedDefencekillDustParticle";break;case o.Cell2:a="BlueDefencekillDustParticle";break;case o.Cell3:a="YellowDefencekillDustParticle";break;case o.Cell4:a="GreenDefencekillDustParticle";break;case o.Cell5:a="WhiteDefencekillDustParticle"}s+=a,cc.loader.loadRes(s,function(i,o){var s=cc.instantiate(o);s&&(s.zIndex=2,s.scale=.6*n,s.parent=e,s.position=t,s.runAction(cc.sequence(cc.delayTime(.5),cc.removeSelf())))})},isHaveShield:function(){return 0!==this.shieldDatalist.length},attackShield:function(e,t){if(this.shieldDatalist.length>0){var i=this.shieldDatalist[0];if(i&&i.type===e){var o=i.num;if(o=(o-=t)<0?0:o,i.num=o,i.label.string=o+"",o<=0&&(this.shieldDatalist.shift(),this.destroyShiled(i.node,i.type),this.shieldDatalist.length>0)){var n=this.shieldDatalist[0],s=n.node.scale;n.node.scale=0;var a=cc.scaleTo(.25,1.1*s,1.1*s).easing(cc.easeOut(5)),c=cc.scaleTo(.25,1*s,1*s).easing(cc.easeOut(5)),l=cc.sequence(a,c);n.node.runAction(l)}return!0}}return!1},destroyShiled:function(e,t){var i=this.node.parent,o=this.node.convertToWorldSpaceAR(e.getPosition());o=this.node.parent.convertToNodeSpaceAR(o);var n=e.scale;this.showflashEffect(i,o,t,n),e.removeFromParent()},getShieldData:function(){return this.shieldDatalist.length>0?this.shieldDatalist[0]:null}}),cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",ProcessBoardCell:"ProcessBoardCell",RPGManager:"RPGManager",Utils:"Utils"}],MonsterSkill:[function(e,t,i){"use strict";cc._RF.push(t,"88500GUwdNMWqxYDjSQDZ1E","MonsterSkill");var o=e("EnumDefine").CellType,n=e("EnumDefine").MonsterSkillType,s=(e("EnumDefine").MonsterShieldType,e("RPGManager"));e("Utils"),e("CameraManager"),e("PoolMng"),e("PlayFightAudio"),e("ProcessBoardCell");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._skillData=null,this.skillDt=0,this.skillDelay=0,this.skillDamage=0,this._fullhp=0,this._damage=0,this._monsterSkillType=n.UnKnown,this._triggerSkill=!1,this._triggerSkillVal=-1},start:function(){},init:function(e,t){this._fullhp=t,this._monsterSkillType=e;var i=function(e){this._skillData=e;var t=this._triggerSkillVal=this._skillData.ActiveConditionType;3===t?this.skillDelay=this._skillData.ConditionPara:2===t&&(this.skillDamage=this._skillData.ConditionPara)}.bind(this);this.loadMonsterSkillData(e,i)},loadMonsterSkillData:function(e,t){cc.loader.loadRes("json/MonsterSkill",function(i,o){for(var n=o.json,s=0;s<n.length;s++){var a=n[s];a.SkillId===e&&t&&t(a)}})},listernHurt:function(e){2===this._triggerSkillVal&&(this._damage+=e,100*(1*this._damage/this._fullhp)>=100-this.skillDamage&&(this._triggerSkill=!0))},IsHaveSkill:function(){return this._triggerSkill},checkSkill:function(e){if(this._triggerSkill)return this._damage=0,this._triggerSkill=!1,void this.triggerSkill(e);e&&calblack()},triggerSkill:function(e){e&&e()},spawnSalive:function(e,t){var i=this;cc.loader.loadRes("prefab/cell/Salive",function(o,n){o&&cc.error(o);var a=cc.instantiate(n),c=s.instance.boardNode;a.parent=c,a.scale=1.3,a.anchorX=0,a.anchorY=0;var l=s.instance.getWorldPos(i.node);l=a.parent.convertToNodeSpaceAR(l),a.x=l.x,a.y=l.y,a.group="UI",i.shootWeapon(e,a,t)})},shootWeapon:function(e,t,i){var n=e.position,a=Math.abs(e.width-t.width),c=Math.abs(e.height-t.height);n.x+=a,n.y+=c;var l=cc.v2(),r=t.position;n.sub(r,l);var h=cc.moveTo(.25,n).easing(cc.easeIn(3)),u=cc.callFunc(function(){s.instance.boardNode.getComponent("Board").spawnMonsterCell(e,o.Salive),i&&i()},this),p=cc.scaleTo(.1,0).easing(cc.easeOut(5)),d=cc.sequence(h,u,p,cc.removeSelf());t.runAction(d);var f=cc.skewTo(.1,0,2);t.runAction(f)}}),cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",ProcessBoardCell:"ProcessBoardCell",RPGManager:"RPGManager",Utils:"Utils"}],Monster:[function(e,t,i){"use strict";cc._RF.push(t,"750f8Ra7ZVFDJA7HBeSJzA0","Monster");var o=e("RPGManager"),n=e("Utils"),s=e("CameraManager"),a=e("PoolMng"),c=e("PlayFightAudio"),l=n.ProduceType,r=e("EnumDefine").CellType,h=e("EnumDefine").MonsterSkillType,u=e("EnumDefine").HurtFont,p=cc.v2();cc.Class({extends:cc.Component,properties:{skeleton:cc.Node,bloodBar:{type:cc.ProgressBar,default:null}},ctor:function(){this.monsterData={},this.hpLabel=null,this.fullhpLabel=null},onLoad:function(){this.bloodBar&&(this.bloodBar.progress=1),this.hp=100,this.fullhp=100,this.skeleton&&(this.Skeleton=this.skeleton.getComponent("sp.Skeleton"))},showBlood:function(e){this.bloodHp.active=e},init:function(e){this.monsterSkill=this.node.getComponent("MonsterSkill"),this.monsterData=e,this.hp=this.fullhp=parseInt(e.JsonData.Life);var t=this.node.getComponent("MonsterSkill"),i=h.UnKnown;e.saliveSkill&&(i=h.Salive),t.init(i,this.fullhp);var o=this.node.getChildByName("ProgressBar");if(o){o.scale=.95,o.y+=20;var n=this;cc.loader.loadRes("prefab/bloodHp",function(e,t){var i=cc.instantiate(t);if(i){n.bloodHp=i,i.parent=o,i.scale=1.4;var s=i.getChildByName("hp"),a=i.getChildByName("fullhp");s&&(n.damageLabel=s.getComponent("cc.Label"),n.hpLabel=a.getComponent("cc.Label"),n.damageLabel.string="0",n.hpLabel.string=n.hp,n.showBlood(!1))}})}this.spawnCell(e.addtionCellType),this.spawnDefence(e.defenceCellType);var s=this.node.getComponent("MonsterShield");s.init(e.shieldlist),this.MonsterShield=s},getAttackAddtionCellType:function(){return this.monsterData.addtionCellType},getDefenceCellType:function(){return this.monsterData.defenceCellType},isHaveShield:function(){return this.MonsterShield.isHaveShield()},isDefenceAttack:function(e){return this.MonsterShield.isDefenceAttack(e)},attackShield:function(e,t){this.MonsterShield.attackShield(e,t)},spawnDefence:function(e){var t="";switch(e){case r.Cell1:t="spine/fruite/tomatoes";break;case r.Cell2:t="spine/fruite/eggplant";break;case r.Cell3:t="spine/fruite/orange";break;case r.Cell4:t="spine/fruite/apple";break;case r.Cell5:t="spine/fruite/radish"}if(""!==t){var i=this;cc.loader.loadRes("prefab/cell/monsterDefence",function(e,o){var n=cc.instantiate(o);n&&(n.parent=i.node,n.scale=.7,n.position=cc.v2(-n.width/2*n.scale/2,i.bloodBar.node.y-10-n.height*n.scale),cc.loader.loadRes(t,sp.SkeletonData,function(e,t){e&&cc.error(e);var i=n.getChildByName("skeleton");i&&(i.getComponent("sp.Skeleton").skeletonData=t)}))})}},spawnCell:function(e){var t="";switch(e){case r.Cell1:t="prefab/cell/cell1";break;case r.Cell2:t="prefab/cell/cell2";break;case r.Cell3:t="prefab/cell/cell3";break;case r.Cell4:t="prefab/cell/cell4";break;case r.Cell5:t="prefab/cell/cell5"}if(""!==t){var i=this;cc.loader.loadRes(t,function(e,t){var o=cc.instantiate(t);o&&(o.removeComponent("Cell"),o.parent=i.node,o.scale=.7,o.position=cc.v2(-o.width*o.scale/2,i.bloodBar.node.y-10-o.height*o.scale))})}},hideHp:function(){this.bloodBar.node.active=!1},getWorldPos:function(){var e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());return s.instance.battleCameraNode.getComponent("cc.Camera").getWorldToCameraPoint(e,p),p},start:function(){},drawlineHurt:function(e){e=e>=this.hp?this.hp:e,this.showBlood(!0),this.damageLabel&&(this.damageLabel.string=e+""),this.bloodHpScale()},drawlineHurtOver:function(){this.showBlood(!1)},bloodHpScale:function(){if(this.bloodHp){this.bloodHp.stopAllActions(),this.bloodHp.scale=1.4;var e=this.bloodHp.scale,t=cc.scaleTo(.25,1.2*e,1.2*e).easing(cc.easeOut(3)),i=cc.scaleTo(.25,1*e,1*e).easing(cc.easeOut(3)),o=cc.sequence(t,i);this.bloodHp.runAction(o)}},hurt:function(e,t,i){if(void 0===i&&(i=u.Red),this.hp<=0)t&&t(!0);else{c.instance.playMonsterhit(),e=parseInt(e),this.hp=this.hp-e,this.updateBloodBar(),this.monsterSkill.listernHurt(e);var o=this.node.position;this.spawnbloodlabel(i,o,this.node.parent,e);var n=function(){return this.hp<=0?(this.die(),void(t&&t(!0))):(this.idle(),void(t&&t(!1)))}.bind(this);this.hurted(n)}},idle:function(){this.Skeleton.setAnimation(0,"idle",!0),this.Skeleton.timeScale=1},hurted:function(e){this.Skeleton.setAnimation(0,"hurt",!1),this.Skeleton.timeScale=3,this.Skeleton.setCompleteListener(function(t,i){"hurt"===(t.animation?t.animation.name:"")&&e&&e()})},die:function(){c.instance.playMonsterDie(),this.Skeleton.setAnimation(0,"dead",!1);var e=this.node.position,t=this.node.parent;cc.loader.loadRes("prefab/particle/monsterDieDust",function(i,o){var n=cc.instantiate(o);if(n){n.parent=t,n.position=e;var s=n.getComponent("cc.ParticleSystem");s&&s.resetSystem()}}),this.reWardCoin(),this.createWord(),this.updateScore(),o.instance.removeMonster(this.node),this.node.removeFromParent(!1)},updateScore:function(){var e=this.monsterData.JsonData.DeathIntegral;o.instance.Game.updateScore(e)},reWardCoin:function(){for(var e=this.monsterData.JsonData.DeathCoin,t=o.instance.Game,i=o.instance.actorlist,s=parseInt(e/i.length),a=o.instance.rpgNode,c=this.node.parent.convertToWorldSpace(this.node.position),r=c=a.convertToNodeSpace(c),h=function(e){var o=parseInt(s/3),c=i[e],h=c.parent.convertToWorldSpace(c.position);(h=a.convertToNodeSpace(h)).y+=c.height/2;n.produceRandomNodeMove(l.ButtonCoin,3,r,h,a,function(){t.updateCoin(o)})},u=0;u<i.length;u++)h(u)},createWord:function(){var e=["ouch","argh","kaboom","wah","grrr"],t="sprite/"+e[n.randomRangeInt(0,e.length)],i=this.node.position,o=this.node.parent,s=this.node.height;cc.loader.loadRes(t,cc.SpriteFrame,function(e,t){var n=new cc.Node("");n.zIndex=10,n.addComponent(cc.Sprite).spriteFrame=t,o.addChild(n),n.position=i,n.y+=.8*s,n.scale=0;var a=cc.scaleTo(.5,.8).easing(cc.easeOut(3)),c=cc.skewTo(.5,1.2,1.2),l=cc.moveBy(.5,cc.v2(0,120)).easing(cc.easeOut(4)),r=cc.fadeOut(.5),h=cc.sequence(a,cc.spawn(l,c),r,cc.removeSelf());n.runAction(h)})},updateBloodBar:function(){var e=1*this.hp/this.fullhp;this.bloodBar.progress=e,this.hpLabel.string=this.hp+""},spawnbloodlabel:function(e,t,i,o){var s=null;switch(e){case u.Red:s=a.instance.getRedLabel();break;case u.Purble:s=a.instance.getPurbleLabel();break;case u.Orange:s=a.instance.getOrangeLabel();break;default:s=a.instance.getScoreLabel()}s.parent=i,s.zIndex=10,s.position=t,s.getComponent(cc.Label).string=o+"";var c=null;if(0===n.randomRangeInt(0,1)){var l=[cc.v2(n.randomRange(20,40),n.randomRange(20,40)),cc.v2(n.randomRange(40,60),n.randomRange(40,60)),cc.v2(n.randomRange(60,80),0)];c=cc.bezierBy(.5,l)}else{var r=[cc.v2(-n.randomRange(20,40),n.randomRange(20,40)),cc.v2(-n.randomRange(40,60),n.randomRange(40,60)),cc.v2(-n.randomRange(60,80),0)];c=cc.bezierBy(.5,r)}var h=cc.callFunc(function(){switch(e){case u.Red:s=a.instance.putRedLabel();break;case u.Purble:s=a.instance.putPurbleLabel();break;case u.Orange:s=a.instance.putOrangeLabel();break;default:s=a.instance.putScoreLabel()}},this);s.scale=0,s.opacity=255;var p=cc.scaleTo(.1,1).easing(cc.easeOut(5)),d=c.easing(cc.easeOut(5)),f=cc.sequence(p,d,cc.fadeOut(.2),h);s.runAction(f)}}),cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",RPGManager:"RPGManager",Utils:"Utils"}],MoveCameraShot:[function(e,t,i){"use strict";cc._RF.push(t,"7c949D61EtHzY0OxRo4i85F","MoveCameraShot");e("RPGManager");var o=e("Utils"),n=e("EnumDefine").FightKind;cc.v2(),cc.v2();cc.Class({extends:cc.Component,properties:{canMove:!1,moveUnitVal:5},onLoad:function(){switch(this.camera=this.getComponent(cc.Camera),this.initZoomRatio=this.camera.zoomRatio,this.ratioZoomIn=this.camera.zoomRatio,this.ratioZoomOut=this.ratioZoomIn-.1,o.levelData.StageType){case n.NormalFight:this.moveUnitVal=5;break;case n.BossFight:this.moveUnitVal=2}},ctor:function(){this._zoomIn=!1,this._zoomOut=!1,this._zoomCallback=null,this._zoomStep=.2,this._move=!1},start:function(){},update:function(e){this.zoomUpdate(e),this._move&&(this.node.x+=this.moveUnitVal)},setMove:function(e){this._move=e},setMoveSpeed:function(e){this.moveUnitVal=e},zoomUpdate:function(e){if(this._zoomIn&&this.camera){if(Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=1e-5)return this.camera.zoomRatio=this.ratioZoomIn,this._zoomIn=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomIn,this._zoomStep)}if(this._zoomOut&&this.camera){if(Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,this._zoomOut=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomOut,this._zoomStep)}},resetZoom:function(){this._zoomIn=!1,this._zoomOut=!1},zoomIn:function(e){if(this.camera){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomIn=!0}else e&&e()},zoomOut:function(e){if(this.camera){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomOut=!0}else e&&e()}}),cc._RF.pop()},{EnumDefine:"EnumDefine",RPGManager:"RPGManager",Utils:"Utils"}],OpenBox:[function(e,t,i){"use strict";cc._RF.push(t,"2cfc0jNfnlK+o6pnAlILIQQ","OpenBox");var o=e("PoolMng"),n=e("Utils"),s=e("PlayFightAudio"),a=e("EnumDefine").CellType;cc.Class({extends:cc.Component,properties:{description:{default:null,type:cc.Label},midbk:cc.Node,key:cc.Node,chest:cc.Node,cells:{default:[],type:cc.Node}},onLoad:function(){var e=this;this.node.zIndex=10,this.keyPosX=this.key.x,this.keyPosY=this.key.y,this.keyscale=this.key.scale,this.guideDone=!1;var t=cc.callFunc(function(){e.reset(),e.showGuide()},this),i=cc.sequence(cc.delayTime(.5),t);this.node.runAction(i);var o=cc.callFunc(function(){e.guideDone=!0},this);this.node.runAction(cc.sequence(cc.delayTime(1),o)),this.registerTouch()},start:function(){},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t)},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd(t)},e)},touchBegin:function(e){},touchEnd:function(e){this.guideDone&&this.node.removeFromParent()},reset:function(){this.key.active=!0,this.chest.active=!0,this.key.x=this.keyPosX,this.key.y=this.keyPosY,this.key.scale=this.keyscale;for(var e=0;e<this.cells.length;e++){this.cells[e].active=!0}},showGuide:function(){var e=function(){this.removeCells()}.bind(this);this.drawline(e)},drawline:function(e){for(var t=this.cells,i=[],o=this.midbk,n=0;n<t.length;n++){var s=t[n],a=s.position;a.x+=s.width,i.push(a)}var c=i[0],l=this;cc.loader.loadRes("prefab/guideHand",function(t,n){t&&cc.error(t);var s=cc.instantiate(n);s.parent=o,s.position=c;var a=.5*i.length,r=cc.catmullRomTo(a,i).easing(cc.easeSineInOut(3)),h=cc.callFunc(function(){e()},l),u=cc.sequence(cc.show(),r,cc.delayTime(.5),h,cc.removeSelf());s.runAction(u)})},removeCells:function(){for(var e=this,t=0;t<this.cells.length;t++){var i=this.cells[t];i.active=!1;var o=i.parent,n=i.position;this.createCellBlood(o,n,a.Cell4)}var s=function(){var e=this,t=cc.callFunc(function(){e.reset(),e.showGuide(),e.guideDone=!0},this),i=cc.sequence(cc.delayTime(.5),t);this.node.runAction(i)}.bind(this),c=cc.callFunc(function(){e.openChest(e.key,e.chest,s)},this);this.node.runAction(cc.sequence(cc.delayTime(1),c))},openChest:function(e,t,i){var o=this;cc.log("open chest");var n=t.position;n.y+=t.height/2,n.y-=this.key.height/2;var a=cc.moveTo(.5,n).easing(cc.easeOut(5)),c=cc.callFunc(function(){},this),l=cc.callFunc(function(){var e=t.parent,i=t.position;o.bomb(e,i),t.active=!1},this),r=cc.callFunc(function(){},this),h=cc.callFunc(function(){t.active=!1,e.active=!1},this),u=cc.callFunc(function(){var e=t.parent,i=t.position;o.showBoby(e,i),s.instance.playOpenMagicBag()},this),p=cc.callFunc(function(){i&&i()},this),d=cc.scaleTo(.2,0).easing(cc.easeOut(5)),f=cc.sequence(a,d,c,r,l,cc.delayTime(.2),u,cc.delayTime(.2),h,p);e.runAction(f)},createCellBlood:function(e,t,i){var n=o.instance.getCellBlood(i);if(n){var s=n.getComponent("CellBlood");n.parent=e,n.setPosition(t);s.type=i,s.play(function(){o.instance.putCellBlood(n,i)})}},bomb:function(e,t){cc.loader.loadRes("prefab/boomEffect",function(i,o){var n=cc.instantiate(o);n.scale=.8,n.parent=e,n.position=t;var s=n.getComponent("PlayAnimation");s&&s.play()})},showBoby:function(e,t){var i=["baby01","baby02","baby03","baby04","baby05","baby06"],o=i.length,s="spine/baby/";s+=i[n.randomRangeInt(0,o)];var a=this;cc.loader.loadRes(s,sp.SkeletonData,function(i,o){i&&cc.error(i);var n=new cc.Node;n.setAnchorPoint(.5,0),n.parent=e,n.position=t;var s=n.addComponent("sp.Skeleton");s.skeletonData=o,s.setAnimation(0,"idle",!0);var c=new cc.Node;c.addComponent("cc.Sprite"),c.spriteFrame=a.glare,c.parent=n,c.scale=.8,c.zIndex=-1;var l=cc.repeatForever(cc.rotateBy(2,360));c.runAction(l),c.setPosition(0,n.height/2);var r=cc.moveBy(.5,cc.v2(0,100));n.runAction(cc.sequence(r,cc.removeSelf()))})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",Utils:"Utils"}],PageViewCtrl:[function(e,t,i){"use strict";cc._RF.push(t,"becf9ZpBi5KG43ard9opUPT","PageViewCtrl");e("JsonData"),e("LocalStorage");var o=e("EnumDefine").ActorType;e("Utils");cc.Class({extends:cc.Component,properties:{curNum:3,curTotal:10,pageTeample:cc.Prefab,target:cc.PageView,label:cc.Label,Actor1WeaponNode:cc.Node,Actor2WeaponNode:cc.Node,Actor3WeaponNode:cc.Node,Actor4WeaponNode:cc.Node,Actor5WeaponNode:cc.Node},_createPage:function(){var e=cc.instantiate(this.pageTeample);e.position=new cc.v2(0,0);var t=new cc.Color;return t.r=Math.floor(255*Math.random()),t.g=Math.floor(255*Math.random()),t.b=Math.floor(255*Math.random()),e.color=t,e},onLoad:function(){this.target.setCurrentPageIndex(0),this.initPageContent()},update:function(){this.label.string="\u7b2c"+(this.target.getCurrentPageIndex()+1)+"\u9875"},onJumpHome:function(){this.target.scrollToPage(0)},plusPage:function(e){this.curNum>this.curTotal||(this.curNum++,e&&e())},lessPageNum:function(e){this.curNum<=0||(this.curNum--,e&&e())},onAddPage:function(){var e=this;this.plusPage(function(){e.target.addPage(e._createPage())})},onInsertPage:function(){var e=this;this.plusPage(function(){e.target.insertPage(e._createPage(),e.target.getCurrentPageIndex())})},onRemovePage:function(){var e=this;this.lessPageNum(function(){var t=e.target.getPages();e.target.removePage(t[t.length-1])})},onRemovePageAtIndex:function(){var e=this;this.lessPageNum(function(){e.target.removePageAtIndex(e.target.getCurrentPageIndex())})},onRemoveAllPage:function(){this.target.removeAllPages(),this.curNum=0},onPageEvent:function(e,t){if(t===cc.PageView.EventType.PAGE_TURNING){var i=e.getCurrentPageIndex();switch(console.log("\u5f53\u524d\u6240\u5728\u7684\u9875\u9762\u7d22\u5f15:"+i),i){case 0:this.showActor1(!1);break;case 1:this.showActor2(!1);break;case 2:this.showActor3(!1);break;case 3:this.showActor4(!1);break;case 4:this.showActor5(!1)}}},showActor1:function(e){this.Actor1WeaponNode.getChildByName("link").active=e,this.Actor2WeaponNode.getChildByName("link").active=!e,this.Actor3WeaponNode.getChildByName("link").active=!e,this.Actor4WeaponNode.getChildByName("link").active=!e,this.Actor5WeaponNode.getChildByName("link").active=!e},showActor2:function(e){this.Actor1WeaponNode.getChildByName("link").active=!e,this.Actor2WeaponNode.getChildByName("link").active=e,this.Actor3WeaponNode.getChildByName("link").active=!e,this.Actor4WeaponNode.getChildByName("link").active=!e,this.Actor5WeaponNode.getChildByName("link").active=!e},showActor3:function(e){this.Actor1WeaponNode.getChildByName("link").active=!e,this.Actor2WeaponNode.getChildByName("link").active=!e,this.Actor3WeaponNode.getChildByName("link").active=e,this.Actor4WeaponNode.getChildByName("link").active=!e,this.Actor5WeaponNode.getChildByName("link").active=!e},showActor4:function(e){this.Actor1WeaponNode.getChildByName("link").active=!e,this.Actor2WeaponNode.getChildByName("link").active=!e,this.Actor3WeaponNode.getChildByName("link").active=!e,this.Actor4WeaponNode.getChildByName("link").active=e,this.Actor5WeaponNode.getChildByName("link").active=!e},showActor5:function(e){this.Actor1WeaponNode.getChildByName("link").active=!e,this.Actor2WeaponNode.getChildByName("link").active=!e,this.Actor3WeaponNode.getChildByName("link").active=!e,this.Actor4WeaponNode.getChildByName("link").active=!e,this.Actor5WeaponNode.getChildByName("link").active=e},processlockRole:function(){},processUnlocRole:function(){},initPageContent:function(){for(var e=this.target.getPages(),t=[o.Actor1,o.Actor2,o.Actor3,o.Actor4,o.Actor5],i=0;i<e.length;i++){var n=e[i].getComponent("ActorUIPage"),s=t[i];n.init(s)}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PauseUI:[function(e,t,i){"use strict";cc._RF.push(t,"14b29mOORpG96+c5zlMwi56","PauseUI");e("RPGManager");var o=e("Game"),n=e("Utils"),s=e("BaseUI");cc.Class({extends:s,properties:{},onLoad:function(){this.node.scale=1;var e=function(){o.instance.pauseAudio()}.bind(this);this.scaleShow(this.node,e)},start:function(){},onBtnResumeClicked:function(e){var t=function(){o.instance.resumeAudio(),this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t);var i=n.fightSceneAudioID;cc.audioEngine.resume(i)},onBtnBackToMapClicked:function(e){var t=function(){cc.director.loadScene("Map")}.bind(this);this.scaleClose(this.node,t);var i=n.fightSceneAudioID;cc.audioEngine.stop(i),n.fightSceneAudioID=-1}}),cc._RF.pop()},{BaseUI:"BaseUI",Game:"Game",RPGManager:"RPGManager",Utils:"Utils"}],PetExtraction:[function(e,t,i){"use strict";cc._RF.push(t,"038fb+7eZtIDrSYU55D3JcZ","PetExtraction");var o=e("JsonData"),n=e("LocalStorage"),s=(e("EnumDefine").ActorType,e("Utils")),a=e("BaseUI");cc.Class({extends:a,properties:{grass1:cc.Node,grass2:cc.Node,grass3:cc.Node,extractionBk:cc.Node,glare:cc.Node,midBk:cc.Node,audioSpin:{type:cc.AudioSource,default:null}},ctor:function(){this._callback=null,this.spinLevel=0,this.spinID=-1},onLoad:function(){this.isSpin=!0,this.registerTouch(),this.scaleShow(this.node,null)},spin:function(e,t){var i=this;this.spinLevel=e,this._callback=t,this.glare.active=!1;var o=cc.moveTo(0,cc.v2(0,0)).easing(cc.easeOut(3)),n=cc.callFunc(function(){i.grassShakes()},this);this.midBk.runAction(cc.sequence(o,n))},start:function(){},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(e){},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd()},e)},touchEnd:function(){if(!this.isSpin){var e=function(){this._callback&&this._callback(this.spinID),this.node.removeFromParent()}.bind(this);this.scaleShow(this.node,e)}},grassShakes:function(){var e=this,t=cc.callFunc(function(){e.grassShake(e.grass1)},this),i=cc.callFunc(function(){e.grassShake(e.grass2)},this),o=cc.callFunc(function(){e.grassShake(e.grass3)},this),n=cc.callFunc(function(){var t=cc.moveBy(.2,cc.v2(.6*-e.grass1.width,0)).easing(cc.easeOut(3));e.grass1.runAction(t),t=cc.moveBy(.2,cc.v2(.6*e.grass1.width,0)).easing(cc.easeOut(3)),e.grass2.runAction(t),t=cc.moveBy(.2,cc.v2(.6*-e.grass1.width,0)).easing(cc.easeOut(3)),e.grass3.runAction(t)},this),s=cc.callFunc(function(){e.spinPet(e.spinLevel)},this),a=cc.callFunc(function(){},this),c=cc.sequence(t,cc.delayTime(.2),i,cc.delayTime(.2),o,cc.delayTime(.2),n,cc.delayTime(.2),s,cc.delayTime(.2),a);this.node.runAction(c)},grassShake:function(e){var t=cc.scaleTo(.2,1.2,1.2).easing(cc.easeBounceInOut()),i=cc.scaleTo(.2,1,1).easing(cc.easeBounceInOut()),o=cc.sequence(t,i),n=cc.jumpBy(.2,cc.v2(0,0),20,1).easing(cc.easeOut(3)),s=cc.jumpBy(.2,cc.v2(0,0),-20,1).easing(cc.easeOut(3)),a=cc.jumpBy(.2,cc.v2(0,0),16,1).easing(cc.easeOut(3)),c=cc.jumpBy(.2,cc.v2(0,0),-16,1).easing(cc.easeOut(3)),l=cc.sequence(n,s,a,c),r=cc.spawn(o,l);e.runAction(r)},spinPet:function(e){var t="A";if(0==e){var i=s.computeSpin([0,20,80]);t=0==i?"S":1==i?"A":"B"}else if(1==e){var n=s.computeSpin([40,60,0]);t=0==n?"S":1==n?"A":"B"}var a=[],c=this;o.instance.loadPetDetailDatas(function(e){for(var i in e)e[i].Star==t&&a.push(e[i]);if(a.length>0){var o=s.randomRangeInt(0,a.length),n=a[o].ID;c.petBorn(n)}})},petBorn:function(e){this.audioSpin.play(),this.writeData(e),this.spinID=e;var t="spine/pet/";t+=s.getPetFileName(e-1);var i=this,o=i.glare;cc.loader.loadRes(t,sp.SkeletonData,function(e,t){e&&cc.error(e),o.active=!0;var n=cc.repeatForever(cc.rotateBy(3,360));o.runAction(n);var a=new cc.Node,c=a.addComponent("sp.Skeleton");c.skeletonData=t,a.parent=i.midBk,a.position=o.position,a.scale=2,(c=a.getComponent("sp.Skeleton")).setAnimation(0,"idle",!0);var l=[cc.v2(-s.randomRange(20,30),s.randomRange(100,200)/8),cc.v2(-s.randomRange(20,30),s.randomRange(100,200)/8),cc.v2(0,-s.randomRange(.4*i.extractionBk.height,.6*i.extractionBk.height)/4)],r=cc.bezierBy(.2,l),h=cc.callFunc(function(){var e=cc.jumpBy(.5,cc.v2(0,0),10,1).easing(cc.easeOut(2)),t=cc.jumpBy(.5,cc.v2(0,0),-10,1).easing(cc.easeOut(2));a.runAction(cc.sequence(e,t))}),u=cc.callFunc(function(){i.isSpin=!1},i);a.runAction(cc.sequence(r,h,cc.delayTime(.4),u))})},writeData:function(e){var t=n.instance.getPetData(e);t?t.num+=1:((t={}).level=1,t.ID=e,t.num=1,t.star="A",t.attack=0),o.instance.loadPetDatas(function(i){for(var o=0;o<i.length;o++){var s=i[o];if(s.ID==e&&s.UpgradeNumber>t.num){t.level=s.Level-2;break}}for(var a=0;a<i.length;a++){var c=i[a];c.ID==t.ID&&c.Level==t.level&&(t.attack=c.Attack)}n.instance.setPetData(t)})}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PetInfo:[function(e,t,i){"use strict";cc._RF.push(t,"2d9f5cxu4hB1Ii63yF7crUv","PetInfo");var o=e("JsonData"),n=e("LocalStorage"),s=(e("EnumDefine").ActorType,e("Utils")),a=e("BaseUI");cc.Class({extends:a,properties:{info:cc.Node,attack:cc.Label,level:cc.Label,petname:cc.Label,pet:sp.Skeleton,levelPrice:cc.Label,levelBtn:cc.Button,buttonCoin:cc.Node,skillDescrition:cc.Label,skillIconNode:cc.Node},onLoad:function(){this.scaleShow(this.info),this.petDatas=[],this.uibase=null,this.maxlevel=20,this.levelUpCoinNum=0},show:function(e,t){this.uibase=t,this.loadPet(e);var i=function(e){var t=e.chinese;this.petname.string=t}.bind(this);this.loadAllData(e,i),this.loadPetData(e),this.petData&&(this.petData.level>=this.maxlevel&&(this.levelPrice.node.active=!1,this.levelBtn.node.active=!1,this.buttonCoin.active=!1),this.showSkillDescrition(e),this.showSkillIcon(e))},showSkillDescrition:function(e){var t=function(e){if(e){var t=e.chinese;this.skillDescrition.string=t}}.bind(this);o.instance.loadPetDetailData(e,t)},showSkillIcon:function(e){var t=function(e){var t="prefab/skillcell/"+e.prefabName,i=this;cc.loader.loadRes(t,function(e,t){e&&cc.error(e);var o=cc.instantiate(t);o.scale=.6,o.parent=i.skillIconNode,o.position=cc.v2(-28,-28),o.getChildByName("cellNode").x=39})}.bind(this);o.instance.loadJsonSkillData(e,t)},start:function(){},closeBtn:function(e){var t=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.info,t),n.instance.setPetData(this.petData)},levelUpBtn:function(e){if(this.petData){if(this.petData.level>=this.maxlevel)return this.levelPrice.node.active=!1,this.levelBtn.node.active=!1,void(this.buttonCoin.active=!1);var t=this.levelUpCoin(this.petData.level+1);if(this.uibase.buyCoin(t)){this.petData.level+=1;var i=function(e){this.petData.level=e.Level,this.petData.attack=e.Attack,n.instance.setPetData(this.petData),this.scaleUp(this.level.node),this.scaleUp(this.attack.node);var t=this.level.node,i=cc.v2(0,0);this.showflashEffect(t,i),t=this.attack.node,i=cc.v2(0,0),this.showflashEffect(t,i),this.levelUpCoinNum=this.levelUpCoin(e.Level+1),this.level.string=this.petData.level+"",this.attack.string=this.petData.attack+"",this.levelUpCoinNum=this.levelUpCoin(this.petData.level),this.levelPrice.string=this.levelUpCoinNum+""}.bind(this),s=this.petData.ID,a=this.petData.level;o.instance.loadPetData(s,a,i)}}},levelUpCoin:function(e){return 10*e+300},loadPetData:function(e){var t=n.instance.getPetData(e);if(t){this.level.string=t.level+"",this.attack.string=t.attack+"";var i=parseInt(t.level);this.levelUpCoinNum=this.levelUpCoin(i),this.levelPrice.string=this.levelUpCoinNum+"",this.petData=t}},loadPet:function(e){var t="spine/pet/";t+=s.getPetFileName(e-1);var i=this;cc.loader.loadRes(t,sp.SkeletonData,function(e,t){e&&cc.error(e);var o=i.pet.addComponent("sp.Skeleton");o.skeletonData=t,o.setAnimation(0,"idle",!0)})},loadAllData:function(e,t){cc.loader.loadRes("json/AllData",function(i,o){for(var n=o.json,s=0;s<n.length;s++){var a=n[s];parseInt(a.ID)===parseInt(e)+248&&t&&t(a)}})},showflashEffect:function(e,t){cc.loader.loadRes("prefab/flashEffect",function(i,o){var n=cc.instantiate(o);if(n){n.scale=.5,n.parent=e,n.position=t;var s=n.getComponent(cc.Animation);s&&s.play(),n.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf()))}})},scaleUp:function(e){e.stopAllActions(),e.scale=1;var t=e.scale,i=cc.scaleTo(.25,1.2*t,1.2*t).easing(cc.easeOut(3)),o=cc.scaleTo(.25,1*t,1*t).easing(cc.easeOut(3)),n=cc.sequence(i,o);e.runAction(n)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PetItem:[function(e,t,i){"use strict";cc._RF.push(t,"f32bcte80NDwbm3k7FgqcXY","PetItem");var o=e("Utils"),n=e("LocalStorage"),s=e("JsonData");cc.Class({extends:cc.Component,properties:{pricelable:cc.Label,unlockNode:cc.Node,pet:sp.Skeleton,petName:cc.Label},onLoad:function(){this.uibase=null,this.lock=!0,this.unlockPrice=50,this.unlockNode.active=!1},start:function(){},init:function(e,t,i,n){this.uibase=n,this.roleID=e,this.skillID=t,this.lock=i,i||(this.unlockNode.active=!1);var s=o.GetPetChinaName(this.skillID-1);this.petName.string=s;var a="spine/pet/";a+=o.getPetFileName(this.skillID-1);var c=this.pet,l=this;cc.loader.loadRes(a,sp.SkeletonData,function(e,t){e&&cc.error(e),c.skeletonData=t,l.lock?c.node.color=cc.color(0,0,0,255):c.setAnimation(0,"idle",!0)})},onBtnUnlockFunc:function(e){if(this.buyRoleDiamond(this.unlockPrice)){this.unlockNode.active=!1,this.lock=!1;for(var t="",i=n.instance.getPetSkill(this.roleID),o=0;o<i.length;o++)t+=i[o],t+=",";t+=this.skillID+"",n.instance.setPetSkill(this.roleID,t);var a=function(e){var t={};t.ID=this.skillID,t.level=e.Level,t.attack=e.Attack,n.instance.setPetData(t)}.bind(this);s.instance.loadPetData(this.skillID,1,a)}},onBtnShowFunc:function(e){if(this.lock);else{var t=cc.director.getScene()._children[0],i=this;cc.loader.loadRes("prefab/PetInfoUI",function(e,o){var n=cc.instantiate(o);n.scale=1,n.parent=t,n.group="UI";var s=i.skillID;n.getComponent("PetInfo").show(s,i.uibase);var a=n.getChildByName("UIBase");a&&(a.active=!1)})}},buyRoleDiamond:function(e){var t=!1;this.uibase&&(this.uibase.getDiamondNum()>=e&&(t=!0,this.uibase.updateDiamond(-e)));return t}}),cc._RF.pop()},{JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PetPage:[function(e,t,i){"use strict";cc._RF.push(t,"4c31b/kHgxGrrlCOP+YA9Me","PetPage");var o=e("JsonData"),n=e("LocalStorage"),s=(e("EnumDefine").ActorType,e("Utils"));cc.Class({extends:cc.Component,properties:{pets:{type:cc.Node,default:[]},pageIndex:0,BattlePets:cc.Node},ctor:function(){this.petDatas={}},onLoad:function(){this.battlePets=this.BattlePets.getComponent("BattlePets"),this.init(this.pageIndex)},start:function(){},extractOnePet:function(e,t){this.pageIndex=t;var i=this.pets[e-8*t-1],n=this;o.instance.loadPetDetailData(e,function(t){n.initOnePet(i,e,t)}),cc.loader.loadRes("prefab/roleUp",function(e,t){var o=cc.instantiate(t);o.scale=1,o.parent=i,o.position=cc.v2(0,0);var n=cc.sequence(cc.delayTime(1),cc.removeSelf());o.runAction(n)})},init:function(e){for(var t=this,i=this.pets,n=function(n){var s=i[n];if(s){var a=n+8*e+1,c=t;o.instance.loadPetDetailData(a,function(e){c.initOnePet(s,a,e)})}},s=0;s<i.length;s++)n(s)},initOnePet:function(e,t,i){var o=e.getChildByName("pet"),a=e.getChildByName("petgou"),c=e.getChildByName("name"),l=e.getChildByName("star"),r=e.getChildByName("petbutton"),h=n.instance.getPetData(t);if(h){this.petDatas[t]=h;var u=i.Star,p="texture/UI",d=l.getComponent("cc.Sprite");this.loadSprite(p,d,u),u=s.getPetFileName(t-1),p="texture/UI",d=o.getComponent("cc.Sprite"),this.loadSprite(p,d,u),a.active=!1,r.active=!0,c.active=!0,this.IsUpperShelf(t)?this.upperShelf(t):this.downShelf(t)}else{var f=s.getGhostPetFileName(t-1),m=o.getComponent("cc.Sprite");this.loadSprite("texture/UI",m,f),a.active=!1,r.active=!1,c.active=!1}},onBtnShowPet:function(e,t){if(n.instance.getPetData(t)){var i=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/PetInfoUI",function(e,o){var n=cc.instantiate(o);n.scale=1,n.parent=i;var s=t;n.getComponent("PetInfo").show(s)})}},onBtnShowPetDetail:function(e,t){if(this.IsUpperShelf(t)){var i=this.petDatas[t];this.battlePets.removeOnePet(i),this.downShelf(t)}else{var o=this.petDatas[t];this.battlePets.addOnePet(o),this.upperShelf(t)}},loadSprite:function(e,t,i){cc.loader.loadRes(e,cc.SpriteAtlas,function(e,o){var n=o.getSpriteFrame(i);t.spriteFrame=n})},upperShelf:function(e){var t=this.pageIndex,i=this.pets[e-8*t-1];if(i){i.getChildByName("pet");var o=i.getChildByName("petgou"),n=i.getChildByName("name");i.getChildByName("star");o.active=!0,n.getComponent("cc.Label").string="\u4e0b\u67b6"}},downShelf:function(e){var t=this.pageIndex,i=this.pets[e-8*t-1];if(i){i.getChildByName("pet");var o=i.getChildByName("petgou"),n=i.getChildByName("name");i.getChildByName("star");o.active=!1,n.getComponent("cc.Label").string="\u4e0a\u67b6"}},IsUpperShelf:function(e){var t=n.instance.getBattlePetData();for(var i in t)if(t[i].ID==e)return!0;return!1}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PetRoleBox:[function(e,t,i){"use strict";cc._RF.push(t,"3b2fd2WAdtEYqDKY8o+MQhY","PetRoleBox");e("Utils");var o=e("EnumDefine").ActorType,n=e("LocalStorage"),s=e("JsonData");cc.Class({extends:cc.Component,properties:{attackLabel:cc.Label,xname:cc.Label,bk2:cc.Node,bk1:cc.Node},onLoad:function(){this.skillID=-1,this.roleID=-1,this.lock=!1},start:function(){},choose:function(){this.lock?this.bk2.active=!1:this.bk2.active=!0},unChoose:function(){this.bk2.active=!1},initPetSkill:function(e,t,i){this.skillID=t,this.roleID=e,this.lock=i;var s=n.instance.getPetData(t);switch(s&&(this.attackLabel.string=s.attack+""),e){case o.Actor1:this.bk1.color=cc.color(224,98,66,255);break;case o.Actor2:this.bk1.color=cc.color(66,73,231,255);break;case o.Actor3:this.bk1.color=cc.color(231,145,66,255);break;case o.Actor4:this.bk1.color=cc.color(66,231,66,255);break;case o.Actor5:this.bk1.color=cc.color(218,143,228,255)}this.spawnSkill(t)},initRoleSkill:function(e,t,i){this.skillID=t,this.roleID=e,this.lock=i;var s=n.instance.getRoleData(e);switch(s&&(this.attackLabel.string=s.attack+""),e){case o.Actor1:this.bk1.color=cc.color(224,98,66,255);break;case o.Actor2:this.bk1.color=cc.color(66,73,231,255);break;case o.Actor3:this.bk1.color=cc.color(231,145,66,255);break;case o.Actor4:this.bk1.color=cc.color(66,231,66,255);break;case o.Actor5:this.bk1.color=cc.color(218,143,228,255)}this.spawnSkill(t)},spawnSkill:function(e){var t=function(e){var t="prefab/skillcell/"+e.prefabName,i=this;cc.loader.loadRes(t,function(e,t){e&&cc.error(e);var o=cc.instantiate(t);o.parent=i.node,o.scale=.35,o.position=cc.v2(-31,-14),o.getChildByName("cellNode").x=39;var n=i.node.getChildByName("lock");n&&(n.zIndex=1,i.lock?n.active=!0:n.active=!1)})}.bind(this);s.instance.loadJsonSkillData(e,t)},unlock:function(){this.lock=!1;var e=this.node.getChildByName("lock");e&&(e.active=!1)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PetSkillUI:[function(e,t,i){"use strict";cc._RF.push(t,"90b44JyesxEg6LP1wclAMsn","PetSkillUI");var o=e("RPGManager"),n=(e("Game"),e("EnumDefine").ActorType),s=(e("EnumDefine").CellType,e("EnumDefine").PetRoleSkillType,e("EnumDefine").CellGroupType),a=e("JsonData"),c=e("LocalStorage"),l=(e("Utils"),e("PlayFightAudio"));cc.Class({extends:cc.Component,properties:{Pet1:{default:null,type:sp.Skeleton},Pet2:{default:null,type:sp.Skeleton},Pet3:{default:null,type:sp.Skeleton},Pet4:{default:null,type:sp.Skeleton},Pet5:{default:null,type:sp.Skeleton},actor1SkillNode:cc.Node,actor2SkillNode:cc.Node,actor3SkillNode:cc.Node,actor4SkillNode:cc.Node,actor5SkillNode:cc.Node,pet1SkillNode:cc.Node,pet2SkillNode:cc.Node,pet3SkillNode:cc.Node,pet4SkillNode:cc.Node,pet5SkillNode:cc.Node},ctor:function(){this.roleDatas={},this.roleBattlePets={},this.petSkillProcess={},this.actorSkillNodelist=[],this.actorSkilllist=[],this.petSkillNodelist=[],this.petSkilllist=[],this.skillAttacks={},this._petsAttackOverCallback=null},onLoad:function(){this.boardSkillDone=!0,this.monsterSkillDone=!0,this.idlist=[0,1,2,3,4],this.petnamelist=[],this.petnamelist.push("cattle"),this.petnamelist.push("chicken"),this.petnamelist.push("dog"),this.petnamelist.push("duck"),this.petnamelist.push("frog"),this.petnamelist.push("hippo"),this.petnamelist.push("horse"),this.petnamelist.push("monkey"),this.petnamelist.push("mouse"),this.petnamelist.push("orangutan"),this.petnamelist.push("owl"),this.petnamelist.push("panda"),this.petnamelist.push("pig"),this.petnamelist.push("rabbit"),this.petnamelist.push("sheep"),this.petnamelist.push("tiger"),this.Pet1.node.active=!1,this.Pet2.node.active=!1,this.Pet3.node.active=!1,this.Pet4.node.active=!1,this.Pet5.node.active=!1;var e={};e[n.Actor1]=this.Pet1.node,e[n.Actor2]=this.Pet2.node,e[n.Actor3]=this.Pet3.node,e[n.Actor4]=this.Pet4.node,e[n.Actor5]=this.Pet5.node,this.petlist=e,this.actorSkill1=this.actor1SkillNode.getComponent("cc.ProgressBar"),this.actorSkill2=this.actor2SkillNode.getComponent("cc.ProgressBar"),this.actorSkill3=this.actor3SkillNode.getComponent("cc.ProgressBar"),this.actorSkill4=this.actor4SkillNode.getComponent("cc.ProgressBar"),this.actorSkill5=this.actor5SkillNode.getComponent("cc.ProgressBar"),this.petSkill1=this.pet1SkillNode.getComponent("cc.ProgressBar"),this.petSkill2=this.pet2SkillNode.getComponent("cc.ProgressBar"),this.petSkill3=this.pet3SkillNode.getComponent("cc.ProgressBar"),this.petSkill4=this.pet4SkillNode.getComponent("cc.ProgressBar"),this.petSkill5=this.pet5SkillNode.getComponent("cc.ProgressBar"),this.actorSkill1.progress=0,this.actorSkill2.progress=0,this.actorSkill3.progress=0,this.actorSkill4.progress=0,this.actorSkill5.progress=0,this.petSkill1.progress=0,this.petSkill2.progress=0,this.petSkill3.progress=0,this.petSkill4.progress=0,this.petSkill5.progress=0,this.actor1SkillNode.active=!1,this.actor2SkillNode.active=!1,this.actor3SkillNode.active=!1,this.actor4SkillNode.active=!1,this.actor5SkillNode.active=!1,this.pet1SkillNode.active=!1,this.pet2SkillNode.active=!1,this.pet3SkillNode.active=!1,this.pet4SkillNode.active=!1,this.pet5SkillNode.active=!1,this.actorSkillNodelist.push(this.actor1SkillNode),this.actorSkillNodelist.push(this.actor2SkillNode),this.actorSkillNodelist.push(this.actor3SkillNode),this.actorSkillNodelist.push(this.actor4SkillNode),this.actorSkillNodelist.push(this.actor5SkillNode),this.actorSkilllist.push(this.actorSkill1),this.actorSkilllist.push(this.actorSkill2),this.actorSkilllist.push(this.actorSkill3),this.actorSkilllist.push(this.actorSkill4),this.actorSkilllist.push(this.actorSkill5),this.petSkillNodelist.push(this.pet1SkillNode),this.petSkillNodelist.push(this.pet2SkillNode),this.petSkillNodelist.push(this.pet3SkillNode),this.petSkillNodelist.push(this.pet4SkillNode),this.petSkillNodelist.push(this.pet5SkillNode),this.petSkilllist.push(this.petSkill1),this.petSkilllist.push(this.petSkill2),this.petSkilllist.push(this.petSkill3),this.petSkilllist.push(this.petSkill4),this.petSkilllist.push(this.petSkill5),this.roleSkillNodelist=[];for(var t=[],i=[n.Actor1,n.Actor2,n.Actor3,n.Actor4,n.Actor5],o=0;o<i.length;o++){var s=i[o],a=c.instance.getRoleData(s);a&&t.push(a)}for(var l=0;l<t.length;l++){var r=t[l],h=r.roletype;h=parseInt(r.roletype),this.roleDatas[h]=r;var u=c.instance.getPetSkill(h);if(u.length>0){var p=u[0];this.initPetData(h,p)}}for(var d=0;d<t.length;d++){var f=t[d],m=f.roletype;m=parseInt(f.roletype);var v=null,g=cc.v2(-5,-16);switch(m){case n.Actor1:v=this.actor1SkillNode;break;case n.Actor2:v=this.actor2SkillNode;break;case n.Actor3:v=this.actor3SkillNode;break;case n.Actor4:v=this.actor4SkillNode;break;case n.Actor5:v=this.actor5SkillNode}this.roleSkills={};var C=c.instance.getRoleSkill(m);if(C.length>0){var _=C[C.length-1];_=parseInt(_),this.spawnRoleSkillNode(_,v,g),this.roleSkills[m]=_}}},spawnRoleSkillNode:function(e,t,i){var o=function(e){var o="prefab/skillcell/"+e.prefabName;cc.loader.loadRes(o,function(e,o){e&&cc.error(e);var n=cc.instantiate(o);n.name="skill",n.scale=.5,n.parent=t,n.position=i,n.zIndex=-2,n.getChildByName("cellNode").x=39})}.bind(this);a.instance.loadJsonSkillData(e,o)},initPetData:function(e,t){var i=this.petnamelist[t-1],o=this.petlist[e];o.active=!0,this.loadPet(i,o);var n=c.instance.getPetData(t);this.roleBattlePets[e]=n},switchSkillID:function(e,t){for(var i in this.roleBattlePets){if(parseInt(i)===e){this.initPetData(e,t);break}}},switchPetFresh:function(e,t){this.initPetData(e,t)},switchRoleSkill:function(e,t){var i=null;switch(e){case n.Actor1:i=this.actor1SkillNode.getChildByName("skill");break;case n.Actor2:i=this.actor2SkillNode.getChildByName("skill");break;case n.Actor3:i=this.actor3SkillNode.getChildByName("skill");break;case n.Actor4:i=this.actor4SkillNode.getChildByName("skill");break;case n.Actor5:i=this.actor5SkillNode.getChildByName("skill")}var o=i.parent,s=cc.v2(i.x,i.y);this.spawnRoleSkillNode(t,o,s),this.roleSkills[e]=t,i.destroy()},getRoleSkill:function(e){return this.roleSkills[e]},showRoleSkill:function(e){this.actor1SkillNode.active=e,this.actor2SkillNode.active=e,this.actor3SkillNode.active=e,this.actor4SkillNode.active=e,this.actor5SkillNode.active=e},loadPet:function(e,t){var i="spine/pet/";i+=e,cc.loader.loadRes(i,sp.SkeletonData,function(e,i){e&&cc.error(e);var o=t.getComponent("sp.Skeleton");o.skeletonData=i,o.setAnimation(0,"idle",!0);t.stopAllActions(),t.scale=1.2;var n=t.scale,s=cc.scaleTo(.25,1.2*n,1.2*n).easing(cc.easeOut(3)),a=cc.scaleTo(.25,1*n,1*n).easing(cc.easeOut(3)),c=cc.sequence(s,a);t.runAction(c)})},skillProcess:function(e,t,i){if(this.roleDatas[e]){this.actorSkillNodelist[e].active=!0;var o=this.actorSkilllist[e],n=o.progress;if(n=(n=(n+=t)>=1?1:n)<=0?0:n,o.progress=n,void 0!==this.roleBattlePets[e]){var s=this.petSkillNodelist[e],a=this.petSkilllist[e];s.active=!0;var c=a.progress;c=(c=(c+=i)>=1?1:c)<=0?0:c,a.progress=c}}},addSkill:function(e){this.skillProcess(e,.1,.1)},decSkill:function(e){this.skillProcess(e,-.1,-.1)},hideAllSkill:function(){this.actor1SkillNode.active=!1,this.actor2SkillNode.active=!1,this.actor3SkillNode.active=!1,this.actor4SkillNode.active=!1,this.actor5SkillNode.active=!1,this.pet1SkillNode.active=!1,this.pet2SkillNode.active=!1,this.pet3SkillNode.active=!1,this.pet4SkillNode.active=!1,this.pet5SkillNode.active=!1},tripHeroSkill:function(e){var t=!1;if(void 0!==this.roleDatas[e]){var i=this.actorSkilllist[e];i&&i.progress>=1&&(i.progress=0,t=!0)}return t},petSkillAction:function(e,t){var i=cc.scaleTo(.2,2).easing(cc.easeBounceInOut()),o=cc.scaleTo(.2,1).easing(cc.easeBounceInOut()),n=cc.sequence(i,o),s=cc.jumpBy(.1,cc.v2(0,0),40,1).easing(cc.easeOut(3)),a=cc.jumpBy(.1,cc.v2(0,0),-40,1).easing(cc.easeOut(3)),c=cc.skewTo(.1,0,2),l=cc.skewTo(.1,0,0),r=cc.sequence(c,l),h=cc.sequence(s,a),u=cc.spawn(n,h,r),p=cc.callFunc(function(){t&&t()},this),d=cc.sequence(cc.delayTime(.2),u,p);e.runAction(d)},tripPetSkills:function(e){var t=this;this._petsAttackOverCallback=e;var i=this.roleBattlePets;if("{}"!=JSON.stringify(i)){for(var o in this.roleBattlePets){if(this.petSkilllist[o].progress>=1){var n=this.roleBattlePets[o].ID;this.skillAttackStart(n)}}var s=function(e){var i=parseInt(e),o=t.roleBattlePets[e],n=o.ID,s=t.petSkilllist[e];if(s.progress>=1){var a=function(){this.tripPetSkill(i,o)}.bind(t),c=t.petlist[e];t.petSkillAction(c,a),s.progress=0}else t.skillAttackOver(n)};for(var a in this.roleBattlePets)s(a)}else this._petsAttackOverCallback&&(this._petsAttackOverCallback(),this._petsAttackOverCallback=null,this.skillAttacks={})},tripPetSkill:function(e,t){this.boardSkillDone=!1,this.monsterSkillDone=!1;var i=t.ID,n=!0;o.instance.getMonster()||(n=!1),n||this.shootMonsterDone(i);var s=function(){this.shootBoardDone(i)}.bind(this);if(this.shootToBoard(e,i,s),this.skillAttackStart(i),n){var a=function(){this.shootMonsterDone(i)}.bind(this);this.shootToMonster(t,a),this.skillAttackStart(i)}},shootToBoard:function(e,t,i){var a=this.petlist[e];if(a){var c=s.UnKnown;switch(e){case n.Actor1:c=s.Cell1;break;case n.Actor2:c=s.Cell2;break;case n.Actor3:c=s.Cell3;break;case n.Actor4:c=s.Cell4;break;case n.Actor5:c=s.Cell5}var l=o.instance.boardNode,r=this.node.convertToWorldSpaceAR(a.getPosition());r=l.convertToNodeSpaceAR(r);t+=100,o.instance.ShootSkill.spawnSkill(l,r,"UI",t,c,-1,i)}else callback&&callback()},shootToMonster:function(e,t){var i=e.ID,n=e.attack,s=o.instance.getMonster();if(s){l.instance.playPetattack2();var a="prefab/skill/",c=["skillA1","skillA2","skillA3","skillA4","skillA5","skillA6","skillA7","skillA8"];switch(i){case 1:case 2:a+=c[0];break;case 3:case 4:a+=c[1];break;case 5:case 6:a+=c[2];break;case 7:case 8:a+=c[3];break;case 9:case 10:a+=c[4];break;case 11:case 12:a+=c[5];break;case 13:case 14:a+=c[6];break;case 15:case 16:default:a+=c[7]}var r=this;cc.loader.loadRes(a,function(e,i){e&&cc.error(e);var o=cc.instantiate(i);o.zIndex=10,o.parent=s.parent,o.position=s.position,o.x-=s.width/2,o.y+=.5*s.height;var a=o.getComponent("PetSkill");if(a){var c=function(e){t&&t()}.bind(r);a.play(function(){r.petskillHurt(n,c)})}})}else t&&t()},shootBoardDone:function(e){this.boardSkillDone=!0,this.monsterSkillDone&&this.skillAttackOver(e)},shootMonsterDone:function(e){this.monsterSkillDone=!0,this.boardSkillDone&&this.skillAttackOver(e)},skillAttackStart:function(e){this.skillAttacks[e]=!0},skillAttackOver:function(e,t){this.skillAttacks[e]=!1;var i=!0;for(var o in this.skillAttacks){if(this.skillAttacks[o]){i=!1;break}}i&&this.triggerAttackOverCallback()},petskillHurt:function(e,t){var i=o.instance.getMonster();if(i){var n=i.getComponent("Monster");if(n){n.hurt(e,function(e){t&&t(e)})}}},triggerAttackOverCallback:function(){this._petsAttackOverCallback&&(this._petsAttackOverCallback(),this._petsAttackOverCallback=null,this.skillAttacks={})},start:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",JsonData:"JsonData",LocalStorage:"LocalStorage",PlayFightAudio:"PlayFightAudio",RPGManager:"RPGManager",Utils:"Utils"}],PetSkill:[function(e,t,i){"use strict";cc._RF.push(t,"a5273WHZINHZqGRuZ4CzXhU","PetSkill"),cc.Class({extends:cc.Component,properties:{animationName:""},onLoad:function(){this.hurtFunc=null},start:function(){},onFinished:function(){this.hurtFunc&&this.hurtFunc(),this.node.destroy()},play:function(e){this.hurtFunc=e;var t=this.node.getComponent(cc.Animation);t.on("finished",this.onFinished,this),t.play(this.animationName)}}),cc._RF.pop()},{}],PetUI:[function(e,t,i){"use strict";cc._RF.push(t,"f4a388L7d9OVqfp5TFyuXJk","PetUI");var o=e("Utils"),n=e("EnumDefine").EnterKind,s=e("BaseUI");cc.Class({extends:s,properties:{midbk:cc.Node,pageView:cc.PageView,UIBase:cc.Node},onLoad:function(){var e=this.midbk;this.scaleShow(e,null),this.uibase=this.UIBase.getComponent("UIBase")},start:function(){},onBtnCloseActorUI:function(){var e=function(){var e=n.Main,t=cc.find("Canvas").getComponent("CanvasInit");switch(t&&(e=t.enterCode),e){case n.Main:cc.director.loadScene("Main");break;case n.Map:cc.director.loadScene("Map")}this.node.removeFromParent()}.bind(this),t=this.midbk;this.scaleClose(t,e)},refreshPagView:function(e){if(this.pageView){var t=0;t=e>=1&&e<=8?0:1,this.pageView.scrollToPage(t);var i=this.pageView.getPages()[t];if(i){var o=i.getComponent("PetPage");o&&o.extractOnePet(e,t)}}},luckSpin:function(){if(this.buyLuckSpinDiamond(10)){var e=o.computeSpin([30,70]),t=cc.director.getScene()._children[0],i=this;cc.loader.loadRes("prefab/PetExtraction",function(o,n){var s=cc.instantiate(n);s.parent=t,s.position=cc.v2(0,0),s.active=!0;var a=s.getComponent("PetExtraction");if(a){a.spin(e,function(e){i.refreshPagView(e)})}})}},buyLuckSpinDiamond:function(e){var t=!1;this.uibase&&(this.uibase.getDiamondNum()>=e&&(t=!0,this.uibase.updateDiamond(-e)));return t}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",Utils:"Utils"}],Pets:[function(e,t,i){"use strict";cc._RF.push(t,"45b9f+5RnlJZJLkHDTmEHeq","Pets");var o=e("EnumDefine"),n=o.ActorType,s=(o.EnterKind,e("BaseUI")),a=e("LocalStorage");cc.Class({extends:s,properties:{scrollView:{default:null,type:cc.ScrollView}},onLoad:function(){this.content=this.scrollView.content,this.uibase=null},start:function(){},show:function(e,t){var i=this;this.uibase=t,this.roleID=e;var o=[];switch(e){case n.Actor1:o=[1,2,3];break;case n.Actor2:o=[4,5,6];break;case n.Actor3:o=[7,8,9];break;case n.Actor4:o=[10,11,12];break;case n.Actor5:o=[13,14,15]}for(var s=function(t){var n=!0,s=o[t];a.instance.getPetData(s)&&(n=!1);var c=i,l=t;cc.loader.loadRes("prefab/PetUI/PetItem",function(t,i){var o=cc.instantiate(i);o.parent=c.content,o.position=cc.v2(187+l*(.8*o.width+15),60),o.getComponent("PetItem").init(e,s,n,c.uibase)})},c=0;c<o.length;c++)s(c)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage"}],Pet:[function(e,t,i){"use strict";cc._RF.push(t,"e2aa7hpLixFzqzPE3AHlzjW","Pet");var o=e("Utils"),n=e("LocalStorage"),s=e("JsonData");cc.Class({extends:cc.Component,properties:{skillID:0,roleID:0,unlockPrice:0,unlockNode:cc.Node,pet:sp.Skeleton},onLoad:function(){this.uibase=null,this.lock=!0},start:function(){},init:function(e,t,i){if(this.uibase=i,e===this.roleID){for(var n=!0,s=0;s<t.length;s++){var a=t[s];if((a=parseInt(a))===this.skillID){n=!1;break}}if(this.lock=n,n){var c="spine/pet/";c+=o.getPetFileName(this.skillID-1);var l=this.pet;cc.loader.loadRes(c,sp.SkeletonData,function(e,t){e&&cc.error(e),l.skeletonData=t,l.node.color=cc.color(0,0,0,255)})}else{this.unlockNode.active=!1;var r="spine/pet/";r+=o.getPetFileName(this.skillID-1);var h=this.pet;cc.loader.loadRes(r,sp.SkeletonData,function(e,t){e&&cc.error(e),h.skeletonData=t,h.setAnimation(0,"idle",!0)})}}},onBtnUnlockFunc:function(e){if(this.buyRoleDiamond(this.unlockPrice)){this.unlockNode.active=!1,this.pet.node.color=cc.color(255,255,255,255),this.lock=!1;for(var t="",i=n.instance.getPetSkill(this.roleID),o=0;o<i.length;o++)t+=i[o],t+=",";t+=this.skillID+"",n.instance.setPetSkill(this.roleID,t);var a=function(e){var t={};t.ID=this.skillID,t.level=e.Level,t.attack=e.Attack,n.instance.setPetData(t)}.bind(this);s.instance.loadPetData(this.skillID,1,a)}},onBtnShowFunc:function(e){if(!this.lock){var t=cc.director.getScene()._children[0],i=this;cc.loader.loadRes("prefab/PetInfoUI",function(e,o){var n=cc.instantiate(o);n.scale=1,n.parent=t;var s=i.skillID;n.getComponent("PetInfo").show(s,i.uibase);var a=n.getChildByName("UIBase");a&&(a.active=!1)})}},buyRoleDiamond:function(e){var t=!1;this.uibase&&(this.uibase.getDiamondNum()>=e&&(t=!0,this.uibase.updateDiamond(-e)));return t}}),cc._RF.pop()},{JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PlayAnimation:[function(e,t,i){"use strict";cc._RF.push(t,"6c18eKNqTNCBJSLf6nY61Sc","PlayAnimation"),cc.Class({extends:cc.Component,properties:{animationName:""},onLoad:function(){this.finished=null},start:function(){},onFinished:function(){this.finished?this.finished():this.node.destroy()},play:function(e){this.finished=e;var t=this.node.getComponent(cc.Animation);t.on("finished",this.onFinished,this),t.play(this.animationName)}}),cc._RF.pop()},{}],PlayBkAudios:[function(e,t,i){"use strict";cc._RF.push(t,"1e284EVrddOoYdxoUWupTIt","PlayBkAudios");e("Utils");cc.Class({extends:cc.Component,properties:{audioCrazy:{type:cc.AudioSource,default:null},audioNormal:{type:cc.AudioSource,default:null}},onLoad:function(){},play:function(){switch(this.stageType){case 0:this.audioNormal&&this.audioNormal.play();break;case 1:this.audioCrazy&&this.audioCrazy.play()}},pause:function(){switch(this.stageType){case 0:this.audioNormal&&this.audioNormal.pause();break;case 1:this.audioCrazy&&this.audioCrazy.pause()}},stop:function(){this.audioNormal&&this.audioNormal.stop(),this.audioCrazy&&this.audioCrazy.stop()},resume:function(){switch(this.stageType){case 0:this.audioNormal&&this.audioNormal.resume();break;case 1:this.audioCrazy&&this.audioCrazy.resume()}},onDisable:function(){this.stop()}}),cc._RF.pop()},{Utils:"Utils"}],PlayFightAudio:[function(e,t,i){"use strict";cc._RF.push(t,"4220eYor1JO8pVaVltGX8sN","PlayFightAudio");var o=cc.Class({extends:cc.Component,properties:{bonusTime:{type:cc.AudioClip,default:null},good:{type:cc.AudioClip,default:null},timeUp:{type:cc.AudioClip,default:null},petattack:{type:cc.AudioClip,default:null},petattack2:{type:cc.AudioClip,default:null},Wow:{type:cc.AudioClip,default:null},spin:{type:cc.AudioClip,default:null},OpenMagicBag:{type:cc.AudioClip,default:null},key:{type:cc.AudioClip,default:null},shootbullet:{type:cc.AudioClip,default:null},Coin:{type:cc.AudioClip,default:null},go:{type:cc.AudioClip,default:null},monsterDie:{type:cc.AudioClip,default:null},monsterAttack:{type:cc.AudioClip,default:null},monsterhit:{type:cc.AudioClip,default:null},ButtonClick:{type:cc.AudioClip,default:null},gamelose:{type:cc.AudioClip,default:null},Eliminate1:{type:cc.AudioClip,default:null},Eliminate2:{type:cc.AudioClip,default:null},Eliminate3:{type:cc.AudioClip,default:null},Eliminate4:{type:cc.AudioClip,default:null},Eliminate5:{type:cc.AudioClip,default:null},Eliminate6:{type:cc.AudioClip,default:null},Eliminate7:{type:cc.AudioClip,default:null},Eliminate8:{type:cc.AudioClip,default:null}},statics:{instance:null},onLoad:function(){this.volume=1,o.instance=this},start:function(){},playBonusTime:function(){cc.audioEngine.play(this.bonusTime,!1,this.volume)},playGood:function(){cc.audioEngine.play(this.good,!1,this.volume)},playTimeUp:function(){cc.audioEngine.play(this.timeUp,!1,this.volume)},playPetattack:function(){cc.audioEngine.play(this.petattack,!1,this.volume)},playPetattack2:function(){cc.audioEngine.play(this.petattack2,!1,this.volume)},playWow:function(){cc.audioEngine.play(this.Wow,!1,this.volume)},playSpin:function(){cc.audioEngine.play(this.spin,!1,this.volume)},playOpenMagicBag:function(){cc.audioEngine.play(this.OpenMagicBag,!1,this.volume)},playKey:function(){cc.audioEngine.play(this.key,!1,this.volume)},playShootbullet:function(){cc.audioEngine.play(this.shootbullet,!1,this.volume)},playCoin:function(){cc.audioEngine.play(this.Coin,!1,this.volume)},playMonsterDie:function(){cc.audioEngine.play(this.monsterDie,!1,this.volume)},playMonsterAttack:function(){cc.audioEngine.play(this.monsterAttack,!1,this.volume)},playMonsterhit:function(){cc.audioEngine.play(this.monsterhit,!1,this.volume)},playButtonClick:function(){cc.audioEngine.play(this.ButtonClick,!1,this.volume)},playGamelose:function(){cc.audioEngine.play(this.gamelose,!1,this.volume)},playEliminate1:function(){cc.audioEngine.play(this.Eliminate1,!1,this.volume)},playEliminate2:function(){cc.audioEngine.play(this.Eliminate2,!1,this.volume)},playEliminate3:function(){cc.audioEngine.play(this.Eliminate3,!1,this.volume)},playEliminate4:function(){cc.audioEngine.play(this.Eliminate4,!1,this.volume)},playEliminate5:function(){cc.audioEngine.play(this.Eliminate5,!1,this.volume)},playEliminate6:function(){cc.audioEngine.play(this.Eliminate6,!1,this.volume)},playEliminate7:function(){cc.audioEngine.play(this.Eliminate7,!1,this.volume)},playEliminate8:function(){cc.audioEngine.play(this.Eliminate8,!1,this.volume)},playCellConnect:function(e){switch(e){case 1:this.playEliminate1();break;case 2:this.playEliminate2();break;case 3:this.playEliminate3();break;case 4:this.playEliminate4();break;case 5:this.playEliminate5();break;case 6:this.playEliminate6();break;case 7:this.playEliminate7();break;case 8:this.playEliminate8()}}});cc._RF.pop()},{}],PoolMng:[function(e,t,i){"use strict";cc._RF.push(t,"0f752qN9blLJYVlJnMx6qsF","PoolMng");e("CellPool");var o=e("CellBloodPool"),n=e("BombEffectPool"),s=e("BulletPool"),a=e("CoinPool"),c=cc.Class({extends:cc.Component,properties:{cellBloodPool:{default:[],type:o},bombEffectPool:{default:[],type:n},bulletPool:{default:[],type:s},coinPool:{default:[],type:a}},onLoad:function(){c.instance=this,this.PropCellPool=this.node.getComponent("PropCellPool")},statics:{instance:null},init:function(){for(var e=0;e<this.cellBloodPool.length;++e)this.cellBloodPool[e].init();for(var t=0;t<this.bulletPool.length;++t)this.bulletPool[t].init();for(var i=0;i<this.coinPool.length;++i)this.coinPool[i].init();for(var o=0;o<this.bombEffectPool.length;++o)this.bombEffectPool[o].init()},requestCell:function(e){return this.PropCellPool.getCell(e)},returnCell:function(e,t){this.PropCellPool.putCell(e,t)},getCellBlood:function(e){return this.cellBloodPool[e].get()},putCellBlood:function(e,t){this.cellBloodPool[t].put(e)},getBullet:function(e){return this.bulletPool[e].get()},putBullet:function(e,t){this.bulletPool[t].put(e)},getCoin:function(){return this.coinPool[0].get()},putCoin:function(e){this.coinPool[0].put(e)},getline:function(){return this.coinPool[0].getline()},putline:function(e){this.coinPool[0].putline(e)},getslantline:function(){return this.coinPool[0].getslantline()},putslantline:function(e){this.coinPool[0].putslantline(e)},getScoreLabel:function(){return this.coinPool[0].getScoreLabel()},putScoreLabel:function(e){this.coinPool[0].putScoreLabel(e)},getRedLabel:function(){return this.coinPool[0].getRedLabel()},putRedLabel:function(e){this.coinPool[0].putRedLabel(e)},getPurbleLabel:function(){return this.coinPool[0].getPurbleLabel()},putPurbleLabel:function(e){this.coinPool[0].putPurbleLabel(e)},getOrangeLabel:function(){return this.coinPool[0].getOrangeLabel()},putOrangeLabel:function(e){this.coinPool[0].putOrangeLabel(e)},getBombEffect:function(){return this.bombEffectPool[0].get()},putBombEffect:function(e){this.bombEffectPool[0].put(e)}});cc._RF.pop()},{BombEffectPool:"BombEffectPool",BulletPool:"BulletPool",CellBloodPool:"CellBloodPool",CellPool:"CellPool",CoinPool:"CoinPool"}],Portal:[function(e,t,i){"use strict";cc._RF.push(t,"2dd48oWwqFMEqpr6dIClc4D","Portal");var o=e("Utils"),n=(e("RPGManager"),e("PoolMng"),e("EnumDefine").CellType),s=e("EnumDefine").ChestType,a=e("Game"),c=e("Utils").NUMROWS,l=e("Utils").NUMCOLUMNS,r=e("Utils").TITLE_WIDTH,h=e("Utils").TITLE_HEIGHT,u=e("PlayFightAudio"),p=e("Board");o.ProduceType,cc.v2(),cc.v2();cc.Class({extends:cc.Component,properties:{glare:{default:null,type:cc.SpriteFrame},flashEffect:{default:null,type:cc.Prefab}},ctor:function(){this._isopenPortal=!1,this._keycelllist=[],this._isallkeydone=[],this._fallingDoneFunc=null,this._isstart=!1,this._index=0},onLoad:function(){this.board=this.node.getComponent("Board"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell")},start:function(){},checkPortal:function(){if(this._isstart&&this._isallkeydone.length>0){for(var e=!1,t=0;t<this._isallkeydone.length;t++){if(!this._isallkeydone[t]){e=!0;break}}if(e)return;this._fallingDoneFunc&&(this._fallingDoneFunc(),this._fallingDoneFunc=null),this._isopenPortal=!1,this._isstart=!1,this._isallkeydone.length=0}},openPortal:function(e){var t=this;this._keycelllist.length=0,this._isallkeydone.length=0,this._fallingDoneFunc=null,this._isstart=!1,this._index=0;var i=[];if(this.ProcessBoardCell.getAllKeys(i),0!==i.length){this._fallingDoneFunc=e;for(var o=0;o<i.length;o++)this._isallkeydone.push(!1),this._isstart=!0;for(var n=[],s=function(e){var o=cc.callFunc(function(){var o=i[e],n=function(){this._isallkeydone[this._index]=!0,this._index+=1,this.checkPortal()}.bind(t);t.processOneCell(o,n)},t);n.push(o),n.push(cc.delayTime(.2))},a=0;a<i.length;a++)s(a);this.node.runAction(cc.sequence(n))}else e&&e()},processOneCell:function(e,t){var i=e.getComponent("Cell"),o=i.column,s=i.row;switch(i.celltype){case n.KeyUp:if(s<c-1){for(var a=s+1,r=0,h=!1;a<c;a++){var u=this.ProcessBoardCell.getCell(o,a);if(u){u.getComponent("Cell").celltype===n.Chest&&(h=!0);break}r+=1}0!==r||h?this.moveKey(e,o,s+r,r,t):t&&t()}break;case n.KeyDown:if(s>0){for(var p=s-1,d=0,f=!1;p>=0;p--){var m=this.ProcessBoardCell.getCell(o,p);if(m){m.getComponent("Cell").celltype===n.Chest&&(f=!0);break}d+=1}0!==d||f?this.moveKey(e,o,s-d,d,t):t&&t()}break;case n.KeyLeft:if(o>0){for(var v=o-1,g=0,C=!1;v>0;v--){var _=this.ProcessBoardCell.getCell(v,s);if(_){_.getComponent("Cell").celltype===n.Chest&&(C=!0);break}g+=1}0!==g||C?this.moveKey(e,o-g,s,g,t):t&&t()}break;case n.KeyRight:if(o<l-1){for(var S=o+1,b=0,k=!1;S<l;S++){var y=this.ProcessBoardCell.getCell(S,s);if(y){y.getComponent("Cell").celltype===n.Chest&&(k=!0);break}b+=1}0!==b||k?this.moveKey(e,o+b,s,b,t):t&&t()}}},moveKey:function(e,t,i,s,a){var p=this;this._isopenPortal=!0;var d=.1*s,f=o.pointForColumn(t,i);f.x=f.x-this.node.width/2,f.y=f.y-this.node.height/2,f.x+=r/2,f.y+=h/2;var m=cc.moveTo(d,f),v=e.getComponent("Cell"),g=v.column,C=v.row;this.ProcessBoardCell.setCell(g,C,null),u.instance.playKey();var _=cc.callFunc(function(){switch(v.column=t,v.row=i,p.ProcessBoardCell.setCell(t,i,e),v.celltype){case n.KeyLeft:if(t>0){var o=p.ProcessBoardCell.getCell(t-1,i);if(o)o.getComponent("Cell").celltype===n.Chest?p.openChest(e,o,a):a&&a();else a&&a()}break;case n.KeyRight:if(t<l-1){var s=p.ProcessBoardCell.getCell(t+1,i);if(s)s.getComponent("Cell").celltype===n.Chest?p.openChest(e,s,a):a&&a();else a&&a()}break;case n.KeyUp:if(i<c-1){var r=p.ProcessBoardCell.getCell(t,i+1);if(r)r.getComponent("Cell").celltype===n.Chest?p.openChest(e,r,a):a&&a();else a&&a()}break;case n.KeyDown:if(i>0){var h=p.ProcessBoardCell.getCell(t,i-1);if(h)h.getComponent("Cell").celltype===n.Chest?p.openChest(e,h,a):a&&a();else a&&a()}}},this);e.runAction(cc.sequence(m,_))},openChest:function(e,t,i){var o=this;this._isopenPortal=!0;var c=t.position,l=cc.v2(c.x,c.y);l.x+=t.width/2,l.y+=.2*t.height;var r=cc.moveTo(.1,l).easing(cc.easeOut(5)),h=cc.callFunc(function(){},this),u=cc.callFunc(function(){var n=t.parent,c=t.position.x+t.width/2,l=t.position.y+.8*t.height,r=function(){var o=cc.v2(c,l);this.showflashEffect(n,o);var r=t.position;r.y=t.position.y+.5*t.height;var h=t.getComponent("Cell").getDataCell(),u=function(){var o=cc.callFunc(function(){a.instance.removeCell(t),a.instance.removeCell(e),i&&i()},this);this.node.runAction(cc.sequence(cc.delayTime(0),o))}.bind(this);switch(h.ChestType){case s.Prop:this.showProps(n,o,u);break;case s.Diamond:this.showDiamonds(r),u();break;case s.Skill:this.showSkills(),u();break;case s.Coin:this.showCoins(r),u();break;default:u()}}.bind(o);t.getComponent("Cell").openChest(r)},this),p=cc.callFunc(function(){a.instance.updateCell(n.Chest,1)},this),d=(cc.callFunc(function(){a.instance.removeCell(t),a.instance.removeCell(e)},this),cc.callFunc(function(){i&&i()},this),cc.scaleTo(.2,0).easing(cc.easeOut(5))),f=cc.sequence(r,d,h,p,u);e.runAction(f)},showflashEffect:function(e,t){cc.loader.loadRes("prefab/particle/killDustParticle",function(i,o){var n=cc.instantiate(o);n&&(n.scale=1,n.parent=e,n.position=t,n.runAction(cc.sequence(cc.delayTime(2),cc.removeSelf())))});cc.loader.loadRes("prefab/flashEffect",function(i,o){var n=cc.instantiate(o);if(n){n.scale=.5,n.parent=e,n.position=t;var s=n.getComponent(cc.Animation);s&&s.play(),n.runAction(cc.sequence(cc.delayTime(1.5),cc.removeSelf()))}})},showCoins:function(e){a.instance.Board;var t,i=this.getCoinNum(),o=this.node;t="prefab/ChestCoin",cc.loader.loadRes(t,function(t,n){t&&cc.error(t);var s=cc.instantiate(n),c=e;c.x+=1*s.width/2,s.position=c,s.scale=0,s.parent=o,s.group="UI",s.getChildByName("num").getComponent(cc.Label).string=i+"",s.scale=0;var l=cc.scaleTo(.5,1).easing(cc.easeOut(3)),r=cc.moveBy(.6,cc.v2(0,50)),h=cc.spawn(l,r),u=cc.moveBy(1,cc.v2(0,100)),p=cc.callFunc(function(){a.instance.updateCoin(i)},this),d=cc.sequence(h,u,p,cc.removeSelf());s.runAction(d)})},showDiamonds:function(e){a.instance.Board;var t,i=this.getDiamondNum(),o=this.node;t="prefab/ChestDiamond",cc.loader.loadRes(t,function(t,n){t&&cc.error(t);var s=cc.instantiate(n),c=e;c.x+=1*s.width/2,s.position=c,s.scale=0,s.parent=o,s.group="UI",s.getChildByName("num").getComponent(cc.Label).string=i+"",s.scale=0;var l=cc.scaleTo(.5,1).easing(cc.easeOut(3)),r=cc.moveBy(.6,cc.v2(0,50)),h=cc.spawn(l,r),u=cc.moveBy(1,cc.v2(0,100)),p=cc.callFunc(function(){a.instance.updateDiamond(i)},this),d=cc.sequence(h,u,p,cc.removeSelf());s.runAction(d)})},showProps:function(e,t,i){var s=[n.DiamondBombProp,n.ClearBombProp,n.DoubleHorinalProp,n.DoubleVerticalProp],a=o.computeSpin([10,2,10,10]),c=s.length-1,l=o.randomRangeInt(0,c);l=s[a];var r=function(e){e.scale=0;var t=cc.scaleTo(.3,1.3).easing(cc.easeOut(3)),o=cc.moveBy(.3,cc.v2(0,20)),n=cc.spawn(t,o),s=cc.moveBy(.5,cc.v2(0,100)),a=cc.callFunc(function(){u.shootProp(e,l,i)},u),c=cc.sequence(n,s,a);e.runAction(c)}.bind(this),h="prefab/cell/DiamondBombProp",u=this;switch(l){case n.ClearBombProp:case n.SameColorProp:h="prefab/cell/DiamondBombProp";break;case n.DoubleHorinalProp:h="prefab/cell/DoubleHorinalProp";break;case n.DoubleVerticalProp:h="prefab/cell/DoubleVerticalProp";break;case n.DiamondBombProp:h="prefab/cell/DiamondBombProp"}cc.loader.loadRes(h,function(i,o){var n=cc.instantiate(o);n.parent=e,n.position=t,r&&r(n)})},getCoinNum:function(){var e=[100,200,300,400,500][o.computeSpin([50,40,30,20,10])];return o.randomRangeInt(0,e)},getDiamondNum:function(){var e=[5,10,15,20,25][o.computeSpin([50,40,30,20,10])];return o.randomRangeInt(0,e)},showSkills:function(e){},bomb:function(e,t){cc.loader.loadRes("prefab/boomEffect",function(i,o){var n=cc.instantiate(o);n.scale=.8,n.parent=e,n.position=t;var s=n.getComponent("PlayAnimation");s&&s.play()})},showBoby:function(e,t){o.showBaby(e,t,null)},shootProp:function(e,t,i){var o=this,n=this.ProcessBoardCell.randomGetCellFromTopToBottom(1);if(n.length>0){var s=n[0],a=s.position,c=Math.abs(s.width-e.width),l=Math.abs(s.height-e.height);a.x+=c,a.y+=l;var r=cc.v2();a.sub(e.position,r);var h=r.mag()/150*.2,u=cc.moveTo(h,a),d=cc.callFunc(function(){var n=s.getComponent("Cell"),a=function(o){this.ProcessBoardCell.setCell(n.column,n.row,o),p.instance.deSpawnCell(s),(n=o.getComponent("Cell")).init(t,1);var a=o.scale;o.scale=0;var c=cc.scaleTo(.2,a).easing(cc.easeOut(3));o.runAction(c),e.destroy(),i&&i()}.bind(o);p.instance.spawnCell(t,n.column,n.row,1,a)},this),f=cc.sequence(u,d);e.runAction(f)}else e.destroy(),i&&i()}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",Game:"Game",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",RPGManager:"RPGManager",Utils:"Utils"}],ProcessBoardCell:[function(e,t,i){"use strict";cc._RF.push(t,"59ac6LvvwtMAqO9A3canoyS","ProcessBoardCell");var o=e("Utils").NUMROWS,n=e("Utils").NUMCOLUMNS,s=e("EnumDefine").CellType,a=(e("Utils"),e("Sort")),c=cc.Class({extends:cc.Component,properties:{},onLoad:function(){c.instance=this,this.cellList=[],this.sideCellList=[],this.skillCirclelist=[]},statics:{instance:null},start:function(){},printCellsNull:function(){for(var e=0;e<o;e++)for(var t=0;t<n;t++){void 0===this.getCell(t,e)&&console.log("column, row",t,e)}var i=this.getCell(0,4);if(i){i.getComponent("Cell");var s=i.position;cc.log("pos",s.x,s.y),i.scale=3}},printCells:function(){for(var e=0;e<this.cellList.length;e++){var t=this.cellList[e];if(t){var i=t.getComponent("Cell"),o=i.row,n=i.column;console.log("row, column, lv",o,n,i.celltype)}}},setCelllistNull:function(e){for(var t=0;t<e.length;t++){var i=e[t];i&&this.setCellNull(i)}},getSideCell:function(e,t){var i=t*o+e;return this.sideCellList[i]},getCell:function(e,t){var i=t*o+e;return this.cellList[i]},getSkillCircle:function(e,t){var i=t*o+e;return this.skillCirclelist[i]},setSkillCircle:function(e,t,i){var n=t*o+e;this.skillCirclelist[n]=i},showAllCircles:function(e){for(var t=0;t<o;t++)for(var i=0;i<n;i++){var s=this.getSkillCircle(i,t);s&&(s.active=e)}},setCellNull:function(e){if(e){var t=e.getComponent("Cell"),i=t.row,o=t.column;this.setCell(o,i,null)}},setCell:function(e,t,i){var n=t*o+e;this.cellList[n]=i},setSideCell:function(e,t,i){var n=t*o+e;this.sideCellList[n]=i},removeCell:function(e){this.setCellNull(e)},randomRange:function(e,t){return Math.random()*(t-e)+e},randomRangeInt:function(e,t){return Math.floor(this.randomRange(e,t))},getTwoVertical:function(e,t,i){if(e-1>=0){var o=[];this.getVerticalCells(e-1,t,o),o.length>0&&i.push(o)}if(e+1<n){var s=[];this.getVerticalCells(e+1,t,s),s.length>0&&i.push(s)}},getTwoHorinal:function(e,t,i){if(t-1>=0){var n=[];this.getHorinalCells(e,t-1,n),n.length>0&&i.push(n)}if(t+1<o){var s=[];this.getHorinalCells(e,t+1,s),s.length>0&&i.push(s)}},getHorinalCells:function(e,t,i){for(var o=0;o<n;o++){var s=this.getCell(o,t);if(s&&s.parent)s.getComponent("Cell").canRemove()&&i.push(s)}},getVerticalCells:function(e,t,i){for(var n=0;n<o;n++){var s=this.getCell(e,n);if(s&&s.parent)s.getComponent("Cell").canRemove()&&i.push(s)}},getDiamondCells:function(e,t,i,s){var a=[],c=[],l=[],r=[],h=[];if(t+2<o){var u=this.getCell(e,t+2);if(u)u.getComponent("Cell").canRemove()&&(i.push(u),a.push(u))}if(t+1<o){var p=this.getCell(e,t+1);if(p)p.getComponent("Cell").canRemove()&&(i.push(p),c.push(p))}if(e-1>=0&&t+1<o){var d=this.getCell(e-1,t+1);if(d)d.getComponent("Cell").canRemove()&&(i.push(d),c.push(d))}if(e+1<n&&t+1<o){var f=this.getCell(e+1,t+1);if(f)f.getComponent("Cell").canRemove()&&(i.push(f),c.push(f))}var m=this.getCell(e,t);m&&(m.getComponent("Cell").canRemove()&&(i.push(m),l.push(m)));if(e-1>=0){var v=this.getCell(e-1,t);if(v)v.getComponent("Cell").canRemove()&&(i.push(v),l.push(v))}if(e-2>=0){var g=this.getCell(e-2,t);if(g)g.getComponent("Cell").canRemove()&&(i.push(g),l.push(g))}if(e+1<n){var C=this.getCell(e+1,t);if(C)C.getComponent("Cell").canRemove()&&(i.push(C),l.push(C))}if(e+2<n){var _=this.getCell(e+2,t);if(_)_.getComponent("Cell").canRemove()&&(i.push(_),l.push(_))}if(t-1>=0){var S=this.getCell(e,t-1);if(S)S.getComponent("Cell").canRemove()&&(i.push(S),r.push(S))}if(e-1>=0&&t-1>=0){var b=this.getCell(e-1,t-1);if(b)b.getComponent("Cell").canRemove()&&(i.push(b),r.push(b))}if(e+1<n&&t-1>=0){var k=this.getCell(e+1,t-1);if(k)k.getComponent("Cell").canRemove()&&(i.push(k),r.push(k))}if(t-2>=0){var y=this.getCell(e,t-2);if(y)y.getComponent("Cell").canRemove()&&(i.push(y),h.push(y))}s&&(a.length>0&&s.push(a),c.length>0&&s.push(c),l.length>0&&s.push(l),r.length>0&&s.push(r),h.length>0&&s.push(h))},checkCellConnect:function(e,t){var i=e.row,o=e.column,n=t.row,s=t.column;return i==n&&o==s-1||(i==n&&o==s+1||(s==o&&i==n-1||(s==o&&i==n+1||(i==n+1&&o==s-1||(i==n+1&&o==s+1||(i==n-1&&o==s-1||i==n-1&&o==s+1))))))},getXlist:function(e,t,i,s,a,c){for(var l=e,r=t;e+1<o&&t+1<n;){var h=this.getCell(t+1,e+1);if(h)h.getComponent("Cell").canRemove()&&i.push(h);e+=1,t+=1}for(e=l,t=r;e-1>=0&&t-1>=0;){var u=this.getCell(t-1,e-1);if(u)u.getComponent("Cell").canRemove()&&s.push(u);e-=1,t-=1}for(e=l,t=r;e+1<o&&t-1>=0;){var p=this.getCell(t-1,e+1);if(p)p.getComponent("Cell").canRemove()&&a.push(p);e+=1,t-=1}for(e=l,t=r;e-1>=0&&t+1<n;){var d=this.getCell(t+1,e-1);if(d)d.getComponent("Cell").canRemove()&&c.push(d);e-=1,t+=1}},getXXlist:function(e,t,i,o,n,s,a,c){this.getXlist(e,t,i,o,n,s),this.getHorinalCells(e,t,a),this.getVerticalCells(t,t,c)},getClearBomblist:function(){for(var e=[],t=0;t<o;t++)for(var i=0;i<n;i++){var s=this.getCell(i,t);if(s)s.getComponent("Cell").canRemove()&&e.push(s)}return e},getAllKeys:function(e){for(var t=0;t<o;t++)for(var i=0;i<n;i++){var a=this.getCell(i,t);if(a)switch(a.getComponent("Cell").celltype){case s.KeyLeft:case s.KeyRight:case s.KeyUp:case s.KeyDown:e.push(a)}}},getFourConorSideCells:function(e,t,i){if(e-1>=0){var s=this.getSideCell(e-1,t);s&&i.push(s)}if(e+1<n){var a=this.getSideCell(e+1,t);a&&i.push(a)}if(t-1>=0){var c=this.getSideCell(e,t-1);c&&i.push(c)}if(t+1<o){var l=this.getSideCell(e,t+1);l&&i.push(l)}},getFourConorCells:function(e,t,i){if(e-1>=0){var s=this.getCell(e-1,t);if(s)s.getComponent("Cell").canRemove()&&i.push(s)}if(e+1<n){var a=this.getCell(e+1,t);if(a)a.getComponent("Cell").canRemove()&&i.push(a)}if(t-1>=0){var c=this.getCell(e,t-1);if(c)c.getComponent("Cell").canRemove()&&i.push(c)}if(t+1<o){var l=this.getCell(e,t+1);if(l)l.getComponent("Cell").canRemove()&&i.push(l)}},getSameCelllist:function(e){for(var t=[],i=0;i<o;i++)for(var s=0;s<n;s++){var a=this.getCell(s,i);if(a){var c=a.getComponent("Cell");c&&c.celltype===e&&t.push(a)}}return t},randomGetNormalCells:function(e){for(var t=[],i=0;i<o;i++)for(var s=0;s<n;s++){var c=this.getCell(s,i);if(c){var l=c.getComponent("Cell");l&&l.normalCell()&&t.push(c)}}a.shuffle(t);for(var r=[],h=0;h<e;h++)r.push(t[h]);return r},randomCellUseCellType:function(e,t){for(var i=[],s=0;s<o;s++)for(var c=0;c<n;c++){var l=this.getCell(c,s);if(l){var r=l.getComponent("Cell");r&&r.celltype===e&&i.push(l)}}a.shuffle(i);for(var h=[],u=0;u<t;u++)h.push(i[u]);return h}});cc._RF.pop()},{EnumDefine:"EnumDefine",Sort:"Sort",Utils:"Utils"}],ProcessStory:[function(e,t,i){"use strict";cc._RF.push(t,"c02cedXzgVL2oEbDqpvJCPP","ProcessStory");e("Game"),e("EnumDefine").GameStages;var o=e("Utils"),n=cc.Class({extends:cc.Component,properties:{topBoxIn:cc.Sprite,topBoxOut:cc.Sprite,bottomBox:cc.Sprite,sun:cc.Sprite,perspective:cc.Sprite,midshotOne_1:cc.Sprite,midshotOne_2:cc.Sprite,midshotOne_3:cc.Sprite,midshotOne_4:cc.Sprite,foreground1:cc.Sprite,foreground2:cc.Sprite,foreground3:cc.Sprite,foreground4:cc.Sprite,ground:cc.Node,midshotOne:cc.Node,UI:cc.Node,RPG:cc.Node,clouds:{default:[],type:cc.Sprite}},onLoad:function(){if(n.instance=this,this.stageFileNamesData=null,o.levelResultData){var e=o.levelResultData;if(e){e.stageID;var t=e.explorationID;this.initStage(t)}}},statics:{instance:null},start:function(){},updateAlignment:function(e){if(e){var t=e.getComponent(cc.Widget);t&&(t.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE,t.updateAlignment())}},initStage:function(e){var t=this.getStageData(e);this.stageFileNamesData=t;t.path;var i=o.StageSpriteAtlas,n=i.getSpriteFrame(t.topout);this.topBoxOut.spriteFrame=n,this.updateAlignment(this.topBoxOut.node),n=i.getSpriteFrame(t.topin),this.topBoxIn.spriteFrame=n,this.updateAlignment(this.topBoxIn.node),n=i.getSpriteFrame(t.bottom),this.bottomBox.spriteFrame=n,this.updateAlignment(this.bottomBox.node),n=i.getSpriteFrame(t.sun),this.sun.spriteFrame=n,n=i.getSpriteFrame(t.perspective),this.perspective.spriteFrame=n,this.updateAlignment(this.perspective.node),n=i.getSpriteFrame(t.midshot),this.midshotOne_1.spriteFrame=n,n=i.getSpriteFrame(t.midshot),this.midshotOne_2.spriteFrame=n,n=i.getSpriteFrame(t.midshot),this.midshotOne_3.spriteFrame=n,n=i.getSpriteFrame(t.midshot),this.midshotOne_4.spriteFrame=n,n=i.getSpriteFrame(t.foreground),this.foreground1.spriteFrame=n,this.fliter(n),n=i.getSpriteFrame(t.foreground),this.foreground2.spriteFrame=n,this.fliter(n),n=i.getSpriteFrame(t.foreground),this.foreground3.spriteFrame=n,this.fliter(n),n=i.getSpriteFrame(t.foreground),this.foreground4.spriteFrame=n,this.fliter(n);for(var s=this.clouds,a=0;a<s.length;a++){var c=s[a];n=i.getSpriteFrame(t.clouds[a]),c.spriteFrame=n}},getStageData:function(e){var t="",i="",o="",n="",s="",a="",c="",l="",r="",h="",u=[];switch(e){case 1:t="texture/farm",n="farm_boxtop1",s="farm_boxbottom1",a="farm_boxbottom1",c="farm_foreground1",l="farm_midshot1",r="farm_perspective1",h="farm_sun1",u=["cloud1","cloud2","cloud3"],i="farm_boxone1",o="farm_boxtwo1";break;case 2:case 3:t="texture/farm",n="farm_boxtop2",s="farm_boxbottom2",a="farm_boxbottom2",c="farm_foreground2",l="farm_midshot2",r="farm_perspective2",h="farm_sun2",u=["cloud1","cloud2","cloud3"],i="farm_boxone2",o="farm_boxtwo2",this.moveWinds(this.midshotOne_1,0,-35),this.moveWinds(this.midshotOne_2,0,-35),this.moveWinds(this.midshotOne_3,0,-35),this.moveWinds(this.midshotOne_4,0,-35);break;case 4:case 5:t="texture/farm",n="farm_boxtop3",s="farm_boxbottom3",a="farm_boxbottom3",c="farm_foreground3",l="farm_midshot3",r="farm_perspective3",h="moon",u=["cloud1","cloud2","cloud3"],i="farm_boxone3",o="farm_boxtwo3";break;case 6:case 7:t="texture/forest",n="forest_boxtop1",s="forest_boxbottom1",a="forest_boxbottom1",c="forest_foreground1",l="forest_midshot1",r="forest_perspective1",h="forest_sun",u=["forest_cloud1","forest_cloud1big","forest_cloud1"],this.hideWinds(this.midshotOne_1),this.hideWinds(this.midshotOne_2),this.hideWinds(this.midshotOne_3),this.hideWinds(this.midshotOne_4),i="forest_boxone1",o="forest_boxtwo1",this.RPG.y+=20;break;case 8:case 9:t="texture/forest",n="forest_boxtop2",s="forest_boxbottom2",a="forest_boxbottom2",c="forest_foreground2",l="forest_midshot2",r="forest_perspective2",h="forest_sun",u=["forest_cloud2","forest_cloud2big","forest_cloud2"],this.hideWinds(this.midshotOne_1),this.hideWinds(this.midshotOne_2),this.hideWinds(this.midshotOne_3),this.hideWinds(this.midshotOne_4),i="forest_boxone2",o="forest_boxtwo2",this.RPG.y+=20;break;case 10:t="texture/forest",n="forest_boxtop3",s="forest_boxbottom3",a="forest_boxbottom3",c="forest_foreground3",l="forest_midshot3",r="forest_perspective3",h="moon",u=["forest_cloud3","forest_cloud3big","forest_cloud3"],this.hideWinds(this.midshotOne_1),this.hideWinds(this.midshotOne_2),this.hideWinds(this.midshotOne_3),this.hideWinds(this.midshotOne_4),i="forest_boxone3",o="forest_boxtwo3",this.RPG.y+=20}var p={};return p.path=t,p.box1=i,p.box2=o,p.topin=s,p.topout=n,p.bottom=a,p.foreground=c,p.midshot=l,p.perspective=r,p.sun=h,p.clouds=u,p},moveWinds:function(e,t,i){for(var o=e.node.children,n=0;n<o.length;n++){var s=o[n];s&&(s.x+=t,s.y+=i)}},hideWinds:function(e){for(var t=e.node.children,i=0;i<t.length;i++){var o=t[i];o&&(o.active=!1)}},fliter:function(e){var t=e.getTexture();t.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),t.setWrapMode(cc.Texture2D.WrapMode.GL_REPEAT,cc.Texture2D.WrapMode.GL_REPEAT)}});cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",Utils:"Utils"}],PropCellAttackArea:[function(e,t,i){"use strict";cc._RF.push(t,"a133bIGuZFGb4HXt3AbuIWy","PropCellAttackArea");e("Utils").NUMROWS,e("Utils").NUMCOLUMNS,e("PoolMng"),e("Utils");var o=e("EnumDefine").CellType;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.Board=this.node.getComponent("Board"),this.SpawnCells=this.node.getComponent("SpawnCells"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this._usedProplist=[],this._propdatalist=[]},start:function(){},clearCircles:function(){this._usedProplist.length=0},clear:function(){this._usedProplist.length=0,this._propdatalist.length=0},reSetPropCells:function(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.getComponent("Cell");if(o.propNormalCell())for(var n=0;n<this._propdatalist.length;n++){var s=this._propdatalist[n],a=this.ProcessBoardCell.getCell(s.column,s.row),c=a.getComponent("Cell");if(c.normalCell()&&(o.row!==c.row||o.column!==c.column)){var l=o.cellGroup,r=o.celltype;this.spawnNormalCell(i,l),this.spawnPropCell(a,r)}}}this._propdatalist.length=0},addOnePropData:function(e,t,i){for(var o=-1,n=0;n<this._propdatalist.length;n++){var s=this._propdatalist[n];if(s.column===e&&s.row===t&&s.celltype===i){o=n;break}}if(-1===o){var a={};a.column=e,a.row=t,a.celltype=i,this._propdatalist.push(a)}},moveBacklink:function(e,t,i){var o=t.getComponent("Cell"),n=i.getComponent("Cell");if(o.celltype===n.celltype)return null;if(n.normalCell()||o.propNormalCell())return null;var s=e.indexOf(t),a=o.celltype,c=n.celltype;return i=this.spawnNormalCell(i,a),t=this.spawnPropCell(t,c),n=i.getComponent("Cell"),o=t.getComponent("Cell"),n.unTouch(),o.touch(),e[s]=t,i},moveForWardlink:function(e,t,i){var o=t.getComponent("Cell"),n=i.getComponent("Cell");if(n.propNormalCell()?this.addOnePropData(n.column,n.row,n.celltype):0===this._propdatalist.length&&o.propNormalCell()&&this.addOnePropData(o.column,o.row,o.celltype),o.celltype!==n.celltype&&!o.normalCell()&&!n.propNormalCell()){var s=n.celltype,a=o.celltype,c=e.indexOf(t),l=e.indexOf(i);t=this.spawnNormalCell(t,s),i=this.spawnPropCell(i,a),c>=0&&(e[c]=t),l>=0&&(e[l]=i),o=t.getComponent("Cell"),n=i.getComponent("Cell"),o.touch(),n.touch()}},spawnNormalCell:function(e,t){var i=e.getComponent("Cell"),o=e.parent,n=cc.v2(e.x,e.y),s=i.column,a=i.row,c=e.zIndex;this.Board.deSpawnCell(e);var l=this.Board.spawnOneCell(t,s,a);if(l){l.parent=o,l.position=n,l.zIndex=c;(i=l.getComponent("Cell")).init(t,1),this.ProcessBoardCell.setCell(s,a,l)}return l},spawnPropCell:function(e,t){var i=e.getComponent("Cell"),o=e.parent,n=cc.v2(e.x,e.y),s=i.column,a=i.row,c=e.zIndex;this.Board.deSpawnCell(e);var l=this.Board.spawnOneCell(t,s,a);return l&&(l.parent=o,l.position=n,l.zIndex=c,this.ProcessBoardCell.setCell(s,a,l),(i=l.getComponent("Cell")).init(t,1)),l},showPropsArea:function(e){for(var t=this.collectProplist(e),i=0;i<t.length;i++){var o=t[i];if(!(this._usedProplist.indexOf(o)>=0)){this._usedProplist.push(o);var n=o.getComponent("Cell");this.showArea(n)}}},collectProplist:function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];o.getComponent("Cell").IsProp()&&-1==t.indexOf(o)&&t.push(o)}return t},showSidePropAreas:function(e){for(var t=0;t<e.length;t++){var i=e[t];if(!(this._usedProplist.indexOf(i)>=0)){this._usedProplist.push(i);var o=i.getComponent("Cell");this.showArea(o)}}},showArea:function(e){var t=e.celltype,i=e.column,n=e.row;switch(t){case o.One_Horinal:case o.Two_Horinal:case o.Three_Horinal:case o.Four_Horinal:case o.Five_Horinal:this.showHorinalArea(i,n);break;case o.One_Vertical:case o.Two_Vertical:case o.Three_Vertical:case o.Four_Vertical:case o.Five_Vertical:this.showVerticalArea(i,n);break;case o.One_XCross:case o.Two_XCross:case o.Three_XCross:case o.Four_XCross:case o.Five_XCross:this.showXPropArea(i,n);break;case o.One_PrismBomb:case o.Two_PrismBomb:case o.Three_PrismBomb:case o.Four_PrismBomb:case o.Five_PrismBomb:this.showDiamondBombArea(i,n);break;case o.One_Brush:case o.Two_Brush:case o.Three_Brush:case o.Four_Brush:case o.Five_Brush:break;case o.SOne_TwoHorinal:case o.STwo_TwoHorinal:case o.SThree_TwoHorinal:case o.SFour_TwoHorinal:case o.SFive_TwoHorinal:this.showTwoHorinalArea(i,n);break;case o.SOne_TwoVertical:case o.STwo_TwoVertical:case o.SThree_TwoVertical:case o.SThree_TwoVertical:case o.SFour_TwoVertical:this.showTwoVerticalArea(i,n);break;case o.SOne_Bomb:case o.STwo_Flash:case o.SFive_SameColor:case o.SThree_Posion:case o.SFour_Point:this.showDiamondBombArea(i,n)}},showHorinalArea:function(e,t){var i=[];this.ProcessBoardCell.getHorinalCells(e,t,i),this.showCircles(i),this.showPropsArea(i)},showTwoHorinalArea:function(e,t){var i=[];this.ProcessBoardCell.getTwoHorinal(e,t,i);for(var o=0;o<i.length;o++){var n=i[o];this.showCircles(n),this.showPropsArea(n)}},showVerticalArea:function(e,t){var i=[];this.ProcessBoardCell.getVerticalCells(e,t,i);for(var o=0;o<i.length;o++){var n=i[o];this.showCircles(n),this.showPropsArea(n)}},showTwoVerticalArea:function(e,t){var i=[];this.ProcessBoardCell.getTwoVertical(e,t,i);for(var o=0;o<i.length;o++){var n=i[o];this.showCircles(n),this.showPropsArea(n)}},showDiamondBombArea:function(e,t){var i=[];this.ProcessBoardCell.getDiamondCells(e,t,i),this.showCircles(i),this.showPropsArea(i)},showClearBombArea:function(){var e;e=this.ProcessBoardCell.getClearBomblist(),this.showCircles(e),this.showPropsArea(e)},showCircleArea:function(e,t){var i=[];this.ProcessBoardCell.getDiamondCells(e,t,i),this.showCircles(i),this.showPropsArea(i)},showCrossArea:function(e,t){var i=[];this.ProcessBoardCell.getVerticalCells(e,t,i),this.ProcessBoardCell.getHorinalCells(e,t,i),this.showCircles(i),this.showPropsArea(i)},showXPropArea:function(e,t){var i=[],o=[],n=[],s=[];this.ProcessBoardCell.getXlist(t,e,i,o,n,s);for(var a=[i,o,n,s],c=0;c<a.length;c++){var l=a[c];this.showCircles(l),this.showPropsArea(l)}},showXXPropArea:function(e,t){var i=[],o=[],n=[],s=[],a=[],c=[];this.ProcessBoardCell.getXXlist(t,e,i,o,n,s,a,c);for(var l=[i,o,n,s,a,c],r=0;r<l.length;r++){var h=l[r];this.showCircles(h),this.showPropsArea(h)}},showSameColorArea:function(e,t,i){var o=this.ProcessBoardCell.getSameCelllist(e);this.showCircles(o),this.showPropsArea(o)},showCircles:function(e){for(var t=0;t<e.length;t++){var i=e[t].getComponent("Cell"),o=this.ProcessBoardCell.getSkillCircle(i.column,i.row);if(o){o.active=!0;var n=cc.rotateBy(3,360);o.runAction(cc.repeatForever(n))}}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",PoolMng:"PoolMng",Utils:"Utils"}],PropCellPool:[function(e,t,i){"use strict";cc._RF.push(t,"b914ed0ralJ3ZB2fML1isof","PropCellPool");var o=e("EnumDefine").CellType;cc.Class({extends:cc.Component,properties:{cell1:cc.Prefab,cell1_size:0,cell2:cc.Prefab,cell2_size:0,cell3:cc.Prefab,cell3_size:0,cell4:cc.Prefab,cell4_size:0,cell5:cc.Prefab,cell5_size:0,One_Horinal:cc.Prefab,One_Horinal_size:0,One_Vertical:cc.Prefab,One_Vertical_size:0,One_XCross:cc.Prefab,One_XCross_size:0,One_PrismBomb:cc.Prefab,One_PrismBomb_size:0,One_Brush:cc.Prefab,One_Brush_size:0,SOne_TwoHorinal:cc.Prefab,SOne_TwoHorinal_size:0,SOne_TwoVertical:cc.Prefab,SOne_TwoVertical_size:0,SOne_Bomb:cc.Prefab,SOne_Bomb_size:0,Two_Horinal:cc.Prefab,Two_Horinal_size:0,Two_Vertical:cc.Prefab,Two_Vertical_size:0,Two_XCross:cc.Prefab,Two_XCross_size:0,Two_PrismBomb:cc.Prefab,Two_PrismBomb_size:0,Two_Brush:cc.Prefab,Two_Brush_size:0,STwo_TwoHorinal:cc.Prefab,STwo_TwoHorinal_size:0,STwo_TwoVertical:cc.Prefab,STwo_TwoVertical_size:0,STwo_Flash:cc.Prefab,STwo_Flash_size:0,Three_Horinal:cc.Prefab,Three_Horinal_size:0,Three_Vertical:cc.Prefab,Three_Vertical_size:0,Three_XCross:cc.Prefab,Three_XCross_size:0,Three_PrismBomb:cc.Prefab,Three_PrismBomb_size:0,Three_Brush:cc.Prefab,Three_Brush_size:0,SThree_TwoHorinal:cc.Prefab,SThree_TwoHorinal_size:0,SThree_TwoVertical:cc.Prefab,SThree_TwoVertical_size:0,SThree_Posion:cc.Prefab,SThree_Posion_size:0,Four_Horinal:cc.Prefab,Four_Horinal_size:0,Four_Vertical:cc.Prefab,Four_Vertical_size:0,Four_XCross:cc.Prefab,Four_XCross_size:0,Four_PrismBomb:cc.Prefab,Four_PrismBomb_size:0,Four_Brush:cc.Prefab,Four_Brush_size:0,SFour_TwoHorinal:cc.Prefab,SFour_TwoHorinal_size:0,SFour_TwoVertical:cc.Prefab,SFour_TwoVertical_size:0,SFour_Point:cc.Prefab,SFour_Point_size:0,Five_Horinal:cc.Prefab,Five_Horinal_size:0,Five_Vertical:cc.Prefab,Five_Vertical_size:0,Five_XCross:cc.Prefab,Five_XCross_size:0,Five_PrismBomb:cc.Prefab,Five_PrismBomb_size:0,Five_Brush:cc.Prefab,Five_Brush_size:0,SFive_TwoHorinal:cc.Prefab,SFive_TwoHorinal_size:0,SFive_TwoVertical:cc.Prefab,SFive_TwoVertical_size:0,SFive_SameColor:cc.Prefab,SFive_SameColor_size:0,BlockDiamond:cc.Prefab,BlockDiamond_size:0,DropBottomBox:cc.Prefab,DropBottomBox_size:0,ClearBombProp:cc.Prefab,ClearBombProp_size:0,Chest:cc.Prefab,Chest_size:0},onLoad:function(){this.init()},init:function(){this._PoolChest=new cc.NodePool("Cell");for(var e=0;e<this.Chest_size;e++){var t=cc.instantiate(this.Chest);this._PoolChest.put(t)}this._PoolBlockDiamond=new cc.NodePool("Cell");for(var i=0;i<this.BlockDiamond_size;i++){var o=cc.instantiate(this.BlockDiamond);this._PoolBlockDiamond.put(o)}this._PoolDropBottomBox=new cc.NodePool("Cell");for(var n=0;n<this.DropBottomBox_size;n++){var s=cc.instantiate(this.DropBottomBox);this._PoolDropBottomBox.put(s)}this._PoolClearBombProp=new cc.NodePool("Cell");for(var a=0;a<this.ClearBombProp_size;a++){var c=cc.instantiate(this.ClearBombProp);this._PoolClearBombProp.put(c)}this._PoolCell1=new cc.NodePool("Cell");for(var l=0;l<this.cell1_size;l++){var r=cc.instantiate(this.cell1);this._PoolCell1.put(r)}this._PoolCell2=new cc.NodePool("Cell");for(var h=0;h<this.cell2_size;h++){var u=cc.instantiate(this.cell2);this._PoolCell2.put(u)}this._PoolCell3=new cc.NodePool("Cell");for(var p=0;p<this.cell3_size;p++){var d=cc.instantiate(this.cell3);this._PoolCell3.put(d)}this._PoolCell4=new cc.NodePool("Cell");for(var f=0;f<this.cell4_size;f++){var m=cc.instantiate(this.cell4);this._PoolCell4.put(m)}this._PoolCell5=new cc.NodePool("Cell");for(var v=0;v<this.cell5_size;v++){var g=cc.instantiate(this.cell5);this._PoolCell5.put(g)}this.One_HorinalPool=new cc.NodePool("Cell");for(var C=0;C<this.One_Horinal_size;C++){var _=cc.instantiate(this.One_Horinal);this.One_HorinalPool.put(_)}this.One_VerticalPool=new cc.NodePool("Cell");for(var S=0;S<this.One_Vertical_size;S++){var b=cc.instantiate(this.One_Vertical);this.One_VerticalPool.put(b)}this.One_XCrossPool=new cc.NodePool("Cell");for(var k=0;k<this.One_XCross_size;k++){var y=cc.instantiate(this.One_XCross);this.One_XCrossPool.put(y)}this.One_PrismBombPool=new cc.NodePool("Cell");for(var w=0;w<this.One_PrismBomb_size;w++){var B=cc.instantiate(this.One_PrismBomb);this.One_PrismBombPool.put(B)}this.One_BrushPool=new cc.NodePool("Cell");for(var P=0;P<this.One_Brush_size;P++){var D=cc.instantiate(this.One_Brush);this.One_BrushPool.put(D)}this.SOne_TwoHorinalPool=new cc.NodePool("Cell");for(var A=0;A<this.SOne_TwoHorinal_size;A++){var N=cc.instantiate(this.SOne_TwoHorinal);this.SOne_TwoHorinalPool.put(N)}this.SOne_TwoVerticalPool=new cc.NodePool("Cell");for(var T=0;T<this.SOne_TwoVertical_size;T++){var R=cc.instantiate(this.SOne_TwoVertical);this.SOne_TwoVerticalPool.put(R)}this.SOne_BombPool=new cc.NodePool("Cell");for(var F=0;F<this.SOne_Bomb_size;F++){var I=cc.instantiate(this.SOne_Bomb);this.SOne_BombPool.put(I)}this.Two_HorinalPool=new cc.NodePool("Cell");for(var x=0;x<this.Two_Horinal_size;x++){var L=cc.instantiate(this.Two_Horinal);this.Two_HorinalPool.put(L)}this.Two_VerticalPool=new cc.NodePool("Cell");for(var U=0;U<this.Two_Vertical_size;U++){var E=cc.instantiate(this.Two_Vertical);this.Two_VerticalPool.put(E)}this.Two_XCrossPool=new cc.NodePool("Cell");for(var O=0;O<this.Two_XCross_size;O++){var M=cc.instantiate(this.Two_XCross);this.Two_XCrossPool.put(M)}this.Two_PrismBombPool=new cc.NodePool("Cell");for(var W=0;W<this.Two_PrismBomb_size;W++){var z=cc.instantiate(this.Two_PrismBomb);this.Two_PrismBombPool.put(z)}this.Two_BrushPool=new cc.NodePool("Cell");for(var G=0;G<this.Two_Brush_size;G++){var H=cc.instantiate(this.Two_Brush);this.Two_BrushPool.put(H)}this.STwo_TwoHorinalPool=new cc.NodePool("Cell");for(var V=0;V<this.STwo_TwoHorinal_size;V++){var q=cc.instantiate(this.STwo_TwoHorinal);this.STwo_TwoHorinalPool.put(q)}this.STwo_TwoVerticalPool=new cc.NodePool("Cell");for(var J=0;J<this.STwo_TwoVertical_size;J++){var K=cc.instantiate(this.STwo_TwoVertical);this.STwo_TwoVerticalPool.put(K)}this.STwo_FlashPool=new cc.NodePool("Cell");for(var j=0;j<this.STwo_Flash_size;j++){var X=cc.instantiate(this.STwo_Flash);this.STwo_FlashPool.put(X)}this.Three_HorinalPool=new cc.NodePool("Cell");for(var Z=0;Z<this.Three_Horinal_size;Z++){var Y=cc.instantiate(this.Three_Horinal);this.Three_HorinalPool.put(Y)}this.Three_VerticalPool=new cc.NodePool("Cell");for(var Q=0;Q<this.Three_Vertical_size;Q++){var $=cc.instantiate(this.Three_Vertical);this.Three_VerticalPool.put($)}this.Three_XCrossPool=new cc.NodePool("Cell");for(var ee=0;ee<this.Three_XCross_size;ee++){var te=cc.instantiate(this.Three_XCross);this.Three_XCrossPool.put(te)}this.Three_PrismBombPool=new cc.NodePool("Cell");for(var ie=0;ie<this.Three_PrismBomb_size;ie++){var oe=cc.instantiate(this.Three_PrismBomb);this.Three_PrismBombPool.put(oe)}this.Three_BrushPool=new cc.NodePool("Cell");for(var ne=0;ne<this.Three_Brush_size;ne++){var se=cc.instantiate(this.Three_Brush);this.Three_BrushPool.put(se)}this.SThree_TwoHorinalPool=new cc.NodePool("Cell");for(var ae=0;ae<this.SThree_TwoHorinal_size;ae++){var ce=cc.instantiate(this.SThree_TwoHorinal);this.SThree_TwoHorinalPool.put(ce)}this.SThree_TwoVerticalPool=new cc.NodePool("Cell");for(var le=0;le<this.SThree_TwoVertical_size;le++){var re=cc.instantiate(this.SThree_TwoVertical);this.SThree_TwoVerticalPool.put(re)}this.SThree_PoisionPool=new cc.NodePool("Cell");for(var he=0;he<this.SThree_Posion_size;he++){var ue=cc.instantiate(this.SThree_Posion);this.SThree_PoisionPool.put(ue)}this.Four_HorinalPool=new cc.NodePool("Cell");for(var pe=0;pe<this.Four_Horinal_size;pe++){var de=cc.instantiate(this.Four_Horinal);this.Four_HorinalPool.put(de)}this.Four_VerticalPool=new cc.NodePool("Cell");for(var fe=0;fe<this.Four_Vertical_size;fe++){var me=cc.instantiate(this.Four_Vertical);this.Four_VerticalPool.put(me)}this.Four_XCrossPool=new cc.NodePool("Cell");for(var ve=0;ve<this.Four_XCross_size;ve++){var ge=cc.instantiate(this.Four_XCross);this.Four_XCrossPool.put(ge)}this.Four_PrismBombPool=new cc.NodePool("Cell");for(var Ce=0;Ce<this.Four_PrismBomb_size;Ce++){var _e=cc.instantiate(this.Four_PrismBomb);this.Four_PrismBombPool.put(_e)}this.Four_BrushPool=new cc.NodePool("Cell");for(var Se=0;Se<this.Four_Brush_size;Se++){var be=cc.instantiate(this.Four_Brush);this.Four_BrushPool.put(be)}this.SFour_TwoHorinalPool=new cc.NodePool("Cell");for(var ke=0;ke<this.SFour_TwoHorinal_size;ke++){var ye=cc.instantiate(this.SFour_TwoHorinal);this.SFour_TwoHorinalPool.put(ye)}this.SFour_TwoVerticalPool=new cc.NodePool("Cell");for(var we=0;we<this.SFour_TwoVertical_size;we++){var Be=cc.instantiate(this.SFour_TwoVertical);this.SFour_TwoVerticalPool.put(Be)}this.SFour_PointPool=new cc.NodePool("Cell");for(var Pe=0;Pe<this.SFour_Point_size;Pe++){var De=cc.instantiate(this.SFour_Point);this.SFour_PointPool.put(De)}this.Five_HorinalPool=new cc.NodePool("Cell");for(var Ae=0;Ae<this.Five_Horinal_size;Ae++){var Ne=cc.instantiate(this.Five_Horinal);this.Five_HorinalPool.put(Ne)}this.Five_VerticalPool=new cc.NodePool("Cell");for(var Te=0;Te<this.Five_Vertical_size;Te++){var Re=cc.instantiate(this.Five_Vertical);this.Five_VerticalPool.put(Re)}this.Five_XCrossPool=new cc.NodePool("Cell");for(var Fe=0;Fe<this.Five_XCross_size;Fe++){var Ie=cc.instantiate(this.Five_XCross);this.Five_XCrossPool.put(Ie)}this.Five_PrismBombPool=new cc.NodePool("Cell");for(var xe=0;xe<this.Five_PrismBomb_size;xe++){var Le=cc.instantiate(this.Five_PrismBomb);this.Five_PrismBombPool.put(Le)}this.Five_BrushPool=new cc.NodePool("Cell");for(var Ue=0;Ue<this.Five_Brush_size;Ue++){var Ee=cc.instantiate(this.Five_Brush);this.Five_BrushPool.put(Ee)}this.SFive_TwoHorinalPool=new cc.NodePool("Cell");for(var Oe=0;Oe<this.SFive_TwoHorinal_size;Oe++){var Me=cc.instantiate(this.SFive_TwoHorinal);this.SFive_TwoHorinalPool.put(Me)}this.SFive_TwoVerticalPool=new cc.NodePool("Cell");for(var We=0;We<this.SFive_TwoVertical_size;We++){var ze=cc.instantiate(this.SFive_TwoVertical);this.SFive_TwoVerticalPool.put(ze)}this.SFive_SameColorPool=new cc.NodePool("Cell");for(var Ge=0;Ge<this.SFive_SameColor_size;Ge++){var He=cc.instantiate(this.SFive_SameColor);this.SFive_SameColorPool.put(He)}},getCell:function(e){var t=null;switch(e){case o.Chest:(t=this._PoolChest.get())||(t=cc.instantiate(this.Chest));break;case o.BlockDiamond:(t=this._PoolBlockDiamond.get())||(t=cc.instantiate(this.BlockDiamond));break;case o.DropBottomBox:(t=this._PoolDropBottomBox.get())||(t=cc.instantiate(this.DropBottomBox));break;case o.ClearBombProp:(t=this._PoolClearBombProp.get())||(t=cc.instantiate(this.ClearBombProp));break;case o.Cell1:(t=this._PoolCell1.get())||(t=cc.instantiate(this.cell1));break;case o.Cell2:(t=this._PoolCell2.get())||(t=cc.instantiate(this.cell2));break;case o.Cell3:(t=this._PoolCell3.get())||(t=cc.instantiate(this.cell3));break;case o.Cell4:(t=this._PoolCell4.get())||(t=cc.instantiate(this.cell4));break;case o.Cell5:(t=this._PoolCell5.get())||(t=cc.instantiate(this.cell5));break;case o.One_Horinal:(t=this.One_HorinalPool.get())||(t=cc.instantiate(this.One_Horinal));break;case o.One_Vertical:(t=this.One_VerticalPool.get())||(t=cc.instantiate(this.One_Vertical));break;case o.One_XCross:(t=this.One_XCrossPool.get())||(t=cc.instantiate(this.One_XCross));break;case o.One_PrismBomb:(t=this.One_PrismBombPool.get())||(t=cc.instantiate(this.One_PrismBomb));break;case o.One_Brush:(t=this.One_BrushPool.get())||(t=cc.instantiate(this.One_Brush));break;case o.SOne_TwoHorinal:(t=this.SOne_TwoHorinalPool.get())||(t=cc.instantiate(this.SOne_TwoHorinal));break;case o.SOne_TwoVertical:(t=this.SOne_TwoVerticalPool.get())||(t=cc.instantiate(this.SOne_TwoVertical));break;case o.SOne_Bomb:(t=this.SOne_BombPool.get())||(t=cc.instantiate(this.SOne_Bomb))}return t},putCell:function(e,t){switch(t){case o.Chest:this._PoolChest.put(e);break;case o.BlockDiamond:this._PoolBlockDiamond.put(e);break;case o.DropBottomBox:this._PoolDropBottomBox.put(e);break;case o.ClearBombProp:this._PoolClearBombProp.put(e);break;case o.Cell1:this._PoolCell1.put(e);break;case o.Cell2:this._PoolCell2.put(e);break;case o.Cell3:this._PoolCell3.put(e);break;case o.Cell4:this._PoolCell4.put(e);break;case o.Cell5:this._PoolCell5.put(e);break;case o.One_Horinal:this.One_HorinalPool.put(e);break;case o.One_Vertical:this.One_VerticalPool.put(e);break;case o.One_XCross:this.One_XCrossPool.put(e);break;case o.One_PrismBomb:this.One_PrismBombPool.put(e);break;case o.One_Brush:this.One_BrushPool.put(e);break;case o.SOne_TwoHorinal:this.SOne_TwoHorinalPool.put(e);break;case o.SOne_TwoVertical:this.SOne_TwoVerticalPool.put(e);break;case o.SOne_Bomb:this.SOne_BombPool.put(e);break;default:e.removeFromParent()}}});cc._RF.pop()},{EnumDefine:"EnumDefine"}],PropHVSkill:[function(e,t,i){"use strict";var o;function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}cc._RF.push(t,"0f2012Tn3xCcKOi4yiPu6v0","PropHVSkill");e("EnumDefine").Direction;var s=e("Utils").TITLE_WIDTH,a=e("Utils").TITLE_HEIGHT,c=e("EnumDefine").RemoveCellEffect,l=e("PoolMng");cc.Class((n(o={extends:cc.Component,properties:{boomlineRed:{default:null,type:cc.SpriteFrame},boomlineBlue:{default:null,type:cc.SpriteFrame},boomlineRedSharp:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.Board=this.node.getComponent("Board"),this.RemoveCells=this.node.getComponent("RemoveCells"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.propcnt=0},DoubleHorinals:function(e){var t=this;this.propcnt+=1;var i=e.position,o=[],n=e.getComponent("Cell"),s=n.row,l=n.column;this.ProcessBoardCell.getTwoHorinal(l,s,o);for(var r=0;r<o.length;r++){var h=o[r],u=h.indexOf(e);u>=0&&h.splice(u,1),this.setRemovelistRemoveEffectType(h,c.BombEffect1)}this.Board.removeCell(e),this.spawnBombEffect(i);if(1===o.lenght){var p=cc.v2(0,i.y-a);this.spawnAnygryBomb(p,90)}else if(2==o.length){var d=cc.v2(0,i.y-a);this.spawnAnygryBomb(d,90);var f=cc.v2(0,i.y+a);this.spawnAnygryBomb(f,90)}var m=cc.callFunc(function(){t.propcnt-=1},this),v=cc.callFunc(function(){0==t.propcnt&&t.Board.removeCellsDone()},this),g=[];g.push(m),this.RemoveCells.removelistlist(o,g,v),g.length>=2?this.node.runAction(cc.sequence(g)):(g.push(null),this.node.runAction(cc.sequence(g)))},DoubleVerticals:function(e){var t=this;this.propcnt+=1;var i=e.position,o=[],n=e.getComponent("Cell"),a=n.row,l=n.column;this.ProcessBoardCell.getTwoVertical(l,a,o);for(var r=0;r<o.length;r++){var h=o[r],u=h.indexOf(e);u>=0&&h.splice(u,1),this.setRemovelistRemoveEffectType(h,c.BombEffect1)}this.Board.removeCell(e),this.spawnBombEffect(i);if(1===o.lenght){var p=cc.v2(i.x-s,0);this.spawnAnygryBomb(p,0)}else if(2==o.length){var d=cc.v2(i.x-s,0);this.spawnAnygryBomb(d,0);var f=cc.v2(i.x+s,0);this.spawnAnygryBomb(f,0)}var m=cc.callFunc(function(){t.propcnt-=1},this),v=cc.callFunc(function(){0==t.propcnt&&t.Board.removeCellsDone()},this),g=[];g.push(m),this.RemoveCells.removelistlist(o,g,v),g.length>=2?this.node.runAction(cc.sequence(g)):(g.push(null),this.node.runAction(cc.sequence(g)))},HorinalLine:function(e){var t=this;this.propcnt+=1;var i=e.position,o=[],n=e.getComponent("Cell"),s=n.row,a=n.column;this.ProcessBoardCell.getHorinalCells(a,s,o);var l=o.indexOf(e);l>=0&&o.splice(l,1),this.Board.removeCell(e),this.spawnBombEffect(i),this.setRemovelistRemoveEffectType(o,c.BombEffect1);var r=cc.callFunc(function(){t.propcnt-=1},this),h=cc.callFunc(function(){0==t.propcnt&&t.Board.removeCellsDone()},this),u=[];u.push(r),this.RemoveCells.removeHV(a,s,o,u,h,0),u.length>=2?this.node.runAction(cc.sequence(u)):(u.push(null),this.node.runAction(cc.sequence(u)))},VerticalLine:function(e){var t=this;this.propcnt+=1;var i=e.position,o=[],n=e.getComponent("Cell"),s=n.column,a=n.row;this.ProcessBoardCell.getVerticalCells(s,a,o);var l=o.indexOf(e);l>=0&&o.splice(l,1),this.Board.removeCell(e),this.spawnBombEffect(i),this.setRemovelistRemoveEffectType(o,c.BombEffect1);var r=cc.callFunc(function(){t.propcnt-=1},this),h=cc.callFunc(function(){0==t.propcnt&&t.Board.removeCellsDone()},this),u=[];u.push(r),this.RemoveCells.removeHV(s,a,o,u,h,1),u.length>=2?this.node.runAction(cc.sequence(u)):(u.push(null),this.node.runAction(cc.sequence(u)))},XCross:function(e){var t=this;this.propcnt+=1;var i=e.position,o=[],n=[],s=[],a=[],l=e.getComponent("Cell"),r=l.row,h=l.column;this.ProcessBoardCell.getXlist(r,h,o,n,s,a);var u=o.indexOf(e);u>=0&&o.splice(u,1),(u=n.indexOf(e))>=0&&n.splice(u,1),(u=s.indexOf(e))>=0&&s.splice(u,1),(u=a.indexOf(e))>=0&&a.splice(u,1),this.Board.removeCell(e);for(var p=[],d=0;d<o.length;d++)p.indexOf(o[d])<0&&p.push(o[d]);for(var f=0;f<n.length;f++)p.indexOf(n[f])<0&&p.push(n[f]);for(var m=0;m<s.length;m++)p.indexOf(s[m])<0&&p.push(s[m]);for(var v=0;v<a.length;v++)p.indexOf(a[v])<0&&p.push(a[v]);this.spawnBombEffect(i),this.setRemovelistRemoveEffectType(p,c.BombEffect1);var g=cc.callFunc(function(){t.propcnt-=1},this),C=cc.callFunc(function(){0==t.propcnt&&t.Board.removeCellsDone()},this),_=[];_.push(g),this.RemoveCells.removeXCross(o,n,s,a,_,C),_.length>=2?this.node.runAction(cc.sequence(_)):(_.push(null),this.node.runAction(cc.sequence(_)))},XXCross:function(e){var t=this;this.propcnt+=1;var i=e.position,o=[],n=[],s=[],a=[],l=[],r=[],h=e.getComponent("Cell"),u=h.row,p=h.column;this.ProcessBoardCell.getXXlist(u,p,o,n,s,a,l,r);var d=o.indexOf(e);d>=0&&o.splice(d,1),(d=n.indexOf(e))>=0&&n.splice(d,1),(d=s.indexOf(e))>=0&&s.splice(d,1),(d=a.indexOf(e))>=0&&a.splice(d,1),(d=l.indexOf(e))>=0&&l.splice(d,1),(d=r.indexOf(e))>=0&&r.splice(d,1),this.Board.removeCell(e),this.spawnBombEffect(i),this.setRemovelistRemoveEffectType(o,c.BombEffect1),this.setRemovelistRemoveEffectType(n,c.BombEffect1),this.setRemovelistRemoveEffectType(s,c.BombEffect1),this.setRemovelistRemoveEffectType(a,c.BombEffect1),this.setRemovelistRemoveEffectType(l,c.BombEffect1),this.setRemovelistRemoveEffectType(r,c.BombEffect1);var f=cc.callFunc(function(){t.propcnt-=1},this),m=cc.callFunc(function(){0==t.propcnt&&t.Board.removeCellsDone()},this),v=[];v.push(f),this.RemoveCells.removeXXCross(o,n,s,a,l,r,v,m),v.length>=2?this.node.runAction(cc.sequence(v)):(v.push(null),this.node.runAction(cc.sequence(v)))},CrossLine:function(e,t){var i=this;this.propcnt+=1;var o=e.position,n=[],s=[],a=e.getComponent("Cell"),l=a.row,r=a.column;this.ProcessBoardCell.getVerticalCells(r,l,s);var h=s.indexOf(e);h>=0&&s.splice(h,1),this.ProcessBoardCell.getHorinalCells(r,l,n),(h=n.indexOf(e))>=0&&n.splice(h,1),this.Board.removeCell(e),this.spawnBombEffect(o),this.setRemovelistRemoveEffectType(n,c.BombEffect1),this.setRemovelistRemoveEffectType(s,c.BombEffect1);var u=cc.callFunc(function(){i.propcnt-=1},this),p=cc.callFunc(function(){0==i.propcnt&&i.Board.removeCellsDone()},this),d=[];d.push(u),this.RemoveCells.removeCross(n,s,d,p),d.length>=2?this.node.runAction(cc.sequence(d)):(d.push(null),this.node.runAction(cc.sequence(d)))},PrismBomb:function(e){var t=this;if(e){this.propcnt+=1;var i=e.position,o=e.getComponent("Cell"),n=o.column,s=o.row,a=[],l=[];this.ProcessBoardCell.getDiamondCells(n,s,a,l);var r=a.indexOf(e);r>=0&&a.splice(r,1),this.Board.removeCell(e),this.setRemovelistRemoveEffectType(a,c.BombEffect1),this.spawnBombEffect(i);var h=cc.callFunc(function(){t.propcnt-=1},this),u=cc.callFunc(function(){0==t.propcnt&&t.Board.removeCellsDone()},this),p=[];p.push(h),this.RemoveCells.removelistlist(l,p,u),p.length>=2?this.node.runAction(cc.sequence(p)):(p.push(null),this.node.runAction(cc.sequence(p)))}},ClearBomb:function(e){var t=this;if(e){this.propcnt+=1;var i=e.position,o=e.getComponent("Cell"),n=o.column,s=o.row,a=[],l=(a=this.ProcessBoardCell.getClearBomblist()).indexOf(e);l>=0&&a.splice(l,1),this.Board.removeCell(e),this.spawnBombEffect(i),this.setRemovelistRemoveEffectType(a,c.BombEffect1);var r=cc.callFunc(function(){t.propcnt-=1},this),h=cc.callFunc(function(){0==t.propcnt&&t.Board.removeCellsDone()},this),u=[];u.push(r),this.RemoveCells.removeClearBomb(n,s,a,u,h),u.length>=2?this.node.runAction(cc.sequence(u)):(u.push(null),this.node.runAction(cc.sequence(u)))}},createRocketV:function(e){},createRocketH:function(e){},FlashSkill:function(e){},setRemovelistRemoveEffectType:function(e,t){for(var i=0;i<e.length;i++){var o=e[i];if(o)o.getComponent("Cell").setRemoveCellEffect(t)}},run:function(e,t){var i=this;this.setRemovelistRemoveEffectType(e,c.BombEffect1);var o=cc.callFunc(function(){i.propcnt-=1},this),n=cc.callFunc(function(){0==i.propcnt&&i.Board.removeCellsDone()},this),s=[];s.push(o);this.RemoveCells.removeCells(e,s,n,.05),s.length>=2?this.node.runAction(cc.sequence(s)):(s.push(null),this.node.runAction(cc.sequence(s)))},start:function(){},spawnAnygryBomb:function(e,t){var i=this;cc.loader.loadRes("prefab/angryBombEffect",function(o,n){var s=cc.instantiate(n);s.parent=i.Board.node,s.position=e,s.rotation=t;var a=s.getComponent("PlayAnimation");if(a){a.play(function(){s.destroy()})}})},spawnBombEffect:function(e){var t=l.instance.getBombEffect();if(t){t.parent=this.node,e.x+=44.5,e.y+=37,t.position=e;var i=t.getComponent("PlayAnimation");if(i){i.play(function(){l.instance.putBombEffect(t)})}}},shootBoomline:function(e,t,i,o,n){var s=new cc.Node("");s.addComponent(cc.Sprite).spriteFrame=o,s.parent=e.parent,s.position=t,s.anchorX=.5,s.anchorY=0;var a=e.position;a.x+=e.width/2,a.y+=e.height/2;var c=t.sub(a),l=c.mag(),r=Math.atan2(c.y,c.x),h=-cc.misc.radiansToDegrees(r)-90;s.rotation=h;s.scale=0;var u=s.height,p=0;if(l<u)p=1-1*Math.abs(l-u)/u;else if(l===u)p=0;else if(l>u){p=1+1*Math.abs(l-u)/u}var d=p;d<.5&&(d=.5);var f=cc.callFunc(function(){e.getComponent("Cell").scaleAction()},this),m=cc.callFunc(function(){n&&n()},this),v=cc.scaleTo(i,d,0+p).easing(cc.easeOut(5)),g=cc.sequence(v,f,cc.delayTime(i),m,cc.removeSelf());s.runAction(g)}},"FlashSkill",function(e){}),n(o,"SameColorSkill",function(e){var t=this;if(e){var i=e.getComponent("Cell").cellPropNormalType,o=this.ProcessBoardCell.getSameCelllist(i),n=o.indexOf(e);n>=0&&o.splice(n,1),this.propcnt+=1;for(var s=[],a=function(i){var n=o[i],a=cc.callFunc(function(){t.propShootline(e,n,.1)},t);s.push(a),s.push(cc.delayTime(.1))},c=0;c<o.length;c++)a(c);s.push(cc.delayTime(.2));var l=cc.callFunc(function(){t.Board.removeCell(e);var i=e.position;t.spawnBombEffect(i)},this),r=cc.callFunc(function(){t.propcnt-=1,0==t.propcnt&&t.Board.removeCellsDone()},this);s.push(l),s.push(cc.delayTime(.1)),s.push(r),this.node.runAction(cc.sequence(s))}}),n(o,"propShootline",function(e,t,i){var o=this,n=function(){this.RemoveCells.removeOneCell(t,!1)}.bind(this),s=cc.callFunc(function(){var s=e.x+e.width/2,a=e.y+e.height/2,c=cc.v2(s,a);o.shootBoomline(t,c,i/2,o.boomlineRed,n)},this);e.scale=.8;var a=cc.scaleTo(i/2,.96,.96).easing(cc.easeOut(3)),c=cc.scaleTo(i/2,.8,.8).easing(cc.easeOut(3)),l=cc.sequence(a,c,s);l.setTag(10),e.runAction(l)}),o)),cc._RF.pop()},{EnumDefine:"EnumDefine",PoolMng:"PoolMng",Utils:"Utils"}],RPGManager:[function(e,t,i){"use strict";cc._RF.push(t,"745a1x3XOVHZbz9dU7Lx5w3","RPGManager");e("JsonData");var o=e("EnumDefine").LevelResult,n=e("EnumDefine").CellType,s=e("EnumDefine").ActorType,a=e("Utils"),c=e("LocalStorage"),l=e("PlayFightAudio"),r=e("CameraManager"),h=cc.v2(),u=cc.v2(),p=cc.Class({extends:cc.Component,properties:{boardNode:cc.Node,UI:cc.Node,gameNode:cc.Node,cameraNode:cc.Node,rpgNode:cc.Node,midOneNode:cc.Node,shakeDuration:{default:0}},statics:{instance:null},ctor:function(){this.actorlist=[],this.actorcomlist=[],this.monsterlist=[],this.waveMonsterlist=[],this.waveMonsterIndex=0,this.actorMove=!1,this._moveDt=0,this._moveDelay=1,this._moveSpeed=800,this._moveDis=0,this._disVal=400,this._spawnedOnWave=!1,this.RPGAttack=!1},onLoad:function(){p.instance=this,this.spawnMonster=this.node.getComponent("SpawnMonster"),this.spawnActor=this.node.getComponent("SpawnActor"),this.Game=this.gameNode.getComponent("Game"),this.cameraControl=this.cameraNode.getComponent("CameraControl"),this.anim=this.node.getComponent("cc.Animation"),this.Board=this.boardNode.getComponent("Board"),this.skillUI=this.UI.getComponent("PetSkillUI"),this.stepAward=this.boardNode.getComponent("StepAward"),this.ShootSkill=this.node.getComponent("ShootSkill"),this._monsterJsonData=null},start:function(){},createRPG:function(){var e=this;cc.loader.loadRes("json/Monster",function(t,i){var o=i.json;if(e._monsterJsonData=o,null!==a.LevelEditorLevelGoles){var n=a.LevelEditorLevelGoles;e.loadDataFromEditor(n),e.spawnActor.spawnActors();var s=cc.v2();e.getActorCenterPos(s),e.spawnOneWaveMonster(s,0)}else{e.loadDataFromXls(),e.spawnActor.spawnActors();var c=cc.v2();e.getActorCenterPos(c),e.spawnOneWaveMonster(c,0)}})},loadDataFromEditor:function(e){var t=e.WaveDatas;if(null!==t)for(var i=0;i<t.length;i++){for(var o=t[i],n=0;n<o.length;n++)for(var s=o[n],a=0;a<this._monsterJsonData.length;a++){var c=this._monsterJsonData[a];if(c.MonsterName===s.MonsterName){s.JsonData=c;break}}o.length>0&&this.waveMonsterlist.push(o)}},loadDataFromXls:function(){var e=a.levelData.WaveEnemyID;";"==e[e.length-1]&&(e=e.substring(0,e.length-1));for(var t=e.split(";"),i=0;i<t.length;i++){var o=t[i].split(":");if(o.length>0){for(var s=[],c=0;c<o.length;c++){var l={};l.MonsterID=o[c],l.addtionCellType=n.UnKnown,l.defenceCellType=n.UnKnown;for(var r=0;r<this._monsterJsonData.length;r++){var h=this._monsterJsonData[r];if(l.MonsterID===h.ID){l.JsonData=h;break}}s.push(l)}s.length>0&&this.waveMonsterlist.push(s)}}},getWorldPos:function(e){var t=e.parent.convertToWorldSpaceAR(e.getPosition());return r.instance.battleCameraNode.getComponent("cc.Camera").getWorldToCameraPoint(t,h),h},bossFightStart:function(){for(var e=0;e<this.actorlist.length;e++){var t=this.actorlist[e].getComponent("RoleMove");t&&t.setMove(!0)}for(var i=0;i<this.monsterlist.length;i++){var o=this.monsterlist[i].getComponent("RoleMove");o&&o.setMove(!0)}(this.Board.setUserInteract(!0),this.midOneNode)&&this.midOneNode.getComponent("MoveCameraShot").setMove(!0)},spawnOneWaveMonster:function(e,t){if(0!==this.waveMonsterlist.length){var i=this.waveMonsterlist.shift();this.node.getComponent("SpawnMonster").spawnOneWave(i,e,t)}},getActorCenterPos:function(e){if(0!==this.actorlist.length){for(var t=this.actorlist,i=0,o=0,n=0;n<t.length;n++){var s=t[n];i+=s.x,o+=s.y}return i/=t.length,o/=t.length,e.x=i,void(e.y=o)}this.spawnActor.getActorCenterPos(e)},addActor:function(e){this.actorlist.push(e);var t=e.getComponent("Actor");this.actorcomlist.push(t)},getActor:function(e){for(var t=this.actorlist,i=0;i<t.length;i++){var o=t[i];if(this.actorcomlist[i].roletype===e)return o}return null},getDamage:function(e){for(var t=10,i=this.actorlist,o=0;o<i.length;o++){var a=i[o].getComponent("Actor");switch(a.roletype){case s.Actor1:if(e===n.Cell1)return t=a.getAttack(e);break;case s.Actor2:if(e===n.Cell2)return t=a.getAttack(e);break;case s.Actor3:if(e===n.Cell3)return t=a.getAttack(e);break;case s.Actor4:if(e===n.Cell4)return t=a.getAttack(e);break;case s.Actor5:if(e===n.Cell5)return t=a.getAttack(e)}}return t},allWaveDone:function(){var e=!1;0===this.waveMonsterlist.length&&(0===this.monsterlist.length&&(e=!0));return e},oneWaveDone:function(){return 0===this.monsterlist.length},addMonster:function(e,t){this.monsterlist.splice(t,0,e)},getMonster:function(){var e=null;return this.monsterlist.length>0&&(e=this.monsterlist[0]),e},removeMonster:function(e){for(var t=this,i=this.monsterlist,o=0;o<i.length;o++)if(i[o]===e){i.splice(o,1);break}if(0===i.length)this.Game.updateWave(1);else for(var n=0;n<this.actorlist.length;n++){var s=this.actorlist[n],a=cc.moveBy(1,cc.v2(180,0)).easing(cc.easeOut(1)),c=cc.callFunc(function(){var e=t.monsterlist[0],i=cc.scaleTo(.2,1).easing(cc.easeOut(3));e.runAction(cc.sequence(i,null))},this);s.runAction(cc.sequence(a,c))}},fire:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],o=i.getComponent("Cell"),n=this.actorlist,s=0;s<n.length;s++){var a=this.actorcomlist[s],c=a.roletype;if(o.celltype===c){a.pushCell(i),e.splice(t--,1);break}}this.RPGAttack=!0;for(var l=this.actorcomlist,r=0;r<l.length;r++){l[r].fire()}},fireOver:function(){if(this.skillUI.hideAllSkill(),this.RPGAttack){for(var e=!0,t=0;t<this.actorcomlist.length;t++){if(this.actorcomlist[t].IsAttack()){e=!1;break}}if(e){var i=this.getMonster();if(i)i.getComponent("Monster").showBlood(!1);this.RPGAttack=!1;var o=function(){this.monsterTripSkill()}.bind(this);this.Board.cellsAttackDone(o)}}},monsterTripSkill:function(){var e=function(){this.tripPetsSkill()}.bind(this);if(this.monsterlist.length>0){var t=this.monsterlist[0].getComponent("MonsterSkill");t&&(t.IsHaveSkill()?t.checkSkill(e):e())}else e()},tripPetsSkill:function(){var e=function(e){this.tripHeroesSkill()}.bind(this);this.skillUI.tripPetSkills(e)},tripHeroesSkill:function(){for(var e=this,t=.1,i=0,o=0;o<this.actorcomlist.length;o++){var n=this.actorcomlist[o],s=n.roletype;if(this.skillUI.tripHeroSkill(s)){t=.2;var a=this.skillUI.getRoleSkill(s);a=parseInt(a),i=n.tripSkill(t,a)}}var c=cc.callFunc(function(){e.allFireDone()},this);this.node.runAction(cc.sequence(cc.delayTime(t+i+.1),c))},bossTimeOver:function(){this.Board.actionDone()&&this.timeUp()},stopBkMusic:function(){var e=cc.director.getScene()._children[0].getComponent("AudioEngineControl");e&&e.stopFight()},allFireDone:function(){switch(this.Game.showCombo("",!1),this.Game.checkResult()){case o.Win:this.stopBkMusic(),this.Board.openUIMask(),this.Board.setUserInteract(!1),this.procssStepAward(),this.Game.stopAudio(),l.instance.playWow();break;case o.Lose:this.stopBkMusic(),this.loadAddStep(),this.Board.openUIMask(),this.Board.setUserInteract(!1),this.Game.stopAudio(),l.instance.playGamelose();break;case o.TimeUp:this.timeUp();break;case o.Fighting:this.allWaveDone()?(this.Board.openUIMask(),this.Board.setUserInteract(!0)):this.oneWaveDone()?this.startMove():(this.Board.openUIMask(),this.Board.setUserInteract(!0))}},timeUp:function(){this.loadAddTime(),this.Board.openUIMask(),this.Board.setUserInteract(!1),this.Game.stopAudio(),l.instance.playGamelose()},startMove:function(){if(this.actorMove=!0,this._moveDt=0,this.cameraControl.zoomOut(),this.midOneNode){var e=this.midOneNode.getComponent("MoveCameraShot");e.setMove(!0),e.zoomOut()}},stopMove:function(){this.actorMove=!1;var e=function(){this.actorMove=!1,this._spawnedOnWave=!1,this.Board.openUIMask(),this.Board.setUserInteract(!0)}.bind(this);if(this.cameraControl.zoomIn(e),this.midOneNode){var t=this.midOneNode.getComponent("MoveCameraShot");t.setMove(!1),t.zoomIn()}},moveUpdate:function(e){if(this.actorMove){if(!this._spawnedOnWave){var t=cc.v2();p.instance.getActorCenterPos(t),this.spawnOneWaveMonster(t,this._disVal),this._spawnedOnWave=!0}if(this._moveDt+=e,this._moveDt>=.01){this._moveDt=0;for(var i=0;i<this.actorlist.length;i++){this.actorlist[i].x+=5}this._moveDis+=5}if(this._moveDis>=this._disVal){this.moveDt=0,this._moveDis=0;var o=cc.v2();p.instance.getActorCenterPos(o),this.stopMove()}}},update:function(e){this.moveUpdate(e)},shake:function(){this.anim.play("shake"),this.scheduleOnce(this.stopShake.bind(this),this.shakeDuration),this.node.position=cc.v2(0,0)},stopShake:function(){this.anim.stop()},procssStepAward:function(){var e=this.Game.getSteps(),t=a.levelID;if(a.levelResultData.score=100*e,c.instance.getLevelStepAward(t))this.win();else{var i=function(){this.stepAward.shootSteps(e),c.instance.setLevelStepAward(t,!0)}.bind(this);this.Board.cellsBonustime(i,1)}},bossLose:function(){this.Board.timeUp(),l.instance.playTimeUp(),a.levelResultData.levelResult=o.Lose;var e=cc.director.getScene()._children[0],t=cc.callFunc(function(){cc.loader.loadRes("prefab/AchievementUI",function(t,i){var o=cc.instantiate(i);o&&(o.parent=e,o.position=cc.v2(0,0),o.zIndex=100,o.group="UI",o.opacity=0,o.runAction(cc.fadeIn(1)))})},this),i=cc.delayTime(1),n=cc.spawn(cc.delayTime(.2),t);e.runAction(cc.sequence(i,n,null))},loadAddTime:function(){var e=function(){var e=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/AddTime",function(t,i){var o=cc.instantiate(i);o&&(o.parent=e,o.active=!0)})}.bind(this);this.Board.timeUp(e)},loadAddStep:function(){var e=function(){var e=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/AddStep",function(t,i){var o=cc.instantiate(i);o&&(o.parent=e,o.active=!0)})}.bind(this);this.Board.timeUp(e)},addStepSuccess:function(e){var t=function(){this.Game.playAudio(),this.Game.updateStep(e),this.Board.openUIMask(),this.Board.setUserInteract(!0)}.bind(this);this.Board.cellsIdle(t,.6)},addBossTime:function(e){var t=function(){this.Game.playAudio(),this.Game.addBossTime(e),this.Board.openUIMask(),this.Board.setUserInteract(!0)}.bind(this);this.Board.cellsIdle(t,.6)},lose:function(){var e=function(){a.levelResultData.levelResult=o.Lose;var e=cc.director.getScene()._children[0],t=cc.callFunc(function(){cc.loader.loadRes("prefab/AchievementUI",function(t,i){var o=cc.instantiate(i);o&&(o.parent=e,o.position=cc.v2(0,0),o.zIndex=10,o.group="UI")})},this),i=cc.delayTime(.4),n=cc.spawn(cc.delayTime(0),t);e.runAction(cc.sequence(i,n,null))}.bind(this);this.Board.cellsCrazy(e,1)},win:function(){var e=function(){var e=a.levelResultData;e.levelResult=o.Win,this.transfromScene(e),this.cameraControl.zoomOut()}.bind(this);this.Board.cellsReady(e,1)},transfromScene:function(e){(this.actorMove=!0,this._moveDt=0,this._moveDelay=5,this._moveSpeed=this._moveSpeed+60,this.cameraControl.zoomOut(),this.midOneNode)&&this.midOneNode.getComponent("MoveCameraShot").setMove(!0);var t=cc.director.getScene()._children[0],i=cc.callFunc(function(){cc.loader.loadRes("prefab/AchievementUI",function(e,i){var o=cc.instantiate(i);o&&(o.parent=t,o.position=cc.v2(0,0),o.zIndex=100,o.group="UI")})},this),o=cc.delayTime(2),n=cc.spawn(cc.delayTime(.2),i);t.runAction(cc.sequence(o,n,null))},getOverviewTargetsMidpoint:function(e,t){cc.v2(0,0);for(var i=99999,o=99999,n=-99999,s=-99999,a=0;a<this.actorlist.length;++a){var c=this.actorlist[a];n=c.x>n?c.x:n,i=c.x<i?c.x:i,s=c.y>s?c.y:s,o=c.y<o?c.y:o}u.x=0,u.y=0,p.instance.getActorCenterPos(u),u.x+=370,n=u.x>n?u.x:n,i=u.x<i?u.x:i,s=u.y>s?u.y:s,o=u.y<o?u.y:o,n+=e,i-=e,s+=e,o-=e;var l=Math.abs(n-i),r=Math.abs(s-o);return cc.v2(i+l/2,o+r/2)},getTargetMidPoint:function(){return u.x=0,u.y=0,p.instance.getActorCenterPos(u),u.x+=150,u}});cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",PlayFightAudio:"PlayFightAudio",Utils:"Utils"}],RPG:[function(e,t,i){"use strict";cc._RF.push(t,"aa2b1sWbvBNR5HG9MRhsVcZ","RPG"),cc.Class({extends:cc.Component,properties:{gameNode:cc.Node},onLoad:function(){this.spawnMonster=this.node.getComponent("SpawnMonster"),this.spawnActor=this.node.getComponent("SpawnActor"),this.spawnActor.spawnActors(),this.Game=this.gameNode.getComponent("Game")},start:function(){}}),cc._RF.pop()},{}],RemoveCells:[function(e,t,i){"use strict";cc._RF.push(t,"3db16SFTfZJYaYidNaqgAFL","RemoveCells");var o=e("EnumDefine").CellType,n=(e("EnumDefine").Direction,e("Game")),s=e("Utils").NUMROWS;e("Utils").NUMCOLUMNS;cc.Class({extends:cc.Component,properties:{},ctor:function(){this._unUsedproplist=[],this._usedProplist=[]},onLoad:function(){this.Board=this.node.getComponent("Board"),this.DropCell=this.node.getComponent("DropCell"),this.CellAttack=this.node.getComponent("CellAttack"),this.PropHVSkill=this.node.getComponent("PropHVSkill"),this.processBoardCell=this.node.getComponent("ProcessBoardCell")},start:function(){},reset:function(){this._usedProplist.length=0,this._unUsedproplist.length=0},pushProplist:function(e){e.length>0&&this._unUsedproplist.push(e)},runCelllist:function(e,t){for(var i=this,o=[],n=function(n){var s=e[n],a=cc.callFunc(function(){i.removeOneCell(s)},i);o.push(a),o.push(cc.delayTime(t))},s=0;s<e.length;s++)n(s);o.length>0&&this.node.runAction(cc.sequence(o))},removelistlist:function(e,t,i){for(var o=this,s=[],a=0,c=0;c<e.length;c++){var l=e[c],r=[];this.collectProplist(l,r),s.push(r),a+=r.length}for(var h=0,u=0;u<s.length;u++){var p=s[u];h=h<.05*p.length?.05*p.length:h}var d=cc.callFunc(function(){for(var e=0;e<s.length;e++){var t=s[e];o.runCelllist(t,.05)}},this);if(t.push(d),t.push(cc.delayTime(h)),n.instance.updateRemoveCells(a),this._unUsedproplist.length>0){var f=cc.callFunc(function(){o.processProplist()},this);t.push(f)}else{t.push(cc.delayTime(.2)),t.push(i)}},removeXXCross:function(e,t,i,o,s,a,c,l){var r=this,h=[],u=[],p=[],d=[],f=[],m=[];this.collectProplist(e,h),this.collectProplist(t,u),this.collectProplist(i,p),this.collectProplist(o,d),this.collectProplist(s,f),this.collectProplist(a,m);var v=0;v=(v=(v=(v=(v=(v=v<.2*h.length?.2*h.length:v)<.2*u.length?.2*u.length:v)<.2*p.length?.2*p.length:v)<.2*d.length?.2*d.length:v)<.2*f.length?.2*f.length:v)<.2*m.length?.2*m.length:v;var g=cc.callFunc(function(){r.runCelllist(h,.2),r.runCelllist(u,.2),r.runCelllist(p,.2),r.runCelllist(d,.2),r.runCelllist(f,.2),r.runCelllist(m,.2)},this);c.push(g),c.push(cc.delayTime(v));var C=h.length+u.length+p.length+d.length+f.length+m.length;if(n.instance.updateRemoveCells(C),this._unUsedproplist.length>0){var _=cc.callFunc(function(){r.processProplist()},this);c.push(_)}else{c.push(cc.delayTime(.2)),c.push(l)}},removeXCross:function(e,t,i,o,s,a){var c=this,l=[],r=[],h=[],u=[];this.collectProplist(e,l),this.collectProplist(t,r),this.collectProplist(i,h),this.collectProplist(o,u);var p=0;p=(p=(p=(p=p<.2*l.length?.2*l.length:p)<.2*r.length?.2*r.length:p)<.2*h.length?.2*h.length:p)<.2*u.length?.2*u.length:p;var d=cc.callFunc(function(){c.runCelllist(l,.2),c.runCelllist(r,.2),c.runCelllist(h,.2),c.runCelllist(u,.2)},this);s.push(d),s.push(cc.delayTime(p));var f=l.length+r.length+h.length+u.length;if(n.instance.updateRemoveCells(f),this._unUsedproplist.length>0){var m=cc.callFunc(function(){c.processProplist()},this);s.push(m)}else{s.push(cc.delayTime(.2)),s.push(a)}},removeCross:function(e,t,i,o){var s=this,a=[],c=[];this.collectProplist(e,a),this.collectProplist(t,c);var l=0;l=(l=l<.2*a.length?.2*a.length:l)<.2*c.length?.2*c.length:l;var r=cc.callFunc(function(){s.runCelllist(a,.2),s.runCelllist(c,.2)},this);i.push(r),i.push(cc.delayTime(l));var h=a.length+c.length;if(n.instance.updateRemoveCells(h),this._unUsedproplist.length>0){var u=cc.callFunc(function(){s.processProplist()},this);i.push(u)}else{i.push(cc.delayTime(.2)),i.push(o)}},removeHV:function(e,t,i,o,s,a){var c=this,l=[],r=[],h=[];this.collectProplist(i,l);for(var u=0;u<l.length;u++){var p=l[u],d=p.getComponent("Cell");0===a?d.column<e?r.push(p):h.push(p):d.row<t?r.push(p):h.push(p)}for(var f=Math.min(r.length,h.length),m=0,v=function(){var e=r[m],t=h[m],i=cc.callFunc(function(){c.removeOneCell(e),c.removeOneCell(t)},c);o.push(i),o.push(cc.delayTime(.2))};m<f;m++)v();for(var g=function(){var e=r[m],t=cc.callFunc(function(){c.removeOneCell(e)},c);o.push(t),o.push(cc.delayTime(.2))};m<r.length;m++)g();for(var C=function(){var e=h[m],t=cc.callFunc(function(){c.removeOneCell(e)},c);o.push(t),o.push(cc.delayTime(.2))};m<h.length;m++)C();var _=l.length;if(n.instance.updateRemoveCells(_),this._unUsedproplist.length>0){var S=cc.callFunc(function(){c.processProplist()},this);o.push(S)}else{o.push(cc.delayTime(.2)),o.push(s)}},removeClearBomb:function(e,t,i,o,a){var c=this,l=[],r=[],h=[];this.collectProplist(i,l);for(var u=t;u<s;u++){for(var p=[],d=0;d<l.length;d++){var f=l[d];f.getComponent("Cell").row===u&&p.push(f)}p.length>0&&r.push(p)}for(var m=t-1;m>=0;m--){for(var v=[],g=0;g<l.length;g++){var C=l[g];C.getComponent("Cell").row===m&&v.push(C)}v.length>0&&h.push(v)}for(var _=Math.min(r.length,h.length),S=0,b=function(){var e=r[S],t=h[S],i=cc.callFunc(function(){for(var i=0;i<e.length;i++){var o=e[i];c.removeOneCell(o)}for(var n=0;n<t.length;n++){var s=t[n];c.removeOneCell(s)}},c);o.push(i),o.push(cc.delayTime(.2))};S<_;S++)b();for(var k=function(){var e=h[S],t=cc.callFunc(function(){for(var t=0;t<e.length;t++){var i=e[t];c.removeOneCell(i)}},c);o.push(t),o.push(cc.delayTime(.2))};S<h.length;S++)k();for(var y=function(){var e=r[S],t=cc.callFunc(function(){for(var t=0;t<e.length;t++){var i=e[t];c.removeOneCell(i)}},c);o.push(t),o.push(cc.delayTime(.2))};S<r.length;S++)y();var w=l.length;if(n.instance.updateRemoveCells(w),this._unUsedproplist.length>0){var B=cc.callFunc(function(){c.processProplist()},this);o.push(B)}else{o.push(cc.delayTime(.2)),o.push(a)}},removeCells:function(e,t,i){var o=this,s=[];this.collectProplist(e,s);for(var a=0;a<s.length;a++){var c=s[a],l=cc.callFunc(this.removeOneCell.bind(this,c));t.push(l),t.push(cc.delayTime(.1))}var r=s.length;if(n.instance.updateRemoveCells(r),this._unUsedproplist.length>0){var h=cc.callFunc(function(){o.processProplist()},this);t.push(h)}else{t.push(cc.delayTime(.2)),t.push(i)}},processProplist:function(){if(this._unUsedproplist.length>0){var e=this._unUsedproplist.shift();this._usedProplist.push(e);for(var t=0;t<e.length;t++){var i=e[t],s=i.getComponent("Cell").celltype;switch(n.instance.updateCell(s,1),s){case o.One_Horinal:case o.Two_Horinal:case o.Three_Horinal:case o.Four_Horinal:case o.Five_Horinal:this.PropHVSkill.HorinalLine(i);break;case o.One_Vertical:case o.Two_Vertical:case o.Three_Vertical:case o.Four_Vertical:case o.Five_Vertical:this.PropHVSkill.VerticalLine(i);break;case o.One_PrismBomb:case o.Two_PrismBomb:case o.Three_PrismBomb:case o.Four_PrismBomb:case o.Five_PrismBomb:this.PropHVSkill.PrismBomb(i);break;case o.One_XCross:case o.Two_XCross:case o.Three_XCross:case o.Four_XCross:case o.Five_XCross:this.PropHVSkill.XCross(i);break;case o.SOne_TwoHorinal:case o.STwo_TwoHorinal:case o.SThree_TwoHorinal:case o.SFour_TwoHorinal:case o.SFive_TwoHorinal:this.PropHVSkill.DoubleHorinals(i);break;case o.SOne_TwoVertical:case o.STwo_TwoVertical:case o.SThree_TwoVertical:case o.SThree_TwoVertical:case o.SFour_TwoVertical:this.PropHVSkill.DoubleVerticals(i);break;case o.ClearBombProp:this.PropHVSkill.ClearBomb(i);break;case o.SameColorProp:this.PropHVSkill.SameColorSkill(i);break;case o.SOne_Bomb:case o.STwo_Flash:case o.SFive_SameColor:case o.SThree_Posion:case o.SFour_Point:this.PropHVSkill.PrismBomb(i)}}}},removeOneCell:function(e){this.CellAttack.hurt(e)},collectProplist:function(e,t){for(var i=[],o=0;o<e.length;o++){var n=e[o],s=n.getComponent("Cell");s.IsProp()?-1==i.indexOf(n)&&i.push(n):s.canRemove()&&-1==t.indexOf(n)&&t.push(n)}if(i.length>0){for(var a=[],c=0;c<i.length;c++){var l,r,h=i[c];l=this.checkIsInlist(h,this._unUsedproplist),r=this.checkIsInlist(h,this._usedProplist),l||r||a.push(h)}a.length>0&&this._unUsedproplist.push(a)}},checkIsInlist:function(e,t){for(var i=!1,o=0;o<t.length;o++){if(t[o].indexOf(e)>=0){i=!0;break}}return i}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",Utils:"Utils"}],Rocket:[function(e,t,i){"use strict";cc._RF.push(t,"01040G+qUdPDo9pOhbsl5dS","Rocket");var o=e("EnumDefine").Direction,n=(e("Utils"),e("Utils").NUMROWS),s=e("Utils").NUMCOLUMNS,a=e("Utils").TITLE_WIDTH,c=e("Utils").TITLE_HEIGHT;cc.Class({extends:cc.Component,properties:{},start:function(){},runlist:function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];cc.callFunc(function(){},this);t.push(o.position)}var n=.05*e.length,s=cc.cardinalSplineTo(n,t,0),a=cc.sequence(s,cc.removeSelf());this.node.runAction(a)},run:function(e){var t=0,i=(this.node.position,cc.v2());e==o.kHorinal?(i.x=a*s,i.y=0,t=.05*s):(i.x=0,i.y=c*n,t=.05*n);var l=cc.moveBy(t,i),r=cc.sequence(l,cc.removeSelf());this.node.runAction(r)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],RoleBattleGuide:[function(e,t,i){"use strict";cc._RF.push(t,"2eb3euClW1NUKlaERHYQ1SE","RoleBattleGuide");var o=e("Board");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.guideDone=!1;var t=cc.callFunc(function(){e.guideDone=!0},this);this.node.runAction(cc.sequence(cc.delayTime(1),t)),this.registerTouch()},start:function(){},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t)},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd(t)},e)},touchBegin:function(e){},touchEnd:function(e){this.guideDone&&(o.instance.drawGuideline(),this.node.removeFromParent())}}),cc._RF.pop()},{Board:"Board"}],RoleMove:[function(e,t,i){"use strict";cc._RF.push(t,"afff3C+RUhMg47hRzWHIhoF","RoleMove");e("RPGManager");var o=e("Game"),n=cc.v2(0,0);cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._movedt=0,this._moveDelay=.01,this._moveUnitVal=15,this.canMove=!1,this.prevPos=cc.v2(),this.walkDis=0},start:function(){},setMove:function(e){this.canMove=e},move:function(e){n.x=this.node.position.x,n.y=this.node.position.y,n.x+=this._moveUnitVal,this.prevPos=this.node.position,this.node.position=this.node.position.lerp(n,.2),this.walkDis+=this.node.position.x-this.prevPos.x,this.walkDis>=100&&(this.walkDis=0,o.instance.updateBossRoad(1e-4))},update:function(e){this.canMove&&this.move(e)}}),cc._RF.pop()},{Game:"Game",RPGManager:"RPGManager"}],RolePetSkills:[function(e,t,i){"use strict";cc._RF.push(t,"6765eZlVl5PyqIYquZHpBIa","RolePetSkills");e("EnumDefine").Direction,e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT,e("EnumDefine").RemoveCellEffect,e("PoolMng");cc.Class({extends:cc.Component,properties:{},start:function(){},sameColorSkill:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine",PoolMng:"PoolMng",Utils:"Utils"}],RolePetUI:[function(e,t,i){"use strict";cc._RF.push(t,"f9fd44LCftIrqhIbPR1f7+F","RolePetUI");var o=e("EnumDefine"),n=o.ActorType,s=(o.EnterKind,e("BaseUI")),a=e("LocalStorage");cc.Class({extends:s,properties:{midbk:cc.Node,scrollView:{default:null,type:cc.ScrollView},petItem:cc.Prefab},onLoad:function(){var e=this.midbk;this.scaleShow(e,null),this.content=this.scrollView.content,this.uibase=null,this.closeFunc=null},start:function(){},show:function(e,t){this.uibase=t,this.roleID=e;var i=[];switch(e){case n.Actor1:i=[1,2,3];break;case n.Actor2:i=[4,5,6];break;case n.Actor3:i=[7,8,9];break;case n.Actor4:i=[10,11,12];break;case n.Actor5:i=[13,14,15]}for(var o=0;o<i.length;o++){var s=i[o],c=!0;a.instance.getPetData(s)&&(c=!1);var l=cc.instantiate(this.petItem);l.parent=this.content,l.position=cc.v2(187+o*(.9*l.width+15),70);var r=l.getComponent("PetItem");r&&r.init(e,s,c,this.uibase)}},onBtnCloseActorUI:function(){var e=function(){this.closeFunc&&this.closeFunc(),this.node.removeFromParent()}.bind(this),t=this.midbk;this.scaleClose(t,e)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage"}],RoleSkillUI:[function(e,t,i){"use strict";cc._RF.push(t,"e4e7efjFjJJ3qQBIZaSAmyB","RoleSkillUI");e("EnumDefine");var o=e("BaseUI"),n=e("JsonData");cc.Class({extends:o,properties:{skillbk:cc.Node,decription:cc.Label},onLoad:function(){this.scaleShow(this.node,null)},start:function(){},show:function(e){var t=function(e){var t="prefab/skillcell/"+e.prefabName,i=this;cc.loader.loadRes(t,function(e,t){e&&cc.error(e);var o=cc.instantiate(t);o.parent=i.skillbk,o.x=-39,o.y=-40,o.getChildByName("cellNode").x=39}),this.decription.string=e.describe_CN}.bind(this);n.instance.loadJsonSkillData(e,t)},closeBtnFunc:function(e){var t=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData"}],Set:[function(e,t,i){"use strict";cc._RF.push(t,"97dfcLTxp9OSoVFKbCcNtjq","Set");e("JsonData");var o=e("LocalStorage");e("EnumDefine").ActorType,e("Utils");cc.Class({extends:cc.Component,properties:{music:cc.Node,sound:cc.Node,musicNormalSpriteFrame:cc.SpriteFrame,musicDisaleSpriteFrame:cc.SpriteFrame,soundNormalSpriteFrame:cc.SpriteFrame,soundDisableSpriteFrame:cc.SpriteFrame},onLoad:function(){},show:function(e){var t=cc.moveTo(.2,cc.v2(0,133)).easing(cc.easeBounceInOut());this.sound.runAction(t),t=cc.moveTo(.2,cc.v2(0,50)).easing(cc.easeBounceInOut()),this.music.runAction(cc.sequence(cc.delayTime(.05),t));var i=o.instance.getSetData();this.data=i;var n=i.musicOnOff,s=i.soundOnOff;this.processMusic(n),this.processSound(s);var a=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(cc.delayTime(.25),a))},hide:function(e){var t=cc.moveTo(.2,cc.v2(0,-37)).easing(cc.easeBounceInOut());this.sound.runAction(cc.sequence(cc.delayTime(.05),t)),t=cc.moveTo(.2,cc.v2(0,-50)).easing(cc.easeBounceInOut()),this.music.runAction(cc.sequence(cc.delayTime(.01),t));var i=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(cc.delayTime(.25),i,cc.removeSelf()))},processMusic:function(e){var t=this.music.getComponent("cc.Sprite");t.spriteFrame=e?this.musicNormalSpriteFrame:this.musicDisaleSpriteFrame},processSound:function(e){var t=this.sound.getComponent("cc.Sprite");t.spriteFrame=e?this.soundNormalSpriteFrame:this.soundDisableSpriteFrame},musciBtn:function(e){var t=this.data.musicOnOff;t=!t,this.data.musicOnOff=t,this.processMusic(t)},soundBtn:function(e){var t=this.data.soundOnOff;t=!t,this.data.soundOnOff=t,this.processSound(t)},onDisale:function(){o.instance.setSetData(this.data)},start:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],ShaderComponent:[function(e,t,i){"use strict";cc._RF.push(t,"dbe38Eu9bZCbJeHFtq3EVSq","ShaderComponent"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ShaderManager"),n=cc._decorator,s=n.ccclass,a=n.property,c=n.requireComponent,l=n.executeInEditMode,r=[o.ShaderType.Fluxay,o.ShaderType.FluxaySuper],h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._shader=o.ShaderType.Default,t._color=cc.color(),t._start=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"shader",{get:function(){return this._shader},set:function(e){this._shader=e,this._applyShader()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.getComponent(cc.Sprite).setState(0),this._applyShader()},t.prototype.update=function(e){this._material&&(this._setShaderColor(),this._setShaderTime(e))},t.prototype._applyShader=function(){var e=this._shader,t=this.getComponent(cc.Sprite),i=o.default.useShader(t,e);this._material=i,this._start=0;var n=this._color;if(n.setR(255),n.setG(255),n.setB(255),n.setA(255),i){switch(e){case o.ShaderType.Blur:case o.ShaderType.GaussBlur:i.setNum(.03)}this._setShaderColor()}},t.prototype._setShaderColor=function(){var e=this.node,t=e.color,i=this._color,o=t.getR(),n=t.getG(),s=t.getB(),a=e.opacity,c=!1;i.getR()!==o&&(i.setR(o),c=!0),i.getG()!==n&&(i.setG(n),c=!0),i.getB()!==s&&(i.setB(s),c=!0),i.getA()!==a&&(i.setA(a),c=!0),c&&this._material.setColor(o/255,n/255,s/255,a/255)},t.prototype._setShaderTime=function(e){if(r.indexOf(this._shader)>=0){var t=this._start;t>65535&&(t=0),t+=e,this._material.setTime(t),this._start=t}},__decorate([a({type:cc.Enum(o.ShaderType),visible:!1})],t.prototype,"_shader",void 0),__decorate([a({type:cc.Enum(o.ShaderType)})],t.prototype,"shader",null),t=__decorate([s,l,c(cc.Sprite)],t)}(cc.Component);i.default=h,cc._RF.pop()},{"./ShaderManager":"ShaderManager"}],ShaderLab:[function(e,t,i){"use strict";cc._RF.push(t,"463d9mDMEBPfaKBF4qNZ0aY","ShaderLab"),Object.defineProperty(i,"__esModule",{value:!0});var o="\nuniform mat4 viewProj;\nattribute vec3 a_position;\nattribute vec2 a_uv0;\nvarying vec2 uv0;\nvoid main () {\n    vec4 pos = viewProj * vec4(a_position, 1);\n    gl_Position = pos;\n    uv0 = a_uv0;\n}",n={GrayScaling:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float gray = dot(c.rgb, vec3(0.299 * 0.5, 0.587 * 0.5, 0.114 * 0.5));\n    gl_FragColor = vec4(gray, gray, gray, c.a * 0.5);\n}\n"},Stone:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float clrbright = (c.r + c.g + c.b) * (1. / 3.);\n    float gray = (0.6) * clrbright;\n    gl_FragColor = vec4(gray, gray, gray, c.a);\n}\n"},Ice:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 clrx = color * texture2D(texture, uv0);\n    float brightness = (clrx.r + clrx.g + clrx.b) * (1. / 3.);\n\tfloat gray = (1.5)*brightness;\n\tclrx = vec4(gray, gray, gray, clrx.a)*vec4(0.8,1.2,1.5,1);\n    gl_FragColor =clrx;\n}\n"},Frozen:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    c *= vec4(0.8, 1, 0.8, 1);\n\tc.b += c.a * 0.2;\n    gl_FragColor = c;\n}\n"},Mirror:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    c.r *= 0.5;\n    c.g *= 0.8;\n    c.b += c.a * 0.2;\n    gl_FragColor = c;\n}\n"},Poison:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    c.r *= 0.8;\n\tc.r += 0.08 * c.a;\n\tc.g *= 0.8;\n    c.g += 0.2 * c.a;\n\tc.b *= 0.8;\n    gl_FragColor = c;\n}\n"},Banish:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float gg = (c.r + c.g + c.b) * (1.0 / 3.0);\n    c.r = gg * 0.9;\n    c.g = gg * 1.2;\n    c.b = gg * 0.8;\n    c.a *= (gg + 0.1);\n    gl_FragColor = c;\n}\n"},Vanish:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float gray = (c.r + c.g + c.b) * (1. / 3.);\n    float rgb = gray * 0.8;\n    gl_FragColor = vec4(rgb, rgb, rgb, c.a * (gray + 0.1));\n}\n"},Invisible:{vert:o,frag:"\nvoid main () {\n    gl_FragColor = vec4(0,0,0,0);\n}\n"},Blur:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float num;\nvarying vec2 uv0;\nvoid main () {\n    vec4 sum = vec4(0.0);\n    vec2 size = vec2(num,num);\n    sum += texture2D(texture, uv0 - 0.4 * size) * 0.05;\n\tsum += texture2D(texture, uv0 - 0.3 * size) * 0.09;\n\tsum += texture2D(texture, uv0 - 0.2 * size) * 0.12;\n\tsum += texture2D(texture, uv0 - 0.1 * size) * 0.15;\n\tsum += texture2D(texture, uv0             ) * 0.16;\n\tsum += texture2D(texture, uv0 + 0.1 * size) * 0.15;\n\tsum += texture2D(texture, uv0 + 0.2 * size) * 0.12;\n\tsum += texture2D(texture, uv0 + 0.3 * size) * 0.09;\n    sum += texture2D(texture, uv0 + 0.4 * size) * 0.05;\n    \n    vec4 vectemp = vec4(0,0,0,0);\n    vec4 substract = vec4(0,0,0,0);\n    vectemp = (sum - substract) * color;\n\n    float alpha = texture2D(texture, uv0).a;\n    if(alpha < 0.05) { gl_FragColor = vec4(0 , 0 , 0 , 0); }\n\telse { gl_FragColor = vectemp; }\n}\n"},GaussBlur:{vert:o,frag:"\n#define repeats 5.\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float num;\nvarying vec2 uv0;\n\nvec4 draw(vec2 uv) {\n    return color * texture2D(texture,uv).rgba; \n}\nfloat grid(float var, float size) {\n    return floor(var*size)/size;\n}\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\nvoid main()\n{\n    vec4 blurred_image = vec4(0.);\n    for (float i = 0.; i < repeats; i++) { \n        vec2 q = vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i,uv0.x+uv0.y))+num); \n        vec2 uv2 = uv0+(q*num);\n        blurred_image += draw(uv2)/2.;\n        q = vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i+2.,uv0.x+uv0.y+24.))+num); \n        uv2 = uv0+(q*num);\n        blurred_image += draw(uv2)/2.;\n    }\n    blurred_image /= repeats;\n    gl_FragColor = vec4(blurred_image);\n}\n"},Dissolve:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float time;\nvarying vec2 uv0;\n\nvoid main()\n{\n    vec4 c = color * texture2D(texture,uv0);\n    float height = c.r;\n    if(height < time)\n    {\n        discard;\n    }\n    if(height < time+0.04)\n    {\n        // \u6eb6\u89e3\u989c\u8272\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\n        c = vec4(.9,.6,0.3,c.a);\n    }\n    gl_FragColor = c;\n}\n"},Fluxay:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float time;\nvarying vec2 uv0;\n\nvoid main()\n{\n    vec4 src_color = color * texture2D(texture, uv0).rgba;\n\n    float width = 0.08;       //\u6d41\u5149\u7684\u5bbd\u5ea6\u8303\u56f4 (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u5bbd\u5ea6)\n    float start = tan(time/1.414);  //\u6d41\u5149\u7684\u8d77\u59cbx\u5750\u6807\n    float strength = 0.008;   //\u6d41\u5149\u589e\u4eae\u5f3a\u5ea6   (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u589e\u4eae\u5f3a\u5ea6)\n    float offset = 0.5;      //\u504f\u79fb\u503c         (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u503e\u659c\u7a0b\u5ea6)\n    if(uv0.x < (start - offset * uv0.y) &&  uv0.x > (start - offset * uv0.y - width))\n    {\n        vec3 improve = strength * vec3(255, 255, 255);\n        vec3 result = improve * vec3( src_color.r, src_color.g, src_color.b);\n        gl_FragColor = vec4(result, src_color.a);\n\n    }else{\n        gl_FragColor = src_color;\n    }\n}\n"},FluxaySuper:{vert:o,frag:"\n#define TAU 6.12\n#define MAX_ITER 5\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float time;\nvarying vec2 uv0;\n\nvoid main()\n{\n    float time = time * .5+5.;\n    // uv should be the 0-1 uv of texture...\n    vec2 uv = uv0.xy;//fragCoord.xy / iResolution.xy;\n    \n    vec2 p = mod(uv*TAU, TAU)-250.0;\n\n    vec2 i = vec2(p);\n    float c = 1.0;\n    float inten = .0045;\n\n    for (int n = 0; n < MAX_ITER; n++) \n    {\n        float t =  time * (1.0 - (3.5 / float(n+1)));\n        i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(1.5*t + i.x));\n        c += 1.0/length(vec2(p.x / (cos(i.x+t)/inten),p.y / (cos(i.y+t)/inten)));\n    }\n    c /= float(MAX_ITER);\n    c = 1.17-pow(c, 1.4);\n    vec4 tex = texture2D(texture,uv);\n    vec3 colour = vec3(pow(abs(c), 20.0));\n    colour = clamp(colour + vec3(0.0, 0.0, .0), 0.0, tex.a);\n\n    // \u6df7\u5408\u6ce2\u5149\n    float alpha = c*tex[3];  \n    tex[0] = tex[0] + colour[0]*alpha; \n    tex[1] = tex[1] + colour[1]*alpha; \n    tex[2] = tex[2] + colour[2]*alpha; \n    gl_FragColor = color * tex;\n}\n"}};i.default=n,cc._RF.pop()},{}],ShaderManager:[function(e,t,i){"use strict";cc._RF.push(t,"d1e19w9UihLPqSppbSLUBq8","ShaderManager"),Object.defineProperty(i,"__esModule",{value:!0});var o,n=e("./ShaderLab"),s=e("./ShaderMaterial");(function(e){e[e.Default=0]="Default",e[e.Gray=1]="Gray",e[e.GrayScaling=100]="GrayScaling",e[e.Stone=101]="Stone",e[e.Ice=102]="Ice",e[e.Frozen=103]="Frozen",e[e.Mirror=104]="Mirror",e[e.Poison=105]="Poison",e[e.Banish=106]="Banish",e[e.Vanish=107]="Vanish",e[e.Invisible=108]="Invisible",e[e.Blur=109]="Blur",e[e.GaussBlur=110]="GaussBlur",e[e.Dissolve=111]="Dissolve",e[e.Fluxay=112]="Fluxay",e[e.FluxaySuper=113]="FluxaySuper"})(o=i.ShaderType||(i.ShaderType={}));var a=function(){function e(){}return e.useShader=function(e,t){if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){if(e&&e.spriteFrame&&e.getState()!==t){if(t>o.Gray){var i=o[t],a=n.default[i];if(!a)return void console.warn("Shader not defined",i);var c=new s.default(i,a.vert,a.frag,a.defines||[]),l=e.spriteFrame.getTexture();c.setTexture(l),c.updateHash();var r=e;return r._material=c,r._renderData._material=c,r._state=t,c}e.setState(t)}}else console.warn("Shader not surpport for canvas")},e}();i.default=a,cc._RF.pop()},{"./ShaderLab":"ShaderLab","./ShaderMaterial":"ShaderMaterial"}],ShaderMaterial:[function(e,t,i){"use strict";cc._RF.push(t,"70d0bHxjchOgLl9oySm1PPr","ShaderMaterial"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc.renderer.renderEngine,n=function(e){function t(t,i,o,n){var s=e.call(this,!1)||this,a=cc.renderer._forward._programLib;return!a._templates[t]&&a.define(t,i,o,n),s._init(t),s}return __extends(t,e),t.prototype._init=function(e){var t=o.renderer,i=o.gfx,n=new t.Pass(e);n.setDepth(!1,!1),n.setCullMode(i.CULL_NONE),n.setBlend(i.BLEND_FUNC_ADD,i.BLEND_SRC_ALPHA,i.BLEND_ONE_MINUS_SRC_ALPHA,i.BLEND_FUNC_ADD,i.BLEND_SRC_ALPHA,i.BLEND_ONE_MINUS_SRC_ALPHA);var s=new t.Technique(["transparent"],[{name:"texture",type:t.PARAM_TEXTURE_2D},{name:"color",type:t.PARAM_COLOR4},{name:"pos",type:t.PARAM_FLOAT3},{name:"size",type:t.PARAM_FLOAT2},{name:"time",type:t.PARAM_FLOAT},{name:"num",type:t.PARAM_FLOAT}],[n]);this._texture=null,this._color={r:1,g:1,b:1,a:1},this._pos={x:0,y:0,z:0},this._size={x:0,y:0},this._time=0,this._num=0,this._effect=this.effect=new t.Effect([s],{color:this._color,pos:this._pos,size:this._size,time:this._time,num:this._num},[]),this._mainTech=s},t.prototype.setTexture=function(e){this._texture=e,this._texture.update({flipY:!1,mipmap:!1}),this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId()},t.prototype.setColor=function(e,t,i,o){this._color.r=e,this._color.g=t,this._color.b=i,this._color.a=o,this._effect.setProperty("color",this._color)},t.prototype.setPos=function(e,t,i){this._pos.x=e,this._pos.y=t,this._pos.z=i,this._effect.setProperty("pos",this._pos)},t.prototype.setSize=function(e,t){this._size.x=e,this._size.y=t,this._effect.setProperty("size",this._size)},t.prototype.setTime=function(e){this._time=e,this._effect.setProperty("time",this._time)},t.prototype.setNum=function(e){this._num=e,this._effect.setProperty("num",this._num)},t}(o.Material);i.default=n,cc._RF.pop()},{}],ShootBullet:[function(e,t,i){"use strict";cc._RF.push(t,"601f2yxYvJM1rUlo+ezwRQh","ShootBullet");e("EnumDefine").HurtFont,e("PoolMng");var o=e("Board"),n=cc.v2();cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._fireDelay=.15},start:function(){},shootBulletlist:function(e,t,i,o){for(var n=this,s=[],a=function(a){var c=t[a],l=cc.callFunc(function(){var t=function(e){RPGManager.instance.getMonster()||o&&o()}.bind(n);n.shootBullet(e,c,i,t)},n);s.push(l),s.push(cc.delayTime(n._fireDelay))},c=0;c<t.length;c++)a(c);var l=cc.callFunc(function(){o&&o()},this);if(s.push(l),s.length>0){this.node.stopActionByTag(10);var r=cc.sequence(s);r.setTag(10),this.node.runAction(r)}},shootBullet:function(e,t,i,o){var n=this,s=t.getComponent("Cell"),a=RPGManager.instance.getMonster();if(a){var c=a.getComponent("Monster"),l=this.roleData.attack,r=0;s===c.getAttackAddtionCellType()&&(r=parseInt(1*l)),PlayFightAudio.instance.playShootbullet(),this.node.getComponent("sp.Skeleton").setAnimation(0,"attack",!1);var h=cc.callFunc(function(){var c,h=n.getBoneName(e),u=cc.v2(),p=n.findBone(h);u.x=p[0],u.y=p[1],c=p[2],u.x+=n.node.x,u.y+=n.node.y,t.zIndex=10,t.group=n.node.group,t.parent=n.node.parent,t.x=u.x,t.y=u.y,t.rotation=c;var d=cc.misc.degreesToRadians(c),f=Math.sin(d)*t.width*.5,m=Math.cos(d)*t.height*.5;t.x+=f,t.y+=m;var v=l+r;v+=v*AttackScale,n.shootMonster(t,s,i,a,v,o)},this);this.node.runAction(cc.sequence(cc.delayTime(.1),h))}else o&&o(!0)},shootMonster:function(e,t,i,o,n,s){if(o){var a=o.getComponent("Monster");a.isHaveShield()?this.shootToMonsterShield(e,t,o,a):this.shootToMonsterSkeleton(e,t,i,o,a,n,s)}else this.shootDone(!0)},shootToMonsterShield:function(e,t,i,o){var s=this,a=o.MonsterShield.getShieldData().pos,c=e.position;a.sub(c,n);var l=n.mag()/200*.1,r=cc.moveTo(l,a).easing(cc.easeOut(3)),h=cc.callFunc(function(){var i=e.parent,n=cc.v2(e.x,e.y);if(s.bulletEffect(n,i),o.attackShield(t,1))s.deSpawnBullet(e);else{var a=cc.moveBy(.2,cc.v2(0,-50)),c=cc.callFunc(function(){s.deSpawnBullet(e)},s);s.node.runAction(cc.sequence(a,c))}},this),u=cc.sequence(r,h);this.node.runAction(u)},shootToMonsterSkeleton:function(e,t,i,o,s,a,c){var l=this,r=o.position;r.y+=o.height/2;var h=e.position;r.sub(h,n);var u=n.mag()/200*.1,p=cc.moveTo(u,r).easing(cc.easeOut(3)),d=cc.callFunc(function(){var o=e.parent,n=cc.v2(e.x,e.y);if(l.bulletEffect(n,o),t===s.getDefenceCellType()){var r=cc.moveBy(.2,cc.v2(0,-50)),h=cc.callFunc(function(){l.deSpawnBullet(e)},l);e.runAction(cc.sequence(r,h))}else s.hurt(a,c,i),l.deSpawnBullet(e)},this),f=cc.sequence(p,d);e.runAction(f)},deSpawnBullet:function(e){o.instance.deSpawnCell(e)},getBoneName:function(e){switch(e){case ActorType.Actor1:case ActorType.Actor2:return"pipe";case ActorType.Actor3:case ActorType.Actor4:return"head";case ActorType.Actor5:return"gun04"}}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",PoolMng:"PoolMng"}],ShootSkill:[function(e,t,i){"use strict";cc._RF.push(t,"67e11l4UrZKS5OgXLviwb3k","ShootSkill");var o=e("Board"),n=e("Utils"),s=e("ProcessBoardCell");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},spawnSkill:function(e,t,i,n,a,c,l){var r=n,h=s.instance.randomGetNormalCells(1);if(h.length>0){var u=h[0],p=u.getComponent("Cell"),d=p.column,f=p.row,m=o.instance.spawnOneCell(r,d,f);if(m){m.parent=e,m.position=t,m.group=i;var v=u.position,g=Math.abs(u.width-m.width),C=Math.abs(u.height-m.height);v.x+=g,v.y+=C;var _=cc.v2();v.sub(m.position,_);var S=0;S=c>=0?c:_.mag()/300*.1;var b=cc.moveTo(S,v),k=cc.callFunc(function(){var e=u.getComponent("Cell"),t=e.column,i=e.row,n=u.parent,a=cc.v2(u.x,u.y);u.group;o.instance.deSpawnCell(u),m.parent=n,m.position=a,m.group=u.group,(e=m.getComponent("Cell")).init(r,1),s.instance.setCell(t,i,m),l&&l()},this),y=cc.sequence(b,k);m.runAction(y)}}else l&&l()},spawnFlashSkill:function(e,t,i,o,s,a){if(e){var c=e.getComponent("Cell"),l=(c.column,c.row,new cc.Node(""));l.scale=.6;var r=l.addComponent("cc.Sprite"),h=n.UISpriteAtlas.getSpriteFrame("flash");r.spriteFrame=h,l.parent=t,l.position=i,l.group=o;var u=e.position,p=Math.abs(e.width-l.width),d=Math.abs(e.height-l.height);u.x+=p,u.y+=d;var f=cc.v2();u.sub(l.position,f);var m=0;m=s>=0?s:f.mag()/300*.1;var v=cc.moveTo(m,u),g=cc.callFunc(function(){var t=e.getComponent("Cell").cellNode;t&&(l.parent=t,l.position=cc.v2(t.width/2,t.height/2)),a&&a()},this),C=cc.sequence(v,g);l.runAction(C)}else a&&a()}}),cc._RF.pop()},{Board:"Board",ProcessBoardCell:"ProcessBoardCell",Utils:"Utils"}],ShowFloatWord:[function(e,t,i){"use strict";cc._RF.push(t,"8b994jN6fBCPIXM+hcNY/40","ShowFloatWord");var o=cc.Class({extends:cc.Component,properties:{},onLoad:function(){o.instance=this},statics:{instance:null},start:function(){},showlines:function(e){var t=null;e>=10&&e<=14?t="good job":e>=15&&e<=19?t="Fantastic!":e>=20&&(t="Fruit Buster!"),null!==t&&this.loadLineWord(t)},loadLineWord:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(i,o){var n=o.getSpriteFrame(e),s=new cc.Node("");s.parent=t,s.y-=300,s.group="UI",s.addComponent("cc.Sprite").spriteFrame=n,s.scale=0;var a=cc.scaleTo(.3,1.2).easing(cc.easeOut(3)),c=cc.moveBy(.3,cc.v2(0,50)),l=cc.spawn(a,c),r=cc.moveBy(1,cc.v2(0,200)),h=cc.sequence(l,r,cc.removeSelf());s.runAction(h)})}});cc._RF.pop()},{}],SideCell:[function(e,t,i){"use strict";cc._RF.push(t,"8f6dbqpSntDvKqYs1pHvcDL","SideCell");e("JsonData"),e("EnumDefine").CellType,e("EnumDefine").CellBlockType,e("ProcessBoardCell"),e("Utils");var o=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.row=0,this.column=0,this.blockBuffer=null},init:function(e){var t=this;cc.loader.loadRes("prefab/cell/blockSide",function(i,o){i&&cc.error(i);var n=cc.instantiate(o);n.parent=t.node,n.position=cc.v2(),t.blockBuffer=n.getComponent("BlockSide"),t.blockBuffer.init(e)})},IsBlock:function(){return this.sideTNum()>0||this.sideBNum()>0},sideLNum:function(){return this.blockBuffer?this.blockBuffer._data.sideLNum:0},sideRNum:function(){return this.blockBuffer?this.blockBuffer._data.sideRNum:0},sideTNum:function(){return this.blockBuffer?this.blockBuffer._data.sideTNum:0},sideBNum:function(){return this.blockBuffer?this.blockBuffer._data.sideBNum:0},hurt:function(e){this.blockBuffer&&(this.blockBuffer.hurt(e),this.blockBuffer.IsSideAllRemoved()&&(this.blockBuffer.node.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf())),this.blockBuffer=null))}});t.exports=o,cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",ProcessBoardCell:"ProcessBoardCell",Utils:"Utils"}],SidePropSkill:[function(e,t,i){"use strict";cc._RF.push(t,"72174qhFiVHM4py+ELbQI0i","SidePropSkill");e("EnumDefine").Direction,e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.board=this.node.getComponent("Board"),this.removeCells=this.node.getComponent("RemoveCells"),this.processBoardCell=this.node.getComponent("ProcessBoardCell"),this.propcnt=0},start:function(){},flashSkill:function(e){if(e){var t=this.processBoardCell.randomGetNormalCells(15),i=t.indexOf(e);i>=0&&t.splice(i,1),this.propcnt+=1,this.board.removeCell(e),this.run(t)}},run:function(e){var t=this,i=cc.callFunc(function(){t.propcnt-=1},this),o=cc.callFunc(function(){0==t.propcnt&&t.board.removeCellsDone()},this),n=[];this.RemoveCells.removeCells(e,n,o,i,.05),n.length>=2?this.node.runAction(cc.sequence(n)):(n.push(null),this.node.runAction(cc.sequence(n)))}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],Singleton:[function(e,t,i){"use strict";cc._RF.push(t,"97bbbACL+hIUI2CEtuxI3ba","Singleton");var o=cc.Class({extends:cc.Component,properties:{monsterIcon:{default:null,type:cc.SpriteFrame}},statics:{instance:null},onLoad:function(){o.instance=this}});cc._RF.pop()},{}],Sort:[function(e,t,i){"use strict";cc._RF.push(t,"f6f34bptcxL/o8fpoGPaK9y","Sort"),t.exports={shuffle:function(e){for(var t=e.length,i=0;i<t-1;i++){var o=parseInt(Math.random()*(t-i)),n=e[o];e[o]=e[t-i-1],e[t-i-1]=n}return e}},cc._RF.pop()},{}],SpawnActor:[function(e,t,i){"use strict";cc._RF.push(t,"d6620CjXSJKOpLbednh75DK","SpawnActor");var o=e("RPGManager"),n=e("Game"),s=e("Utils");cc.Class({extends:cc.Component,properties:{actor1NodePos:cc.Node,actor2NodePos:cc.Node,actor3NodePos:cc.Node,actor4NodePos:cc.Node,actor5NodePos:cc.Node},ctor:function(){this.actorCenterPos=cc.v2(),this.actorPoslist=[]},onLoad:function(){this.actor1NodePos.active=!1,this.actor2NodePos.active=!1,this.actor3NodePos.active=!1,this.actor4NodePos.active=!1,this.actor5NodePos.active=!1,this.actorPoslist.push(this.actor1NodePos.getPosition()),this.actorPoslist.push(this.actor2NodePos.getPosition()),this.actorPoslist.push(this.actor3NodePos.getPosition()),this.actorPoslist.push(this.actor4NodePos.getPosition()),this.actorPoslist.push(this.actor5NodePos.getPosition())},spawnActors:function(){for(var e=[2,0,3,1,4],t=n.instance.roleDatas,i=0;i<t.length;i++){var o=t[i],s=e[o.roletype];this.spawnActor(o,s)}},spawnActor:function(e,t){var i="spine/actor/",n=s.getActorSpineName(e.roletype,e.level);i+=n;var a=this;cc.loader.loadRes(i,sp.SkeletonData,function(i,s){i&&cc.error(i);var c=new cc.Node;c.zIndex=t,c.setAnchorPoint(.5,0);c.setScale(.7),c.addComponent("Actor"),c.addComponent("ActorSkill"),c.addComponent("ActorShoot");var l=c.getComponent("Actor");c.parent=a.node;var r=c.addComponent("sp.Skeleton");r.skeletonData=s,r.setAnimation(0,"idle",!0);var h=a.actorPoslist[e.roletype];c.setPosition(h),l.skeletonName=n,l.setData(e),l.setAntiAliasTexParameters(),o.instance.addActor(c)})},getActorCenterPos:function(e){for(var t=0,i=0,o=n.instance.roleDatas,s=0;s<o.length;s++){var a=o[s],c=this.actorPoslist[a.roletype];t+=c.x,i+=c.y}t/=o.length,i/=o.length,e.x=t,e.y=i},start:function(){}}),cc._RF.pop()},{Game:"Game",RPGManager:"RPGManager",Utils:"Utils"}],SpawnCells:[function(e,t,i){"use strict";cc._RF.push(t,"141a0b625xHs78TURiV9AXz","SpawnCells");var o=e("Utils").NUMROWS,n=e("Utils").NUMCOLUMNS,s=e("EnumDefine").CellType,a=e("JsonData"),c=e("PoolMng"),l=e("Utils"),r=e("Utils").TITLE_WIDTH,h=e("Utils").TITLE_HEIGHT,u=e("EnumDefine").FightKind;cc.Class({extends:cc.Component,properties:{skillCircleSprite:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.ParseCellTitles=this.node.getComponent("ParseCellTitles"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.Board=this.node.getComponent("Board")},start:function(){},createBoardCell:function(e,t){var i=l.levelData,o=(i.StageID,i.StageType);this.createSkillCircles(),this.createCells(e,o,t)},createSkillCircles:function(){for(var e=0;e<o;e++)for(var t=0;t<n;t++){var i=new cc.Node(""),s=i.addComponent("cc.Sprite");s.spriteFrame=this.skillCircleSprite,i.parent=this.node,s.sizeMode=cc.Sprite.SizeMode.CUSTOM,s.type=cc.Sprite.Type.SLICED;var a=this.node.width/8,c=this.node.height/8;i.setContentSize(a+1,c+1);var l=a/2+t*a-this.node.width/2,r=-this.node.height/2+c/2+e*c;i.setPosition(l,r),i.zIndex=1,i.active=!1,this.ProcessBoardCell.setSkillCircle(t,e,i)}},createSideCell:function(e,t,i,o){var n=e.sideLNum,s=e.sideRNum,a=e.sideTNum,c=e.sideBNum,l=null;if(n>0||s>0||a>0||c>0){(l=new cc.Node("")).parent=this.node,l.scale=o;var r=this.node.width/8,h=this.node.height/8;l.setContentSize(r,h);var u=r/2+t*r-this.node.width/2,p=-this.node.height/2+h/2+i*h;l.setPosition(u,p),l.zIndex=10;var d=l.addComponent("SideCell");d.row=i,d.column=t,d.init(e)}return l},createCells:function(e,t,i){switch(t){case u.BossFight:case u.NormalFight:if(null!==l.LevelEditorBoardData){var o=l.LevelEditorBoardData.listCell,n=l.LevelEditorBoardData.listSideCell,s=l.LevelEditorBoardData.listCover;this.parselevelFromCreatorEditor(o,n,s),i&&i()}else{var c=this;a.instance.loadLevelTitleData(e,function(e){c.parselevelFromXlS(e),i&&i()})}(function(e,t,i){}).bind(this),function(){}.bind(this)}},parselevelFromXlS:function(e){},parselevelFromCreatorEditor:function(e,t,i){for(var s=0;s<o;s++)for(var a=0;a<n;a++)this.spawnCell(a,s,e,i);for(var c=0;c<o;c++)for(var l=0;l<n;l++){for(var r=null,h=0;h<t.length;h++){var u=t[h];if(u&&u.column===l&&u.row===c){r=u;break}}if(r){var p=this.createSideCell(r,l,c,.8);p&&this.ProcessBoardCell.setSideCell(l,c,p)}}},spawnCell:function(e,t,i,o){for(var n=this.spinCellType(),s=null,a=1,c=null,l=0;l<i.length;l++){var r=i[l];if(t===r.row&&e===r.column){n=r.ID,a=r.lv,c=r;break}}for(var h=0;h<o.length;h++){var u=o[h];if(u.row===t&&u.column===e){s=u;break}}var p=function(i,o){if(i){var a=i.getComponent("Cell");this.ProcessBoardCell.setCell(e,t,i),a.init(n,o),a.setDataCell(c),s&&a.addBlockCover(s),a.moveDown(.5)}}.bind(this);this.createOneCell(n,e,t,a,p)},spinCellType:function(){var e=l.LevelEditorLevelGoles.CellsSpinVal,t=[],i=[];for(var o in e){var n=e[o];t.push(n),i.push(o)}var s=i[l.computeSpin(t)];return parseInt(s)},createOneCell:function(e,t,i,o,n){switch(e){case s.One_Horinal:case s.One_Vertical:case s.One_XCross:case s.One_PrismBomb:case s.One_Brush:case s.Two_Horinal:case s.Two_Vertical:case s.Two_XCross:case s.Two_PrismBomb:case s.Two_Brush:case s.Three_Horinal:case s.Three_Vertical:case s.Three_XCross:case s.Three_PrismBomb:case s.Three_Brush:case s.Four_Horinal:case s.Four_Vertical:case s.Four_XCross:case s.Four_PrismBomb:case s.Four_Brush:case s.Five_Horinal:case s.Five_Vertical:case s.Five_XCross:case s.Five_PrismBomb:case s.Five_Brush:case s.Cell1:case s.Cell2:case s.Cell3:case s.Cell4:case s.Cell5:case s.DropBottomBox:case s.Chest:case s.SpinKey:case s.SolidCell:case s.ClearBombProp:var a=l.pointForColumn(t,i);a.x=a.x-this.node.width/2,a.y=a.y-this.node.height/2;var c=this.node,r=this.spawnOneCell(e,t,i,c,a);r.parent=this.node,r.position=a,n(r,o);break;case s.RXCellType:var h=this.spinCellType(),u=l.pointForColumn(t,i);u.x=u.x-this.node.width/2,u.y=u.y-this.node.height/2;var p=this.node,d=this.spawnOneCell(h,t,i,p,u);d.parent=this.node,d.position=u,n(d,o);break;case s.Stakes:var f=null,m=l.UISpriteAtlas;switch(o){case 1:f=m.getSpriteFrame("wood1");break;case 2:f=m.getSpriteFrame("wood2");break;case 3:f=m.getSpriteFrame("wood3")}n(this.createSpriteCell(t,i,e,f),o);break;case s.Weeds:var v=l.UISpriteAtlas,g=null;switch(o){case 1:g=v.getSpriteFrame("weed1");break;case 2:case 3:g=v.getSpriteFrame("weed2")}n(this.createSpriteCell(t,i,e,g),o);break;case s.Fence:var C=null,_=l.UISpriteAtlas;switch(o){case 1:C=_.getSpriteFrame("fence1");break;case 2:C=_.getSpriteFrame("fence2");break;case 3:C=_.getSpriteFrame("fence3")}n(this.createSpriteCell(t,i,e,C),o);break;case s.BlockDiamond:var S=l.UISpriteAtlas.getSpriteFrame("blockdiamond");n(this.createSpriteCell(t,i,e,S),o);break;case s.KeyUp:var b=l.UISpriteAtals.getSpriteFrame("keyup");n(this.createSpriteCell(t,i,e,b),o);break;case s.KeyDown:var k=l.UISpriteAtlas.getSpriteFrame("keydown");n(this.createSpriteCell(t,i,e,k),o);break;case s.KeyLeft:var y=l.UISpriteAtlas.getSpriteFrame("keyleft");n(this.createSpriteCell(t,i,e,y),o);break;case s.KeyRight:var w=l.UISpriteAtlas.getSpriteFrame("keyright");n(this.createSpriteCell(t,i,e,w),o)}},randomSpawnCell:function(e,t){var i=this.spinCellType(),o=c.instance.requestCell(i);if(o){o.getComponent("HurtCell")||o.addComponent("HurtCell"),o.getComponent("Cell")||o.addComponent("Cell"),o.parent=this.node,o.anchorX=.5,o.anchorY=0,o.scale=.8;var n=o.getComponent("Cell"),s=o.getChildByName("cellNode");n.cellNode=s,n.row=t,n.column=e,n.celltype=i,n.cellscale=o.scale,n.idle(!1);n.init(i,1),this.ProcessBoardCell.setCell(e,t,o)}return o},spawnOneCell:function(e,t,i){var o=c.instance.requestCell(e);o.getComponent("HurtCell")||o.addComponent("HurtCell"),o.getComponent("Cell")||o.addComponent("Cell"),o.anchorX=.5,o.anchorY=0,o.scale=.8;var n=o.getComponent("Cell"),s=o.getChildByName("cellNode");return n.cellNode=s,n.row=i,n.column=t,n.celltype=e,n.idle(!1),n.setAntiAliasTexParameters(),n.cellscale=o.scale,o},createSpriteCell:function(e,t,i,o){var n=new cc.Node("");n.anchorX=.5;var s=this.createSprite(o);n.addChild(s),n.addComponent("HurtCell");var a=n.addComponent("Cell");a.row=t,a.column=e,a.celltype=i,a.cellNode=s,n.width=s.width,n.height=s.height,n.parent=this.node,a.cellscale=n.scale;var c=l.pointForColumn(e,t);c.x+=r/2,c.y+=h/2;var u=c.x-this.node.width/2,p=c.y-this.node.height/2;return n.setPosition(u,p),n},createSprite:function(e){var t=new cc.Node(""),i=t.addComponent(cc.Sprite);i.spriteFrame=e,i.sizeMode=cc.Sprite.SizeMode.CUSTOM,i.type=cc.Sprite.Type.SLICED;var o=this.node.width/8,n=this.node.height/8;return t.setContentSize(o,n),t}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",PoolMng:"PoolMng",Utils:"Utils"}],SpawnMonster:[function(e,t,i){"use strict";cc._RF.push(t,"afcdawfyI9Ck6iVqq1Ij18m","SpawnMonster");var o=e("RPGManager");cc.Class(function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({extends:cc.Component,properties:{monster1NodePos:cc.Node,monster2NodePos:cc.Node,monster3NodePos:cc.Node,monster4NodePos:cc.Node},onLoad:function(){this.monster1NodePos.active=!1,this.monster2NodePos.active=!1,this.monster3NodePos.active=!1,this.monster4NodePos.active=!1;var e=cc.v2(0,0);this.node.getComponent("SpawnActor").getActorCenterPos(e);var t=this.monster1NodePos.position,i=Math.abs(t.x-e.x);this._disx=i,this.monsterlist=[];var o=[];o.push(0),o.push(180),o.push(360),o.push(540),this.disxlist=o,this.scalelist=[1,.5,.4,.3,.2,.2]},start:function(){},removeMonster:function(e){var t=this._monserlist.indexOf(e);t>=0&&this._monserlist.shift(t,1)},spawnOneWave:function(e,t,i){i&&void 0!==i||(i=0);var o=cc.v2();o.x=t.x,o.y=t.y,o.x+=i;for(var n=0;n<e.length;n++){var s=e[n],a=this.scalelist[n],c=o.x+this._disx+this.disxlist[n],l=o.y,r=cc.v2(c,l);this.spawnMonster(s,r,a,n)}},spawnMonster:function(e,t,i,n){var s=this,a="prefab/monster/"+e.JsonData.AnimeRes;cc.loader.loadRes(a,function(a,c){var l=cc.instantiate(c);l.setAnchorPoint(.5,0),l.scale=i,l.addComponent("Monster"),l.addComponent("MonsterSkill"),l.addComponent("MonsterShield"),l.parent=s.node;var r=l.getComponent("Monster");r.init(e),r.idle(),l.setPosition(t),o.instance.addMonster(l,n)})}},"start",function(){})),cc._RF.pop()},{RPGManager:"RPGManager"}],SpinChest:[function(e,t,i){"use strict";cc._RF.push(t,"7776eLUnDRCb4Ekhw0+YKub","SpinChest");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("EnumDefine"),s=e("Utils"),a=s.ProduceType,c=e("LocalStorage"),l=(e("BaseUI"),e("JsonData"),n.SpinType),r=n.EnterKind,h=cc.Enum({Normal:0,High:1});cc.Class({extends:cc.Component,properties:{cameraBox:cc.Node,keyTemplate:cc.Node,UIBaseNode:cc.Node,paynode:cc.Node,freenode:cc.Node,bk1:cc.Node,freelabel:cc.Label,liveKey:cc.Node,mask:cc.Node,box:cc.Node,boxTemplate:cc.Node,rewardCoinSprite:cc.SpriteFrame,rewardDiamondSprite:cc.SpriteFrame,BlevelPetSprite:cc.SpriteFrame,AlevelPetSprite:cc.SpriteFrame,keySprite:cc.SpriteFrame,doubleSpinX:cc.SpriteFrame},onLoad:function(){this.registerTouch(),this.camera=this.cameraBox.getComponent(cc.Camera),this.initZoomRatio=this.camera.zoomRatio,this.ratioZoomIn=this.camera.zoomRatio+.05,this.ratioZoomOut=this.camera.zoomRatio,this._zoomIn=!1,this._zoomOut=!1,this._zoomCallback=null,this._zoomStep=.1,this._move=!1,this._needSpinDiamond=30;var e=function(e){this.init(e)}.bind(this);this.loadSpinData(e),this.uibase=this.UIBaseNode.getComponent("UIBase");var t=c.instance.getFreeSpinVal();this.show(t),this.mask.active=!1,this.openChestCnt=0,this.openedlist={}},onDisable:function(){c.instance.setFreeSpinVal(this.freenum)},start:function(){this.zoomIn(null)},scalePayNode:function(){this.paynode.stopAllActions(),this.paynode.scale=1;var e=cc.scaleTo(.25,1.1,1.1).easing(cc.easeOut(3)),t=cc.scaleTo(.25,1,1).easing(cc.easeOut(3)),i=cc.sequence(e,t);this.paynode.runAction(i)},freeKeyAnimation:function(){this.liveKey.scale=0;var e=cc.scaleTo(.4,1.1,1.1).easing(cc.easeOut(3)),t=cc.scaleTo(.4,1,1).easing(cc.easeOut(3)),i=cc.sequence(e,t);this.liveKey.runAction(i)},show:function(e){if(this.freenum=e,this.freenum>0)this.paynode.active=!1,this.freenode.active=!0,this.freelabel.string=this.freenum+"";else{this.paynode.active=!0;var t=cc.scaleTo(.25,1.1,1.1).easing(cc.easeOut(3)),i=cc.scaleTo(.25,1,1).easing(cc.easeOut(3)),o=cc.sequence(t,i),n=cc.repeatForever(o);this.bk1.scale=1,this.bk1.stopAllActions(),this.bk1.runAction(n),this.freenode.active=!1}},updateFreeNum:function(e){this.freenum+=e,this.show(this.freenum)},onBtnDiamondClicked:function(e){if(this.uibase.getDiamondNum()>this._needSpinDiamond)return this.uibase.updateDiamond(-this._needSpinDiamond),this.updateFreeNum(3),void this.freeKeyAnimation()},init:function(e){this.spinData=e;this.nums=[300,500,1e3,20,1,1,2,1],this.spinOdds=[25,15,10,15,10,5,10,10],this.spinTypes=[l.Coin,l.Coin,l.Coin,l.Diamond,l.PetB,l.PetA,l.SpinKey,l.DoubleSpin];var t=[this.rewardCoinSprite,this.rewardCoinSprite,this.rewardCoinSprite,this.rewardDiamondSprite,this.BlevelPetSprite,this.AlevelPetSprite,this.keySprite,this.doubleSpinX];this.rewardSpriteFrames=t;this.spScales=[.8,.8,.8,1.7,.8,.8,.8,.8]},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t)},e),e.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.touchMove(t)},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd(t)},e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.touchEnd(t)},e)},touchBegin:function(e){for(var t=this,i=e.getTouches()[0].getLocation(),n=this.box.children,s=function(e){var o=n[e],s=o.parent.convertToNodeSpaceAR(i);if(o.getBoundingBox().contains(s)){if(t.freenum<=0)return t.scalePayNode(),{v:void 0};if(t.openedlist[o.name])return{v:void 0};t.openedlist[o.name]=!0;var a=cc.callFunc(function(){t.openChest(o)},t),c=cc.callFunc(function(){var e=o.getChildByName("BigLock");if(e){var t=cc.moveBy(.5,cc.v2(0,-50));e.runAction(cc.sequence(t,a,cc.removeSelf()))}}),l=cc.instantiate(t.keyTemplate);l.zIndex=100,l.scale=1.2,l.group="UI",l.active=!0,l.parent=t.node,l.position=t.freenode.position;var r=cc.moveTo(.5,cc.v2(o.x-o.width/2,o.y+.5*o.height)).easing(cc.easeOut(3));return l.runAction(cc.sequence(r,c,cc.removeSelf())),t.updateFreeNum(-1),{v:void 0}}},a=0;a<n.length;a++){var c=s(a);if("object"===(void 0===c?"undefined":o(c)))return c.v}},touchMove:function(e){},touchEnd:function(e){},openChest:function(e){var t=e.getComponent(cc.Animation);if(t){var i=e.parent.convertToWorldSpaceAR(e.position);i.y+=.5*e.height,i=this.UIBaseNode.convertToNodeSpaceAR(i),t.play("openChest");var o=function(){this.playReWardAudio(),this.showflashEffect(e,cc.v2(0,0)),this.openReward(i)}.bind(this);t.on("finished",this.shitcallback,this),this.openchestAnimationFinishedCallback=o;var n=cc.callFunc(function(){},this);e.runAction(cc.sequence(cc.delayTime(1),n))}},shitcallback:function(){this.openchestAnimationFinishedCallback&&this.openchestAnimationFinishedCallback()},showflashEffect:function(e,t){cc.loader.loadRes("prefab/particle/killDustParticle",function(i,o){var n=cc.instantiate(o);n&&(n.scale=1,n.parent=e,n.position=t,n.runAction(cc.sequence(cc.delayTime(2),cc.removeSelf())))});cc.loader.loadRes("prefab/flashEffect",function(i,o){var n=cc.instantiate(o);if(n){n.scale=.5,n.parent=e,n.position=t;var s=n.getComponent(cc.Animation);s&&s.play(),n.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf()))}})},playReWardAudio:function(){this.audioReWard&&this.audioReWard.play()},zoomIn:function(e){if(this.camera){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=.001)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomIn=!0}else e&&e()},zoomOut:function(e){if(this.camera){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=.001)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomOut=!0}else e&&e()},zoomUpdate:function(e){if(this._zoomIn&&this.camera){if(Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=.001)return this.camera.zoomRatio=this.ratioZoomIn,this._zoomIn=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomIn,this._zoomStep)}if(this._zoomOut&&this.camera){if(Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=.001)return this.camera.zoomRatio=this.ratioZoomOut,this._zoomOut=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomOut,this._zoomStep)}},resetZoom:function(){this._zoomIn=!1,this._zoomOut=!1},update:function(e){this.zoomUpdate(e)},loadSpinData:function(e){cc.loader.loadRes("json/Spin",function(t,i){var o=i.json;e&&e(o[0])})},computeSpin:function(){for(var e=[],t=0;t<this.spinOdds.length;t++)e[t]=this.spinOdds[t];return s.computeSpin(e)},getSpinType:function(e){return e<0||e>=this.spinTypes.length?l.UnKnown:this.spinTypes[e]},openReward:function(e){var t=this.computeSpin(this.spinData);this.spinIndex=t;var i=this.nums[t],o=this.getSpinType(t),n=this.rewardSpriteFrames[t],s=this.spScales[t];this.showSpinReward(i,o,n,s,e)},showSpinReward:function(e,t,i,o,n){var s="";switch(this._spinNum=e,this._spintype=t,t){case l.Coin:s=e<=300?"prefab/spin/SpinRewardCoin1":e>300&&e<=500?"prefab/spin/SpinRewardCoin2":"prefab/spin/SpinRewardCoinFull",this.spawnReWard(t,e,n,s);break;case l.Diamond:s="prefab/spin/SpinRewardDiamond1",this.spawnReWard(t,e,n,s);break;case l.PetA:s="prefab/spin/SpinPetExtraction1",this.spawnPetExtraction(t,h.Normal,e,n,s);break;case l.PetB:s="prefab/spin/SpinPetExtraction1",this.spawnPetExtraction(t,h.High,e,n,s);break;case l.SpinKey:s="prefab/spin/SpinRewardKey",this.spawnReWard(t,e,n,s);break;case l.DoubleSpin:s="prefab/spin/SpinRewardDoubleX",this.spawnReWard(t,e,n,s)}},spawnPetExtraction:function(e,t,i,o,n){var s=this,a=cc.director.getScene()._children[0];cc.loader.loadRes(n,function(e,i){e&&cc.error(e);var n=cc.instantiate(i);n.zIndex=2,n.group="UI",n.scale=.2,n.position=o,n.parent=a;var c=cc.scaleTo(1,1).easing(cc.easeOut(3)),l=cc.moveBy(1,cc.v2(0,20)),r=cc.spawn(c,l),h=[cc.v2(o.x,o.y),cc.v2(0,0)],u=cc.cardinalSplineTo(1,h,0),p=cc.callFunc(function(){s.spinPetRewardDone(n,t)},s),d=cc.sequence(r,u,p);n.runAction(d)})},spinPetRewardDone:function(e,t){var i=function(){this.openChestCnt+=1,this.openChestCnt>=16&&this.spawnNewBox()}.bind(this),o=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/spin/SpinPetExtraction2",function(n,s){var a=cc.instantiate(s);a.group="UI",a.zIndex=1,a.parent=o,a.position=cc.v2(0,0),a.active=!0;var c=a.getComponent("SpinPetExtraction");c&&c.spin(e,t,i)})},spawnReWard:function(e,t,i,o){var n=this,s=cc.director.getScene()._children[0];cc.loader.loadRes(o,function(o,a){o&&cc.error(o);var c=cc.instantiate(a);c.group="UI",c.position=i,c.parent=s,c.getChildByName("num").getComponent("cc.Label").string=t+"",c.scale=0;var l=cc.scaleTo(1,1).easing(cc.easeOut(3)),r=cc.moveBy(1,cc.v2(0,15)),h=cc.spawn(l,r),u=cc.callFunc(function(){n.spinRewardDone(c,e,t,i)},n),p=cc.sequence(h,u);c.runAction(p)})},spinRewardDone:function(e,t,i,o){var n=function(){this.openChestCnt+=1,this.openChestCnt>=16&&this.spawnNewBox()}.bind(this);switch(t){case l.Coin:e.removeFromParent(),this.coinReward(i,o,n);break;case l.Diamond:e.removeFromParent(),this.diamondReward(i,o,n);break;case l.SpinKey:this.keyReward(e,i,n);break;case l.DoubleSpin:e.removeFromParent(),this.doubleSpinReward(i,n)}},coinReward:function(e,t,i){if(this.uibase){cc.director.getScene();var o=this.UIBaseNode,n=t,c=this.uibase.coinlabel,l=c.node.parent.convertToWorldSpaceAR(c.node.position);l=o.convertToNodeSpaceAR(l);var r=e/10,h=function(){this.uibase.updateCoin(r),this.uibase.playCoin()}.bind(this),u=s.produceRandomNodeLineMove(a.ButtonCoin,10,n,l,o,h),p=cc.callFunc(function(){i&&i()},this);this.node.runAction(cc.sequence(cc.delayTime(u),p))}},diamondReward:function(e,t,i){if(this.uibase){cc.director.getScene();var o=this.UIBaseNode,n=t,c=this.uibase.diamondlabel,l=c.node.parent.convertToWorldSpaceAR(c.node.position);l=o.convertToNodeSpaceAR(l);var r=e/10,h=function(){this.uibase.updateDiamond(r),this.uibase.playCoin()}.bind(this),u=s.produceRandomNodeLineMove(a.Diamond,10,n,l,o,h),p=cc.callFunc(function(){i&&i()},this);this.node.runAction(cc.sequence(cc.delayTime(u),p))}},keyReward:function(e,t,i){var o=e.parent,n=cc.v2(e.x,e.y),c=this.freenode.getChildByName("key"),l=c.scale,r=c.parent.convertToWorldSpaceAR(c.position);r=o.convertToNodeSpaceAR(r);var h=function(){c.stopAllActions(),c.scale=l;var e=cc.scaleTo(.25,1.3*l).easing(cc.easeOut(3)),i=cc.scaleTo(.25,l).easing(cc.easeOut(3)),o=cc.sequence(e,i);c.runAction(o),this.updateFreeNum(t)}.bind(this),u=s.produceRandomNodeLineMove(a.SpinKey,1,n,r,o,h),p=cc.callFunc(function(){i&&i()},this);this.node.runAction(cc.sequence(cc.delayTime(u),p)),e.removeFromParent()},doubleSpinReward:function(e,t){t&&t()},spawnNewBox:function(){var e=this;this.mask.active=!0;var t=cc.v2(this.box.x,this.box.y),i=cc.moveBy(.5,cc.v2(650,0)),o=cc.callFunc(function(){var i=cc.instantiate(e.boxTemplate);i.active=!0,i.parent=e.box.parent,i.position=cc.v2(-650,0);var o=cc.moveTo(.5,t),n=cc.callFunc(function(){e.box.destroy(),e.box=i,e.mask.active=!1,e.openChestCnt=0,e.openedlist={}},e);i.runAction(cc.sequence(o,n))},this);this.box.runAction(cc.sequence(i,o))},onBtnClose:function(e){var t=r.Main,i=cc.find("Canvas").getComponent("CanvasInit");switch(i&&(t=i.enterCode),t){case r.Main:cc.director.loadScene("Main");break;case r.Map:cc.director.loadScene("Map")}}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],SpinPetExtraction:[function(e,t,i){"use strict";cc._RF.push(t,"a87092rCRlLEaduJXHEludW","SpinPetExtraction");var o=e("JsonData"),n=e("LocalStorage"),s=e("EnumDefine").ActorType,a=e("Utils"),c=e("BaseUI");cc.Class({extends:c,properties:{glare:cc.Node,extractionBk:cc.Node,midBk:cc.Node,Mask:cc.Node,audioSpin:{type:cc.AudioSource,default:null}},ctor:function(){this._callback=null,this.spinLevel=0,this.spinID=-1},onLoad:function(){this.isSpin=!0,this.scaleShow(this.node,null)},spin:function(e,t,i){var o=this;this.grassNode=e,this.grass1=this.grassNode.getChildByName("grass1"),this.grass2=this.grassNode.getChildByName("grass2"),this.grass3=this.grassNode.getChildByName("grass3"),this.glare.active=!1,this.grassNode.getChildByName("glare").destroy(),this.spinLevel=t,this._callback=i;var n=cc.callFunc(function(){o.grassShakes()},this);this.midBk.runAction(cc.sequence(n,null))},start:function(){},onBtnTouch:function(){if(!this.isSpin){var e=function(){this._callback&&this._callback(this.spinID),this.node.removeFromParent(),this.grassNode.removeFromParent()}.bind(this);this.scaleShow(this.node,e)}},grassShakes:function(){var e=this,t=cc.callFunc(function(){e.grassShake(e.grass1)},this),i=cc.callFunc(function(){e.grassShake(e.grass2)},this),o=cc.callFunc(function(){e.grassShake(e.grass3)},this),n=cc.callFunc(function(){var t=cc.moveBy(.2,cc.v2(.6*-e.grass1.width,0)).easing(cc.easeOut(3));e.grass1.runAction(t),t=cc.moveBy(.2,cc.v2(.6*e.grass1.width,0)).easing(cc.easeOut(3)),e.grass2.runAction(t),t=cc.moveBy(.2,cc.v2(.6*-e.grass1.width,0)).easing(cc.easeOut(3)),e.grass3.runAction(t)},this),s=cc.callFunc(function(){e.spinPet(e.spinLevel)},this),a=cc.callFunc(function(){},this),c=cc.sequence(t,cc.delayTime(.2),i,cc.delayTime(.2),o,cc.delayTime(.2),n,cc.delayTime(.2),s,cc.delayTime(.2),a);this.node.runAction(c)},grassShake:function(e){var t=cc.scaleTo(.2,1.2,1.2).easing(cc.easeBounceInOut()),i=cc.scaleTo(.2,1,1).easing(cc.easeBounceInOut()),o=cc.sequence(t,i),n=cc.jumpBy(.2,cc.v2(0,0),20,1).easing(cc.easeOut(3)),s=cc.jumpBy(.2,cc.v2(0,0),-20,1).easing(cc.easeOut(3)),a=cc.jumpBy(.2,cc.v2(0,0),16,1).easing(cc.easeOut(3)),c=cc.jumpBy(.2,cc.v2(0,0),-16,1).easing(cc.easeOut(3)),l=cc.sequence(n,s,a,c),r=cc.spawn(o,l);e.runAction(r)},spinPet:function(e){var t="A";if(0==e){var i=a.computeSpin([0,20,80]);t=0==i?"S":1==i?"A":"B"}else if(1==e){var n=a.computeSpin([40,60,0]);t=0==n?"S":1==n?"A":"B"}var s=[],c=this;o.instance.loadPetDetailDatas(function(e){for(var i in e)e[i].Star==t&&s.push(e[i]);if(s.length>0){var o=a.randomRangeInt(0,s.length),n=s[o].ID;c.petBorn(n)}})},petBorn:function(e){this.audioSpin.play(),this.writeData(e),this.spinID=e;var t="spine/pet/";t+=a.getPetFileName(e-1);var i=this,o=i.glare;cc.loader.loadRes(t,sp.SkeletonData,function(e,t){e&&cc.error(e),o.active=!0;var n=cc.repeatForever(cc.rotateBy(3,360));o.runAction(n);var s=new cc.Node;s.group="UI",s.zIndex=10;var c=s.addComponent("sp.Skeleton");c.skeletonData=t,s.parent=i.node,s.position=o.position,s.scale=2,(c=s.getComponent("sp.Skeleton")).setAnimation(0,"idle",!0);var l=[cc.v2(-a.randomRange(20,30),a.randomRange(100,200)/8),cc.v2(-a.randomRange(20,30),a.randomRange(100,200)/8),cc.v2(0,-a.randomRange(i.extractionBk.height/2*.4,i.extractionBk.height/2*.6)/4)],r=cc.bezierBy(.2,l),h=cc.callFunc(function(){var e=cc.jumpBy(.5,cc.v2(0,0),10,1).easing(cc.easeOut(2)),t=cc.jumpBy(.5,cc.v2(0,0),-10,1).easing(cc.easeOut(2));s.runAction(cc.sequence(e,t))}),u=cc.callFunc(function(){i.isSpin=!1},i);s.runAction(cc.sequence(r,h,cc.delayTime(.4),u))})},writeData:function(e){var t=n.instance.getPetData(e);t?t.num+=1:((t={}).level=1,t.ID=e,t.num=1,t.star="A",t.attack=0,this.writeRolePetSkill(e)),o.instance.loadPetDatas(function(i){for(var o=0;o<i.length;o++){var s=i[o];if(s.ID==e&&s.UpgradeNumber>t.num){t.level=s.Level-2;break}}for(var a=0;a<i.length;a++){var c=i[a];c.ID==t.ID&&c.Level==t.level&&(t.attack=c.Attack)}n.instance.setPetData(t)})},writeRolePetSkill:function(e){var t=s.UnKnown;switch(e){case 1:case 2:case 3:t=s.Actor1;break;case 4:case 5:case 6:t=s.Actor2;break;case 7:case 8:case 9:t=s.Actor3;break;case 10:case 11:case 12:t=s.Actor4;break;case 13:case 14:case 15:t=s.Actor5}for(var i="",o=n.instance.getPetSkill(t),a=0;a<o.length;a++)i+=o[a],i+=",";i+=e+"",n.instance.setPetSkill(t,i)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],SpinReward:[function(e,t,i){"use strict";cc._RF.push(t,"66d08g0H5pNIr7W+KSc6/R3","SpinReward");e("EnumDefine").SpinType;cc.Class({extends:cc.Component,properties:{spinSp:cc.Node,numlabel:cc.Label},onLoad:function(){},show:function(e,t,i){var o=this,n=this.node.scale;this.node.scale=0,this.spinSp.spriteFrame=t,this.spinSp.node.scale=i,this.numlabel.string=e+"",this.glare.active=!0;var s=cc.callFunc(function(){var e=cc.repeatForever(cc.rotateBy(3,360));o.glare.runAction(e)},this),a=cc.scaleTo(.3,n,n).easing(cc.easeOut(3));this.node.runAction(cc.sequence(a,s))},start:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine"}],Spin:[function(e,t,i){"use strict";cc._RF.push(t,"fcbccsFuk5ATI5f575V9MTz","Spin");var o=e("EnumDefine"),n=e("Utils"),s=n.ProduceType,a=e("LocalStorage"),c=e("BaseUI"),l=(e("JsonData"),o.SpinType),r=o.EnterKind,h=cc.Enum({Normal:0,High:1});cc.Class({extends:c,properties:{lotterys:{default:[],type:cc.Node},midbk:cc.Node,turnNode:cc.Node,colorBk:cc.Node,buttonCoinSpriteFrame:cc.SpriteFrame,buttonDiamondSpriteFrame:cc.SpriteFrame,turnBtn:cc.Button,UIBaseNode:cc.Node,freeSpinNumlabel:cc.Label,free:cc.Node,notfree:cc.Node,rewardCoinSprite:cc.SpriteFrame,rewardDiamondSprite:cc.SpriteFrame,BlevelPetSprite:cc.SpriteFrame,AlevelPetSprite:cc.SpriteFrame,keySprite:cc.SpriteFrame,doubleSpinX:cc.SpriteFrame},onLoad:function(){var e=function(e){this.init(e)}.bind(this);this.loadSpinData(e),this.mAllPrizeNum=8,this.mDegree=360/this.mAllPrizeNum,this.spinData=null,this.nums=[],this.colorBk.active=!1,this.registerTouch(),this._turnFinish=!1,this._rewardNode=null,this.uibase=this.UIBaseNode.getComponent("UIBase"),this.spinData=null,this._spinNum=0,this._spintype=l.UnKnown,this.freenum=0,this._needSpinDiamond=10,this.scaleShow(this.midbk);this.show(0)},onDisable:function(){a.instance.setFreeSpinVal(this.freenum)},show:function(e){this.freenum=e,this.freenum>0?(this.free.active=!0,this.notfree.active=!1,this.freeSpinNumlabel.string=this.freenum+""):(this.notfree.active=!0,this.free.active=!1)},canTurn:function(){return!(this.uibase.getDiamondNum()<this._needSpinDiamond)},updateFreeNum:function(e){this.freenum+=e,this.freeSpinNumlabel.string=this.freenum+"",this.freenum>0?(this.free.active=!0,this.notfree.active=!1):(this.notfree.active=!0,this.free.active=!1)},turnBtnFunc:function(e){if(this.freenum>0)this.updateFreeNum(-1),this.turn(),this.turnBtn.interactable=!1,this.turnBtn.node.color=cc.Color.GRAY;else{if(!this.canTurn())return;this.uibase.updateDiamond(-this._needSpinDiamond),this.turn(),this.turnBtn.interactable=!1,this.turnBtn.node.color=cc.Color.GRAY}},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd(t)},e)},init:function(e){this.spinData=e;var t=[300,500,1e3,20,1,1,2,1];this.nums=t,this.spinOdds=[25,15,10,15,10,5,10,10],this.spinTypes=[l.Coin,l.Coin,l.Coin,l.Diamond,l.PetB,l.PetA,l.SpinKey,l.DoubleSpin];var i=[this.rewardCoinSprite,this.rewardCoinSprite,this.rewardCoinSprite,this.rewardDiamondSprite,this.BlevelPetSprite,this.AlevelPetSprite,this.keySprite,this.doubleSpinX];this.rewardSpriteFrames=i;var o=[.8,.8,.8,1.7,.8,.8,.8,.8];this.spScales=o;for(var n=0;n<this.lotterys.length;n++){var s=this.lotterys[n],a=s.getChildByName("sp");a.scale=o[n],a.getComponent(cc.Sprite).spriteFrame=i[n],s.getChildByName("num").getComponent("cc.Label").string=t[n]}},touchEnd:function(e){if(this._turnFinish&&this._rewardNode){this.colorBk.active=!1,this._rewardNode.removeFromParent(),this._rewardNode=null,this._turnFinish=!1;var t=function(){this.turnBtn.interactable=!0,this.turnBtn.node.color=cc.Color.WHITE}.bind(this);switch(this._spintype){case l.Coin:this.coinReward(this._spinNum,t);break;case l.Diamond:this.diamondReward(this._spinNum,t);break;case l.PetB:this.petReward(h.High,t);break;case l.PetA:this.petReward(h.Normal,t);break;case l.SpinKey:this.keyReward(this._spinNum,t);break;case l.doubleSpinX:this.doubleSpinReward(num,t)}}},turn:function(){var e=this,t=this.computeSpin();this.spinIndex=t;var i=this.nums[t],o=this.getSpinType(t),n=this.rewardSpriteFrames[t],s=this.spScales[t],a=-(this.spinIndex*this.mDegree+this.mDegree/2)-1440;this.turnNode.stopAllActions(),this.turnNode.rotation=0;var c=cc.rotateBy(1,a).easing(cc.easeOut(5)),l=cc.callFunc(function(){e.tunrEnd(i,o,n,s)},this),r=cc.sequence(c,l);this.turnNode.runAction(r)},tunrEnd:function(e,t,i,o){this.colorBk.active=!0;var n=this;this._spinNum=e,this._spintype=t;switch(t){case l.Coin:case l.Diamond:2;break;case l.PetB:case l.PetA:case l.SpinKey:case l.doubleSpinX:1}var s=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/SpinReward",function(t,a){t&&cc.error(t);var c=cc.instantiate(a);c.position=cc.v2(0,-200),c.parent=s;var l=cc.callFunc(function(){var e=cc.jumpBy(.5,cc.v2(0,0),10,1).easing(cc.easeOut(2)),t=cc.jumpBy(.5,cc.v2(0,0),-10,1).easing(cc.easeOut(2)),i=cc.sequence(e,t),o=cc.repeatForever(i);c.runAction(o)}),r=cc.callFunc(function(){n._turnFinish=!0},n);c.runAction(cc.sequence(l,cc.delayTime(.5),r)),c.getComponent("SpinReward").show(e,i,o),n._rewardNode=c})},computeSpin:function(){return n.computeSpin(this.spinOdds)},getSpinType:function(e){return e<0||e>=this.spinTypes.length?l.UnKnown:this.spinTypes[e]},start:function(){},loadSpinData:function(e){cc.loader.loadRes("json/Spin",function(t,i){var o=i.json;e&&e(o[0])})},coinReward:function(e,t){if(this.uibase){var i=cc.director.getScene()._children[0],o=cc.v2(),a=this.uibase.coinlabel,c=a.node.parent.convertToWorldSpaceAR(a.node.position);c=i.convertToNodeSpaceAR(c);var l=e/10,r=function(){this.uibase.updateCoin(l),this.uibase.playCoin()}.bind(this),h=n.produceRandomNodeLineMove(s.ButtonCoin,10,o,c,i,r),u=cc.callFunc(function(){t&&t()},this);this.node.runAction(cc.sequence(cc.delayTime(h),u))}},diamondReward:function(e,t){if(this.uibase){var i=cc.director.getScene()._children[0],o=cc.v2(),a=this.uibase.diamondlabel,c=a.node.parent.convertToWorldSpaceAR(a.node.position);c=i.convertToNodeSpaceAR(c);var l=e/10,r=function(){this.uibase.updateDiamond(l),this.uibase.playCoin()}.bind(this),h=n.produceRandomNodeLineMove(s.Diamond,10,o,c,i,r),u=cc.callFunc(function(){t&&t()},this);this.node.runAction(cc.sequence(cc.delayTime(h),u))}},petReward:function(e,t){var i=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/PetExtraction",function(o,n){var s=cc.instantiate(n);s.parent=i,s.position=cc.v2(0,0),s.active=!0;var a=s.getComponent("PetExtraction");if(a){a.spin(e,function(){t&&t()})}})},keyReward:function(e,t){var i=a.instance.getFreeSpinVal();a.instance.setFreeSpinVal(e+i),t&&t()},doubleSpinReward:function(e,t){t&&t()},closeBtnFunc:function(e){var t=function(){var e=r.Main,t=cc.find("Canvas").getComponent("CanvasInit");switch(t&&(e=t.enterCode),e){case r.Main:cc.director.loadScene("Main");break;case r.Map:cc.director.loadScene("Map")}this.node.removeFromParent()}.bind(this),i=this.midbk;this.scaleClose(i,t)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],StageButton:[function(e,t,i){"use strict";cc._RF.push(t,"bfedbqfx9BKEqYu3U7zVr/8","StageButton"),cc.Class({extends:cc.Component,properties:{stageID:0,explorationID:0,stageNode:cc.Node},onLoad:function(){this.MapStage=this.stageNode.getComponent("MapStage")},start:function(){},onBtnClicked:function(){this.MapStage.spawnExploration(this.stageID,this.explorationID)}}),cc._RF.pop()},{}],StageUI:[function(e,t,i){"use strict";cc._RF.push(t,"b5976WxhFhPdIcHhY5B3Iyw","StageUI");var o=e("EnumDefine").EnterKind,n=e("Utils"),s=n.ProduceType,a=e("LocalStorage");cc.Class({extends:cc.Component,properties:{chestBox:cc.Node,star:cc.Node,starlabel:cc.Label,chestTip:cc.Node,chestBtn:cc.Button,UIBase:cc.Node,maskNode:cc.Node,audioStar:{type:cc.AudioSource,default:null}},onLoad:function(){this.maxlevel=80,this.stageStarCnt=0,this.chestTip.active=!1;for(var e=0,t=1;t<=this.maxlevel;t++){var i=a.instance.getLevelStars(t);e+=parseInt(i)}this.starcnt=e,this.starlabel.string=e+"",this.checkOpenChestTip(),this.uibase=this.UIBase.getComponent("UIBase"),this.chestBtn.interactable=!1,this.maskNode.active=!1},start:function(){},init:function(e){for(var t=this.pageView.getPages(),i=0;i<t.length;i++){var o=t[i].getComponent("PageLevelNodes");o&&o.init(e)}},checkOpenChestTip:function(){var e=function(e){this.stageStarCnt=e,this.openChestTip()}.bind(this);this.loadScoreReWardData(this.starcnt,e)},addStar:function(e){this.starcnt+=e,this.starlabel.string=this.starcnt+""},openChestTip:function(){this.chestTip.active=!0,this.chestTip.getComponent(cc.Animation).play("arrow"),this.chestBtn.interactable=!0},onOpenChestBox:function(){a.instance.setStarReWard(this.stageStarCnt,1);var e=this;cc.loader.loadRes("prefab/ChestReWard",function(t,i){t&&cc.error(t);var o=cc.instantiate(i);o.parent=e.node.parent,o.position=cc.v2();var n=o.getComponent("ChestReWard"),s=function(){o.removeFromParent(),e.checkOpenChestTip()}.bind(e);e.chestBtn.interactable=!1,e.chestTip.active=!1,n.showChest(e.starcnt,e.uibase,s)})},onBtnBackClicked:function(){cc.director.loadScene("Main")},onBtnRoleClicked:function(){cc.director.loadScene("ActorUI",function(){var e=cc.director.getScene()._children[0].getComponent("CanvasInit");e&&e.setEnterCode(o.Map)}.bind(this))},onBtnPetClicked:function(){cc.director.loadScene("SpinChest",function(){var e=cc.director.getScene()._children[0].getComponent("CanvasInit");e&&e.setEnterCode(o.Map)}.bind(this))},collectStars:function(e,t,i){var o=this,c=t.length,l=t[n.randomRangeInt(0,c)];if(l&&void 0!==l){var r=l.parent.convertToWorldSpaceAR(l.position);r=this.node.convertToNodeSpaceAR(r);var h=this.star,u=h.parent.convertToWorldSpaceAR(h.position);(u=this.node.convertToNodeSpaceAR(u)).x-=40;var p=this.node,d=function(){this.addStar(1),this.starAudio()}.bind(this),f=n.produceRandomNodeLineMove(s.Star,i,r,u,p,d),m=cc.callFunc(function(){a.instance.setLevelStars(e,i),o.checkOpenChestTip()},this);this.node.runAction(cc.sequence(cc.delayTime(f),m))}},loadScoreReWardData:function(e,t){cc.loader.loadRes("json/StarReward",function(i,o){for(var n=o.json,s=0;s<n.length;s++){var c=n[s],l=parseInt(c.star);if(e>=l)if(0===a.instance.getStarReWard(l)){t&&t(l);break}}})},starAudio:function(){this.audioStar&&this.audioStar.play()}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],StepAward:[function(e,t,i){"use strict";cc._RF.push(t,"d769dHY58xIUZIYLvw2/UuN","StepAward");e("Utils").NUMROWS,e("Utils").NUMCOLUMNS;var o=e("PoolMng"),n=(e("Utils"),e("EnumDefine").CellType,e("RPGManager")),s=e("Game");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.processBoardCell=this.node.getComponent("ProcessBoardCell"),this.board=this.node.getComponent("Board"),this.dropCell=this.node.getComponent("DropCell")},start:function(){},stepDone:function(){var e=function(){n.instance.win()}.bind(this);this.dropCell.animateFalling(e)},shootSteps:function(e){var t=this,i=[],o=this.randomCells(e);if(o&&o.length>0)for(var n=function(e){var n=o[e];if(n&&n.parent){var a=cc.callFunc(function(){s.instance.updateStep(-1),t.shootStep(n,.4)},t);i.push(a),i.push(cc.delayTime(.2))}},a=0;a<o.length;a++)n(a);var c=cc.callFunc(function(){t.stepDone()},this);i.push(cc.delayTime(.8)),i.push(c),this.node.runAction(cc.sequence(i))},shootStep:function(e,t){if(e&&e.parent){var i=this,n=s.instance.getFightUI(),a=n.steplabel,c=a.node.parent.convertToWorldSpaceAR(a.node.position);c=n.node.convertToNodeSpaceAR(c);var l=e.parent.convertToWorldSpaceAR(e.position);(l=n.node.convertToNodeSpaceAR(l)).x+=e.width/2,l.y+=e.height/2;var r=o.instance;cc.loader.loadRes("prefab/step",function(o,s){o&&cc.error(o);var a=cc.instantiate(s);a.scale=1.8,a.parent=n.node,a.position=c;var h=a.getComponent(cc.Animation);h&&h.play("fireball");var u=l.sub(c),p=Math.atan2(u.y,u.x),d=-cc.misc.radiansToDegrees(p),f=d+90;a.rotation=f,a.angle=d;var m=cc.moveTo(t,l),v=cc.callFunc(function(){i.spawnCoin(l,10);var t=cc.v2();t.x=e.x+e.width/2,t.y=e.y+e.height/2,i.showflashEffect(e.parent,t),i.processBoardCell.setCellNull(e),r.returnCell(e)},i);a.runAction(cc.sequence(m,v,cc.removeSelf()))})}},showflashEffect:function(e,t){cc.loader.loadRes("prefab/flashEffect",function(i,o){var n=cc.instantiate(o);if(n){n.scale=.5,n.parent=e,n.position=t;var s=n.getComponent(cc.Animation);s&&s.play(),n.runAction(cc.sequence(cc.delayTime(1.5),cc.removeSelf()))}})},spawnCoin:function(e,t){var i=s.instance.getFightUI();cc.loader.loadRes("prefab/SaleCoin",function(o,n){o&&cc.error(o);var s=cc.instantiate(n);s.parent=i.node,s.position=e,s.scale=0,s.getChildByName("label").getComponent(cc.Label).string=t+"";var a=cc.scaleTo(.3,1.5).easing(cc.easeOut(3)),c=cc.moveBy(.3,cc.v2(0,30)),l=cc.spawn(a,c),r=cc.moveBy(.6,cc.v2(0,50)),h=cc.callFunc(function(){i.updateCoin(t)},this),u=cc.sequence(l,r,h,cc.removeSelf());s.runAction(u)})},randomCells:function(e){return this.processBoardCell.randomGetNormalCells(e)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",PoolMng:"PoolMng",RPGManager:"RPGManager",Utils:"Utils"}],StepUI:[function(e,t,i){"use strict";cc._RF.push(t,"efb8aEpyOhHKKKSotWv0q3t","StepUI");var o=e("RPGManager"),n=(e("Game"),e("Utils")),s=e("LocalStorage"),a=e("BaseUI");cc.Class({extends:a,properties:{},onLoad:function(){this.scaleShow(this.node),this.uibaseData=s.instance.getUIBase()},start:function(){},onBtnCloseClicked:function(e){var t=function(){o.instance.lose(),this.node.removeFromParent()}.bind(this);this.close(t)},onBtnAddStepClicked:function(e){if(this.uibaseData.diamond>=10){this.uibaseData.diamond-=10;var t=function(){o.instance.addStepSuccess(5),this.node.removeFromParent()}.bind(this);this.close(t)}else;},onBtnLookAdsClicked:function(e){},close:function(e){var t=this.node.scale,i=cc.scaleTo(.06,1.1*t,1.1*t).easing(cc.easeBounceInOut()),o=cc.scaleTo(.06,0).easing(cc.easeBounceInOut()),n=cc.callFunc(function(){e&&e()},this),s=cc.sequence(i,o,n);this.node.runAction(s)},onDisable:function(){n.writeUIBaseData(this.uibaseData)}}),cc._RF.pop()},{BaseUI:"BaseUI",Game:"Game",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],StoryUI:[function(e,t,i){"use strict";cc._RF.push(t,"61e6cc1kStDTai8aXniseLo","StoryUI");e("Game");cc.Class({extends:cc.Component,properties:{bossRoad:cc.Node},ctor:function(){},onLoad:function(){},start:function(){}}),cc._RF.pop()},{Game:"Game"}],SwitchPetSkill:[function(e,t,i){"use strict";cc._RF.push(t,"6ffaaQepUVFIb56XF26glOE","SwitchPetSkill");var o=e("EnumDefine").ActorType,n=(e("Utils"),e("LocalStorage"));e("Game");cc.Class({extends:cc.Component,properties:{switchBtn:cc.Button,closeBtn:cc.Button,petRolePrefab:cc.Prefab,UINode:cc.Node},onLoad:function(){this.PetSkillUI=this.UINode.getComponent("PetSkillUI"),this.sideDis=15,this.midDis=(this.node.width-2*this.sideDis-550)/2,this.registerTouch(),this.switchBtn.node.active=!0,this.canTouch=!0;var e=[1,2,3],t=[4,5,6],i=[7,8,9],s=[10,11,12],a=[13,14,15];this.nodelist1=[],this.nodelist2=[],this.nodelist3=[],this.nodelist4=[],this.nodelist5=[];for(var c=[],l=[o.Actor1,o.Actor2,o.Actor3,o.Actor4,o.Actor5],r=0;r<l.length;r++){var h=l[r],u=n.instance.getRoleData(h);u&&c.push(u)}this.haveSkills=!1;for(var p=0;p<c.length;p++){var d=c[p],f=parseInt(d.roletype),m=n.instance.getPetSkill(f);switch(m.length>0&&(this.haveSkills=!0),f){case o.Actor1:this.nodelist1=this.spawnSkill(this.petRolePrefab,m,e,0,0);break;case o.Actor2:this.nodelist2=this.spawnSkill(this.petRolePrefab,m,t,1,1);break;case o.Actor3:this.nodelist3=this.spawnSkill(this.petRolePrefab,m,i,2,2);break;case o.Actor4:this.nodelist4=this.spawnSkill(this.petRolePrefab,m,s,3,3);break;case o.Actor5:this.nodelist5=this.spawnSkill(this.petRolePrefab,m,a,4,4)}}var v=[];this.nodelist1.length>0&&v.push(this.nodelist1),this.nodelist2.length>0&&v.push(this.nodelist2),this.nodelist3.length>0&&v.push(this.nodelist3),this.nodelist4.length>0&&v.push(this.nodelist4),this.nodelist5.length>0&&v.push(this.nodelist5),this.nodelistlist=v;for(var g=0;g<this.nodelistlist.length;g++){var C=this.nodelistlist[g];if(C.length>0){C[0].getComponent("PetRoleBox").choose();for(var _=1;_<C.length;_++){C[_].getComponent("PetRoleBox").unChoose()}}}this.haveSkills?this.switchBtn.active=!0:this.switchBtn.active=!1},showSwitchBtn:function(e){this.haveSkills?this.switchBtn.active=e:this.switchBtn.active=!1},spawnSkill:function(e,t,i,o,n){for(var s=0;s<t.length;s++)t[s]=parseInt(t[s]);for(var a=[],c=0;c<i.length;c++){var l=i[c],r=!0;t.indexOf(l)>=0&&(r=!1);var h=cc.instantiate(e);h.parent=this.node,h.position=cc.v2(this.sideDis+h.width/2+n*(h.width+this.midDis/2),c*(-h.height-5)),h.x-=this.node.width/2,h.y+=.4*this.node.height,h.active=!1,a.push(h),h.getComponent("PetRoleBox").initPetSkill(o,l,r)}return a},start:function(){},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t)},e)},touchBegin:function(e){if(this.canTouch)for(var t=e.getTouches()[0].getLocation(),i=0;i<this.nodelistlist.length;i++){var o=this.nodelistlist[i];if(o.length>0){var n=this.touchSkillNode(t,o);if(n){var s=n.getComponent("PetRoleBox");if(s.lock){var a=s.roleID;this.openRolePetUI(a);break}0===o.indexOf(n)?this.showSkillInfo(n):this.moveNodeInlist(n,o);break}}}},moveNodeInlist:function(e,t){var i=this,o=t.indexOf(e);if(o>0){this.canTouch=!1;var n=t[0],s=cc.v2(n.x,n.y),a=cc.scaleTo(.1,0).easing(cc.easeOut(3)),c=cc.callFunc(function(){for(var e=o-1;e>=0;e--){var i=t[e],n=t[e+1],s=cc.v2(n.x,n.y),a=cc.moveTo(.2,s).easing(cc.easeOut(3));i.runAction(a)}},this),l=cc.callFunc(function(){t.splice(o,1),t.splice(0,0,e),i.canTouch=!0;for(var n=1;n<t.length;n++){t[n].getComponent("PetRoleBox").unChoose()}t[0].getComponent("PetRoleBox").choose()},this);e.runAction(cc.sequence(a,c,cc.delayTime(.2),cc.moveTo(.1,cc.v2(s.x,s.y+n.height/2)),cc.scaleTo(.1,1),cc.moveTo(.1,s),l));var r=e.getComponent("PetRoleBox"),h=r.skillID,u=r.roleID,p=this.UINode.getComponent("PetSkillUI");p&&p.switchSkillID(u,h)}},touchSkillNode:function(e,t){for(var i=0;i<t.length;i++){var o=t[i],n=o.parent.convertToNodeSpaceAR(e);if(o.getBoundingBox().contains(n))return o}return null},openSkills:function(e){for(var t=0;t<this.nodelist1.length;t++){this.nodelist1[t].active=e}for(var i=0;i<this.nodelist2.length;i++){this.nodelist2[i].active=e}for(var o=0;o<this.nodelist3.length;o++){this.nodelist3[o].active=e}for(var n=0;n<this.nodelist4.length;n++){this.nodelist4[n].active=e}for(var s=0;s<this.nodelist5.length;s++){this.nodelist5[s].active=e}},onBtnOpenFunc:function(){this.node.active=!0,this.openSkills(!0),this.switchBtn.node.active=!1,this.closeBtn.node.active=!0},onBtnContinueFunc:function(){this.openSkills(!1),this.switchBtn.node.active=!0,this.closeBtn.node.active=!1,this.node.active=!1},showSkillInfo:function(e){var t=e.getComponent("PetRoleBox"),i=t.skillID,o=(t.roleID,this.UINode.getComponent("PetSkillUI"),cc.director.getScene()._children[0]);cc.loader.loadRes("prefab/PetInfoUI",function(e,t){var n=cc.instantiate(t);n.group="UI",n.scale=1,n.parent=o;var s=i,a=null,c=n.getChildByName("UIBase");c&&(a=c.getComponent("UIBase")),n.getComponent("PetInfo").show(s,a)})},openRolePetUI:function(e){var t=function(){this.freshPet(e)}.bind(this),i=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/PetUI/RolePetUI",function(o,n){var s=cc.instantiate(n);s.group="UI",s.scale=1,s.parent=i;var a=null,c=s.getChildByName("UIBase");c&&(a=c.getComponent("UIBase"));var l=s.getComponent("RolePetUI");l.show(e,a),l.closeFunc=t})},freshPet:function(e){var t=n.instance.getPetSkill(e),i=[];switch(e){case o.Actor1:i=this.nodelist1;break;case o.Actor2:i=this.nodelist2;break;case o.Actor3:i=this.nodelist3;break;case o.Actor4:i=this.nodelist4;break;case o.Actor5:i=this.nodelist5}for(var s=-1,a=0;a<i.length;a++){var c=i[a].getComponent("PetRoleBox"),l=c.skillID;t.indexOf(l)>=0&&c.lock&&(-1===s&&(s=c.skillID),c.unlock())}-1!==s&&this.PetSkillUI.switchPetFresh(e,s)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",LocalStorage:"LocalStorage",Utils:"Utils"}],SwitchRoleSkill:[function(e,t,i){"use strict";cc._RF.push(t,"b3664WiWQdNdriwHGNzyuLt","SwitchRoleSkill");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("EnumDefine").ActorType,s=e("Utils"),a=e("RPGManager"),c=e("LocalStorage"),l=e("Game");cc.Class({extends:cc.Component,properties:{switchBtn:cc.Button,closeBtn:cc.Button,petRolePrefab:cc.Prefab,UINode:cc.Node},onLoad:function(){this.PetSkillUI=this.UINode.getComponent("PetSkillUI"),this.sideDis=15,this.midDis=(this.node.width-2*this.sideDis-550)/2,this.registerTouch(),this.switchBtn.node.active=!0,this.canTouch=!0,this.nodelist1=[],this.nodelist2=[],this.nodelist3=[],this.nodelist4=[],this.nodelist5=[];for(var e=[20,21,22,23,24],t=[30,31,32,33,34],i=[40,41,42,43,44],o=[50,51,52,53,54],s=[60,61,62,63,64],a={},r=l.instance.roleDatas,h=0;h<r.length;h++){var u=r[h],p=parseInt(u.roletype),d=c.instance.getRoleSkill(p);d.length>0&&(a[p]=d)}for(var f in a){var m=a[f];switch(parseInt(f)){case n.Actor1:var v=m[0];m[0]=m[m.length-1],m[m.length-1]=v;var g=m.length;v=e[0],e[0]=e[g-1],e[g-1]=v,this.nodelist1=this.spawnSkill(this.petRolePrefab,m,e,0,0);break;case n.Actor2:var C=m[0];m[0]=m[m.length-1],m[m.length-1]=C;var _=m.length;C=t[0],t[0]=t[_-1],t[_-1]=C,this.nodelist2=this.spawnSkill(this.petRolePrefab,m,t,1,1);break;case n.Actor3:var S=m[0];m[0]=m[m.length-1],m[m.length-1]=S;var b=m.length;S=i[0],i[0]=i[b-1],i[b-1]=S,this.nodelist3=this.spawnSkill(this.petRolePrefab,m,i,2,2);break;case n.Actor4:var k=m[0];m[0]=m[m.length-1],m[m.length-1]=k;var y=m.length;k=o[0],o[0]=o[y-1],o[y-1]=k,this.nodelist4=this.spawnSkill(this.petRolePrefab,m,o,3,3);break;case n.Actor5:var w=m[0];m[0]=m[m.length-1],m[m.length-1]=w;var B=m.length;w=s[0],s[0]=s[B-1],s[B-1]=w,this.nodelist5=this.spawnSkill(this.petRolePrefab,m,s,4,4)}}var P=[];this.nodelist1.length>0&&P.push(this.nodelist1),this.nodelist2.length>0&&P.push(this.nodelist2),this.nodelist3.length>0&&P.push(this.nodelist3),this.nodelist4.length>0&&P.push(this.nodelist4),this.nodelist5.length>0&&P.push(this.nodelist5),this.nodelistlist=P;for(var D=0;D<this.nodelistlist.length;D++){var A=this.nodelistlist[D];if(A.length>0){A[0].getComponent("PetRoleBox").choose();for(var N=1;N<A.length;N++){A[N].getComponent("PetRoleBox").unChoose()}}}},spawnSkill:function(e,t,i,o,n){for(var s=0;s<t.length;s++)t[s]=parseInt(t[s]);for(var a=[],c=0;c<i.length;c++){var l=i[c],r=!0;t.indexOf(l)>=0&&(r=!1);var h=cc.instantiate(e);h.parent=this.node,h.position=cc.v2(this.sideDis+h.width/2+n*(h.width+this.midDis/2),c*(-h.height-5)),h.x-=this.node.width/2,h.y+=.4*this.node.height,a.push(h),h.getComponent("PetRoleBox").initRoleSkill(o,l,r)}return a},start:function(){},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t)},e)},touchBegin:function(e){if(this.canTouch)for(var t=e.getTouches()[0].getLocation(),i=0;i<this.nodelistlist.length;i++){var o=this.nodelistlist[i];if(o.length>0){var n=this.touchSkillNode(t,o);if(n){n.getComponent("PetRoleBox").lock||this.moveNodeInlist(n,o);var s=o.indexOf(n);return void(0===s&&this.showSkillInfo(o[s]))}}}},moveNodeInlist:function(e,t){var i=this,o=t.indexOf(e);if(o>0){this.canTouch=!1;var n=t[0],s=cc.v2(n.x,n.y),a=cc.scaleTo(.1,0).easing(cc.easeOut(3)),c=cc.callFunc(function(){for(var e=o-1;e>=0;e--){var i=t[e],n=t[e+1],s=cc.v2(n.x,n.y),a=cc.moveTo(.2,s).easing(cc.easeOut(3));i.runAction(a)}},this),l=cc.callFunc(function(){t.splice(o,1),t.splice(0,0,e),i.canTouch=!0;for(var n=1;n<t.length;n++){t[n].getComponent("PetRoleBox").unChoose()}t[0].getComponent("PetRoleBox").choose()},this);e.runAction(cc.sequence(a,c,cc.delayTime(.2),cc.moveTo(.1,cc.v2(s.x,s.y+n.height/2)),cc.scaleTo(.1,1),cc.moveTo(.1,s),l));var r=e.getComponent("PetRoleBox"),h=r.skillID,u=r.roleID;this.PetSkillUI.switchRoleSkill(u,h)}},touchSkillNode:function(e,t){for(var i=0;i<t.length;i++){var o=t[i],n=o.parent.convertToNodeSpaceAR(e);if(o.getBoundingBox().contains(n))return o}return null},openSkills:function(e){for(var t=0;t<this.nodelist1.length;t++){this.nodelist1[t].active=e}for(var i=0;i<this.nodelist2.length;i++){this.nodelist2[i].active=e}for(var o=0;o<this.nodelist3.length;o++){this.nodelist3[o].active=e}for(var n=0;n<this.nodelist4.length;n++){this.nodelist4[n].active=e}for(var s=0;s<this.nodelist5.length;s++){this.nodelist5[s].active=e}this.PetSkillUI.showRoleSkill(e)},onBtnOpenFunc:function(){this.node.active=!0,this.openSkills(!0),this.switchBtn.node.active=!1,this.closeBtn.node.active=!0},onBtnContinueFunc:function(){this.openSkills(!1),this.switchBtn.node.active=!0,this.closeBtn.node.active=!1,this.node.active=!1},showSkillInfo:function(e){var t=e.getComponent("PetRoleBox"),i=(t.skillID,t.roleID),o=(this.UINode.getComponent("PetSkillUI"),cc.director.getScene()._children[0]),n=function(){this.freshSkills(i),this.freshRole(i)}.bind(this);cc.loader.loadRes("prefab/UpGradeActorUI",function(e,t){var s=cc.instantiate(t);s.group="UI",s.scale=1,s.parent=o;var a=null,c=s.getChildByName("UIBase");c&&(a=c.getComponent("UIBase"));var l=s.getComponent("UpGradeActorUI");l.init(i,a),l.closeFunc=n})},freshSkills:function(e){var t=c.instance.getRoleSkill(e),i=[];switch(e){case n.Actor1:i=this.nodelist1;break;case n.Actor2:i=this.nodelist2;break;case n.Actor3:i=this.nodelist3;break;case n.Actor4:i=this.nodelist4;break;case n.Actor5:i=this.nodelist5}for(var o=0;o<i.length;o++){var s=i[o].getComponent("PetRoleBox");if(s.lock){var a=s.skillID+"";t.indexOf(a)>=0&&s.unlock()}}},freshRole:function(e){for(var t=c.instance.getRoleData(e),i=a.instance.actorlist,n=function(o){var n=i[o],a=n.getComponent("Actor");if(e===a.roletype&&a.roleData.level<t.level){a.setData(t);var c="spine/actor/",l=s.getActorSpineName(e,t.level);if(a.skeletonName===l)return{v:void 0};c+=l,cc.loader.loadRes(c,sp.SkeletonData,function(e,t){e&&cc.error(e);var i=n.getComponent("sp.Skeleton");i.skeletonData=t,i.setAnimation(0,"idle",!0),a.skeletonName=l,a.roleSkeleton=i,a.setAntiAliasTexParameters()})}},l=0;l<i.length;l++){var r=n(l);if("object"===(void 0===r?"undefined":o(r)))return r.v}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],UIBase:[function(e,t,i){"use strict";cc._RF.push(t,"acca85jGZVAdIP8QFiMAiFN","UIBase");e("Utils");var o=e("LocalStorage");cc.Class({extends:cc.Component,properties:{coinlabel:{default:null,type:cc.Label},diamondlabel:{default:null,type:cc.Label},audioCoin:{type:cc.AudioSource,default:null}},ctor:function(){this._coinNum=0,this._diamondNum=0},onLoad:function(){var e=o.instance.getUIBase();JSON.stringify(e);e&&(this.coinlabel.string=e.coin+"",this.diamondlabel.string=e.diamond+"",this._coinNum=parseInt(e.coin),this._diamondNum=parseInt(e.diamond))},playCoin:function(){this.audioCoin&&this.audioCoin.play()},getDiamondNum:function(){return this._diamondNum},getCoinNum:function(){return this._coinNum},updateCoin:function(e){this._coinNum+=e,this.coinlabel.string=this._coinNum+""},updateDiamond:function(e){this._diamondNum+=e,this.diamondlabel.string=this._diamondNum+""},writeData:function(){var e={};e.coin=this._coinNum,e.diamond=this._diamondNum,o.instance.setUIBase(e)},buyDiamond:function(e){var t=!1;return this.getDiamondNum()>=e&&(t=!0,this.updateDiamond(-e)),t},buyCoin:function(e){var t=!1;return this.getCoinNum()>=e&&(t=!0,this.updateCoin(-e)),t},start:function(){},onDisable:function(){cc.log("on disable"),this.writeData()},onBtnAddDiamondClicked:function(){var e=this,t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/DiamondUI",function(i,o){i&&cc.error(i);var n=cc.instantiate(o),s=cc.find("UICamera",t);s&&(n.group=s.group),n.parent=t,n.position=cc.v2(),e.scaleShow(n),n.getComponent("DiamondUI").setUIBase(e)})},onBtnAddCoinClicked:function(){var e=this,t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/CoinUI",function(i,o){i&&cc.error(i);var n=cc.instantiate(o),s=cc.find("UICamera",t);s&&(n.group=s.group),n.parent=t,n.position=cc.v2(),e.scaleShow(n),n.getComponent("CoinUI").setUIBase(e)})},scaleShow:function(e,t){var i=this.node.scale,o=cc.scaleTo(.08,1.08*i,1.08*i).easing(cc.easeBounceInOut()),n=cc.scaleTo(.08,1*i,1*i).easing(cc.easeBounceInOut()),s=cc.scaleTo(.08,1.05*i,1.05*i).easing(cc.easeBounceInOut()),a=cc.scaleTo(.08,1*i,1*i).easing(cc.easeBounceInOut()),c=cc.callFunc(function(){t&&t()},this),l=cc.sequence(o,n,s,a,c,null);e.runAction(l)}}),cc._RF.pop()},{LocalStorage:"LocalStorage",Utils:"Utils"}],UISoundAudio:[function(e,t,i){"use strict";cc._RF.push(t,"b02a26BbqBKwI/GqkU6zk4V","UISoundAudio"),cc.Class({extends:cc.Component,properties:{levelup:{type:cc.AudioClip,default:null},Coin:{type:cc.AudioClip,default:null},petlevelup:{type:cc.AudioClip,default:null},ButtonClick:{type:cc.AudioClip,default:null}},start:function(){}}),cc._RF.pop()},{}],UpGradeActorUI:[function(e,t,i){"use strict";cc._RF.push(t,"6e2edUZPeZGOqMXy+1rdrvE","UpGradeActorUI");var o=e("JsonData"),n=e("LocalStorage"),s=e("EnumDefine").ActorType,a=e("Utils"),c=e("BaseUI");cc.Class({extends:c,properties:{upGradeNode:cc.Node,DiamondSpriteFrame:{default:null,type:cc.SpriteFrame},CoinSpriteFrame:{default:null,type:cc.SpriteFrame},roleName:cc.Label,role:cc.Node,attackLabel:cc.Label,levelLabel:cc.Label,buyWord:cc.Label,buyNum:cc.Label,coin:cc.Sprite,progressBar:cc.ProgressBar,role1:cc.Node,role2:cc.Node,role3:cc.Node,role4:cc.Node,gou1:cc.Node,gou2:cc.Node,gou3:cc.Node,gou4:cc.Node,link1:cc.Node,link2:cc.Node,link3:cc.Node,link4:cc.Node,midbk:cc.Node,audioLevelUp:{type:cc.AudioSource,default:null},Cell:{default:null,type:sp.Skeleton},attackBk:cc.Node,levelBk:cc.Node,title:cc.Label,skillScrollView:{default:null,type:cc.ScrollView},skillTemplate:cc.Node},ctor:function(){this.maxlevel=120,this.level=1,this.roletype=0,this.lock=!0,this._buyRoleDiamond=0,this._levelUpCoin=0},onLoad:function(){this.skillIDlist=[],this.skillNodelist=[],this.scaleShow(this.node),this.skillContent=this.skillScrollView.content,this._pageView=null,this.closeFunc=null},darknode:function(e){cc.log("lock",e),e?(this.role.color=cc.Color.BLACK,this.role1.color=cc.Color.BLACK):(this.role.color=cc.Color.WHITE,this.role1.color=cc.Color.WHITE)},start:function(){},init:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._pageView=i,this._uibase=t,this.roletype=e;var c=n.instance.getRoleData(e),l=!0;c&&(this.level=c.level,this.lock=l=!1),this.darknode(this.lock);var r=this;switch(o.instance.loadRoleUpgradeData(this.roletype+1,this.level,function(e){r.updateInfo(e,l)}),this.roleName.string=a.getRoleName(e),this.title.string=this.roleName.string,this.level>=this.maxlevel?this.upGradeNode.active=!1:this.upGradeNode.active=!0,e){case s.Actor1:var h=this.Cell;cc.loader.loadRes("spine/fruite/tomatoes",sp.SkeletonData,function(e,t){e&&cc.error(e),h.skeletonData=t}),this.levelBk.color=cc.color(213,60,31,255);break;case s.Actor2:var u=this.Cell;cc.loader.loadRes("spine/fruite/eggplant",sp.SkeletonData,function(e,t){e&&cc.error(e),u.skeletonData=t}),this.levelBk.color=cc.color(83,101,195,255);break;case s.Actor3:var p=this.Cell;cc.loader.loadRes("spine/fruite/orange",sp.SkeletonData,function(e,t){e&&cc.error(e),p.skeletonData=t}),this.levelBk.color=cc.color(224,155,66,255);break;case s.Actor4:var d=this.Cell;cc.loader.loadRes("spine/fruite/apple",sp.SkeletonData,function(e,t){e&&cc.error(e),d.skeletonData=t}),this.levelBk.color=cc.color(72,224,66,255);break;case s.Actor5:var f=this.Cell;cc.loader.loadRes("spine/fruite/radish",sp.SkeletonData,function(e,t){e&&cc.error(e),f.skeletonData=t}),this.levelBk.color=cc.color(230,205,233,255)}this.initSkillContent(e)},initSkillContent:function(e){var t=[[20,21,22,23,24],[30,31,32,33,34],[40,41,42,43,44],[50,51,52,53,54],[60,61,62,63,64]][e];this.skillIDlist=t;for(var i=n.instance.getRoleSkill(e),o=0;o<t.length;o++){var s=t[o],a=cc.instantiate(this.skillTemplate);a.active=!0,a.parent=this.skillContent,a.position=cc.v2(66+o*(a.width+10),71),a.name=s+"",this.spawnSkill(s,a);var c=a.getChildByName("lock");c&&(c.zIndex=10),this.skillNodelist.push(a);for(var l=!0,r=0;r<i.length;r++)if(s===parseInt(i[r])){l=!1;break}if(l)c.active=!0,a.getComponent(cc.Button).interactable=!1;else c.active=!1,a.getComponent(cc.Button).interactable=!0}},spawnSkill:function(e,t){var i=function(e){var i="prefab/skillcell/"+e.prefabName;cc.loader.loadRes(i,function(e,i){e&&cc.error(e);var o=cc.instantiate(i);o.parent=t,o.x=o.width-t.width,o.y=o.height-t.height+20,o.getChildByName("cellNode").x=39})}.bind(this);o.instance.loadJsonSkillData(e,i)},skillBtnClick:function(e){var t=e.target.name,i=parseInt(t),o=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/RoleSkillUI",function(e,t){e&&cc.error(e);var n=cc.instantiate(t);n.parent=o,n.name="RoleSkillUI",n.group="UI",n.getComponent("RoleSkillUI").show(i)})},updateInfo:function(e,t){if(e){if(t){this.activNode(!1),this.buyWord.string="\u8d2d\u4e70",this.coin.getComponent("cc.Sprite").spriteFrame=this.DiamondSpriteFrame;var i=this;o.instance.getBuyRoleData(this.roletype+1,function(e){e&&(i.buyNum.string=e.BuyPrice+"",i._buyRoleDiamond=parseInt(e.BuyPrice))})}else{if(this.levelLabel.string=e.level+"",this.attackLabel.string=e.attack+"",this.buyWord.string="\u8fdb\u5316",this.coin.getComponent("cc.Sprite").spriteFrame=this.CoinSpriteFrame,this.level=e.level,this.level<this.maxlevel){var n=this;o.instance.loadRoleUpgradeData(this.roletype+1,this.level+1,function(e){n.buyNum.string=e.upgradecoin+"",n._levelUpCoin=parseInt(e.upgradecoin)})}}this.initRole(),this.upDateProgressBar()}},upDateProgressBar:function(){var e=100*this.level/this.maxlevel/100;this.progressBar.progress=e},initRole:function(){var e=this.roletype,t=this.role,i=a.getActorSpineName(e,this.level);if(this.loadRole(t,i,!0),this.lock)this.darknode(this.lock);else{this.darknode(!1);var o=this.level;o<40?(this.role1.color=cc.Color.WHITE,this.role2.color=cc.Color.BLACK,this.role3.color=cc.Color.BLACK,this.role4.color=cc.Color.BLACK,this.link1.active=!1,this.link2.active=!0,this.link3.active=!0,this.link4.active=!0,this.gou1.active=!0,this.gou2.active=!1,this.gou3.active=!1,this.gou4.active=!1,this.loadRoles(e)):o>=40&&o<80?(this.loadRoles(e),this.role1.color=cc.Color.WHITE,this.role2.color=cc.Color.WHITE,this.role3.color=cc.Color.BLACK,this.role4.color=cc.Color.BLACK,this.link1.active=!1,this.link2.active=!1,this.link3.active=!0,this.link4.active=!0,this.gou1.active=!0,this.gou2.active=!0,this.gou3.active=!1,this.gou4.active=!1):o>=80&&o<120?(this.loadRoles(e),this.role1.color=cc.Color.WHITE,this.role2.color=cc.Color.WHITE,this.role3.color=cc.Color.WHITE,this.role4.color=cc.Color.BLACK,this.link1.active=!1,this.link2.active=!1,this.link3.active=!1,this.link4.active=!0,this.gou1.active=!0,this.gou2.active=!0,this.gou3.active=!0,this.gou4.active=!1):o>=120&&(this.loadRoles(e),this.role1.color=cc.Color.WHITE,this.role2.color=cc.Color.WHITE,this.role3.color=cc.Color.WHITE,this.role4.color=cc.Color.WHITE,this.link1.active=!1,this.link2.active=!1,this.link3.active=!1,this.link4.active=!1,this.gou1.active=!0,this.gou2.active=!0,this.gou3.active=!0,this.gou4.active=!0)}},loadRoles:function(e){var t=a.getActorSpineName(e,1);this.loadRole(this.role1,t),t=a.getActorSpineName(e,40),this.loadRole(this.role2,t),t=a.getActorSpineName(e,80),this.loadRole(this.role3,t),t=a.getActorSpineName(e,120),this.loadRole(this.role4,t)},loadRole:function(e,t,i){var o="spine/actor/"+t,n=e.getComponent("sp.Skeleton"),s=this;cc.loader.loadRes(o,sp.SkeletonData,function(e,t){e&&cc.error(e),n.skeletonData=t,!s.lock&&i&&n.setAnimation(0,"idle",!0)})},onBtnCloseSubActorUI:function(){var e=this,t=this.node.scale,i=cc.scaleTo(.1,1.1*t,1.1*t).easing(cc.easeBounceInOut()),o=cc.scaleTo(.1,0).easing(cc.easeBounceInOut()),n=cc.callFunc(function(){e._pageView&&e._pageView.getPages()[e.roletype].getComponent("ActorUIPage").init(e.roletype);e.closeFunc&&e.closeFunc(),e.node.removeFromParent()},this),s=cc.sequence(i,o,n);this.node.runAction(s)},activNode:function(e){this.levelLabel.node.active=e,this.attackLabel.node.active=e},onBtnUpdate:function(){if(this.lock){if(!this.buyRoleDiamond(this._buyRoleDiamond))return;this.lock=!1,this.activNode(!0),this.darknode(this.lock);var e=this;o.instance.loadRoleUpgradeData(this.roletype+1,this.level,function(t){e.updateInfo(t,e.lock);var i={};i.roletype=e.roletype,i.level=t.level,i.attack=t.attack,n.instance.setRoleData(i),e._levelUpCoin=parseInt(t.upgradecoin);var o=e.skillIDlist[0];e.unlockSkill(e.roletype,o,0)})}else this.levelUp()},roleUpdate:function(e){var t=this.roletype,i=this.role,o=a.getActorSpineName(t,e);this.loadRole(i,o,!0),i.scale=0;var n=cc.scaleTo(.2,1.2,1.2).easing(cc.easeBounceInOut()),s=cc.scaleTo(.2,1,1).easing(cc.easeBounceInOut()),c=cc.sequence(n,s);i.runAction(c);cc.loader.loadRes("prefab/roleUp",function(e,t){var o=cc.instantiate(t);o.scale=2,o.parent=i.parent,o.position=i.position;var n=cc.sequence(cc.delayTime(1),cc.removeSelf());o.runAction(n)})},levelUp:function(){var e=this.roletype;if(this.level>this.maxlevel)this.upGradeNode.active=!1;else if(this.levelupCoin(this._levelUpCoin)){this.level+=1;var t=this.level,i=this;o.instance.loadRoleUpgradeData(e+1,t,function(o){if(o){var s={};s.roletype=e,s.level=o.level,s.attack=o.attack,n.instance.setRoleData(s),i.upDateProgressBar(),i.levelLabel.string=o.level+"",i.attackLabel.string=o.attack+"",i.scaleUp(i.levelBk),i.scaleUp(i.attackBk);var a=i.levelLabel.node,c=cc.v2(0,0);if(i.showflashEffect(a,c),a=i.attackLabel.node,c=cc.v2(0,0),i.showflashEffect(a,c),i.buyWord.string="\u8fdb\u5316",i.buyNum.string=o.upgradecoin+"",i._levelUpCoin=parseInt(o.upgradecoin),i.coin.getComponent("cc.Sprite").spriteFrame=i.CoinSpriteFrame,i.audioLevelUp.play(),40===t){i.roleUpdate(t),i.loadRoles(e),i.role1.color=cc.Color.WHITE,i.role2.color=cc.Color.WHITE,i.role3.color=cc.Color.BLACK,i.role4.color=cc.Color.BLACK,i.link1.active=!1,i.link2.active=!1,i.link3.active=!0,i.link4.active=!0,i.gou1.active=!0,i.gou2.active=!0,i.gou3.active=!1,i.gou4.active=!1;var l=i.skillIDlist[1];i.unlockSkill(i.roletype,l,1)}else if(80===t){i.roleUpdate(t),i.role1.color=cc.Color.WHITE,i.role2.color=cc.Color.WHITE,i.role3.color=cc.Color.WHITE,i.role4.color=cc.Color.BLACK,i.link1.active=!1,i.link2.active=!1,i.link3.active=!1,i.link4.active=!0,i.gou1.active=!0,i.gou2.active=!0,i.gou3.active=!0,i.gou4.active=!1;var r=i.skillIDlist[2];i.unlockSkill(i.roletype,r,2)}else if(t>=120){i.roleUpdate(t),i.role1.color=cc.Color.WHITE,i.role2.color=cc.Color.WHITE,i.role3.color=cc.Color.WHITE,i.role4.color=cc.Color.WHITE,i.link1.active=!1,i.link2.active=!1,i.link3.active=!1,i.link4.active=!1,i.gou1.active=!0,i.gou2.active=!0,i.gou3.active=!0,i.gou4.active=!0;var h=i.skillIDlist[3];i.unlockSkill(i.roletype,h,3),h=i.skillIDlist[4],i.unlockSkill(i.roletype,h,4)}}})}},levelupCoin:function(e){var t=!1;this._uibase&&(this._uibase.getCoinNum()>=e&&(t=!0,this._uibase.updateCoin(-e)));return t},buyRoleDiamond:function(e){var t=!1;this._uibase&&(this._uibase.getDiamondNum()>=e&&(t=!0,this._uibase.updateDiamond(-e)));return t},showflashEffect:function(e,t){cc.loader.loadRes("prefab/flashEffect",function(i,o){var n=cc.instantiate(o);if(n){n.scale=.5,n.parent=e,n.position=t;var s=n.getComponent(cc.Animation);s&&s.play(),n.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf()))}})},scaleUp:function(e){e.stopAllActions(),e.scale=1;var t=e.scale,i=cc.scaleTo(.25,1.2*t,1.2*t).easing(cc.easeOut(3)),o=cc.scaleTo(.25,1*t,1*t).easing(cc.easeOut(3)),n=cc.sequence(i,o);e.runAction(n)},unlockSkill:function(e,t,i){var o="",s=n.instance.getRoleSkill(e);if(!(s.indexOf(t)>=0)){for(var a=0;a<s.length;a++)o+=s[a]+",";o+=t+"",n.instance.setRoleSkill(e,o);var c=this.skillNodelist[i],l=c.getChildByName("lock");l&&l.destroy(),c.getComponent(cc.Button).interactable=!0}}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],Utils:[function(e,t,i){"use strict";cc._RF.push(t,"6e36794TgdII6mwO8NKhw60","Utils");var o=75,n=75,s=(e("PoolMng"),Math.random,e("EnumDefine")),a=s.ActorType,c=s.CellType,l=s.CellsRelativeDir,r=e("EnumDefine").PetRoleSkillType,h=(e("EnumDefine").CellGroupType,s.LevelResult,e("LocalStorage")),u=s.GameStages,p=cc.Enum({ButtonCoin:0,SaleCoin:1,Diamond:2,Star:3,SpinKey:4,UnKnown:-1});function d(e,t){return Math.random()*(t-e)+e}function f(e,t){return Math.floor(d(e,t))}function m(e,t){var i=e*o,s=t*n;return cc.v2(i,s)}function v(e,t,i){if(1===t)e.push(i);else for(var o=0;o<t;o++){var n=d(i.x-50,i.x+50),s=d(i.y-50,i.y+50);e.push(cc.v2(n,s))}}t.exports={NUMROWS:8,NUMCOLUMNS:8,TITLE_WIDTH:o,TITLE_HEIGHT:n,pointForColumn:m,DropCellPosition:function(e,t,i,s,a){var l=null;switch(e){case c.KeyUp:case c.KeyDown:case c.KeyLeft:case c.KeyRight:case c.PropFlash:case c.BlockDiamond:(l=m(t,i)).x=l.x-s/2,l.y=l.y-a/2,l.x+=o/2,l.y+=n/2;break;default:(l=m(t,i)).x=l.x-s/2,l.y=l.y-a/2}return l},randomRangeInt:f,randomRange:d,produceRandomNodeMove:function(e,t,i,o,n,s){if(!(t<=0)){var a=0,c=[],l=[];v(c,t,i);for(var r=function(t){var i="";switch(e){case p.ButtonCoin:i="prefab/buttonCoin";break;case p.ScaleCoin:i="prefab/SaleCoin";break;case p.Diamond:i="prefab/buttonDiamond"}cc.loader.loadRes(i,function(e,i){e&&cc.error(e);var r=cc.instantiate(i),h=c[t];r.position=h,l.push(r),r.scale=0,r.parent=n;var u=o.sub(r.position).mag()/100*2;a=a<u?u:a,function(){var e=r.position,i=cc.v2();i.x=e.x-d(60,150),i.y=e.y,i.y+=d(200,400);var n=cc.v2();n.x=i.x-d(50,100),n.y=e.y;var a=[e,i,n],c=cc.bezierTo(.35,a),l=cc.moveTo(.35,o).easing(cc.easeOut(3)),h=cc.scaleTo(.1,1.2).easing(cc.easeOut(3)),u=cc.callFunc(function(){s&&s(),r.destroy()}),p=cc.sequence(cc.delayTime(.02*t),h,c,l,u);r.runAction(p)}()})},h=0;h<t;h++)r(h)}},produceRandomNodeLineMove:function(e,t,i,o,n,s){if(!(t<=0)){var a=0,c=[],l=[];v(c,t,i);for(var r=0;r<t;r++){var h=c[r],u=o.sub(h).mag()/100*.2;a=a<u?u:a}for(var d=function(t){var i="",a=1;switch(e){case p.ButtonCoin:i="prefab/buttonCoin",a=2;break;case p.ScaleCoin:i="prefab/SaleCoin",a=2;break;case p.Diamond:i="prefab/buttonDiamond",a=2;break;case p.Star:i="prefab/star",a=.45;break;case p.SpinKey:i="prefab/keyup",a=.8}cc.loader.loadRes(i,function(e,i){e&&cc.error(e);var r=cc.instantiate(i),h=c[t];r.position=h,l.push(r),r.scale=0,r.zIndex=10,r.parent=n,r.group="UI";var u=o.sub(r.position).mag()/100*.2;(function(){var e=r.position,i=cc.v2();i.x=(e.x+o.x)/2,i.y=(e.y+o.y)/2;var n=[e,i,o],c=cc.bezierTo(u,n),l=cc.scaleTo(.1,a).easing(cc.easeOut(3)),h=cc.callFunc(function(){s&&s(),r.destroy()}),p=cc.sequence(cc.delayTime(.02*t),l,c,h);r.runAction(p)})()})},f=0;f<t;f++)d(f);return a+.02*t+.1+.5}},ProduceType:p,getActorSpineName:function(e,t){var i=["kaokao","kaokao_2","kaokao_3","kaokao_4"],o=["mika","mika_2","mika_3","mika_4"],n=["ricky","ricky_2","ricky_3","ricky_4"],s=["tutu","tutu_2","tutu_3","tutu_4"],c=["actor1","actor2","actor2","actor4"];switch(e){case a.Actor1:return t<40?i[0]:t>=40&&t<80?i[1]:t<=80&&t<120?i[2]:i[3];case a.Actor2:return t<40?o[0]:t>=40&&t<80?o[1]:t<=80&&t<120?o[2]:o[3];case a.Actor3:return t<40?n[0]:t>=40&&t<80?n[1]:t<=80&&t<120?n[2]:n[3];case a.Actor4:return t<40?s[0]:t>=40&&t<80?s[1]:t<=80&&t<120?s[2]:s[3];case a.Actor5:return t<40?c[0]:t>=40&&t<80?c[1]:t<=80&&t<120?c[2]:c[3]}},getPetFileName:function(e){return["cattle","chicken","dog","duck","frog","hippo","horse","monkey","mouse","orangutan","owl","panda","pig","rabbit","sheep","tiger"][e]},getGhostPetFileName:function(e){return["cattle_ghost","chicken_ghost","dog_ghost","duck_ghost","frog_ghost","hippo_ghost","horse_ghost","monkey_ghost","mouse_ghost","orangutan_ghost","owl_ghost","panda_ghost","pig_ghost","rabbit_ghost","sheep_ghost","tiger_ghost"][e]},computeSpin:function(e){for(var t=e.length,i=0,o=0;o<t;o++)i+=e[o],e[o]=i;for(var n=d(0,i),s=0;s<t-1;s++)if(n>=e[s]&&n<e[s+1])return s+1;return 0},getStageName:function(e){switch(e){case 10001:name="Farm1";break;case 10002:name="Farm2";break;case 10003:name="Farm3";break;case 20001:name="Forest1";break;case 20002:name="Forest2";break;case 20003:name="Forest3";break;case 30001:name="Snow1";break;case 30002:name="Snow2";break;case 30003:name="Snow3";break;case 40001:name="Volcano1";break;case 40002:name="Volcano2";break;case 40003:name="Volcano3"}return name},getCellName:function(e){switch(e){case c.Cell1:return"tomatoes";case c.Cell2:return"eggplant";case c.Cell3:return"orange";case c.Cell4:return"apple";case c.Cell5:return"radish"}},getRoleName:function(e){switch(e){case a.Actor1:return"\u7c73\u5494";case a.Actor2:return"\u9760\u9760";case a.Actor3:return"\u745e\u5947";case a.Actor4:return"\u7a81\u7a81";case a.Actor5:return"\u718a\u732b";default:return""}},writeUIBaseData:function(e){h.instance.setUIBase(e)},showBaby:function(e,t,i){var o=["baby01","baby02","baby03","baby04","baby05","baby06"],n="spine/baby/";n+=o[f(0,o.length)],cc.loader.loadRes(n,sp.SkeletonData,function(o,n){o&&cc.error(o);var s=new cc.Node;s.setAnchorPoint(.5,0),s.parent=e,s.position=t;var a=s.addComponent("sp.Skeleton");a.skeletonData=n,a.setAnimation(0,"idle",!0),s.scale=0;var c=cc.scaleTo(.3,1).easing(cc.easeOut(3)),l=cc.moveBy(.3,cc.v2(0,50)),r=cc.spawn(c,l),h=cc.moveBy(.6,cc.v2(0,200)),u=cc.callFunc(function(){i&&i()},this),p=cc.sequence(r,h,u,cc.removeSelf());s.runAction(p)})},showDiamond:function(e,t,i,o){cc.loader.loadRes("prefab/blockDiamond",function(n,s){n&&cc.error(n);var a=cc.instantiate(s),c=a.getChildByName("num");c&&(c.getComponent("cc.Label").string=i+""),a.parent=e,a.position=t,a.scale=0;var l=cc.scaleTo(.3,1).easing(cc.easeOut(3)),r=cc.moveBy(.3,cc.v2(0,50)),h=cc.spawn(l,r),u=cc.moveBy(1.2,cc.v2(0,100)),p=cc.callFunc(function(){o&&o()},this),d=cc.sequence(h,u,p,cc.removeSelf());a.runAction(d)})},ReadyGo:function(e){var t=cc.director.getScene()._children[0],i=cc.callFunc(function(){cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,i){var o=i.getSpriteFrame("ready"),n=new cc.Node("");n.group="UI",n.addComponent("cc.Sprite").spriteFrame=o,n.scale=0;var s=cc.scaleTo(.1,1.2).easing(cc.easeOut(3)),a=cc.scaleTo(.1,1.1).easing(cc.easeOut(3)),c=cc.sequence(s,a,cc.fadeOut(.5),cc.removeSelf());n.runAction(c),n.parent=t,n.position=cc.v2(0,0)})},this),o=cc.callFunc(function(){cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,i){var o=i.getSpriteFrame("go"),n=new cc.Node("");n.group="UI",n.addComponent("cc.Sprite").spriteFrame=o,n.scale=0;var s=cc.scaleTo(.1,1.2).easing(cc.easeOut(3)),a=cc.scaleTo(.1,1.1).easing(cc.easeOut(3)),c=cc.sequence(s,a,cc.fadeOut(.5),cc.removeSelf());n.runAction(c),n.parent=t,n.position=cc.v2(0,0)})},this),n=cc.callFunc(function(){e&&e()},this),s=cc.sequence(i,cc.delayTime(.7),o,cc.delayTime(1.2),n);t.runAction(s)},cellDirWithCell:function(e,t){if(!e||!t)return l.UnKnown;var i=e.getComponent("Cell"),o=t.getComponent("Cell"),n=i.column,s=i.row,a=o.column,c=o.row;if(n===a){if(s===c+1)return l.Top;if(s===c-1)return l.Bottom}if(s===c){if(n===a+1)return l.Right;if(n===a-1)return l.Left}return n===a-1&&s===c+1?l.LeftUpper:n===a+1&&s===c+1?l.RightUpper:n===a-1&&s===c-1?l.LeftLower:n===a+1&&s===c-1?l.RightLower:l.UnKnown},SetUISpriteFrame:function(e,t,i){cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(o,n){var s=n.getSpriteFrame(t);e.spriteFrame=s,i&&i()})},GetPetChinaName:function(e){var t=["\u827e\u739b","\u6bd4\u6bd4","\u6bd4\u5229","\u6ce2\u6ce2","\u591a\u5566","\u76d6\u5c14","\u6770\u514b","\u4e54\u4f0a","\u514b\u5c14","\u7f57\u7f57","\u6cab\u6cab","\u83ab\u7eb3","\u4f69\u8482","\u6ce2\u5229","\u745e\u5854","\u5706\u5706"];return e>=0&&e<t.length?t[e]:""},levelData:null,passLevelStars:0,levelResultData:{},fightSceneAudioID:-1,mainSceneAudioID:-1,DayReWardRoleID:1,FreeSpinVal:0,PropFlashCnt:0,LevelEditorBoardData:null,LevelEditorLevelGoles:null,UISpriteAtlas:null,StageSpriteAtlas:null,GetSkillIconPath:function(e){var t="";switch(e){case r.Role1:t="cell1";break;case r.Role2:t="cell2";break;case r.Role3:t="cell3";break;case r.Role4:t="cell4";break;case r.Role5:t="cell5";break;case r.Pet1:t="one_PrismBomb";break;case r.Pet2:t="one_TwoVertical";break;case r.Pet3:t="one_Brush";break;case r.Pet4:t="two_PrismBomb";break;case r.Pet5:t="two_TwoHorinal";break;case r.Pet6:t="two_Brush";break;case r.Pet7:t="three_PrismBomb";break;case r.Pet8:t="three_TwoVertical";break;case r.Pet9:t="three_Brush";break;case r.Pet10:t="four_PrismBomb";break;case r.Pet11:t="four_TwoVertical";break;case r.Pet12:t="four_brush";break;case r.Pet13:t="five_PrismBomb";break;case r.Pet14:t="five_TwoVertical";break;case r.Pet15:t="five_Brush";break;case r.Pet16:break;default:return r.UnKnown}return"prefab/cell/"+t},GetStageData:function(e){var t="",i="",o="",n="",s="",a="",c="",l="",r="",h="",p=[];switch(e){case u.Farm1:t="texture/farm",n="farm_boxtop1",s="farm_boxbottom1",a="farm_boxbottom1",c="farm_foreground1",l="farm_midshot1",r="farm_perspective1",h="farm_sun1",p=["cloud1","cloud2","cloud3"],i="farm_boxone1",o="farm_boxtwo1";break;case u.Farm2:t="texture/farm",n="farm_boxtop2",s="farm_boxbottom2",a="farm_boxbottom2",c="farm_foreground2",l="farm_midshot2",r="farm_perspective2",h="farm_sun2",p=["cloud1","cloud2","cloud3"],i="farm_boxone2",o="farm_boxtwo2";break;case u.Farm3:t="texture/farm",n="farm_boxtop3",s="farm_boxbottom3",a="farm_boxbottom3",c="farm_foreground3",l="farm_midshot3",r="farm_perspective3",h="moon",p=["cloud1","cloud2","cloud3"],i="farm_boxone3",o="farm_boxtwo3";break;case u.Forest1:t="texture/forest",n="forest_boxtop1",s="forest_boxbottom1",a="forest_boxbottom1",c="forest_foreground1",l="forest_midshot1",r="forest_perspective1",h="forest_sun",p=["forest_cloud1","forest_cloud1big","forest_cloud1"],i="forest_boxone1",o="forest_boxtwo1";break;case u.Forest2:t="texture/forest",n="forest_boxtop2",s="forest_boxbottom2",a="forest_boxbottom2",c="forest_foreground2",l="forest_midshot2",r="forest_perspective2",h="forest_sun",p=["forest_cloud2","forest_cloud2big","forest_cloud2"],i="forest_boxone2",o="forest_boxtwo2";break;case u.Forest3:t="texture/forest",n="forest_boxtop3",s="forest_boxbottom3",a="forest_boxbottom3",c="forest_foreground3",l="forest_midshot3",r="forest_perspective3",h="moon",p=["forest_cloud3","forest_cloud3big","forest_cloud3"],i="forest_boxone3",o="forest_boxtwo3";break;case u.Snow1:t="texture/snowmountain",n="snowmountain_boxtop1",s="snowmountain_boxbottom1",a="snowmountain_boxbottom1",c="snowmountain_foreground1",l="snowmountain_midshot1",r="snowmountain_perspective1",h="snowmountain_sun",p=["snowmountain_cloud1","snowmountain_cloud1","snowmountain_cloud1"],i="snow_boxone1",o="snow_boxtwo1";break;case u.Snow2:t="texture/snowmountain",n="snowmountain_boxtop2",s="snowmountain_boxbottom2",a="snowmountain_boxbottom2",c="snowmountain_foreground2",l="snowmountain_midshot2",r="snowmountain_perspective2",h="snowmountain_sun",p=["snowmountain_cloud2","snowmountain_cloud2big","snowmountain_cloud2"],i="snow_boxone2",o="snow_boxtwo2";break;case u.Snow3:t="texture/snowmountain",n="snowmountain_boxtop3",s="snowmountain_boxbottom3",a="snowmountain_boxbottom3",c="snowmountain_foreground3",l="snowmountain_midshot3",r="snowmountain_perspective3",h="moon",p=["snowmountain_cloud3","snowmountain_cloud3big","snowmountain_cloud3"],i="snow_boxone3",o="snow_boxtwo3";break;case u.Volcano1:t="texture/VolcanoGate",n="VolcanoGate_boxtop1",s="VolcanoGate_boxbottom1",a="VolcanoGate_boxbottom1",c="VolcanoGate_foreground1",l="VolcanoGate_midshot1",r="VolcanoGate_perspective1",h="VolcanoGate_sun",p=["volcano1_cloud1","volcano1_cloud2","volcano1_cloud1"],i="volcano_boxone1",o="volcano_boxtwo1";break;case u.Volcano2:t="texture/VolcanoGate",n="VolcanoGate_boxtop2",s="VolcanoGate_boxbottom2",a="VolcanoGate_boxbottom2",c="VolcanoGate_foreground2",l="VolcanoGate_midshot2",r="VolcanoGate_perspective2",h="VolcanoGate_sun",p=["volcano2_cloud1","volcano2_cloud2","volcano2_cloud1"],i="volcano_boxone2",o="volcano_boxtwo2";break;case u.Volcano3:t="texture/VolcanoGate",n="VolcanoGate_boxtop3",s="VolcanoGate_boxbottom3",a="VolcanoGate_boxbottom3",c="VolcanoGate_foreground3",l="VolcanoGate_midshot3",r="VolcanoGate_perspective3",h="moon",p=["volcano3_cloud1","volcano3_cloud2","volcano3_cloud1"],i="volcano_boxone3",o="volcano_boxtwo3"}var d={};return d.path=t,d.box1=i,d.box2=o,d.topin=s,d.topout=n,d.bottom=a,d.foreground=c,d.midshot=l,d.perspective=r,d.sun=h,d.clouds=p,d},GetExplorattionPath:function(e){var t="";switch(e){case 1:case 2:case 3:case 4:case 5:t="texture/farm";break;case 6:case 7:case 8:case 9:case 10:t="texture/forest";break;case 11:case 12:case 13:case 14:case 15:t="texture/snow";break;case 16:case 17:case 18:case 19:case 20:t="texture/volcano"}return t}},cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",PoolMng:"PoolMng"}],Win:[function(e,t,i){"use strict";cc._RF.push(t,"dde8awDcs1Cs6/Rwo1asviQ","Win"),cc.Class({extends:cc.Component,properties:{shine:cc.Node,tip:cc.Node,left:cc.Node,right:cc.Node,isWin:0},ctor:function(){this.show=!1},onLoad:function(){},showLose:function(){var e=cc.moveBy(.5,cc.v2(0,820)).easing(cc.easeBounceInOut());this.tip.runAction(cc.sequence(e,null)),e=cc.moveBy(.5,cc.v2(0,820)).easing(cc.easeBounceInOut()),this.shine.runAction(cc.sequence(e,null));var t=cc.repeatForever(cc.rotateBy(5,360));this.shine.runAction(t);var i=cc.callFunc(function(){},this);this.node.runAction(cc.sequence(cc.delayTime(.5),i))},showWin:function(){var e=this,t=this.left.getComponent("sp.Skeleton");t.setAnimation(0,"idle",!1),t.timeScale=1.2,(t=this.right.getComponent("sp.Skeleton")).setAnimation(0,"idle",!1),t.timeScale=1.2;var i=cc.callFunc(function(){e.showTip()},this);this.node.runAction(cc.sequence(cc.delayTime(.2),i));var o=this;t.setCompleteListener(function(e,t){o.left.active=!1,o.right.active=!1})},showTip:function(){var e=cc.moveBy(.5,cc.v2(0,820)).easing(cc.easeOut(3));this.tip.runAction(cc.sequence(e,null)),e=cc.moveBy(.5,cc.v2(0,820)).easing(cc.easeOut(3)),this.shine.runAction(cc.sequence(e,null));var t=cc.repeatForever(cc.rotateBy(5,360));this.shine.runAction(t);var i=cc.callFunc(function(){},this);this.node.runAction(cc.sequence(cc.delayTime(.5),i))},start:function(){}}),cc._RF.pop()},{}],en:[function(e,t,i){"use strict";cc._RF.push(t,"920c5VLzJxKjYCAoIUwUHym","en"),t.exports={example_case_tips_content:"The example case not support the current platform",example_case_nonsupport_native_desktop_tips:"The example case nonsupport the Mac platform and Windows platform",example_case_nonsupport_runtime_tips:"The example case does not support the runtime platform",example_case_nonsupport_mobile_tips:"The example case nonsupport mobile platforms",example_case_nonsupport_web_canvas_tips:"The example case nonsupport Canvas mode",example_case_support_webGl_tips:"The example case only supports WebGL mode",example_case_support_mobile_tips:"The example case only supports mobile platforms",example_case_support_mobile_android_tips:"The example case only supports Android mobile platform",example_case_support_native_chrome_tips:"The example case only supports Chrome browser (Native)",example_case_support_native_desktop_tips:"The example case only supports the Mac platform and Windows platform",example_case_nonsupport_preview_tips:"The example case nonsupport Preview",example_case_nonsupport_qqplay_tips:"The example case nonsupport QQplay",example_case_nonsupport_Wechatgame_tips:"The example case nonsupport Wechatgame","cases/01_graphics/01_sprite/AtlasSprite.fire.7":"This is Spirte Single.","cases/01_graphics/01_sprite/AtlasSprite.fire.11":"This is Spirte From Atlas.","cases/01_graphics/01_sprite/FilledSprite.fire.9":"Fill Type: HORIZONTAL","cases/01_graphics/01_sprite/FilledSprite.fire.15":"Fill Type: VERTICAL","cases/01_graphics/01_sprite/FilledSprite.fire.23":"FILL Type: RADIAL","cases/01_graphics/01_sprite/SimpleSprite.fire.7":"This is Simple Sprite.","cases/01_graphics/01_sprite/SlicedSprite.fire.7":"This is Sliced Sprite.","cases/01_graphics/01_sprite/TiledSprite.fire.6":"This is Tiled Sprite.","cases/01_graphics/01_sprite/ChangeColor.fire.1":"Draw Call should be changed when change color.","cases/01_graphics/01_sprite/TrimmedSprite.fire.7":"TRIMMED ","cases/01_graphics/01_sprite/TrimmedSprite.fire.12":"No TRIMMED","cases/01_graphics/02_particle/AutoRemoveParticle.fire.9":'Particle 1\n"Auto Remove On Finish" disabled',"cases/01_graphics/02_particle/AutoRemoveParticle.fire.13":'Particle 2\n"Auto Remove On Finish" enabled',"cases/01_graphics/02_particle/ToggleParticle.fire.6":'Press "Button" to toggle particle play',"cases/02_ui/01_widget/AdvancedWidget.fire.7":"Top Left","cases/02_ui/01_widget/AdvancedWidget.fire.9":"top: 10% left: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.14":"Top Left","cases/02_ui/01_widget/AdvancedWidget.fire.16":"top: -34px","cases/02_ui/01_widget/AdvancedWidget.fire.21":"Top Right","cases/02_ui/01_widget/AdvancedWidget.fire.23":"top: 10% right: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.28":"Left","cases/02_ui/01_widget/AdvancedWidget.fire.30":"left: -50px","cases/02_ui/01_widget/AdvancedWidget.fire.35":"Right","cases/02_ui/01_widget/AdvancedWidget.fire.37":"right: -50px","cases/02_ui/01_widget/AdvancedWidget.fire.42":"Bottom Left","cases/02_ui/01_widget/AdvancedWidget.fire.44":"bottom: 10% left: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.49":"Bottom","cases/02_ui/01_widget/AdvancedWidget.fire.51":"bottom: -34px","cases/02_ui/01_widget/AdvancedWidget.fire.56":"Bottom Right","cases/02_ui/01_widget/AdvancedWidget.fire.58":"bottom:10% right:6%","cases/02_ui/01_widget/AdvancedWidget.fire.63":"This is Advanced WIdget.","cases/02_ui/01_widget/AlignOnceWidget.fire.1":"AlignOne is false, It is always aligns","cases/02_ui/01_widget/AlignOnceWidget.fire.2":"AlignOne is true, It aligns only once","cases/02_ui/01_widget/AnimatedWidget.fire.9":"This is Animation Widget.","cases/02_ui/01_widget/AutoResize.fire.13":"This is Widget Auto Resize.","cases/02_ui/01_widget/WidgetAlign.fire.18":"This is Widget Align.","cases/02_ui/02_label/GoldBeatingAnime.js.1":"0","cases/02_ui/02_label/AlignFontLabel.fire.6":"Align Label","cases/02_ui/02_label/AlignFontLabel.fire.9":"Horizontal Align","cases/02_ui/02_label/AlignFontLabel.fire.14":"Hello! \nWelcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.16":"Align: LEFT","cases/02_ui/02_label/AlignFontLabel.fire.21":"Hello! \nWelcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.23":"Align: CENTER","cases/02_ui/02_label/AlignFontLabel.fire.28":"Hello! \nWelcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.30":"Align: RIGHT","cases/02_ui/02_label/AlignFontLabel.fire.33":"Vertical Align","cases/02_ui/02_label/AlignFontLabel.fire.38":"Welcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.40":"Align: TOP","cases/02_ui/02_label/AlignFontLabel.fire.45":"Welcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.47":"Align: CENTER","cases/02_ui/02_label/AlignFontLabel.fire.52":"Welcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.54":"Align: BOTTOM","cases/02_ui/02_label/SystemFontLabel.fire.6":"System Font","cases/02_ui/02_label/SystemFontLabel.fire.9":"Wrap","cases/02_ui/02_label/SystemFontLabel.fire.14":"This is System Font","cases/02_ui/02_label/SystemFontLabel.fire.16":"Overflow: CLAMP","cases/02_ui/02_label/SystemFontLabel.fire.21":"This is System Font","cases/02_ui/02_label/SystemFontLabel.fire.23":"Overflow: SHRINK","cases/02_ui/02_label/SystemFontLabel.fire.26":"No Wrap","cases/02_ui/02_label/SystemFontLabel.fire.31":"This is System Font","cases/02_ui/02_label/SystemFontLabel.fire.33":"Overflow: CLAMP","cases/02_ui/02_label/SystemFontLabel.fire.38":"This is System Font","cases/02_ui/02_label/SystemFontLabel.fire.40":"Overflow: SHRINK","cases/02_ui/02_label/SystemFontLabel.fire.45":"Hello! Welcome Come To Cocos Creator","cases/02_ui/02_label/SystemFontLabel.fire.47":"Overflow: RESZIE_HEIGHT","cases/02_ui/03_button/ButtonInScroll.js.1":"Top button clicked!","cases/02_ui/03_button/ButtonInScroll.js.2":"Bottom button clicked!","cases/02_ui/03_button/ButtonInScroll.fire.21":"Which button is clicked?","cases/02_ui/03_button/ButtonInScroll.fire.27":"drag to reveal more buttons","cases/02_ui/03_button/SimpleButton.js.1":"Left button clicked!","cases/02_ui/03_button/SimpleButton.js.2":"Right button clicked!","cases/02_ui/03_button/ButtonInteractable.fire.7":"PLAY","cases/02_ui/03_button/ButtonInteractable.fire.16":"STOP","cases/02_ui/03_button/ButtonInteractable.fire.21":"interactable: true","cases/02_ui/03_button/ButtonInteractable.fire.23":"interactable: false","cases/02_ui/03_button/ButtonInteractable.js.1":"interactable: ","cases/02_ui/03_button/ButtonInteractable.js.2":"interactable: ","cases/02_ui/03_button/SimpleButton.fire.6":"Which button is clicked?","cases/02_ui/04_progressbar/progressbar.fire.7":"Horizontal bar with progress 0.3","cases/02_ui/04_progressbar/progressbar.fire.11":"Horizontal bar reverse with progress 1.0","cases/02_ui/04_progressbar/progressbar.fire.15":"Vertical bar \nfrom bottom","cases/02_ui/04_progressbar/progressbar.fire.19":"Vertical bar \nfrom top","cases/02_ui/04_progressbar/progressbar.fire.23":"Progress bar with sprite","cases/02_ui/04_progressbar/progressbar.fire.28":"Progress bar with child sprite","cases/02_ui/05_scrollView/Item.js.1":"Tmpl#","cases/02_ui/05_scrollView/ListView.fire.23":"Item #00","cases/02_ui/05_scrollView/ScrollView.fire.7":"Scrollview full functionality","cases/02_ui/05_scrollView/ScrollView.fire.30":"Scrollview without inertia","cases/02_ui/05_scrollView/ScrollView.fire.53":"Scrollview without elastic","cases/02_ui/05_scrollView/ScrollView.fire.76":"Scrollview horizontal scroll only","cases/02_ui/05_scrollView/ScrollView.fire.93":"Scrollview vertical only","cases/02_ui/05_scrollView/ScrollView.fire.110":"Scrollview no scrollbar","cases/02_ui/06_layout/LayoutResizeContainer.fire.6":"Basic","cases/02_ui/06_layout/LayoutResizeContainer.fire.31":"Horizontal","cases/02_ui/06_layout/LayoutResizeContainer.fire.36":"Vertical","cases/02_ui/06_layout/LayoutResizeContainer.fire.41":"Grid Layout Axis horizontal","cases/02_ui/06_layout/LayoutResizeContainer.fire.46":"Grid Layout Axis vertical","cases/02_ui/06_layout/LayoutResizeChildren.fire.6":"Horizontal layout none","cases/02_ui/06_layout/LayoutResizeChildren.fire.31":"Vertical layout none","cases/02_ui/06_layout/LayoutResizeChildren.fire.48":"Grid start axis horizontal none","cases/02_ui/06_layout/LayoutResizeChildren.fire.85":"Grid start axis vertical none","cases/02_ui/06_layout/LayoutInScrollView.fire.6":"ScrollView with vertical  layout","cases/02_ui/06_layout/LayoutInScrollView.fire.40":"ScrollView with horizontal layout","cases/02_ui/06_layout/LayoutInScrollView.fire.74":"ScrollView with Grid Layout\nstart axis: horizontal ","cases/02_ui/06_layout/LayoutInScrollView.fire.144":"ScrollView with Grid Layout\nstart axis: vertical ","cases/02_ui/06_layout/LayoutNone.fire.6":"Basic layout, Type: None\nResize container","cases/02_ui/06_layout/LayoutNone.fire.35":"Horizontal layout None\nNo resize","cases/02_ui/06_layout/LayoutNone.fire.60":"Vertical layout, Type: None\nNo resize","cases/02_ui/06_layout/LayoutNone.fire.77":"Grid start axis: horizontal, Type: None\nNo resize","cases/02_ui/06_layout/LayoutNone.fire.142":"Grid start axis: vertical, Type: None\nNo resize","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.8":"x:0, y:0","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.12":"x:480, y:320","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.16":"x:960, y:640","cases/02_ui/07_editBox/editbox.js.1":"Enter Text: ","cases/02_ui/07_editBox/EditBox.fire.25":"Single Line Password:","cases/02_ui/07_editBox/EditBox.fire.27":"Single Line Text:","cases/02_ui/07_editBox/EditBox.fire.29":"Mutiple Line Text:","cases/02_ui/07_editBox/EditBox.fire.32":"Click","cases/02_ui/07_editBox/EditBox.fire.38":"Button must be on top of EditBox, \nand it should enable click.","cases/02_ui/09_videoplayer/fullscreenVideo.fire":"When you touch the screen, video will be played. \n It will be removed when video complete.","cases/02_ui/09_videoplayer/videoPlayer.nonsupport_fullscreen":"currect device does nonsupport fullscreen.","cases/03_gameplay/01_player_control/EventManager/KeyboardInput.fire.6":"Press 'A' or 'D' to control sheep","cases/03_gameplay/01_player_control/On/OnTouchCtrl.js.1":"touch (","cases/03_gameplay/01_player_control/On/OnTouchInput.fire.10":"Try touching anywhere.","cases/03_gameplay/01_player_control/On/OnMultiTouchInput.fire.20":"The sample can only be effective on mobile platforms!","cases/03_gameplay/01_player_control/On/OnMultiTouchInput.fire.21":"Use your fingers to zoom image!","cases/03_gameplay/01_player_control/On/DeviceMotion.fire.1":"Open Accelerometer","cases/03_gameplay/01_player_control/On/DeviceMotion.fire.2":"Close Accelerometer","cases/03_gameplay/02_actions/SimpleAction.fire.13":"This is Simple Action.","cases/03_gameplay/03_animation/AnimateCustomProperty.fire.14":"Label","cases/03_gameplay/03_animation/AnimateCustomProperty.fire.18":"This is Animate Custom Property.","cases/03_gameplay/03_animation/AnimationEvent.fire.6":"Start the first animation","cases/03_gameplay/03_animation/AnimationEvent.fire.14":"This is Animation Event.","cases/03_gameplay/03_animation/AnimationEvent.js.1":"Start the","cases/03_gameplay/03_animation/MoveAnimation.fire.11":"Linear","cases/03_gameplay/03_animation/MoveAnimation.fire.17":"Case In Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.23":"Case Out Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.29":"Case Out In Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.35":"Back Forward","cases/03_gameplay/03_animation/MoveAnimation.fire.41":"This is Move Animation.","cases/03_gameplay/03_animation/SpriteAnimation.fire.9":"This is SprieFrame Animation.","cases/03_gameplay/03_animation/CreateClip.fire.1":"Dynamic Creating AnimationClip","cases/04_audio/SimpleAudio.fire.6":"Enjoy the music!","cases/05_scripting/01_properties/NodeArray.fire.14":"This is Node Array.","cases/05_scripting/01_properties/NonSerialized.fire.6":"Label","cases/05_scripting/01_properties/NonSerialized.fire.8":"Label","cases/05_scripting/01_properties/NonSerialized.fire.10":"This is Non Serialized.","cases/05_scripting/01_properties/ReferenceType.fire.8":"Label","cases/05_scripting/01_properties/ReferenceType.fire.11":"This example does not include the runtime demonstration","cases/05_scripting/01_properties/ValueType.fire.6":"This example does not include the runtime demonstration","cases/05_scripting/02_prefab/InstantiatePrefab.fire.7":"This is Instantiate Prefab.","cases/05_scripting/03_events/EventInMask.fire.23":"Change order of nodes","cases/05_scripting/03_events/SimpleEvent.fire.19":"Touch event can support click","cases/05_scripting/03_events/SimpleEvent.fire.21":"Mouse event can support click, hover, wheel","cases/05_scripting/03_events/SimpleEvent.fire.23":"Custom event can be triggered manually\n(Click button above)","cases/05_scripting/03_events/SimpleEvent.fire.25":"This is Simple Event.","cases/05_scripting/03_events/TouchPropagation.fire.15":"This is Touch Propagation.","cases/05_scripting/03_events/MousePropagation.fire.1":"This is Mouse Propagation.","cases/05_scripting/04_scheduler/scheduleCallbacks.js.1":"5.00 s","cases/05_scripting/04_scheduler/scheduler.fire.9":"5.00 s","cases/05_scripting/04_scheduler/scheduler.fire.12":"Repeat Schedule","cases/05_scripting/04_scheduler/scheduler.fire.18":"Cancel Schedules","cases/05_scripting/04_scheduler/scheduler.fire.24":"Schedule Once","cases/05_scripting/04_scheduler/scheduler.fire.29":"Counter use update function to change string value each frame","cases/05_scripting/04_scheduler/scheduler.fire.31":"This is Scheduler.","cases/05_scripting/04_scheduler/recursiveScheduler.fire.0":"Click button to start recursive tasks, you should see task2 invoked at last.","cases/05_scripting/04_scheduler/recursiveScheduler.fire.1":"Task1 invoked","cases/05_scripting/04_scheduler/recursiveScheduler.fire.2":"Task2 invoked","cases/05_scripting/04_scheduler/recursiveScheduler.fire.3":"Start tasks","cases/05_scripting/05_cross_reference/CrossReference.fire.7":"Label","cases/05_scripting/05_cross_reference/CrossReference.fire.12":"Label","cases/05_scripting/05_cross_reference/CrossReference.fire.14":"This is Cross Reference.","cases/05_scripting/06_life_cycle/life_cycle.fire.6":"This is Life cycle.","cases/05_scripting/07_asset_loading/AssetLoading.fire.5":"Asset Loading","cases/05_scripting/07_asset_loading/AssetLoading.fire.9":"Load SpriteFrame","cases/05_scripting/07_asset_loading/AssetLoading.fire.15":"Load Texture","cases/05_scripting/07_asset_loading/AssetLoading.fire.21":"Load Audio","cases/05_scripting/07_asset_loading/AssetLoading.fire.27":"Load Txt","cases/05_scripting/07_asset_loading/AssetLoading.fire.33":"Load Font","cases/05_scripting/07_asset_loading/AssetLoading.fire.39":"Load Plist","cases/05_scripting/07_asset_loading/AssetLoading.fire.45":"Load Prefab","cases/05_scripting/07_asset_loading/AssetLoading.fire.51":"Load Scene","cases/05_scripting/07_asset_loading/AssetLoading.fire.57":"Load Animation","cases/05_scripting/07_asset_loading/AssetLoading.fire.59":"Load Spine","cases/05_scripting/07_asset_loading/AssetLoading.fire.65":"Not currently loaded Entity.","cases/05_scripting/07_asset_loading/AssetLoading.js.1":"Loaded ","cases/05_scripting/07_asset_loading/AssetLoading.js.2":"Play ","cases/05_scripting/07_asset_loading/AssetLoading.js.3":"Create ","cases/05_scripting/07_asset_loading/AssetLoading.js.4":"Playing Music.","cases/05_scripting/07_asset_loading/AssetLoading.js.5":"This is Font!","cases/05_scripting/07_asset_loading/LoadRes.fire.7":"By Type","cases/05_scripting/07_asset_loading/LoadRes.fire.10":"Load SpriteFrame","cases/05_scripting/07_asset_loading/LoadRes.fire.17":"By Url","cases/05_scripting/07_asset_loading/LoadRes.fire.20":"Load Prefab","cases/05_scripting/07_asset_loading/LoadResAll.fire.6":"LoadResDir","cases/05_scripting/07_asset_loading/LoadResAll.fire.24":"Load All","cases/05_scripting/07_asset_loading/LoadResAll.fire.30":"Load SpriteFrame All","cases/05_scripting/07_asset_loading/LoadResAll.fire.36":"Clear All","cases/05_scripting/08_module/load_module.fire.6":"Load Module","cases/05_scripting/08_module/load_module.fire.10":"Create Monster","cases/05_scripting/09_singleton/Singleton.fire.6":"This example does not include the runtime demonstration","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.1":"download complete!!","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.2":"dowloading: ","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.3":"click anywhere to download...","cases/05_scripting/10_loadingBar/loadingBar.fire.7":"Loading Completed","cases/05_scripting/10_loadingBar/loadingBar.fire.18":"Dowloading","cases/05_scripting/11_network/NetworkCtrl.js.1":"waiting...","cases/05_scripting/11_network/NetworkCtrl.js.2":"waiting...","cases/05_scripting/11_network/NetworkCtrl.js.3":"waiting...","cases/05_scripting/11_network/NetworkCtrl.js.4":"waiting...","cases/05_scripting/11_network/NetworkCtrl.js.5":"WebSocket\\nSend Binary WS was opened.","cases/05_scripting/11_network/NetworkCtrl.js.6":"WebSocket\\nResponse get.","cases/05_scripting/11_network/NetworkCtrl.js.7":"WebSocket\\nsendBinary Error was fired.","cases/05_scripting/11_network/NetworkCtrl.js.8":"WebSocket\\nwebsocket instance closed.","cases/05_scripting/11_network/NetworkCtrl.js.9":"WebSocket\\nSend Binary WS is waiting...","cases/05_scripting/11_network/NetworkCtrl.js.10":"WebSocket\\n","cases/05_scripting/11_network/NetworkCtrl.js.11":"SocketIO\\n","cases/05_scripting/11_network/NetworkCtrl.js.12":"SocketIO\\n","cases/05_scripting/11_network/NetworkCtrl.js.13":"SocketIO\\n","cases/05_scripting/11_network/NetworkCtrl.js.14":"SocketIO\\n","cases/05_scripting/11_network/network.fire.7":"Label","cases/05_scripting/11_network/network.fire.6":"XMLHttpRequest","cases/05_scripting/11_network/network.fire.11":"Label","cases/05_scripting/11_network/network.fire.10":"XMLHttpRequest (ArrayBuffer)","cases/05_scripting/11_network/network.fire.15":"Label","cases/05_scripting/11_network/network.fire.14":"WebSocket","cases/05_scripting/11_network/network.fire.19":"Label","cases/05_scripting/11_network/network.fire.18":"SocketIO","cases/05_scripting/11_network/download-web.fire.1.1":"Remote Audio DownLoad","cases/05_scripting/11_network/download-web.fire.1.2":"Remote Picture DownLoad","cases/05_scripting/11_network/download-web.fire.2":"Wait For DownLoading...","cases/05_scripting/11_network/download-web.fire.3":"DownLoad Process\uff1a","cases/05_scripting/11_network/download-web.fire.4.1":"Audio DownLoad Completed","cases/05_scripting/11_network/download-web.fire.4.2":"Picture DownLoad Completed","cases/05_scripting/11_network/download-web.fire.5.1":"Audio DownLoad Failed","cases/05_scripting/11_network/download-web.fire.5.2":"Picture DownLoad Failed","cases/05_scripting/11_network/download-web.fire.6":"Remote Url:","cases/05_scripting/11_network/download-web.fire.7":"download","cases/05_scripting/11_network/download-web.fire.8":"SlideToNext","cases/05_scripting/11_network/download-web.fire.9":"SlideToPreview","cases/05_scripting/11_network/download-web.fire.10":"Url Is Unavailable","cases/native_call/native_call.fire.1":"JS to JAVA reflection only works Android mobile platform!","cases/native_call/native_call.fire.2":"Click on the button calls the static method!","cases/native_call/native_call.fire.3":"Click","cases/collider/Category.fire.3":"Group: Collider","cases/collider/Category.fire.5":"Group: Collider","cases/collider/Category.fire.7":"Group: Collider","cases/collider/Category.fire.9":"Group: Default","cases/collider/Shape.fire.20":"Show Polygon","cases/collider/Shape.fire.27":"Show Circle","cases/collider/Shape.fire.34":"Show Box","cases/collider/Shape.fire.43":"Show Polygon","cases/collider/Shape.fire.50":"Show Circle","cases/collider/Shape.fire.57":"Show Box","cases/motionStreak/MotionStreak.fire.1":"Change MotionStreak","cases/spine/SpineBoy.fire.11":"Debug Slots","cases/spine/SpineBoy.fire.18":"Debug Bones","cases/spine/SpineBoy.fire.25":"Time Scale","cases/spine/SpineBoy.fire.36":"Stop","cases/spine/SpineBoy.fire.43":"Walk","cases/spine/SpineBoy.fire.50":"Run","cases/spine/SpineBoy.fire.58":"Jump","cases/spine/SpineBoy.fire.65":"Shoot","cases/tiledmap/Puzzle.fire.18":"You Win","cases/tiledmap/Puzzle.fire.21":"Restart","cases/tiledmap/Dynamic-Tiledmap.fire.22":"Dynamically created TiledMap","res/prefabs/ListItem.prefab.2":"Label ssss","res/prefabs/Monster.prefab.3":"Name:","res/prefabs/Monster.prefab.11":"Level :","res/prefabs/Monster.prefab.19":"Hp :","res/prefabs/Monster.prefab.27":"Attack :","res/prefabs/Monster.prefab.35":"Defense :","res/prefabs/loadItem.prefab.1":"Label","resources/test_assets/prefab.prefab.2":"This is Prefab","resources/test_assets/scene.fire.3":"Return Asset Loading Scene","resources/test_assets/scene.fire.6":"Return","scripts/Global/Menu.js.1":"Temporary lack of introduction","cases/subpackage":"Load Subpackage","cases/subpackage.loaded":"Subpackage is loaded","cases/subpackage.failed":"Failed to load the package, please check the console for details","scripts/AudioCtrl_Play":"Play","scripts/AUdioCtrl_Stop":"Stop","scripts/AUdioCtrl_Pause":"Pause","scripts/AUdioCtrl_Resume":"Resume","scripts/AUdioCtrl_StopAll":"StopAll","scripts/AUdioCtrl_PauseAll":"PauseAll","scripts/AUdioCtrl_ResumeAll":"ResumeAll",sprite_loadRes_asset_success:"Load Success",sprite_loadRes_asset_failed:"Load Failed"},cc._RF.pop()},{}],i18n:[function(e,t,i){"use strict";cc._RF.push(t,"93789C/shtIL6entYsZPjee","i18n");var o=e("polyglot"),n="zh"===cc.sys.language?e("zh"):e("en"),s=new o({phrases:n,allowMissing:!0});t.exports={init:function(t){lang=t,n=e("zh"===t?"zh":"en"),s.replace(n)},t:function(e,t){return s.t(e,t)}},cc._RF.pop()},{en:"en",polyglot:"polyglot",zh:"zh"}],levelEditor:[function(e,t,i){"use strict";cc._RF.push(t,"2c85fTr7H1Pj6xUh68zFNUp","levelEditor");var o=e("EnumDefine").CellType,n=e("EnumDefine").LevelEditorID,s=e("EnumDefine").ChestType,a=e("EnumDefine").MonsterShieldType,c=e("Utils").NUMROWS,l=(e("Utils").NUMCOLUMNS,e("JsonData"),e("PoolMng"),e("Utils"),92*c),r=92*c;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.leveltarget=this.node.getChildByName("\u5173\u5361\u76ee\u6807"),this.levelProbability=this.node.getChildByName("\u4e0b\u843d\u6982\u7387"),this.levelBoard=this.node.getChildByName("\u5143\u7d20\u5e03\u5c40"),this.levelMonsters=this.node.getChildByName("\u602a\u7269\u5e03\u5c40"),this._map={};var e={},t="\u5143\u7d201",i={celltype:o.Cell1,lv:1};e[t]=i,t="\u5143\u7d202",i={celltype:o.Cell2,lv:1},e[t]=i,t="\u5143\u7d203",i={celltype:o.Cell3,lv:1},e[t]=i,t="\u5143\u7d204",i={celltype:o.Cell4,lv:1},e[t]=i,t="\u5143\u7d205",i={celltype:o.Cell5,lv:1},e[t]=i,t="\u7a7a\u5143\u7d20",i={celltype:o.NoneCell,lv:1},e[t]=i,t="\u56fa\u6001\u5143\u7d20",i={celltype:o.SolidCell,lv:1},e[t]=i,t="\u6e05\u5c4f\u70b8\u5f39",i={celltype:o.ClearBombProp,lv:1},e[t]=i,t="\u4e0b\u843d\u7269\u4f53",i={celltype:o.DropBottomBox,lv:1},e[t]=i,t="\u6742\u83491",i={celltype:o.Weeds,lv:1},e[t]=i,t="\u6742\u83492",i={celltype:o.Weeds,lv:2},e[t]=i,t="\u6742\u83493",i={celltype:o.Weeds,lv:3},e[t]=i,t="\u6811\u68691",i={celltype:o.Stakes,lv:1},e[t]=i,t="\u6811\u68692",i={celltype:o.Stakes,lv:2},e[t]=i,t="\u6811\u68693",i={celltype:o.Stakes,lv:3},e[t]=i,t="\u7bf1\u7b061",i={celltype:o.Fence,lv:1},e[t]=i,t="\u7bf1\u7b062",i={celltype:o.Fence,lv:2},e[t]=i,t="\u7bf1\u7b063",i={celltype:o.Fence,lv:3},e[t]=i,t="\u7c98\u6db2\u8986\u76d6\u72691",i={celltype:o.BlockCover,lv:1},e[t]=i,t="\u7c98\u6db2\u8986\u76d6\u72692",i={celltype:o.BlockCover,lv:2},e[t]=i,t="\u7c98\u6db2\u8986\u76d6\u72693",i={celltype:o.BlockCover,lv:3},e[t]=i,t="\u94a5\u5319\u4e0a",i={celltype:o.KeyUp,lv:1},e[t]=i,t="\u94a5\u5319\u4e0b",i={celltype:o.KeyDown,lv:1},e[t]=i,t="\u94a5\u5319\u5de6",i={celltype:o.KeyLeft,lv:1},e[t]=i,t="\u94a5\u5319\u53f3",i={celltype:o.KeyRight,lv:1},e[t]=i,t="\u9053\u5177\u5b9d\u7bb1",i={celltype:o.Chest,lv:1,type:s.Prop},e[t]=i,t="\u6280\u80fd\u5b9d\u7bb1",i={celltype:o.Chest,lv:1,type:s.Skill},e[t]=i,t="\u91d1\u5e01\u5b9d\u7bb1",i={celltype:o.Chest,lv:1,type:s.Coin},e[t]=i,t="\u94bb\u77f3\u5b9d\u7bb1",i={celltype:o.Chest,lv:1,type:s.Diamond},e[t]=i,t="\u94bb\u77f3",i={celltype:o.BlockDiamond,lv:1},e[t]=i,t="\u9694\u79bb\u6761\u4e0a1\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:1,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u4e0a2\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:2,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u4e0a3\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:3,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u4e0b1\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:0,bcnt:1},e[t]=i,t="\u9694\u79bb\u6761\u4e0b2\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:0,bcnt:2},e[t]=i,t="\u9694\u79bb\u6761\u4e0b3\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:0,bcnt:3},e[t]=i,t="\u9694\u79bb\u6761\u5de61\u7ea7",i={celltype:o.BlockSide,lcnt:1,rcnt:0,tcnt:0,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u5de62\u7ea7",i={celltype:o.BlockSide,lcnt:2,rcnt:0,tcnt:0,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u5de63\u7ea7",i={celltype:o.BlockSide,lcnt:3,rcnt:0,tcnt:0,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u53f31\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:1,tcnt:0,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u53f32\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:2,tcnt:0,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u53f33\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:3,tcnt:0,bcnt:0},e[t]=i,this._map=e},start:function(){},readBoardCells:function(){var e=[],t=[],i=[];if(this.levelBoard)for(var n=this.levelBoard.children,s=0;s<n.length;s++){var a=n[s],c=a.name,h=this._map[c];if(h){var u={},p=a.position,d=(p.x+l/2-46)/92,f=(p.y+r/2-46)/92;switch(d=Math.round(d),f=Math.round(f),u.ID=h.celltype,u.ID){case o.Chest:u.column=d,u.row=f,u.lv=h.lv,u.ChestType=h.type,this.pushCellData(u,e);break;case o.BlockCover:u.column=d,u.row=f,u.lv=h.lv,this.pushCellData(u,i);break;case o.BlockSide:if(this.checkSameID(d,f,t))for(var m=0;m<t.length;m++){var v=t[m];v.row===f&&v.column===d&&(v.sideLNum+=h.lcnt,v.sideRNum+=h.rcnt,v.sideTNum+=h.tcnt,v.sideBNum+=h.bcnt,v.sideLNum=v.sideLNum>=3?3:v.sideLNum,v.sideRNum=v.sideRNum>=3?3:v.sideRNum,v.sideTNum=v.sideTNum>=3?3:v.sideTNum,v.sideBNum=v.sideBNum>=3?3:v.sideBNum)}else u.column=d,u.row=f,u.sideLNum=h.lcnt,u.sideRNum=h.rcnt,u.sideTNum=h.tcnt,u.sideBNum=h.bcnt,t.push(u);break;default:u.column=d,u.row=f,u.lv=h.lv,this.pushCellData(u,e)}}}var g={};return g.listCell=e,g.listSideCell=t,g.listCover=i,g},readGoles:function(){if(this.leveltarget){var e,t,i,o,s,a,c,l,r,h,u=this.leveltarget.getChildByName("\u6b65\u6570").getComponent("cc.Label").string;h=parseInt(u),a=this.getCellNum(this.leveltarget,"\u5ba0\u7269\u76d2\u5b50"),c=this.getCellNum(this.leveltarget,"\u5168\u5c4f\u70b8\u5f39"),l=this.getCellNum(this.leveltarget,"\u5b9d\u7bb1"),s=this.getCellNum(this.leveltarget,"\u6a59\u5b50"),e=this.getCellNum(this.leveltarget,"\u82f9\u679c"),i=this.getCellNum(this.leveltarget,"\u8304\u5b50"),o=this.getCellNum(this.leveltarget,"\u841d\u535c"),t=this.getCellNum(this.leveltarget,"\u897f\u7ea2\u67ff"),r=this.getCellNum(this.leveltarget,"\u963b\u6321\u7269\u4f53");var p={};p[n.Cell1]=t,p[n.Cell2]=i,p[n.Cell3]=s,p[n.Cell4]=e,p[n.Cell5]=o,p[n.DropBox]=a,p[n.Chest]=l,p[n.ClearBomb]=c,p[n.Step]=h,p[n.Block]=r;for(var d=[],f=[],m=["wave1","wave2","wave3","wave4","wave5"],v=0;v<m.length;v++){var g=this.levelMonsters.getChildByName(m[v]);g&&f.push(g)}for(var C=0;C<f.length;C++){var _=f[C];if(_&&_.active){var S=this.readWave(_);S&&d.push(S)}}var b={};return b.WaveDatas=d,b.WaveNum=d.length,b.GoleCells=p,b.CellsSpinVal=this.readDropCellsSpinVal(),b}},getCellNum:function(e,t){if(!e)return 0;var i=e.getChildByName(t),o=0;if(i&&i.active){var n=i.getChildByName("num").getComponent("cc.Label").string;o=parseInt(n)}return o},readDropCellsSpinVal:function(){var e=this.getCellNum(this.levelProbability,"\u897f\u7ea2\u67ff"),t=this.getCellNum(this.levelProbability,"\u8304\u5b50"),i=this.getCellNum(this.levelProbability,"\u6a59\u5b50"),n=this.getCellNum(this.levelProbability,"\u82f9\u679c"),s=this.getCellNum(this.levelProbability,"\u841d\u535c"),a={};return a[o.Cell1]=e,a[o.Cell2]=t,a[o.Cell3]=i,a[o.Cell4]=n,a[o.Cell5]=s,a},readWave:function(e){for(var t=[],i=e.children,n=0;n<i.length;n++){var s=i[n],a={};a.MonsterName=s.name;var c,l,r=o.UnKnown,h=o.UnKnown,u=this.readOneMonster(s);c=u[0],l=u[1];var p=u[2],d=u[3];"\u5143\u7d201"===c?r=o.Cell1:"\u5143\u7d202"===c?r=o.Cell2:"\u5143\u7d203"===c?r=o.Cell3:"\u5143\u7d204"===c?r=o.Cell4:"\u5143\u7d205"===c&&(r=o.Cell5),"\u5143\u7d201"===l?h=o.Cell1:"\u5143\u7d202"===l?h=o.Cell2:"\u5143\u7d203"===l?h=o.Cell3:"\u5143\u7d204"===l?h=o.Cell4:"\u5143\u7d205"===l&&(h=o.Cell5),a.addtionCellType=r,a.defenceCellType=h,a.saliveSkill=p,a.shieldlist=d,t.push(a)}return 0===t.length?null:t},readOneMonster:function(e){for(var t=e.children,i=-1,o=-1,n=!1,s=[],c=0;c<t.length;c++){var l=t[c],r=l.name;if("\u52a0\u6210"===r){if(l.children)i=l.children[0].name}else if("\u9632\u5fa1"===r){if(l.children)o=l.children[0].name}else if("\u553e\u6db2\u6280\u80fd"===r)n=!0;else if("\u7ea2\u8272\u602a\u7269\u76fe\u724c"===r){var h=l.getChildByName("num").getComponent("cc.Label").string,u=parseInt(h),p={};p.type=a.Cell1,p.num=u,s.push(p)}else if("\u84dd\u8272\u602a\u7269\u76fe\u724c"===r){var d=l.getChildByName("num").getComponent("cc.Label").string,f=parseInt(d),m={};m.type=a.Cell2,m.num=f,s.push(m)}else if("\u9ec4\u8272\u602a\u7269\u76fe\u724c"===r){var v=l.getChildByName("num").getComponent("cc.Label").string,g=parseInt(v),C={};C.type=a.Cell3,C.num=g,s.push(C)}else if("\u7eff\u8272\u602a\u7269\u76fe\u724c"===r){var _=l.getChildByName("num").getComponent("cc.Label").string,S=parseInt(_),b={};b.type=a.Cell4,b.num=S,s.push(b)}else if("\u6de1\u8272\u602a\u7269\u76fe\u724c"===r){var k=l.getChildByName("num").getComponent("cc.Label").string,y=parseInt(k),w={};w.type=a.Cell5,w.num=y,s.push(w)}}return[i,o,n,s]},pushCellData:function(e,t){this.checkSameID(e.column,e.row,t)||t.push(e)},checkSameID:function(e,t,i){for(var o=0;o<i.length;o++){var n=i[o];if(n.row===t&&n.column===e)return!0}return!1}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",PoolMng:"PoolMng",Utils:"Utils"}],loadStory:[function(e,t,i){"use strict";cc._RF.push(t,"2b04aQTSB1JWKhc8i6/9oaO","loadStory");e("Utils");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){}}),cc._RF.pop()},{Utils:"Utils"}],moveAction:[function(e,t,i){"use strict";cc._RF.push(t,"6cbe1a/8lVIeahA043aMiv9","moveAction"),cc.Class({extends:cc.Component,properties:{midbk:cc.Node},onLoad:function(){var e=cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeBounceOut(3)),t=cc.callFunc(function(){},this);this.midbk.runAction(cc.sequence(e,t))},start:function(){}}),cc._RF.pop()},{}],moveNode:[function(e,t,i){"use strict";cc._RF.push(t,"be07bR9MQJAM6c+i+Ae/Znz","moveNode");var o=!1,n=cc.v2(),s=cc.v2();cc.Class({extends:cc.Component,properties:{cameraNode:{default:null,type:cc.Node},NodesWidth:0},onLoad:function(){this.camera=this.cameraNode.getComponent(cc.Camera),this.pos1=cc.v2(),this.pos2=cc.v2()},start:function(){this.node.getContentSize(),cc.view.getVisibleOrigin(),cc.view.getVisibleSize();this.pos1=this.pos2=this.node.parent.convertToWorldSpace(this.node.getPosition())},moveNode:function(){this.camera.getWorldToCameraPoint(this.pos1,n),0==o&&(this.camera.getWorldToCameraPoint(this.pos2,s),o=!0);cc.visibleRect.width,this.camera.zoomRatio,this.node.getContentSize().width;this.node.x=this.node.x+2880,o=!1,log("pass left"),this.pos1=this.pos2=this.node.parent.convertToWorldSpace(this.node.getPosition())},moveLeft:function(){var e=this.node.getContentSize(),t=this.node.parent.convertToWorldSpace(this.node.getPosition());t.x=t.x+e.width/2;var i=cc.v2();this.camera.getWorldToCameraPoint(t,i),i.x<0&&(this.node.x+=this.NodesWidth)},moveRight:function(){var e=cc.view.getVisibleOrigin(),t=cc.view.getVisibleSize(),i=this.node.getContentSize(),o=this.node.parent.convertToWorldSpace(this.node.getPosition());o.x=o.x-i.width/2;var n=cc.v2();this.camera.getWorldToCameraPoint(o,n),n.x>e.x+t.width&&(this.node.x-=this.NodesWidth)},lateUpdate:function(e){this.moveLeft(),this.moveRight()}}),cc._RF.pop()},{}],polyglot:[function(e,t,i){(function(e){"use strict";cc._RF.push(t,"69decSgpRlE1rzEKp0RzG3V","polyglot");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e,n){"function"==typeof define&&define.amd?define([],function(){return n(e)}):"object"===(void 0===i?"undefined":o(i))?t.exports=n(e):e.Polyglot=n(e)})(void 0!==e?e:void 0,function(e){var t=String.prototype.replace;function i(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||h}i.VERSION="1.0.0",i.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},i.prototype.extend=function(e,t){var i;for(var n in e)e.hasOwnProperty(n)&&(i=e[n],t&&(n=t+"."+n),"object"===(void 0===i?"undefined":o(i))?this.extend(i,n):this.phrases[n]=i)},i.prototype.unset=function(e,t){var i;if("string"==typeof e)delete this.phrases[e];else for(var n in e)e.hasOwnProperty(n)&&(i=e[n],t&&(n=t+"."+n),"object"===(void 0===i?"undefined":o(i))?this.unset(i,n):delete this.phrases[n])},i.prototype.clear=function(){this.phrases={}},i.prototype.replace=function(e){this.clear(),this.extend(e)},i.prototype.t=function(e,i){var o,h;return"number"==typeof(i=null==i?{}:i)&&(i={smart_count:i}),"string"==typeof this.phrases[e]?o=this.phrases[e]:"string"==typeof i._?o=i._:this.allowMissing?o=e:(this.warn('Missing translation for key: "'+e+'"'),h=e),"string"==typeof o&&(i=function(e){var t={};for(var i in e)t[i]=e[i];return t}(i),h=function(e,i){for(var o in i)if("_"!==o&&i.hasOwnProperty(o)){var n=i[o];"string"==typeof n&&(n=t.call(i[o],l,r)),e=t.call(e,new RegExp("%\\{"+o+"\\}","g"),n)}return e}(h=function(e,i,o){var l,r,h;null!=o&&e?(r=e.split(n),h=r[function(e,t){return s[function(e){var t=function(e){var t,i,o,n={};for(t in e)if(e.hasOwnProperty(t))for(o in i=e[t])n[i[o]]=t;return n}(a);return t[e]||t.en}(e)](t)}(i,o)]||r[0],l=function(e){return t.call(e,c,"")}(h)):l=e;return l}(o,this.currentLocale,i.smart_count),i)),h},i.prototype.has=function(e){return e in this.phrases};var n="||||",s={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},a={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]};var c=/^\s+|\s+$/g;var l=/\$/g,r="$$$$";function h(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}return i}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],zh:[function(e,t,i){"use strict";cc._RF.push(t,"87f1fs0gohHDIfNg4aePXbt","zh"),t.exports={example_case_tips_content:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301\u5f53\u524d\u5e73\u53f0",example_case_nonsupport_native_desktop_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 Mac \u5e73\u53f0\u548c Windows \u5e73\u53f0",example_case_nonsupport_runtime_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 Runtime \u5e73\u53f0",example_case_nonsupport_mobile_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301\u79fb\u52a8\u5e73\u53f0",example_case_nonsupport_web_canvas_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 Canvas \u6a21\u5f0f",example_case_nonsupport_wechat_game_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 wechatGame \u5e73\u53f0",example_case_support_webGl_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u53ea\u652f\u6301 WebGL \u6a21\u5f0f",example_case_support_mobile_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u53ea\u652f\u6301\u79fb\u52a8\u5e73\u53f0",example_case_support_mobile_android_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u53ea\u652f\u6301 Android \u79fb\u52a8\u5e73\u53f0",example_case_support_native_chrome_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u53ea\u652f\u6301 PC \u5e73\u53f0\u4e0a\u7684 Chrome \u6d4f\u89c8\u5668",example_case_support_native_desktop_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u53ea\u652f\u6301 Mac \u5e73\u53f0\u548c Windows \u5e73\u53f0",example_case_support_wechat_game_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u652f\u6301 wechatGame \u5e73\u53f0",example_case_nonsupport_qqplay_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 QQplay \u5e73\u53f0",example_case_nonsupport_Wechatgame_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 Wechatgame \u5e73\u53f0","cases/01_graphics/01_sprite/AtlasSprite.fire.7":"\u8fd9\u4e2a\u7cbe\u7075\u6765\u81ea\u5355\u5f20\u56fe\u7247","cases/01_graphics/01_sprite/AtlasSprite.fire.11":"\u8fd9\u4e2a\u7cbe\u7075\u6765\u81ea\u56fe\u96c6","cases/01_graphics/01_sprite/FilledSprite.fire.9":"\u586b\u5145\u7c7b\u578b\uff1a\u6c34\u5e73","cases/01_graphics/01_sprite/FilledSprite.fire.15":"\u586b\u5145\u7c7b\u578b\uff1a\u5782\u76f4","cases/01_graphics/01_sprite/FilledSprite.fire.23":"\u586b\u5145\u7c7b\u578b\uff1a\u5706\u5f62","cases/01_graphics/01_sprite/SimpleSprite.fire.7":"\u8fd9\u662f\u666e\u901a\u7cbe\u7075","cases/01_graphics/01_sprite/SlicedSprite.fire.7":"\u8fd9\u662f\u4e5d\u5bab\u683c\u7cbe\u7075","cases/01_graphics/01_sprite/TiledSprite.fire.6":"\u8fd9\u662f\u5e73\u94fa\u7cbe\u7075","cases/01_graphics/01_sprite/ChangeColor.fire.1":"\u6539\u53d8\u989c\u8272\u5c06\u4f1a\u6539\u53d8 Draw Call","cases/01_graphics/01_sprite/TrimmedSprite.fire.7":"\u81ea\u52a8\u526a\u88c1 ","cases/01_graphics/01_sprite/TrimmedSprite.fire.12":"\u672a\u81ea\u52a8\u526a\u88c1","cases/01_graphics/02_particle/AutoRemoveParticle.fire.9":'\u7c92\u5b50 1\n"\u5b8c\u6210\u65f6\u81ea\u52a8\u79fb\u9664" \u7981\u6b62',"cases/01_graphics/02_particle/AutoRemoveParticle.fire.13":'\u7c92\u5b50 2\n"\u5b8c\u6210\u65f6\u81ea\u52a8\u79fb\u9664" \u5f00\u542f',"cases/01_graphics/02_particle/ToggleParticle.fire.6":'\u6309 "\u6309\u94ae" \u8fdb\u884c\u5f00\u5173\u7c92\u5b50\u64ad\u653e',"cases/02_ui/01_widget/AdvancedWidget.fire.7":"\u5de6\u4e0a","cases/02_ui/01_widget/AdvancedWidget.fire.9":"top: 10% left: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.14":"\u4e0a","cases/02_ui/01_widget/AdvancedWidget.fire.16":"top: -34px","cases/02_ui/01_widget/AdvancedWidget.fire.21":"\u53f3\u4e0a","cases/02_ui/01_widget/AdvancedWidget.fire.23":"top: 10% right: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.28":"\u5de6","cases/02_ui/01_widget/AdvancedWidget.fire.30":"left: -50px","cases/02_ui/01_widget/AdvancedWidget.fire.35":"\u53f3","cases/02_ui/01_widget/AdvancedWidget.fire.37":"right: -50px","cases/02_ui/01_widget/AdvancedWidget.fire.42":"\u5de6\u4e0b","cases/02_ui/01_widget/AdvancedWidget.fire.44":"bottom: 10% left: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.49":"\u4e0b","cases/02_ui/01_widget/AdvancedWidget.fire.51":"bottom: -34px","cases/02_ui/01_widget/AdvancedWidget.fire.56":"\u53f3\u4e0b","cases/02_ui/01_widget/AdvancedWidget.fire.58":"bottom:10% right:6%","cases/02_ui/01_widget/AdvancedWidget.fire.63":"\u9ad8\u7ea7\u6302\u4ef6","cases/02_ui/01_widget/AlignOnceWidget.fire.1":"AlignOne \u4e3a false \u65f6\uff0c\u4f1a\u4e00\u76f4\u4fdd\u6301\u5bf9\u9f50","cases/02_ui/01_widget/AlignOnceWidget.fire.2":"AlignOne \u4e3a true \u65f6\uff0c\u53ea\u5728 Widget \u751f\u6548\u65f6\u5bf9\u9f50\u4e00\u6b21","cases/02_ui/01_widget/AnimatedWidget.fire.9":"\u52a8\u753b\u6302\u4ef6\u3002","cases/02_ui/01_widget/WidgetAlign.fire.18":"\u6302\u4ef6\u5bf9\u9f50\u65b9\u5f0f\u3002","cases/02_ui/01_widget/AutoResize.fire.13":"\u6302\u4ef6\u81ea\u52a8\u8c03\u6574\u5927\u5c0f\u3002","cases/02_ui/02_label/GoldBeatingAnime.js.1":"0","cases/02_ui/02_label/AlignFontLabel.fire.6":"\u6587\u672c\u5bf9\u9f50","cases/02_ui/02_label/AlignFontLabel.fire.9":"\u6c34\u5e73\u5bf9\u9f50","cases/02_ui/02_label/AlignFontLabel.fire.14":"\u54c8\u5570\uff01\n\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.16":"\u5bf9\u9f50: \u9760\u5de6","cases/02_ui/02_label/AlignFontLabel.fire.21":"\u54c8\u5570\uff01\n\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.23":"\u5bf9\u9f50: \u5c45\u4e2d","cases/02_ui/02_label/AlignFontLabel.fire.28":"\u54c8\u5570\uff01\n\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.30":"\u5bf9\u9f50: \u9760\u53f3","cases/02_ui/02_label/AlignFontLabel.fire.33":"\u5782\u76f4\u5bf9\u9f50","cases/02_ui/02_label/AlignFontLabel.fire.38":"\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.40":"\u5bf9\u9f50: \u9876\u90e8","cases/02_ui/02_label/AlignFontLabel.fire.45":"\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.47":"\u5bf9\u9f50: \u5c45\u4e2d","cases/02_ui/02_label/AlignFontLabel.fire.52":"\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.54":"\u5bf9\u9f50: \u5e95\u90e8","cases/02_ui/02_label/SystemFontLabel.fire.6":"\u7cfb\u7edf\u5b57\u4f53","cases/02_ui/02_label/SystemFontLabel.fire.9":"\u6362\u884c","cases/02_ui/02_label/SystemFontLabel.fire.14":"\u8fd9\u662f\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53","cases/02_ui/02_label/SystemFontLabel.fire.16":"Overflow: CLAMP","cases/02_ui/02_label/SystemFontLabel.fire.21":"\u8fd9\u662f\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53","cases/02_ui/02_label/SystemFontLabel.fire.23":"Overflow: SHRINK","cases/02_ui/02_label/SystemFontLabel.fire.26":"\u4e0d\u6362\u884c","cases/02_ui/02_label/SystemFontLabel.fire.31":"\u8fd9\u662f\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53","cases/02_ui/02_label/SystemFontLabel.fire.33":"Overflow: CLAMP","cases/02_ui/02_label/SystemFontLabel.fire.38":"\u8fd9\u662f\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53","cases/02_ui/02_label/SystemFontLabel.fire.40":"Overflow: SHRINK","cases/02_ui/02_label/SystemFontLabel.fire.45":"\u54c8\u55bd! \u6b22\u8fce\u4f7f\u7528 Cocos Creator","cases/02_ui/02_label/SystemFontLabel.fire.47":"Overflow: RESZIE_HEIGHT","cases/02_ui/03_button/ButtonInScroll.js.1":"\u9876\u90e8\u6309\u94ae\u88ab\u70b9\u51fb\uff01","cases/02_ui/03_button/ButtonInScroll.js.2":"\u5e95\u90e8\u6309\u94ae\u88ab\u70b9\u51fb\uff01","cases/02_ui/03_button/ButtonInScroll.fire.21":"\u54ea\u4e2a\u6309\u94ae\u88ab\u70b9\u51fb\uff1f","cases/02_ui/03_button/ButtonInScroll.fire.27":"\u62d6\u52a8\u663e\u793a\u66f4\u591a\u6309\u94ae","cases/02_ui/03_button/SimpleButton.js.1":"\u5de6\u8fb9\u7684\u6309\u94ae\u88ab\u70b9\u51fb\uff01","cases/02_ui/03_button/SimpleButton.js.2":"\u53f3\u8fb9\u7684\u6309\u94ae\u88ab\u70b9\u51fb\uff01","cases/02_ui/03_button/ButtonInteractable.fire.7":"\u64ad\u653e","cases/02_ui/03_button/ButtonInteractable.fire.16":"\u505c\u6b62","cases/02_ui/03_button/ButtonInteractable.fire.21":"\u4ea4\u4e92(interactable): true","cases/02_ui/03_button/ButtonInteractable.fire.23":"\u4ea4\u4e92(interactable): false","cases/02_ui/03_button/ButtonInteractable.js.1":"\u4ea4\u4e92(interactable): ","cases/02_ui/03_button/ButtonInteractable.js.2":"\u4ea4\u4e92(interactable): ","cases/02_ui/03_button/SimpleButton.fire.6":"\u54ea\u4e2a\u6309\u94ae\u88ab\u70b9\u51fb\uff1f","cases/02_ui/05_scrollView/Item.js.1":"Tmpl#","cases/02_ui/04_progressbar/progressbar.fire.7":"\u6c34\u5e73\u8fdb\u5ea6\u6761\uff0c\u8fdb\u5ea6 0.3","cases/02_ui/04_progressbar/progressbar.fire.11":"\u53cd\u5411\u6c34\u5e73\u8fdb\u5ea6\u6761\uff0c\u8fdb\u5ea6 1.0","cases/02_ui/04_progressbar/progressbar.fire.15":"\u5782\u76f4\u8fdb\u5ea6\u6761 \n\u4ece\u4e0b\u5411\u4e0a","cases/02_ui/04_progressbar/progressbar.fire.19":"\u5782\u76f4\u8fdb\u5ea6\u6761 \n\u4ece\u4e0a\u5411\u4e0b","cases/02_ui/04_progressbar/progressbar.fire.23":"\u8bbe\u7f6e\u4e86\u7cbe\u7075\u7684\u8fdb\u5ea6\u6761","cases/02_ui/04_progressbar/progressbar.fire.28":"\u8bbe\u7f6e\u4e86\u7cbe\u7075\uff08\u5b50\u63a7\u4ef6\uff09\u7684\u8fdb\u5ea6\u6761","cases/02_ui/05_scrollView/ListView.fire.23":"Item #00","cases/02_ui/05_scrollView/ScrollView.fire.7":"Scrollview \u5b8c\u6574\u529f\u80fd","cases/02_ui/05_scrollView/ScrollView.fire.30":"Scrollview \u6ca1\u6709\u60ef\u6027","cases/02_ui/05_scrollView/ScrollView.fire.53":"Scrollview \u6ca1\u6709\u5f39\u6027","cases/02_ui/05_scrollView/ScrollView.fire.76":"Scrollview \u53ea\u80fd\u6c34\u5e73\u6eda\u52a8","cases/02_ui/05_scrollView/ScrollView.fire.93":"Scrollview \u53ea\u80fd\u5782\u76f4\u6eda\u52a8","cases/02_ui/05_scrollView/ScrollView.fire.110":"Scrollview \u6ca1\u6709\u6eda\u52a8\u6761","cases/02_ui/06_layout/LayoutInScrollView.fire.6":"ScrollView \u548c\u5782\u76f4\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutInScrollView.fire.40":"ScrollView \u548c\u6c34\u5e73\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutInScrollView.fire.74":"ScrollView \u548c\u6a2a\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668 ","cases/02_ui/06_layout/LayoutInScrollView.fire.144":"ScrollView \u548c\u7eb5\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668 ","cases/02_ui/06_layout/LayoutResizeChildren.fire.6":"\u6c34\u5e73\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutResizeChildren.fire.31":"\u5782\u76f4\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutResizeChildren.fire.48":"\u6a2a\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutResizeChildren.fire.85":"\u7eb5\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutResizeContainer.fire.6":"\u57fa\u672c","cases/02_ui/06_layout/LayoutResizeContainer.fire.31":"\u6c34\u5e73","cases/02_ui/06_layout/LayoutResizeContainer.fire.36":"\u5782\u76f4","cases/02_ui/06_layout/LayoutResizeContainer.fire.41":"\u6a2a\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutResizeContainer.fire.46":"\u7eb5\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.8":"x:0, y:0","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.12":"x:480, y:320","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.16":"x:960, y:640","cases/02_ui/07_editBox/editbox.js.1":"\u8f93\u5165\u6587\u672c: ","cases/02_ui/06_layout/LayoutNone.fire.6":"\u57fa\u672c\u5e03\u5c40\u5bb9\u5668, \u7c7b\u578b: None\n\u81ea\u52a8\u8c03\u6574\u5927\u5c0f","cases/02_ui/06_layout/LayoutNone.fire.35":"\u6c34\u5e73\u5e03\u5c40\u5bb9\u5668\uff0c\u7c7b\u578b: None\n\u4e0d\u81ea\u52a8\u8c03\u6574\u5927\u5c0f","cases/02_ui/06_layout/LayoutNone.fire.60":"\u5782\u76f4\u5e03\u5c40\u5bb9\u5668\uff0c\u7c7b\u578b: None\n\u4e0d\u81ea\u52a8\u8c03\u6574\u5927\u5c0f","cases/02_ui/06_layout/LayoutNone.fire.77":"\u6a2a\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668\uff0c\u7c7b\u578b: None\n\u4e0d\u81ea\u52a8\u8c03\u6574\u5927\u5c0f","cases/02_ui/06_layout/LayoutNone.fire.142":"\u7eb5\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668\uff0c\u7c7b\u578b: None\n\u4e0d\u81ea\u52a8\u8c03\u6574\u5927\u5c0f","cases/02_ui/07_editBox/EditBox.fire.25":"\u5355\u884c\u5bc6\u7801\u6846:","cases/02_ui/07_editBox/EditBox.fire.27":"\u5355\u884c\u6587\u672c\u6846:","cases/02_ui/07_editBox/EditBox.fire.29":"\u591a\u884c\u6587\u672c\u6846:","cases/02_ui/07_editBox/EditBox.fire.32":"\u70b9\u51fb","cases/02_ui/07_editBox/EditBox.fire.38":"\u6309\u94ae\u5fc5\u987b\u5728 EditBox \u7684\u4e0a\u9762, \n\u5e76\u4e14\u5b83\u5e94\u8be5\u5141\u8bb8\u70b9\u51fb.","cases/02_ui/09_videoplayer/fullscreenVideo.fire":"\u5f53\u60a8\u89e6\u6478\u5c4f\u5e55\u65f6\uff0c\u5c06\u64ad\u653e\u89c6\u9891\u3002\n \u89c6\u9891\u5b8c\u6210\u540e\uff0c\u5b83\u5c06\u88ab\u5220\u9664\u3002","cases/02_ui/09_videoplayer/videoPlayer.nonsupport_fullscreen":"\u5f53\u524d\u8bbe\u5907\u4e0d\u652f\u6301\u5168\u5c4f\u64ad\u653e","cases/03_gameplay/01_player_control/EventManager/KeyboardInput.fire.6":"\u6309 'A' \u6216 'D' \u952e\u63a7\u5236\u5c0f\u7ef5\u7f8a","cases/03_gameplay/01_player_control/On/OnTouchCtrl.js.1":"touch (","cases/03_gameplay/01_player_control/On/OnTouchInput.fire.10":"\u8bf7\u89e6\u6478\u4efb\u610f\u4f4d\u7f6e\u8bd5\u8bd5","cases/03_gameplay/01_player_control/On/OnMultiTouchInput.fire.20":"\u7528\u4f60\u7684\u624b\u6307\u653e\u7f29\u56fe\u7247\uff01","cases/03_gameplay/01_player_control/On/DeviceMotion.fire.1":"\u5f00\u542f \u91cd\u529b\u611f\u5e94","cases/03_gameplay/01_player_control/On/DeviceMotion.fire.2":"\u5173\u95ed \u91cd\u529b\u611f\u5e94","cases/03_gameplay/02_actions/SimpleAction.fire.13":"\u7b80\u5355\u7684\u52a8\u4f5c","cases/03_gameplay/03_animation/AnimateCustomProperty.fire.14":"Label","cases/03_gameplay/03_animation/AnimateCustomProperty.fire.18":"\u81ea\u5b9a\u4e49\u52a8\u753b\u5c5e\u6027","cases/03_gameplay/03_animation/AnimationEvent.js.1":"\u5f00\u59cb\u7b2c","cases/03_gameplay/03_animation/AnimationEvent.fire.6":"\u5f00\u59cb\u7b2c1\u4e2a\u52a8\u753b","cases/03_gameplay/03_animation/AnimationEvent.fire.14":"\u52a8\u753b\u4e8b\u4ef6","cases/03_gameplay/03_animation/MoveAnimation.fire.11":"Linear","cases/03_gameplay/03_animation/MoveAnimation.fire.17":"Case In Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.23":"Case Out Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.29":"Case Out In Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.35":"Back Forward","cases/03_gameplay/03_animation/MoveAnimation.fire.41":"\u8fd9\u662f\u4e00\u4e2a\u79fb\u52a8\u52a8\u753b\u3002","cases/03_gameplay/03_animation/SpriteAnimation.fire.9":"\u8fd9\u662f\u7cbe\u7075\u5e27\u52a8\u753b","cases/03_gameplay/03_animation/CreateClip.fire.1":"\u52a8\u6001\u521b\u5efa\u52a8\u753b\u526a\u8f91","cases/04_audio/SimpleAudio.fire.6":"\u4eab\u53d7\u97f3\u4e50!","cases/05_scripting/01_properties/NodeArray.fire.14":"\u8fd9\u662f\u8282\u70b9\u6570\u7ec4","cases/05_scripting/01_properties/NonSerialized.fire.6":"Label","cases/05_scripting/01_properties/NonSerialized.fire.8":"Label","cases/05_scripting/01_properties/NonSerialized.fire.10":"\u8fd9\u662f\u975e\u5e8f\u5217\u5316","cases/05_scripting/01_properties/ReferenceType.fire.8":"Label","cases/05_scripting/01_properties/ReferenceType.fire.11":"\u8fd9\u4e2a\u4f8b\u5b50\u4e0d\u5305\u62ec\u8fd0\u884c\u65f6\u6f14\u793a","cases/05_scripting/01_properties/ValueType.fire.6":"\u8fd9\u4e2a\u4f8b\u5b50\u4e0d\u5305\u62ec\u8fd0\u884c\u65f6\u6f14\u793a","cases/05_scripting/02_prefab/InstantiatePrefab.fire.7":"\u5b9e\u4f8b\u5316\u9884\u5236\u8d44\u6e90","cases/05_scripting/03_events/EventInMask.fire.23":"\u66f4\u6539\u8282\u70b9\u6392\u5e8f","cases/05_scripting/03_events/SimpleEvent.fire.19":"\u89e6\u6478\u4e8b\u4ef6\u53ef\u4ee5\u652f\u6301\u70b9\u51fb","cases/05_scripting/03_events/SimpleEvent.fire.21":"\u9f20\u6807\u4e8b\u4ef6\u53ef\u4ee5\u652f\u6301\u5355\u51fb\u3001\u60ac\u505c\u3001\u6eda\u8f6e","cases/05_scripting/03_events/SimpleEvent.fire.23":"\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53ef\u4ee5\u624b\u52a8\u89e6\u53d1\n(\u70b9\u51fb\u4e0a\u9762\u7684\u6309\u94ae)","cases/05_scripting/03_events/SimpleEvent.fire.25":"\u57fa\u672c\u4e8b\u4ef6","cases/05_scripting/03_events/TouchPropagation.fire.15":"\u89e6\u6478\u4e8b\u4ef6\u5192\u6ce1","cases/05_scripting/03_events/MousePropagation.fire.1":"\u9f20\u6807\u4e8b\u4ef6\u5192\u6ce1","cases/05_scripting/04_scheduler/scheduleCallbacks.js.1":"5.00 s","cases/05_scripting/04_scheduler/scheduler.fire.9":"5.00 s","cases/05_scripting/04_scheduler/scheduler.fire.12":"\u91cd\u590d\u5b9a\u65f6\u5668","cases/05_scripting/04_scheduler/scheduler.fire.18":"\u53d6\u6d88\u5b9a\u65f6\u5668","cases/05_scripting/04_scheduler/scheduler.fire.24":"\u5b9a\u65f6\u6267\u884c1\u6b21","cases/05_scripting/04_scheduler/scheduler.fire.29":"\u4f7f\u7528 update \u51fd\u6570\u6bcf\u5e27\u66f4\u65b0\u8ba1\u6570","cases/05_scripting/04_scheduler/scheduler.fire.31":"\u5b9a\u65f6\u5668","cases/05_scripting/04_scheduler/recursiveScheduler.fire.0":"\u70b9\u51fb\u6309\u94ae\u5f00\u59cb\u6267\u884c\u9012\u5f52\u4efb\u52a1\uff0c\u4f60\u6700\u7ec8\u5e94\u8be5\u770b\u5230'\u4efb\u52a12\u6267\u884c\u5b8c\u6210'","cases/05_scripting/04_scheduler/recursiveScheduler.fire.1":"\u4efb\u52a11\u6267\u884c\u5b8c\u6210","cases/05_scripting/04_scheduler/recursiveScheduler.fire.2":"\u4efb\u52a12\u6267\u884c\u5b8c\u6210","cases/05_scripting/04_scheduler/recursiveScheduler.fire.3":"\u5f00\u59cb\u4efb\u52a1","cases/05_scripting/05_cross_reference/CrossReference.fire.7":"Label","cases/05_scripting/05_cross_reference/CrossReference.fire.12":"Label","cases/05_scripting/05_cross_reference/CrossReference.fire.14":"\u4ea4\u53c9\u5f15\u7528","cases/05_scripting/06_life_cycle/life_cycle.fire.6":"\u751f\u547d\u5468\u671f","cases/05_scripting/07_asset_loading/AssetLoading.fire.5":"\u8d44\u6e90\u52a0\u8f7d","cases/05_scripting/07_asset_loading/AssetLoading.fire.9":"\u52a0\u8f7d SpriteFrame","cases/05_scripting/07_asset_loading/AssetLoading.fire.15":"\u52a0\u8f7d Texture","cases/05_scripting/07_asset_loading/AssetLoading.fire.21":"\u52a0\u8f7d Audio","cases/05_scripting/07_asset_loading/AssetLoading.fire.27":"\u52a0\u8f7d Txt","cases/05_scripting/07_asset_loading/AssetLoading.fire.33":"\u52a0\u8f7d Font","cases/05_scripting/07_asset_loading/AssetLoading.fire.39":"\u52a0\u8f7d Plist","cases/05_scripting/07_asset_loading/AssetLoading.fire.45":"\u52a0\u8f7d Prefab","cases/05_scripting/07_asset_loading/AssetLoading.fire.51":"\u52a0\u8f7d Scene","cases/05_scripting/07_asset_loading/AssetLoading.fire.57":"\u52a0\u8f7d Animation","cases/05_scripting/07_asset_loading/AssetLoading.fire.59":"\u52a0\u8f7d Spine","cases/05_scripting/07_asset_loading/AssetLoading.fire.65":"\u5f53\u524d\u5c1a\u65e0\u52a0\u8f7d\u3002","cases/05_scripting/07_asset_loading/AssetLoading.js.1":"\u5df2\u52a0\u8f7d ","cases/05_scripting/07_asset_loading/AssetLoading.js.2":"\u64ad\u653e ","cases/05_scripting/07_asset_loading/AssetLoading.js.3":"\u521b\u5efa ","cases/05_scripting/07_asset_loading/AssetLoading.js.4":"\u64ad\u653e\u97f3\u4e50\u3002","cases/05_scripting/07_asset_loading/AssetLoading.js.5":"\u8fd9\u662f\u5b57\u4f53\uff01","cases/05_scripting/07_asset_loading/LoadRes.fire.7":"\u6309\u7c7b\u578b","cases/05_scripting/07_asset_loading/LoadRes.fire.10":"\u52a0\u8f7d SpriteFrame","cases/05_scripting/07_asset_loading/LoadRes.fire.17":"\u6309 Url","cases/05_scripting/07_asset_loading/LoadRes.fire.20":"\u52a0\u8f7d\u9884\u5236\u8d44\u6e90","cases/05_scripting/07_asset_loading/LoadResAll.fire.6":"\u8fd9\u4e2a\u4f8b\u5b50\u4e0d\u5305\u62ec\u8fd0\u884c\u65f6\u6f14\u793a","cases/05_scripting/07_asset_loading/LoadResAll.fire.24":"\u5168\u90e8\u52a0\u8f7d","cases/05_scripting/07_asset_loading/LoadResAll.fire.30":"\u52a0\u8f7d\u5168\u90e8\u7684SpriteFrame","cases/05_scripting/07_asset_loading/LoadResAll.fire.36":"\u6e05\u7a7a","cases/05_scripting/08_module/load_module.fire.6":"\u52a0\u8f7d\u6a21\u5757","cases/05_scripting/08_module/load_module.fire.10":"\u521b\u5efa\u602a\u7269","cases/05_scripting/09_singleton/Singleton.fire.6":"\u8fd9\u4f8b\u5b50\u4e0d\u5305\u542b\u8fd0\u884c\u65f6\u6f14\u793a","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.1":"\u4e0b\u8f7d\u5b8c\u6210!!","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.2":"\u6b63\u5728\u4e0b\u8f7d: ","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.3":"\u70b9\u51fb\u4efb\u610f\u5730\u65b9\u8fdb\u884c\u4e0b\u8f7d...","cases/05_scripting/10_loadingBar/loadingBar.fire.7":"\u52a0\u8f7d\u5b8c\u6210","cases/05_scripting/10_loadingBar/loadingBar.fire.18":"\u6b63\u5728\u4e0b\u8f7d","cases/05_scripting/11_network/NetworkCtrl.js.1":"\u8bf7\u7a0d\u7b49...","cases/05_scripting/11_network/NetworkCtrl.js.2":"\u8bf7\u7a0d\u7b49...","cases/05_scripting/11_network/NetworkCtrl.js.3":"\u8bf7\u7a0d\u7b49...","cases/05_scripting/11_network/NetworkCtrl.js.4":"\u8bf7\u7a0d\u7b49...","cases/05_scripting/11_network/NetworkCtrl.js.5":"WebSocket\n\u53d1\u9001\u4e8c\u8fdb\u5236WS\u5df2\u6253\u5f00.","cases/05_scripting/11_network/NetworkCtrl.js.6":"WebSocket\n\u6536\u5230\u54cd\u5e94.","cases/05_scripting/11_network/NetworkCtrl.js.7":"WebSocket\n\u53d1\u9001\u4e8c\u8fdb\u5236\u9047\u5230\u9519\u8bef.","cases/05_scripting/11_network/NetworkCtrl.js.8":"WebSocket\nwebsocket \u5b9e\u4f8b\u5df2\u5173\u95ed.","cases/05_scripting/11_network/NetworkCtrl.js.9":"WebSocket\n\u53d1\u9001\u4e8c\u8fdb\u5236WS\u7b49\u5f85\u4e2d...","cases/05_scripting/11_network/NetworkCtrl.js.10":"WebSocket\n","cases/05_scripting/11_network/NetworkCtrl.js.11":"SocketIO\n","cases/05_scripting/11_network/NetworkCtrl.js.12":"SocketIO\n","cases/05_scripting/11_network/NetworkCtrl.js.13":"SocketIO\n","cases/05_scripting/11_network/NetworkCtrl.js.14":"SocketIO\n","cases/05_scripting/11_network/network.fire.7":"Label","cases/05_scripting/11_network/network.fire.6":"XMLHttpRequest","cases/05_scripting/11_network/network.fire.11":"Label","cases/05_scripting/11_network/network.fire.10":"XMLHttpRequest (ArrayBuffer)","cases/05_scripting/11_network/network.fire.15":"Label","cases/05_scripting/11_network/network.fire.14":"WebSocket","cases/05_scripting/11_network/network.fire.19":"Label","cases/05_scripting/11_network/network.fire.18":"SocketIO","cases/05_scripting/11_network/download-web.fire.1.1":"\u8fdc\u7a0b\u97f3\u9891\u8d44\u6e90\u4e0b\u8f7d","cases/05_scripting/11_network/download-web.fire.1.2":"\u8fdc\u7a0b\u56fe\u7247\u8d44\u6e90\u4e0b\u8f7d","cases/05_scripting/11_network/download-web.fire.2":"\u7b49\u5f85\u4e0b\u8f7d\u4e2d...","cases/05_scripting/11_network/download-web.fire.3":"\u4e0b\u8f7d\u8fdb\u5ea6\uff1a","cases/05_scripting/11_network/download-web.fire.4.1":"\u8fdc\u7a0b\u97f3\u9891\u8d44\u6e90\u4e0b\u8f7d\u5b8c\u6210","cases/05_scripting/11_network/download-web.fire.4.2":"\u8fdc\u7a0b\u56fe\u7247\u8d44\u6e90\u4e0b\u8f7d\u5b8c\u6210","cases/05_scripting/11_network/download-web.fire.5.1":"\u8fdc\u7a0b\u97f3\u9891\u8d44\u6e90\u4e0b\u8f7d\u5931\u8d25","cases/05_scripting/11_network/download-web.fire.5.2":"\u8fdc\u7a0b\u56fe\u7247\u8d44\u6e90\u4e0b\u8f7d\u5931\u8d25","cases/05_scripting/11_network/download-web.fire.6":"\u8d44\u6e90\u5730\u5740\uff1a","cases/05_scripting/11_network/download-web.fire.7":"\u4e0b\u8f7d","cases/05_scripting/11_network/download-web.fire.8":"\u6ed1\u52a8\u5230\u4e0b\u4e00\u9875","cases/05_scripting/11_network/download-web.fire.9":"\u6ed1\u52a8\u5230\u4e0a\u4e00\u9875","cases/05_scripting/11_network/download-web.fire.10":"\u52a0\u8f7d\u5730\u5740\u65e0\u6548","cases/native_call/native_call.fire.1":"\u70b9\u51fb\u6309\u94ae\u8c03\u7528\u9759\u6001\u65b9\u6cd5\uff01","cases/native_call/native_call.fire.2":"\u70b9\u51fb","cases/collider/Category.fire.3":"\u7ec4: \u78b0\u649e","cases/collider/Category.fire.5":"\u7ec4: \u78b0\u649e","cases/collider/Category.fire.7":"\u7ec4: \u78b0\u649e","cases/collider/Category.fire.9":"\u7ec4: \u9ed8\u8ba4","cases/collider/Shape.fire.20":"\u663e\u793a\u591a\u8fb9\u5f62","cases/collider/Shape.fire.27":"\u663e\u793a\u5706","cases/collider/Shape.fire.34":"\u663e\u793a\u76d2\u5b50","cases/collider/Shape.fire.43":"\u663e\u793a\u591a\u8fb9\u5f62","cases/collider/Shape.fire.50":"\u663e\u793a\u5706","cases/collider/Shape.fire.57":"\u663e\u793a\u76d2\u5b50","cases/motionStreak/MotionStreak.fire.1":"\u6539\u53d8\u62d6\u5c3e","cases/spine/SpineBoy.fire.11":"\u8c03\u8bd5\u63d2\u69fd","cases/spine/SpineBoy.fire.18":"\u8c03\u8bd5\u5173\u8282","cases/spine/SpineBoy.fire.25":"\u65f6\u95f4\u7f29\u653e","cases/spine/SpineBoy.fire.36":"\u505c\u6b62","cases/spine/SpineBoy.fire.43":"\u8d70","cases/spine/SpineBoy.fire.50":"\u8dd1","cases/spine/SpineBoy.fire.58":"\u8df3","cases/spine/SpineBoy.fire.65":"\u5c04\u51fb","cases/tiledmap/Puzzle.fire.18":"\u4f60\u8d62\u4e86","cases/tiledmap/Puzzle.fire.21":"\u91cd\u65b0\u5f00\u59cb","cases/tiledmap/Dynamic-Tiledmap.fire.22":"\u52a8\u6001\u521b\u5efa TiledMap","res/prefabs/ListItem.prefab.2":"Label ssss","res/prefabs/Monster.prefab.3":"\u540d\u5b57:","res/prefabs/Monster.prefab.11":"\u7b49\u7ea7 :","res/prefabs/Monster.prefab.19":"\u8840\u91cf :","res/prefabs/Monster.prefab.27":"\u653b\u51fb :","res/prefabs/Monster.prefab.35":"\u9632\u5fa1 :","res/prefabs/loadItem.prefab.1":"Label","resources/test_assets/prefab.prefab.2":"\u8fd9\u662f\u4e00\u4e2a\u9884\u5236","resources/test_assets/scene.fire.3":"\u8fd4\u56de\u8d44\u6e90\u52a0\u8f7d\u573a\u666f","resources/test_assets/scene.fire.6":"\u8fd4\u56de","scripts/Global/Menu.js.1":"\u8bf4\u660e\u6682\u7f3a","cases/subpackage":"\u52a0\u8f7d\u5b50\u5305","cases/subpackage.loaded":"\u5b50\u5305\u5df2\u7ecf\u6210\u529f\u52a0\u8f7d","scripts/AudioCtrl_Play":"\u64ad\u653e","scripts/AUdioCtrl_Stop":"\u505c\u6b62","scripts/AUdioCtrl_Pause":"\u6682\u505c","scripts/AUdioCtrl_Resume":"\u6062\u590d","scripts/AUdioCtrl_StopAll":"\u505c\u6b62\u6240\u6709","scripts/AUdioCtrl_PauseAll":"\u6682\u505c\u6240\u6709","scripts/AUdioCtrl_ResumeAll":"\u6062\u590d\u6240\u6709",sprite_loadRes_asset_success:"\u8d44\u6e90\u52a0\u8f7d\u6210\u529f",sprite_loadRes_asset_failed:"\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"},cc._RF.pop()},{}]},{},["LabelLocalized","en","zh","i18n","polyglot","LoadingBarCtrl","Sort","AudioEngineControl","AudioSourceControl","PlayBkAudios","PlayFightAudio","UISoundAudio","BlockCover","BlockSide","Board","BossRoad","Boxes","Cell","CellAttack","CellBlood","CellsAnimation","DrawLine","DropCell","DropFromSide","HurtCell","Portal","ProcessBoardCell","PropCellAttackArea","PropHVSkill","RemoveCells","Rocket","RolePetSkills","SideCell","SidePropSkill","SpawnCells","StepAward","CameraControl","CanvasInit","CloudMove","EnumDefine","Game","BattleGuide","BossFightGuide","OpenBox","RoleBattleGuide","JsonData","JsonDataType","LoadingBar","LoadlevelEditor","ChestReWard","Exploration","Flag","LevelBtn","LevelGole","LevelNode","MapFlag","MapStage","MapUI","StageButton","StageUI","MoveCameraShot","PlayAnimation","BombEffectPool","BulletPool","CellBloodPool","CellPool","CoinPool","PoolMng","PropCellPool","Actor","ActorShoot","ActorSkill","Bullet","Monster","MonsterMove","MonsterShield","MonsterSkill","PetRoleBox","PetSkill","RPG","RoleMove","ShootBullet","Singleton","SpawnActor","SpawnMonster","SwitchPetSkill","SwitchRoleSkill","ShootSkill","CameraManager","LocalStorage","RPGManager","Spin","SpinChest","SpinPetExtraction","SpinReward","ProcessStory","ShowFloatWord","Win","Achievement","ActorUI","ActorUIPage","PageViewCtrl","Pet","PetItem","Pets","RolePetUI","RoleSkillUI","UpGradeActorUI","AddTime","BaseUI","CoinUI","DayReWard","DiamondUI","EveryDayLogin","FightUI","MainUI","PauseUI","PetSkillUI","BattlePets","PetExtraction","PetInfo","PetPage","PetUI","Set","StepUI","StoryUI","UIBase","moveAction","Utils","levelEditor","loadStory","moveNode","ShaderComponent","ShaderLab","ShaderManager","ShaderMaterial"]);