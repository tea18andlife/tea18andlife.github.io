window.__require=function e(t,i,o){function s(a,c){if(!i[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+a+"'")}}var h=i[a]={exports:{}};t[a][0].call(h.exports,function(e){return s(t[a][1][e]||e)},h,h.exports,e,t,i,o)}return i[a].exports}for(var n="function"==typeof __require&&__require,a=0;a<o.length;a++)s(o[a]);return s}({AchieveItem:[function(e,t,i){"use strict";cc._RF.push(t,"110a5Tv1GlBk6XPrqOUMFV9","AchieveItem");var o=e("Utils"),s=(e("EnumDefine").AchieveType,e("LocalStorage")),n=o.ProduceType;cc.Class({extends:cc.Component,properties:{title:cc.Label,coin:cc.Node,diamond:cc.Node,key:cc.Node,doneBtn:cc.Button},ctor:function(){this.canGet=!1,this.haveDone=!1},onLoad:function(){this.coin.active=!1,this.diamond.active=!1,this.key.active=!1},start:function(){},init:function(e,t,i){this.data=e,this.uibase=t,this.achieveType=i,this.title.string=e.ch;var o=this.coin.getChildByName("num"),n=o.getComponent(cc.Label);n.string=e.coin+"",(n=(o=this.diamond.getChildByName("num")).getComponent(cc.Label)).string=e.diamond+"",(n=(o=this.key.getChildByName("num")).getComponent(cc.Label)).string=e.key+"";var a=[];if(e.coin>0&&(this.coin.active=!0,a.push(this.coin)),e.diamond>0&&(this.diamond.active=!0,a.push(this.diamond)),e.key>0&&(this.key.active=!0,a.push(this.key)),1===a.length){var c=a[0];c.y=0,c.x=this.coin.x}else if(2===a.length){var r=a[0],l=a[1];r.y=this.coin.y,l.y=this.diamond.y,r.x=this.coin.x,l.x=this.coin.x}var h=this.achieveType+""+e.ID;s.instance.getAchieveIsHave(h)?s.instance.getAchieveDone(h)?(this.doneBtn.interactable=!1,this.doneBtn.enableAutoGrayEffect=!0,this.doneBtn.node.getChildByName("title").getComponent("cc.Label").string="\u5df2\u9886\u53d6",this.haveDone=!0):this.canGet=!0:(this.doneBtn.interactable=!1,this.doneBtn.enableAutoGrayEffect=!0,this.doneBtn.node.getChildByName("title").getComponent("cc.Label").string="\u9886\u53d6")},setDone:function(){var e=this.achieveType+""+this.data.ID;s.instance.setAchieveDone(e),this.doneBtn.interactable=!1,this.doneBtn.enableAutoGrayEffect=!0,this.doneBtn.node.getChildByName("title").getComponent("cc.Label").string="\u5df2\u9886\u53d6"},getBtn:function(){this.produceCoin(this.data.coin),this.produceDiamond(this.data.diamond),this.produceKey(this.data.key),this.setDone()},produceKey:function(e){if(!(e<=0)){var t=s.instance.getFreeSpinVal();t+=e,s.instance.setFreeSpinVal(t);var i=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/SpinRewardKey",function(t,o){t&&cc.error(t);var s=cc.instantiate(o);s.active=!0,s.parent=i,s.group="UI",s.zIndex=10,s.position=cc.v2(0,0);var n=s.getChildByName("num");if(n){var a=n.getComponent(cc.Label);a&&(a.string=e+"")}var c=cc.moveBy(1,cc.v2(0,50)),r=cc.scaleTo(.1,1).easing(cc.easeOut(3)),l=cc.spawn(c,r);s.runAction(cc.sequence(l,cc.removeSelf()))})}},produceDiamond:function(e){if(!(e<=0)){var t=cc.director.getScene()._children[0],i=this.uibase,s=(i.coinlabel,i.diamondlabel),a=this.diamond,c=a.parent.convertToWorldSpaceAR(a.position);c=t.convertToNodeSpaceAR(c);var r=s.node.parent.convertToWorldSpaceAR(s.node.position);r=t.convertToNodeSpaceAR(r);var l=e/10;l=Math.floor(l);var h=function(){i.updateDiamond(l),i.playCoin()}.bind(this);o.produceRandomNodeLineMove(n.Diamond,10,c,r,t,h,null,"UI")}},produceCoin:function(e){if(!(e<=0)){var t=cc.director.getScene()._children[0],i=this.uibase,s=i.coinlabel,a=(i.diamondlabel,this.coin),c=a.parent.convertToWorldSpaceAR(a.position);c=t.convertToNodeSpaceAR(c);var r=s.node.parent.convertToWorldSpaceAR(s.node.position);r=t.convertToNodeSpaceAR(r);var l=parseInt(e/10),h=parseInt(e%10),u=function(){i.updateCoin(l),i.playCoin()}.bind(this),d=l;0!=h&&(d=h);var p=function(){i.updateCoin(d),i.playCoin()}.bind(this);o.produceRandomNodeLineMove(n.ButtonCoin,10,c,r,t,u,p,"UI")}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],AchieveManager:[function(e,t,i){"use strict";cc._RF.push(t,"3837dzB49lMaInGrBHMflWM","AchieveManager");e("Utils");var o=e("EnumDefine"),s=o.AchieveType,n=(o.ActorType,e("LocalStorage")),a=cc.Class({extends:cc.Component,properties:{},onLoad:function(){a.instance=this,this.achieveDatas={},this.initAchieveData()},statics:{instance:null},checklevel:function(e){for(var t=this.achieveDatas[s.Level],i=0;i<t.length;i++){var o=t[i],a=s.Level+""+o.ID;if(e>=o.val)if(!n.instance.getAchieveIsHave(a)){n.instance.setAchieveIsHave(a);break}}},checkUnlockRole:function(e){for(var t=this.achieveDatas[s.UnlockRole],i=0;i<t.length;i++){var o=t[i],a=s.UnlockRole+""+o.ID;if(e===o.val)if(!n.instance.getAchieveIsHave(a)){n.instance.setAchieveIsHave(a);break}}},checkUpGradeRoleLevel:function(e){for(var t=this.achieveDatas[s.UpGradeRoleLevel],i=0;i<t.length;i++){var o=t[i],a=s.UpGradeRoleLevel+""+o.ID;if(e===o.val)if(!n.instance.getAchieveIsHave(a)){n.instance.setAchieveIsHave(a);break}}},checkCollectPet:function(e){for(var t=this.achieveDatas[s.Pet],i=0;i<t.length;i++){var o=t[i],a=s.Pet+""+o.ID;if(e===o.val)if(!n.instance.getAchieveIsHave(a)){n.instance.setAchieveIsHave(a);break}}},checkCollectStar:function(e){var t=this.achieveDatas[s.Star];if(t)for(var i=0;i<t.length;i++){var o=t[i],a=s.Star+""+o.ID;if(e>=o.val)if(!n.instance.getAchieveIsHave(a)){n.instance.setAchieveIsHave(a);break}}},checkCollectMonster:function(e){if(!(e<=0)){var t=n.instance.getKillMonsterCnt();t+=e,n.instance.setKillMonsterCnt(t);for(var i=this.achieveDatas[s.Monster],o=0;o<i.length;o++){var a=i[o],c=s.Monster+""+a.ID;if(t>=a.val)if(!n.instance.getAchieveIsHave(c)){n.instance.setAchieveIsHave(c);break}}}},checkCollectBomb:function(e){if(!(e<=0)){var t=n.instance.getKillBombCnt();t+=e,n.instance.setKillBombCnt(t);for(var i=this.achieveDatas[s.ClearBomb],o=0;o<i.length;o++){var a=i[o],c=s.ClearBomb+""+a.ID;if(t>=a.val)if(!n.instance.getAchieveIsHave(c)){n.instance.setAchieveIsHave(c);break}}}},getActiveItemCnt:function(){var e=0;for(var t in this.achieveDatas)for(var i=this.achieveDatas[t],o=0;o<i.length;o++){var s=i[o],n=parseInt(t);this.checkIsHaveGet(n,s.ID)&&(e+=1)}return e},checkIsHaveGet:function(e,t){var i=e+""+t;if(n.instance.getAchieveIsHave(i)&&!n.instance.getAchieveDone(i))return!0;return!1},start:function(){},initAchieveData:function(){var e;e=[{ID:1,val:5,ch:"\u6210\u529f\u95ef\u8fc75\u5173",coin:200,diamond:0,key:0},{ID:2,val:10,ch:"\u6210\u529f\u95ef\u8fc710\u5173",coin:400,diamond:0,key:0},{ID:3,val:15,ch:"\u6210\u529f\u95ef\u8fc715\u5173",coin:600,diamond:0,key:0},{ID:4,val:20,ch:"\u6210\u529f\u95ef\u8fc720\u5173",coin:800,diamond:0,key:0}],this.achieveDatas[s.Level]=e;var t;t=[{ID:1,val:10,ch:"\u51fb\u6740\u602a\u7269\u6570\u91cf\u8fbe\u523020\u4e2a",coin:0,diamond:0,key:1},{ID:2,val:40,ch:"\u51fb\u6740\u602a\u7269\u6570\u91cf\u8fbe\u523040\u4e2a",coin:0,diamond:0,key:2},{ID:3,val:60,ch:"\u51fb\u6740\u602a\u7269\u6570\u91cf\u8fbe\u523060\u4e2a",coin:0,diamond:0,key:3},{ID:4,val:80,ch:"\u51fb\u6740\u602a\u7269\u6570\u91cf\u8fbe\u523080\u4e2a",coin:0,diamond:0,key:4}],this.achieveDatas[s.Monster]=t;var i;i=[{ID:1,val:1,ch:"\u6536\u96c61\u4e2a\u5ba0\u7269",coin:200,diamond:0,key:0},{ID:2,val:2,ch:"\u6536\u96c62\u4e2a\u5ba0\u7269",coin:300,diamond:0,key:0},{ID:3,val:3,ch:"\u6536\u96c63\u4e2a\u5ba0\u7269",coin:400,diamond:0,key:0},{ID:4,val:4,ch:"\u6536\u96c64\u4e2a\u5ba0\u7269",coin:500,diamond:0,key:0},{ID:5,val:5,ch:"\u6536\u96c65\u4e2a\u5ba0\u7269",coin:600,diamond:0,key:0},{ID:6,val:6,ch:"\u6536\u96c66\u4e2a\u5ba0\u7269",coin:700,diamond:0,key:0},{ID:7,val:7,ch:"\u6536\u96c67\u4e2a\u5ba0\u7269",coin:800,diamond:0,key:0},{ID:8,val:8,ch:"\u6536\u96c68\u4e2a\u5ba0\u7269",coin:900,diamond:0,key:0},{ID:9,val:9,ch:"\u6536\u96c69\u4e2a\u5ba0\u7269",coin:1e3,diamond:0,key:0},{ID:10,val:10,ch:"\u6536\u96c610\u4e2a\u5ba0\u7269",coin:1100,diamond:0,key:0},{ID:11,val:11,ch:"\u6536\u96c611\u4e2a\u5ba0\u7269",coin:1200,diamond:0,key:0},{ID:12,val:12,ch:"\u6536\u96c612\u4e2a\u5ba0\u7269",coin:1300,diamond:0,key:0},{ID:13,val:13,ch:"\u6536\u96c613\u4e2a\u5ba0\u7269",coin:1400,diamond:0,key:0},{ID:14,val:14,ch:"\u6536\u96c614\u4e2a\u5ba0\u7269",coin:1500,diamond:0,key:0},{ID:15,val:15,ch:"\u6536\u96c615\u4e2a\u5ba0\u7269",coin:1600,diamond:0,key:0},{ID:16,val:16,ch:"\u6536\u96c616\u4e2a\u5ba0\u7269",coin:1700,diamond:0,key:0}],this.achieveDatas[s.Pet]=i;var o;o=[{ID:1,val:1,ch:"\u89e3\u9501\u7b2c2\u4e2a\u4e3b\u89d2",coin:0,diamond:10,key:0},{ID:2,val:2,ch:"\u89e3\u9501\u7b2c3\u4e2a\u4e3b\u89d2",coin:0,diamond:20,key:0},{ID:3,val:3,ch:"\u89e3\u9501\u7b2c4\u4e2a\u4e3b\u89d2",coin:0,diamond:30,key:0},{ID:4,val:4,ch:"\u89e3\u9501\u7b2c5\u4e2a\u4e3b\u89d2",coin:0,diamond:50,key:0}],this.achieveDatas[s.UnlockRole]=o;var n;n=[{ID:1,val:20,ch:"\u4e00\u540d\u4e3b\u89d2\u5347\u81f320\u7ea7",coin:1e3,diamond:10,key:1},{ID:2,val:40,ch:"\u4e00\u540d\u4e3b\u89d2\u5347\u81f340\u7ea7",coin:2e3,diamond:20,key:2},{ID:3,val:60,ch:"\u4e00\u540d\u4e3b\u89d2\u5347\u81f360\u7ea7",coin:3e3,diamond:30,key:3},{ID:4,val:80,ch:"\u4e00\u540d\u4e3b\u89d2\u5347\u81f380\u7ea7",coin:4e3,diamond:40,key:4},{ID:5,val:100,ch:"\u4e00\u540d\u4e3b\u89d2\u5347\u81f3100\u7ea7",coin:5e3,diamond:50,key:5},{ID:6,val:120,ch:"\u4e00\u540d\u4e3b\u89d2\u5347\u81f3120\u7ea7",coin:7e3,diamond:70,key:7}],this.achieveDatas[s.UpGradeRoleLevel]=n;var a;a=[{ID:1,val:5,ch:"\u5f15\u7206\u70b8\u836f5\u6b21",coin:500,diamond:0,key:0},{ID:2,val:10,ch:"\u5f15\u7206\u70b8\u836f10\u6b21",coin:500,diamond:0,key:0},{ID:3,val:15,ch:"\u5f15\u7206\u70b8\u836f15\u6b21",coin:700,diamond:0,key:0},{ID:4,val:20,ch:"\u5f15\u7206\u70b8\u836f20\u6b21",coin:800,diamond:0,key:0}],this.achieveDatas[s.ClearBomb]=a}});cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],AchievementEndless:[function(e,t,i){"use strict";cc._RF.push(t,"1e003/Qii9LoLgiAaNs85re","AchievementEndless");var o=e("Utils"),s=(e("EnumDefine").LevelResult,e("LocalStorage")),n=e("AchieveManager"),a=e("EnumDefine").ActorType,c=e("BaseUI"),r=e("RPGManager");cc.Class({extends:c,properties:{role1:cc.Node,role2:cc.Node,role3:cc.Node,role4:cc.Node,role5:cc.Node,uiBase:cc.Node,continue:cc.Node,monsterLabel:cc.Label,wavesLabel:cc.Label,chestLabel:cc.Label,punishLabel:cc.Label,rewardLabel:cc.Label},onLoad:function(){this.battleExit=null,this.node.opacity=0},start:function(){var e=this,t=o.KillMonsterCnt,i=o.KillClearBombCnt;n.instance.checkCollectMonster(t),n.instance.checkCollectBomb(i);var s=cc.callFunc(function(){e.battleExit&&e.battleExit()},this);this.node.runAction(cc.sequence(cc.fadeIn(1),s)),this.showActors(),this.accountAchieve()},accountAchieve:function(){var e=r.instance.Endless.endlessAchieveData,t=e.monster,i=e.chest,o=e.punish,s=e.reward,n=e.wave;t||(t=0),i||(i=0),o||(o=0),s||(s=0),n||(n=0),this.monsterLabel.string=t+"",this.wavesLabel.string=n+"",this.chestLabel.string=i+"",this.punishLabel.string=o+"",this.rewardLabel.string=s+""},showActors:function(){for(var e=[a.Actor1,a.Actor2,a.Actor3,a.Actor4,a.Actor5],t=[this.role1,this.role2,this.role3,this.role4,this.role5],i=0;i<e.length;i++){var n=e[i],c=t[i],r=c.getChildByName("skeleton"),l=c.getChildByName("lockRole");r.active=!1,l&&(l.active=!0);var h=s.instance.getRoleData(n);h&&function(){r.active=!0,l&&(l.active=!1);var e=h.roletype,t=h.level,i="spine/actor/"+o.getActorSpineName(e,t),s=r.getComponent("sp.Skeleton");cc.loader.loadRes(i,sp.SkeletonData,function(e,t){e&&cc.error(e),s.skeletonData=t,s.setAnimation(0,"idle",!0)})}()}},onBtnContinue:function(){cc.director.loadScene("Map")},onBtnShare:function(){cc.director.loadScene("Map")}}),cc._RF.pop()},{AchieveManager:"AchieveManager",BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],Achievement:[function(e,t,i){"use strict";cc._RF.push(t,"6033decpyFJIopbLwqaFHw5","Achievement");var o=e("Utils"),s=e("CommonUtil"),n=e("EnumDefine"),a=n.LevelResult,c=e("LocalStorage"),r=e("AchieveManager"),l=e("EnumDefine").ActorType,h=e("BaseUI"),u=o.ProduceType,d=(n.EnterKind,e("EnumDefine").StarKind);cc.Class({extends:h,properties:{role1:cc.Node,role2:cc.Node,role3:cc.Node,role4:cc.Node,role5:cc.Node,uiBase:cc.Node,star1:cc.Node,star2:cc.Node,star3:cc.Node,continue:cc.Node,freeSpin:cc.Node,freeSpinlabel:{default:null,type:cc.Label},coinlabel:{default:null,type:cc.Label},diamondlabel:{default:null,type:cc.Label},word:{default:null,type:cc.Label},stageName:cc.Label,Mask:cc.Node,LookVideoReWard:cc.Prefab},onLoad:function(){this.coinlabel.string="0",this.diamondlabel.string="0",this.star1.active=!1,this.star2.active=!1,this.star3.active=!1,this.continue.scale=0,this.Mask.active=!1,this.battleExit=null,this.node.opacity=0},start:function(){var e=this,t=o.levelID;this.freeSpinVal=0;var i=o.levelResultData;this.setStageName(i.explorationID);var s=o.KillMonsterCnt,n=o.KillClearBombCnt;r.instance.checkCollectMonster(s),r.instance.checkCollectBomb(n),this.levelPassed=c.instance.getLevelPassed(t);var a=function(){this.loadlevelReward(t)}.bind(this),l=cc.callFunc(function(){e.battleExit&&e.battleExit(),a()},this);this.node.runAction(cc.sequence(cc.fadeIn(1),l))},loadlevelReward:function(e){if(this.levelPassed)this.startAchieve();else{var t=function(e){this.startAchieve(e)}.bind(this);this.passlevelReward(e,t)}},startAchieve:function(e){var t=o.levelResultData,i=t.levelResult,s=t.coinNum,n=t.diamondNum,l=t.step,h=o.levelID;e&&(s+=parseInt(e.coin),n+=parseInt(e.diamond),l&&l>0&&(s+=l*parseInt(e.step))),this.coinNum=s,this.diamondNum=n;var u=o.FreeSpinVal;switch(i){case a.Win:this.word.string="\u5f88\u597d",this.levelPassed||(c.instance.setLevelPassed(h,!0),h>0&&h%5==0&&(this.freeSpinVal=1,h>=1&&h<=10?this.freeSpinVal=1:h>10&&h<=20?this.freeSpinVal=2:h>20&&h<=30?this.freeSpinVal=2:h>30&&h<=40?this.freeSpinVal=3:h>40&&h<=50&&(this.freeSpinVal=3),u+=this.freeSpinVal),r.instance.checklevel(h));var p=function(){var e=function(){this.Mask.active=!1}.bind(this);this.loadLookVideoReward(this.coinNum,this.diamondNum,e)}.bind(this);this.produceCoin(s,p),this.produceDiamond(n);var v=o.starLevelDone,f=!1,m=!1,g=!1;if(v){var C=d.OneStar;void 0!==v[C]&&(f=!0),void 0!==v[C=d.TwoStar]&&(m=!0),void 0!==v[C=d.ThreeStar]&&(g=!0)}var S=0;g?S=3:m?S=2:f&&(S=1),o.passLevelStars=S,o.levelResultData.star=S,this.showStars(S),this.showContinue(),this.showFreeSpinVal(u);break;case a.Lose:this.word.string="\u7ee7\u7eed\u52a0\u6cb9";var b=function(){this.Mask.active=!1}.bind(this);this.produceCoin(s,b)}var k=c.instance.getFreeSpinVal();k+=u,c.instance.setFreeSpinVal(k),this.coinlabel.string=s+"",this.diamondlabel.string=n+"",this.showActors(i)},passlevelReward:function(e,t){cc.loader.loadRes("json/LevelReward",function(i,o){for(var s=o.json,n=0;n<s.length;n++){var a=s[n];parseInt(a.LevelID)===e&&t&&t(a)}})},showFreeSpinVal:function(e){var t=this;if(e>0){var i=new cc.Node(""),o=i.addComponent("cc.Sprite");i.parent=this.freeSpin.parent,i.position=cc.v2(-186,0);cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame("key");o.spriteFrame=i});var s=cc.moveTo(.5,this.freeSpin.position),n=cc.callFunc(function(){t.freeSpinlabel.string=e+"",i.destroy()},this);i.runAction(cc.sequence(s,n))}},showContinue:function(){var e=cc.scaleTo(.5,1).easing(cc.easeOut(3));this.continue.runAction(e)},showStars:function(e){var t=[];1===e?t.push(this.star1):2===e?(t.push(this.star1),t.push(this.star2)):3===e&&(t.push(this.star1),t.push(this.star2),t.push(this.star3));for(var i=[],o=0;o<t.length;o++){var s=t[o],n=cc.callFunc(this.showStar.bind(this,s));i.push(n),i.push(cc.delayTime(.1))}i.length>0&&this.node.runAction(cc.sequence(i))},showStar:function(e){var t=e.scale;e.scale=0,e.active=!0;var i=cc.scaleTo(.5,t).easing(cc.easeBounceInOut());e.runAction(i),cc.loader.loadRes("prefab/particle/starDust",function(t,i){var o=cc.instantiate(i);o.group=e.group,o.scale=2,o.parent=e.parent,o.position=e.position,o.zIndex=-2})},showActors:function(e){for(var t=[l.Actor1,l.Actor2,l.Actor3,l.Actor4,l.Actor5],i=[this.role1,this.role2,this.role3,this.role4,this.role5],s=0;s<t.length;s++){var n=t[s],r=i[s],h=r.getChildByName("skeleton"),u=r.getChildByName("lockRole");h.active=!1,u&&(u.active=!0);var d=c.instance.getRoleData(n);d&&function(){h.active=!0,u&&(u.active=!1);var t=d.roletype,i=d.level,s="spine/actor/"+o.getActorSpineName(t,i),n=h.getComponent("sp.Skeleton");cc.loader.loadRes(s,sp.SkeletonData,function(t,i){t&&cc.error(t),n.skeletonData=i,e===a.Win?n.setAnimation(0,"idle",!0):n.setAnimation(0,"idle2",!0)})}()}},produceDiamond:function(e){if(!(e<=0)&&this.uiBase){var t=this.uiBase.getComponent("UIBase"),i=(t.coinlabel,t.diamondlabel),s=this.diamondlabel,n=s.node.parent.convertToWorldSpaceAR(s.node.position);n=this.node.convertToNodeSpaceAR(n);var a=this.node,c=i.node.parent.convertToWorldSpaceAR(i.node.position);c=this.node.convertToNodeSpaceAR(c);var r=e/1,l=function(){t.updateDiamond(r),t.playCoin()}.bind(this);o.produceRandomNodeLineMove(u.Diamond,1,n,c,a,l)}},produceCoin:function(e,t){if(!(e<=0)&&(this.Mask.active=!0,this.uiBase)){var i=this.uiBase.getComponent("UIBase"),s=i.coinlabel,n=(i.diamondlabel,this.coinlabel),a=n.node.parent.convertToWorldSpaceAR(n.node.position);a=this.node.convertToNodeSpaceAR(a);var c=this.node,r=s.node.parent.convertToWorldSpaceAR(s.node.position);r=this.node.convertToNodeSpaceAR(r);var l=parseInt(e/10),h=parseInt(e%10),d=function(){i.updateCoin(l),i.playCoin()}.bind(this),p=l;0!=h&&(p=h);(function(){this.Mask.active=!1}).bind(this);var v=function(){i.updateCoin(p),i.playCoin(),t&&t()}.bind(this);o.produceRandomNodeLineMove(u.ButtonCoin,10,a,r,c,d,v)}},onBtnContinueClicked:function(){switch(o.levelResultData.levelResult){case a.Lose:cc.director.loadScene("Map");break;case a.Win:this.enterMap()}},enterMap:function(){o.levelResultData;var e=o.levelID%5;e=Math.floor(e),o.levelID>0&&0===e?cc.director.loadScene("SpinChest"):s.enterCartoonScene()},loadLookVideoReward:function(e,t,i){if(o.levelID<5)i&&i();else{this.isBoss=!1;var s=o.levelID;s>0&&s%5==0&&(this.isBoss=!0);this.showVideoReWard(e,t,2)}},setStageName:function(e){var t=this;cc.loader.loadRes("json/ExplorationInfo",function(i,o){for(var s=o.json,n=0;n<s.length;n++){var a=s[n];a.ExplorationID===e&&(t.stageName.string=a.stageTitle)}})},showVideoReWard:function(e,t,i){var o=this,s=cc.director.getScene()._children[0],n=cc.instantiate(this.LookVideoReWard);n.group="UI",n.zIndex=10,n.parent=s;var a=n.getComponent("LookVideoReWard");if(a){var c=function(e,t,i,s){var n=1;s&&(n=i);var a=e*n,c=t*n;if(this.isBoss){this.isBoss=!1;var r=function(){this.showVideoReWard(e,t,3)}.bind(this);o.produceCoin(a,r)}else{var l=function(){this.Mask.active=!1}.bind(this);o.produceCoin(a,l)}o.produceDiamond(c)}.bind(o);a.show(e,t,i,c)}}}),cc._RF.pop()},{AchieveManager:"AchieveManager",BaseUI:"BaseUI",CommonUtil:"CommonUtil",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],Achieve:[function(e,t,i){"use strict";cc._RF.push(t,"2abebpj6EdErqVzinj2f8Pc","Achieve");e("Utils");var o=e("EnumDefine").AchieveType,s=(e("LocalStorage"),e("BaseUI")),n=e("AchieveManager");cc.Class({extends:s,properties:{scrollView:{default:null,type:cc.ScrollView},AchieveItem:cc.Node,UIBase:cc.Node},onLoad:function(){this.content=this.scrollView.content,this.AchieveItem.active=!1,this.uibase=this.UIBase.getComponent("UIBase"),this.AchieveItemlist=[],this.index=0,this.startPos=cc.v2(235,4738)},show:function(e){if(this.StageUI=e,this.scrollView.scrollToTop(0),this.AchieveItemlist.length>0)this.scaleShow(this.node,null);else{var t=[],i=[],o=[],s=[],a=this.content,c=n.instance.achieveDatas,r=function(){for(var e in c){parseInt(e);for(var n=c[e],r=0;r<n.length;r++){var l=n[r],h=parseInt(e),u=cc.v2(this.startPos.x,this.startPos.y-120*this.index),d=this.spawnAchieveItem(l,a,u,h);this.index+=1,this.AchieveItemlist.push(d),s.push(u)}}this.poslist=s;for(var p=0;p<this.AchieveItemlist.length;p++){var v=this.AchieveItemlist[p],f=v.getComponent("AchieveItem");f.canGet?t.push(v):f.haveDone?o.push(v):i.push(v)}for(var m=0,g=0;g<t.length;g++,m++){t[g].position=s[m]}for(var C=0;C<i.length;C++,m++){i[C].position=s[m]}for(var S=0;S<o.length;S++,m++){o[S].position=s[m]}}.bind(this);this.scaleShow(this.node,r)}},loadFirstItems:function(){var e,t={};e=[{ID:1,val:5,ch:"\u6210\u529f\u95ef\u8fc75\u5173",coin:200,diamond:0,key:0},{ID:2,val:10,ch:"\u6210\u529f\u95ef\u8fc710\u5173",coin:400,diamond:0,key:0},{ID:3,val:15,ch:"\u6210\u529f\u95ef\u8fc715\u5173",coin:600,diamond:0,key:0},{ID:4,val:20,ch:"\u6210\u529f\u95ef\u8fc720\u5173",coin:800,diamond:0,key:0}],t[o.Level]=e;var i=this.content;for(var s in t)for(var n=t[s],a=0;a<n.length;a++){var c=n[a],r=parseInt(s),l=cc.v2(this.startPos.x,this.startPos.y-120*this.index),h=this.spawnAchieveItem(c,i,l,r);this.index+=1,this.AchieveItemlist.push(h)}},spawnAchieveItem:function(e,t,i,o){var s=cc.instantiate(this.AchieveItem);return s.active=!0,s.parent=t,s.position=i,s.getComponent("AchieveItem").init(e,this.uibase,o),s},start:function(){},closeBtn:function(){var e=function(){this.closeFunc&&this.closeFunc(),this.node.scale=1,this.node.active=!1,this.StageUI&&this.StageUI.freshAchieve()}.bind(this);this.scaleClose(this.node,e)}}),cc._RF.pop()},{AchieveManager:"AchieveManager",BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],ActorNews:[function(e,t,i){"use strict";cc._RF.push(t,"f2f07iaYuVEgJ66TpWmbUzV","ActorNews");var o=e("LocalStorage"),s=e("JsonData"),n=e("EnumDefine").ActorType,a=cc.Class({extends:cc.Component,properties:{},onLoad:function(){a.instance=this},start:function(){},statics:{instance:null},allRolesLevelUp:function(e,t){var i=[n.Actor1,n.Actor2,n.Actor3,n.Actor4,n.Actor5],o=i[0],s=function(o){if(o)t&&t(!0);else{var s=i[1],n=function(o){if(o)t&&t(!0);else{var s=i[2],n=function(o){if(o)t&&t(!0);else{var s=i[3],n=function(o){if(o)t&&t(!0);else{var s=i[4],n=function(e){t&&t(e)}.bind(this);this.roleLevelUp(s,e,n)}}.bind(this);this.roleLevelUp(s,e,n)}}.bind(this);this.roleLevelUp(s,e,n)}}.bind(this);this.roleLevelUp(s,e,n)}}.bind(this);this.roleLevelUp(o,e,s)},roleLevelUp:function(e,t,i){var n=o.instance.getRoleData(e);if(n){var a=t.getCoinNum(),c=n.level;s.instance.loadRoleUpgradeData(e+1,c+1,function(e){if(e){var t=parseInt(e.upgradecoin);i(a>=t)}})}else i&&i(!1)},newRoleCom:function(){},newPetCom:function(){}});cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage"}],ActorShoot:[function(e,t,i){"use strict";cc._RF.push(t,"f07f8A9gUpHlJ1Cj1JAS9ca","ActorShoot");var o=e("EnumDefine").ActorType,s=e("EnumDefine").CellType,n=(e("EnumDefine").HurtFont,e("EnumDefine").PetSingleAttackID,e("Board")),a=e("LocalStorage"),c=e("PlayFightAudio"),r=e("RPGManager"),l=e("PoolMng"),h=cc.v2();cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._fireDelay=.2,this._startFire=!1,this.skeleton=this.node.getComponent("sp.Skeleton")},start:function(){},shootBulletlist:function(e,t,i,o,s,n){for(var a=this,c=[],l=function(l){var h=o[l],u=cc.callFunc(function(){var o=function(e){r.instance.getMonster()||n&&n()}.bind(a);a.shootBullet(e,t,i,h,s,o)},a);c.push(u),c.push(cc.delayTime(a._fireDelay))},h=0;h<o.length;h++)l(h);var u=cc.callFunc(function(){n&&n()},this);if(c.push(cc.delayTime(this._fireDelay)),c.push(u),c.length>0){this.node.stopActionByTag(10);var d=cc.sequence(c);d.setTag(10),this.node.runAction(d)}},shootBullet:function(e,t,i,o,s,n){var a=this,l=o.getComponent("Cell").celltype,h=r.instance.getMonster();if(h){c.instance.playShootbullet(),this.skeleton.setAnimation(0,"attack",!1);var u=cc.callFunc(function(){var c=a.getBoneName(e),r=cc.v2(),u=0,d=null;d=a.findBoneWeb(c),r.x=d[0],r.y=d[1],u=d[2],r.x+=a.node.x,r.y+=a.node.y,u+=a.node.rotation,o.zIndex=10,o.group=a.node.group,o.parent=a.node.parent,o.x=r.x,o.y=r.y,o.rotation=u;var p=cc.misc.degreesToRadians(u),v=Math.sin(p)*o.width*.5,f=Math.cos(p)*o.height*.5;o.x+=v,o.y+=f;var m=t*i;a.shootMonster(o,l,s,h,m,n)},this);this.node.runAction(cc.sequence(cc.delayTime(.1),u))}else n&&n(!0)},shootMonster:function(e,t,i,o,s,n){if(o){var a=o.getComponent("Monster");a.isHaveShield()?this.shootToMonsterShield(e,t,o,a,n):this.shootToMonsterSkeleton(e,t,i,o,a,s,n)}else this.shootDone(e,n)},shootToMonsterShield:function(e,t,i,o,s){var n=this,a=o.MonsterShield.getShieldData().pos,c=e.position;a.sub(c,h);var r=h.mag()/200*.1,l=cc.callFunc(function(){var i=e.parent,a=cc.v2(e.x,e.y);if(n.bulletEffect(a,i),o.attackShield(t,1))n.spawnSkill(e,s),n.deSpawnBullet(e);else{var c=cc.moveBy(.2,cc.v2(0,-50)),r=cc.callFunc(function(){n.spawnSkill(e,s),n.deSpawnBullet(e)},n);e.runAction(cc.sequence(c,r))}},this),u=cc.scaleTo(.1,.6).easing(cc.easeOut(3)),d=cc.moveTo(r,a).easing(cc.easeOut(3)),p=cc.sequence(u,d,l);e.runAction(p)},shootToMonsterSkeleton:function(e,t,i,o,s,n,a){var c=this,r=cc.v2(o.x,o.y);r.y+=o.height/2;var l=e.position;r.sub(l,h);var u=h.mag()/200*.1,d=cc.callFunc(function(){var o=e.parent,r=cc.v2(e.x,e.y);if(c.bulletEffect(r,o),t===s.getDefenceCellType()){var l=cc.moveBy(.2,cc.v2(0,-50)),h=cc.callFunc(function(){c.deSpawnBullet(e),c.spawnSkill(e,a)},c);e.runAction(cc.sequence(l,h))}else s.hurt(n,a,i),c.spawnSkill(e,a),c.deSpawnBullet(e)},this),p=cc.scaleTo(.1,.6).easing(cc.easeOut(3)),v=cc.moveTo(u,r).easing(cc.easeOut(3)),f=cc.sequence(p,v,d);e.runAction(f)},deSpawnBullet:function(e){n.instance.deSpawnCell(e)},findBoneWeb:function(e){var t=this.skeleton.findBone(e);return t?(this.skeleton.updateWorldTransform(),[t.data.length*t.a+t.worldX,t.data.length*t.c+t.worldY,t.getWorldRotationX()]):[]},findBoneJsb:function(e){var t=this.skeleton.findBone(e);if(t){var i=t.m00,o=t.m10;return this.skeleton.updateWorldTransform(),[t.data.length*i+t.worldX,t.data.length*o+t.worldY,180*Math.atan2(o,i)/3.1415927]}return[]},getBoneName:function(e){switch(e){case o.Actor1:case o.Actor2:return"pipe";case o.Actor3:case o.Actor4:return"head";case o.Actor5:return"gun04"}},bulletEffect:function(e,t){var i=l.instance.getBulletHit();i.scale=1,i.parent=t,i.position=e;var o=cc.scaleTo(.4,0).easing(cc.easeOut(2)),s=cc.callFunc(function(){l.instance.putBulletHit(i)},this),n=cc.sequence(o,s);i.runAction(n)},shootDone:function(e,t){this.deSpawnBullet(e),t&&t(!0)},spawnSkill:function(e,t){var i=e.getComponent("Cell");if(i.IsHavePetSingleAttack()){var o=r.instance.getMonster();if(o){var n=i.petSkillID-100,l=a.instance.getPetData(n).attack,h="prefab/skill/",u=["skillA1","skillA2","skillA3","skillA4","skillA5","skillA6","skillA7","skillA8"];switch(i.petSkillID){case s.STwo_Shoot:h+=u[0];break;case s.SThree_Shoot:h+=u[1];break;case s.SFour_Shoot:h+=u[2];break;case s.SFive_Shoot:h+=u[3]}var d=cc.v2(e.x,e.y),p=e.parent,v=this;cc.loader.loadRes(h,function(e,i){e&&cc.error(e);var s=cc.instantiate(i);s.zIndex=3,s.parent=p,s.position=d,d.x-=200,c.instance.playPetattack2(),r.instance.shake();var n=s.getComponent("PetSkill");if(n){var a=function(e){t&&t()}.bind(v);n.play(function(){v.petskillHurt(l,o,a),s.removeFromParent()})}})}else t&&t()}},petskillHurt:function(e,t,i){if(t){var o=t.getComponent("Monster");if(o){o.hurt(e,function(e){i&&i(e)})}}}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",RPGManager:"RPGManager"}],ActorSkill:[function(e,t,i){"use strict";cc._RF.push(t,"81cc8taglJBjL9rnkqi2raT","ActorSkill");var o=e("EnumDefine").ActorType,s=(e("EnumDefine").CellType,e("EnumDefine").PetRoleSkillType,e("EnumDefine").CellGroupType),n=(e("EnumDefine").HurtFont,e("PoolMng"),e("RPGManager")),a=(e("CameraManager"),e("PlayFightAudio"),e("JsonData"),e("Board"),e("ProcessBoardCell"));e("Game");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.Actor=this.node.getComponent("Actor"),this.oldNodeScale=this.node.scale},tripSkill:function(e,t){var i=function(){this.spawnSkill(e,t)}.bind(this);return this.skillAction(i)+e},spawnSkill:function(e,t){var i=s.UnKnown;switch(this.node.getComponent("Actor").roletype){case o.Actor1:i=s.Cell1;break;case o.Actor2:i=s.Cell2;break;case o.Actor3:i=s.Cell3;break;case o.Actor4:i=s.Cell4;break;case o.Actor5:i=s.Cell5}var a=n.instance.boardNode,c=this.Actor.getWorldPos();c=a.convertToNodeSpaceAR(c);var r=e;n.instance.ShootSkill.spawnSkill(a,c,"UI",t,i,r,null)},tripFlashSkill:function(e){var t=this,i=s.UnKnown;switch(this.node.getComponent("Actor").roletype){case o.Actor1:i=s.Cell1;break;case o.Actor2:i=s.Cell2;break;case o.Actor3:i=s.Cell3;break;case o.Actor4:i=s.Cell4;break;case o.Actor5:i=s.Cell5}for(var n=a.instance.randomCellUseCellType(i,6),c=[],r=function(i){var o=n[i],s=cc.callFunc(function(){var i=function(){this.shootFlash(o,e)}.bind(t);t.skillAction(i)},t);c.push(s),c.push(cc.delayTime(.2))},l=0;l<n.length;l++)r(l);var h=cc.sequence(c);return this.node.runAction(h),.2*n.length+.2},shootFlash:function(e,t){var i=n.instance.boardNode,o=this.Actor.getWorldPos();o=i.convertToNodeSpaceAR(o);var s=t;n.instance.ShootSkill.spawnFlashSkill(e,i,o,"UI",s,null)},skillAction:function(e){this.node.scale=this.oldNodeScale,this.node.skewX=0,this.node.skewY=0;var t=this.node.scale,i=cc.scaleTo(.1,1.2*this.oldNodeScale).easing(cc.easeBounceInOut()),o=cc.scaleTo(.1,t).easing(cc.easeBounceInOut()),s=cc.sequence(i,o),n=cc.jumpBy(.05,cc.v2(0,0),40,1).easing(cc.easeOut(3)),a=cc.jumpBy(.05,cc.v2(0,0),-40,1).easing(cc.easeOut(3)),c=cc.skewTo(.05,0,2),r=cc.skewTo(.05,0,0),l=cc.sequence(c,r),h=(cc.sequence(n,a),cc.spawn(s,l)),u=cc.callFunc(function(){e&&e()},this),d=cc.sequence(cc.delayTime(.1),h,u);return this.node.runAction(d),.2}}),cc._RF.pop()},{Board:"Board",CameraManager:"CameraManager",EnumDefine:"EnumDefine",Game:"Game",JsonData:"JsonData",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",ProcessBoardCell:"ProcessBoardCell",RPGManager:"RPGManager"}],ActorUI:[function(e,t,i){"use strict";cc._RF.push(t,"f471bZSbipJGJ3L3zIwKauG","ActorUI");var o=e("EnumDefine").EnterKind,s=e("BaseUI"),n=e("LocalStorage"),a=e("Words"),c=e("OpenSdk");cc.Class({extends:s,properties:{PageView:cc.PageView,baseNode:cc.Node,midbk:cc.Node,JustWordGuide:cc.Node,RoleTouchGuide:cc.Node,PetTouchGuide:cc.Node},onLoad:function(){this.uibase=this.baseNode.getComponent("UIBase"),this.JustWordGuide.active=!1,this.RoleTouchGuide.active=!1,this.baseNode.zIndex=5},onEnable:function(){c.instance.showBanner()},onDisable:function(){c.instance.hideBanner()},start:function(){var e=function(){this.showGuide()}.bind(this);this.scaleShow(this.midbk,e)},showGuide:function(){if(!n.instance.getShowRoleUIGuide()){var e=a.ActorUI_1,t=function(){n.instance.setShowRoleUIGuide(!0),this.showRoleTouchGuide()}.bind(this);this.showJustWordGuide(e,t)}},showRoleTouchGuide:function(){var e=function(){n.instance.setOpenRoleGuideDone(!0);var e=this.PageView.getPages()[this.PageView.getCurrentPageIndex()].getComponent("RoleAndPets");e&&e.showRoleInfo()}.bind(this),t=this.RoleTouchGuide;t.active=!0;var i=t.getComponent("TouchGuide");i&&i.show("",e)},showJustWordGuide:function(e,t){var i=this.JustWordGuide;i.active=!0;var o=i.getComponent("JustWordGuide");o&&o.show(e,t)},onBtnCloseActorUI:function(){var e=function(){var e=o.Main,t=cc.find("Canvas").getComponent("CanvasInit");switch(t&&(e=t.enterCode),e){case o.Main:cc.director.loadScene("Main");break;case o.Map:cc.director.loadScene("Map")}}.bind(this);this.scaleClose(this.midbk,e)},freshPet:function(e){var t=this.PageView.getPages()[this.PageView.getCurrentPageIndex()].getComponent("RoleAndPets");t&&t.freshPet(e)},showTouchPetCardGuide:function(){var e=this.PetTouchGuide;e.active=!0;var t=e.getComponent("TouchGuide");if(t){var i=function(){var e=this.PageView.getPages()[this.PageView.getCurrentPageIndex()].getComponent("RoleAndPets");e&&e.showPetTouchGuide()}.bind(this);t.show("",i)}}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",OpenSdk:"OpenSdk",Words:"Words"}],Actor:[function(e,t,i){"use strict";var o;function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}cc._RF.push(t,"d7905Le0oVD250k6gtCpB0J","Actor");var n=e("EnumDefine").ActorType,a=e("EnumDefine").PetType,c=e("EnumDefine").CellType,r=e("EnumDefine").HurtFont,l=e("EnumDefine").RoleShapeLevel,h=e("RPGManager"),u=e("CameraManager"),d=e("JsonData"),p=e("Game"),v=e("Utils"),f=cc.v2();cc.Class((s(o={extends:cc.Component,properties:{},ctor:function(){this.skillID=-1,this.roleData={},this.roletype=n.UnKnown,this.celllist=[],this._startFire=!1,this.roleSkeleton=null,this._hurtfont=r.Red,this.skeletonName=""},onLoad:function(){},freshAttack:function(e){if(this.roleData&&e){if(e.ID===a.Pet1||e.ID===a.Pet4||e.ID===a.Pet7||e.ID===a.Pet10||e.ID===a.Pet13)return;var t=this.roleData.attack;t+=e.attack,this.roleData.attack=t}},setData:function(e){this.roleData=e,this.roletype=e.roletype;var t=this.roleData.level,i=this;d.instance.loadRoleUpgradeData(this.roletype+1,t,function(e){i.roleData.attack=e.attack}),this.roleSkeleton=this.node.getComponent(sp.Skeleton),this.oldNodeScale=this.node.scale;var o=v.GetRoleLevelShape(e.level),s=c.UnKnown;switch(o){case l.Level1:switch(this.roletype){case n.Actor1:s=c.One_Horinal1;break;case n.Actor2:s=c.Two_Vertical1;break;case n.Actor3:s=c.Three_LeftPlant1;break;case n.Actor4:s=c.Four_RightPlant1;break;case n.Actor5:s=c.Five_Cross1}break;case l.Level2:switch(this.roletype){case n.Actor1:s=c.One_Horinal2;break;case n.Actor2:s=c.Two_Vertical2;break;case n.Actor3:s=c.Three_LeftPlant2;break;case n.Actor4:s=c.Four_RightPlant2;break;case n.Actor5:s=c.Five_Cross2}break;case l.Level3:switch(this.roletype){case n.Actor1:s=c.One_Horinal3;break;case n.Actor2:s=c.Two_Vertical3;break;case n.Actor3:s=c.Three_LeftPlant3;break;case n.Actor4:s=c.Four_RightPlant3;break;case n.Actor5:s=c.Five_Cross3}break;case l.Level4:switch(this.roletype){case n.Actor1:s=c.One_Horinal4;break;case n.Actor2:s=c.Two_Vertical4;break;case n.Actor3:s=c.Three_LeftPlant4;break;case n.Actor4:s=c.Four_RightPlant4;break;case n.Actor5:s=c.Five_Cross4}}this.skillID=s},start:function(){},onDisable:function(){},setAntiAliasTexParameters:function(){this.roleSkeleton&&this.roleSkeleton.skeletonData.textures[0].setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR)},getAttack:function(e){var t=h.instance.getMonster();if(!t)return 0;var i=t.getComponent("Monster"),o=this.roleData.attack,s=0;return e===i.getDefenceCellType()?0:(e===i.getAttackAddtionCellType()&&(s=parseInt(1*o)),o+s)},tripSkill:function(e){return this.node.getComponent("ActorSkill").tripSkill(e,this.skillID)},tripFlashSkill:function(e){return this.node.getComponent("ActorSkill").tripFlashSkill(e)},IsAttack:function(){return this._startFire},getWorldPos:function(){var e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());return u.instance.battleCameraNode.getComponent("cc.Camera").getWorldToCameraPoint(e,f),f}},"start",function(){}),s(o,"pushCell",function(e){this.celllist.push(e)}),s(o,"fire",function(){if(!this._startFire&&0!==this.celllist.length){if(h.instance.getMonster()&&0!=this.celllist.length){var e=0;this.roleSkeleton.timeScale=2;this.celllist.length;this._hurtfont=r.ScoreRed;var t=function(){this.fireOver()}.bind(this);e=p.instance.comboVal,e*=p.instance.AttackCoefficient;var i=this.roleData.attack;return this.node.getComponent("ActorShoot").shootBulletlist(this.roletype,i,e,this.celllist,this._hurtfont,t),this.celllist.length=0,void(this._startFire=!0)}this.fireOver()}}),s(o,"fireOver",function(){this.idle(),this.node.stopActionByTag(10),this._startFire=!1,h.instance.fireOver()}),s(o,"idle",function(){this.roleSkeleton.setAnimation(0,"idle",!0),this.roleSkeleton.timeScale=1}),s(o,"switchSkillAnimation",function(e){this.node.scale=this.oldNodeScale,this.node.skewX=0,this.node.skewY=0;var t=this.node.scale,i=cc.scaleTo(.2,1.2*this.oldNodeScale).easing(cc.easeBounceInOut()),o=cc.scaleTo(.2,t).easing(cc.easeBounceInOut()),s=cc.sequence(i,o),n=cc.jumpBy(.1,cc.v2(0,0),60,1).easing(cc.easeOut(3)),a=cc.jumpBy(.1,cc.v2(0,0),-60,1).easing(cc.easeOut(3)),c=cc.skewTo(.1,0,2),r=cc.skewTo(.1,0,0),l=cc.sequence(c,r),h=cc.sequence(n,a),u=cc.spawn(s,l,h),d=cc.callFunc(function(){e&&e()},this),p=cc.sequence(cc.delayTime(.2),u,d);this.node.runAction(p)}),o)),cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",Game:"Game",JsonData:"JsonData",RPGManager:"RPGManager",Utils:"Utils"}],AddTime:[function(e,t,i){"use strict";cc._RF.push(t,"3ac26QOzNpK0KrWZ2PDtHXN","AddTime");var o=e("RPGManager"),s=(e("Game"),e("Utils")),n=e("LocalStorage"),a=e("BaseUI");cc.Class({extends:a,properties:{},onLoad:function(){this.scaleShow(this.node),this.uibaseData=n.instance.getUIBase()},start:function(){},onBtnCloseClicked:function(e){var t=function(){o.instance.lose(),this.node.removeFromParent()}.bind(this);this.close(t)},onBtnAddTimeClicked:function(e){if(this.uibaseData.diamond>=10){this.uibaseData.diamond-=10;var t=function(){o.instance.addBossTime(.3),this.node.removeFromParent()}.bind(this);this.close(t)}else;},onBtnLookAdsClicked:function(e){},close:function(e){var t=this.node.scale,i=cc.scaleTo(.06,1.1*t,1.1*t).easing(cc.easeBounceInOut()),o=cc.scaleTo(.06,0).easing(cc.easeBounceInOut()),s=cc.callFunc(function(){e&&e()},this),n=cc.sequence(i,o,s);this.node.runAction(n)},onDisable:function(){s.writeUIBaseData(this.uibaseData)}}),cc._RF.pop()},{BaseUI:"BaseUI",Game:"Game",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],AllCards:[function(e,t,i){"use strict";cc._RF.push(t,"0b7d5XLPjNIUKuN29krSCOB","AllCards");var o=e("EnumDefine").ActorType,s=e("Utils"),n=e("LocalStorage");e("CommonUtil");cc.Class({extends:cc.Component,properties:{OneGroupCard:cc.Prefab,showBk:cc.Node,guideNode:cc.Node,hand:cc.Node,smallCard:cc.Node,cushiones:{default:[],type:cc.Node},UINode:cc.Node,tipArrow_red:cc.Node,tipArrow_zise:cc.Node,tipArrow_yellow:cc.Node,tipArrow_green:cc.Node,tipArrow_white:cc.Node},onLoad:function(){this.guideNode.active=!1;var e=this.hand.getComponent(cc.Animation).play();e.wrapMode=cc.WrapMode.Normal,e.speed=.1,this.posY=-184,this.guideDt=3.5,this.guideDelay=3.5,this.canShowGuide=!1,this.Group="UI",this.PetSkillUI=this.UINode.getComponent("PetSkillUI"),this.tipArrow_red.active=!1,this.tipArrow_zise.active=!1,this.tipArrow_yellow.active=!1,this.tipArrow_green.active=!1,this.tipArrow_white.active=!1,this.chooseDoneData={}},start:function(){},playAnimate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,i=e.getComponent(cc.Animation);if(i){var o=i.play();o.wrapMode=cc.WrapMode.Loop,o.speed=t}},showSwipedPet:function(e,t){this.PetSkillUI.showSwipedPet(e,t),this.showTipArrow(e,!1),this.chooseDoneData[e]=!0},showSinglePet:function(e){for(var t in e){var i=e[t],o=parseInt(t);i=parseInt(i),this.PetSkillUI.showSwipedPet(o,i),this.chooseDoneData[o]=!0}},show:function(e,t){this.closeCallback=t;for(var i={},o={},a={},c=!1,r=!1,l=0;l<e.length;l++){for(var h=e[l].roletype,u=s.GetRolePetIDlist(h),d=[],p=0;p<u.length;p++){var v=u[p];n.instance.getPetData(v)&&d.push(v)}var f=(u=d).length;1===f?(o[h]=u[0],c=!0):f>=2&&(i[h]=u,r=!0),u.length>0&&(a[h]=u[0])}if(this.defaultChooseData=a,c&&this.showSinglePet(o),this.haveMul=r,!r)return t&&t(),this.guideNode.active=!1,void(this.showBk.active=!1);r&&this.showMulPets(i)},hidePet:function(e){var t=this.cushiones[e];if(t){var i=t.getChildByName("pet"),o=t.getChildByName("petbar"),s=t.getChildByName("tip");i&&(i.active=!1),o&&(o.active=!1),s&&(s.active=!1)}},showMulPets:function(e){this.grouplist=[],this.roleIDlist=[],this.spawnGroupsCard(e);var t=function(){var e=this,t=cc.callFunc(function(){e.startShowGuide()},this);this.node.runAction(cc.sequence(cc.delayTime(1),t))}.bind(this);this.showFirstGroup(t)},spawnGroupsCard:function(e){var t=0;for(var i in e){var o=e[i],s=parseInt(i),n=cc.v2(this.node.width*t,this.posY),a=this.spawnOneGroupCard(s,o,n);a.active=!1,this.grouplist.push(a),this.roleIDlist.push(s),t+=1}},spawnOneGroupCard:function(e,t,i){var s=cc.instantiate(this.OneGroupCard);s.active=!0,s.parent=this.node,s.position=i,s.group=this.Group,s.zIndex=10;var n=null;switch(e){case o.Actor1:n=this.cushiones[0];break;case o.Actor2:n=this.cushiones[1];break;case o.Actor3:n=this.cushiones[2];break;case o.Actor4:n=this.cushiones[3];break;case o.Actor5:n=this.cushiones[4]}return s.getComponent("PetsCard").initCards(e,t,n,this),s},showFirstGroup:function(e){if(this.grouplist.length>0){var t=this.grouplist[0];if(t){t.active=!0;var i=t.scale;t.scale=0,t.y-=400;var o=cc.scaleTo(.2,i).easing(cc.easeOut(4)),s=cc.moveBy(.4,cc.v2(0,400)).easing(cc.easeOut(4)),n=cc.spawn(o,s),a=cc.callFunc(function(){e&&e()},this);t.runAction(cc.sequence(n,a)),this.PetsCard=t.getComponent("PetsCard");var c=this.roleIDlist.shift();this.showTipArrow(c),this.setShowBk(c)}}},showTipArrow:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=null;switch(e){case o.Actor1:i=this.tipArrow_red;break;case o.Actor2:i=this.tipArrow_zise;break;case o.Actor3:i=this.tipArrow_yellow;break;case o.Actor4:i=this.tipArrow_green;break;case o.Actor5:i=this.tipArrow_white}i.active=t,t&&(this.playAnimate(i),this.scaleShow(i))},showNextGroup:function(){var e=this;if(this.grouplist.length>1){var t=this.grouplist.shift(),i=cc.moveBy(.3,cc.v2(-this.node.width,0)),o=cc.callFunc(function(){e.startShowGuide()},this);t.runAction(cc.sequence(i,o,cc.removeSelf()));for(var s=0;s<this.grouplist.length;s++){var n=this.grouplist[s];n.active=!0;var a=cc.moveBy(.3,cc.v2(-this.node.width,0)).easing(cc.easeOut(4)),c=cc.callFunc(function(){},this);n.runAction(cc.sequence(a,c))}t=this.grouplist[0],this.PetsCard=t.getComponent("PetsCard");var r=this.roleIDlist.shift();this.showTipArrow(r),this.setShowBk(r)}else this.closeGroup()},setShowBk:function(e){var t="";switch(e){case 0:t="redBase";break;case 1:t="purpleBase";break;case 2:t="yellowBase";break;case 3:t="greenBase";break;case 4:t="pinkBase"}var i=this.showBk.getComponent(cc.Sprite);cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,o){i&&(i.spriteFrame=o.getSpriteFrame(t))})},closeGroup:function(){var e=this,t=cc.moveBy(.3,cc.v2(0,-this.node.height)),i=cc.callFunc(function(){e.closeCallback&&e.closeCallback(e.haveMul)},this);this.node.runAction(cc.sequence(t,i,cc.removeSelf()))},scaleShow:function(e,t){var i=this.node.scale,o=cc.scaleTo(.15,1.08*i,1.08*i).easing(cc.easeBounceInOut()),s=cc.scaleTo(.15,1*i,1*i).easing(cc.easeBounceInOut()),n=cc.callFunc(function(){t&&t()},this),a=cc.sequence(o,s,n,null);e.runAction(a)},startShowGuide:function(){this.canShowGuide=!0,this.guideDt=this.guideDelay},stopShowGuide:function(){this.canShowGuide=!1,this.guideDt=0},showGuide:function(){var e=this;this.guideNode.active=!0,this.hand.active=!0,this.hand.getComponent(cc.Animation).play();var t=cc.v2(this.smallCard.x,this.smallCard.y),i=cc.moveBy(1.5,cc.v2(0,50)).easing(cc.easeBackIn()),o=cc.callFunc(function(){e.smallCard.position=t,e.hand.active=!1},this);this.smallCard.runAction(cc.sequence(cc.fadeIn(.1),i,cc.fadeOut(.1),o))},update:function(e){this.canShowGuide&&(this.guideDt+=e,this.guideDt>=this.guideDelay&&(this.guideDt=0,this.showGuide()))},defaultBtnClick:function(){var e=this.defaultChooseData;for(var t in e){var i=e[t],o=parseInt(t);i=parseInt(i);var s=this.chooseDoneData[o];if(!s||void 0===s){var n=this.defaultChooseData[o];n&&(this.PetSkillUI.showSwipedPet(o,n),this.chooseDoneData[o]=!0)}}this.tipArrow_red.active=!1,this.tipArrow_zise.active=!1,this.tipArrow_yellow.active=!1,this.tipArrow_green.active=!1,this.tipArrow_white.active=!1,this.closeGroup()}}),cc._RF.pop()},{CommonUtil:"CommonUtil",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],AttackMonsterGuide:[function(e,t,i){"use strict";cc._RF.push(t,"881f5GVHG1FII7otwNFkK8/","AttackMonsterGuide");e("Utils");var o=e("Board"),s=e("Words");cc.Class({extends:cc.Component,properties:{mid1:cc.Node,mid2:cc.Node,wordlabel1:cc.Label,wordlabel2:cc.Label},onLoad:function(){this.guideDone=!1,this.mid2.active=!1,this.guidstep=0,this.block=!0,this.registerTouch(),this.wordlabel1.string=s.Drawline_A2,this.wordlabel2.string=s.Drawline_A3},show:function(e){var t=this;this.callback=e;var i=cc.callFunc(function(){t.block=!1},this);this.node.runAction(cc.sequence(cc.delayTime(.3),i));var o=this.node.getChildByName("role"),s=cc.v2(o.x,o.y);o.x-=600;var n=cc.moveTo(.5,s);o.getComponent("sp.Skeleton").setAnimation(0,"idle02",!0),this.midscale=this.mid1.scale,this.mid1.scale=0;var a=cc.callFunc(function(){var e=t.mid1;if(e){var i=t.midscale,o=cc.scaleTo(.5,i).easing(cc.easeOut(5));e.runAction(o)}},this);o.runAction(cc.sequence(n,cc.delayTime(.1),a))},showNext:function(e){var t=this;this.callback=e,this.block=!0,this.node.active=!0,this.mid1.active=!1,this.mid2.active=!0;var i=cc.callFunc(function(){t.block=!1,t.guideDone=!0},this);this.node.runAction(cc.sequence(cc.delayTime(.3),i));var o=this.node.getChildByName("role"),s=cc.v2(o.x,o.y);o.x-=600;var n=cc.moveTo(.5,s);this.midscale=this.mid2.scale,this.mid2.scale=0;var a=cc.callFunc(function(){var e=t.mid2;if(e){var i=t.midscale,o=cc.scaleTo(.5,i).easing(cc.easeOut(5));e.runAction(o)}},this);o.runAction(cc.sequence(n,cc.delayTime(.1),a))},start:function(){},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t)},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd(t)},e)},touchBegin:function(e){},touchEnd:function(e){if(!this.block)return 0===this.guidstep?(this.guidstep+=1,this.node.active=!1,this.block=!0,o.instance.AttackMonsterGuide=this,void(this.callback&&this.callback())):(this.callback&&this.callback(),o.instance.AttackMonsterGuide=null,void this.node.removeFromParent())}}),cc._RF.pop()},{Board:"Board",Utils:"Utils",Words:"Words"}],AudioEngineControl:[function(e,t,i){"use strict";cc._RF.push(t,"2bb054pDyBLErZjuQZx5d9W","AudioEngineControl");var o=e("Utils"),s=(e("JsonData"),e("LocalStorage"));cc.Class({extends:cc.Component,properties:{audio:{type:cc.AudioClip,default:null}},_updateLabel:function(){},onLoad:function(){this.maxNum=cc.audioEngine.getMaxAudioInstance(),this.audioPool=[],this._updateLabel();var e=s.instance.getSetData();this.setdata=e;var t=cc.director.getScene().name;"Main"===t||"Map"===t?this.playMain():"Farm"===t&&this.playFight()},removeAudio:function(e){var t=this.audioPool.indexOf(e);t>-1&&this.audioPool.splice(t,1),this._updateLabel()},playMain:function(){if(this.setdata.musicOnOff&&this.audio){var e=o.mainSceneAudioID;-1!==e?this.resume(e):o.mainSceneAudioID=cc.audioEngine.play(this.audio,!0,1)}},stopMain:function(){var e=o.mainSceneAudioID;cc.audioEngine.stop(e),o.mainSceneAudioID=-1},playFight:function(){},stopFight:function(){var e=o.fightSceneAudioID;cc.audioEngine.stop(e),o.fightSceneAudioID=-1},resume:function(e){cc.audioEngine.resume(e)},stopAll:function(){cc.audioEngine.stopAll()},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()},onDisable:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],AudioSourceControl:[function(e,t,i){"use strict";cc._RF.push(t,"bf9167xLLBBI6Al16DO7Wt/","AudioSourceControl"),cc.Class({extends:cc.Component,properties:{audioSource:{type:cc.AudioSource,default:null},label:{type:cc.Label,default:null}},onLoad:function(){},play:function(){this.audioSource.play()},pause:function(){this.audioSource.pause()},stop:function(){this.audioSource.stop()},resume:function(){this.audioSource.resume()}}),cc._RF.pop()},{}],BackgroundAdapter:[function(e,t,i){"use strict";cc._RF.push(t,"c9395A23IBAn5BEQV28rsN+","BackgroundAdapter");var o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(n<3?s(a):n>3?s(t,i,a):s(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,c=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){var e=Math.min(cc.view.getCanvasSize().width/this.node.width,cc.view.getCanvasSize().height/this.node.height),t=this.node.width*e,i=this.node.height*e;this.node.scale=Math.max(cc.view.getCanvasSize().width/t,cc.view.getCanvasSize().height/i)},t=s([a],t)}(cc.Component));i.default=c,cc._RF.pop()},{}],BaseUI:[function(e,t,i){"use strict";cc._RF.push(t,"def68NpuulJUp+oXqi8EQIx","BaseUI"),cc.Class({extends:cc.Component,properties:{},start:function(){},normalShow:function(e,t,i){var o=cc.scaleTo(.3,t).easing(cc.easeOut(4)),s=cc.callFunc(function(){i&&i()},this);e.runAction(cc.sequence(o,s))},scaleShow:function(e,t){var i=this.node.scale,o=cc.scaleTo(.08,1.08*i,1.08*i).easing(cc.easeBounceInOut()),s=cc.scaleTo(.08,1*i,1*i).easing(cc.easeBounceInOut()),n=cc.scaleTo(.08,1.05*i,1.05*i).easing(cc.easeBounceInOut()),a=cc.scaleTo(.08,1*i,1*i).easing(cc.easeBounceInOut()),c=cc.callFunc(function(){t&&t()},this),r=cc.sequence(o,s,n,a,c,null);e.runAction(r)},scaleClose:function(e,t){var i=e.scale,o=cc.scaleTo(.08,1.1*i).easing(cc.easeBounceInOut()),s=cc.scaleTo(.08,0).easing(cc.easeBounceInOut()),n=cc.callFunc(function(){t&&t()},this),a=cc.sequence(o,s,n);e.runAction(a)}}),cc._RF.pop()},{}],BattleRoleBox:[function(e,t,i){"use strict";cc._RF.push(t,"a6ad8vKxb9I5aqbyMkc7uMb","BattleRoleBox");var o=e("Utils"),s=e("EnumDefine").ActorType,n=(e("LocalStorage"),e("JsonData"));cc.Class({extends:cc.Component,properties:{attackLabel:cc.Label,xname:cc.Label,bk2:cc.Node,bk1:cc.Node},ctor:function(){this.skillNode=null},onLoad:function(){},start:function(){},choose:function(){this.lock?this.bk2.active=!1:this.bk2.active=!0},unChoose:function(){this.bk2.active=!1},init:function(e,t){this.roleID=e.roletype,this.xname.string=t,this.roleData=e;var i=this.roleData.level,o=this;switch(n.instance.loadRoleUpgradeData(this.roleID+1,i,function(e){o.attackLabel.string=e.attack+""}),this.roleID){case s.Actor1:this.bk1.color=cc.color(224,98,66,255);break;case s.Actor2:this.bk1.color=cc.color(66,73,231,255);break;case s.Actor3:this.bk1.color=cc.color(231,145,66,255);break;case s.Actor4:this.bk1.color=cc.color(66,231,66,255);break;case s.Actor5:this.bk1.color=cc.color(218,143,228,255)}this.spawnSkill()},spawnSkill:function(){this.skillNode&&(this.skillNode.removeFromParent(),this.skillNode=null);var e=this.roleData.roletype,t=this.roleData.level,i=o.GetRoleSkillName(e,t),s=this.bk2,n=cc.v2(-129,-64),a="prefab/roleSkillcell/";a+=i;var c=this;cc.loader.loadRes(a,function(e,t){e&&cc.error(e);var i=cc.instantiate(t);i.parent=s,i.scale=1,i.position=n,c.skillNode=i})},fresh:function(e){this.attackLabel.string=e.attack+"",this.roleData=e,this.spawnSkill()}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],BattleRoot:[function(e,t,i){"use strict";cc._RF.push(t,"3d4773HAyFEYoNS5B/j6NR8","BattleRoot");var o=e("Utils");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.ProcessStory=this.node.getComponent("ProcessStory");var e=o.levelResultData;if(e){var t=e.explorationID;this.ProcessStory.show(t)}}}),cc._RF.pop()},{Utils:"Utils"}],BlockCover:[function(e,t,i){"use strict";cc._RF.push(t,"a9a14u+CAFPhq0DKnA31AJ/","BlockCover");e("Board");cc.Class({extends:cc.Component,properties:{salives:{default:[],type:cc.Node}},onLoad:function(){},start:function(){},init:function(e){this._lv=e;for(var t=0;t<e;t++){var i=this.salives[t];i&&(i.active=!0)}for(var o=e;o<this.salives.length;o++){var s=this.salives[o];s&&(s.active=!1)}},spawnDust:function(e,t){cc.loader.loadRes("prefab/particle/spiderDustParticle",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.scale=2,s.parent=e,s.position=t,s.group="UI",s.zIndex=20,s.runAction(cc.sequence(cc.delayTime(2),cc.removeSelf()))})},hurt:function(){this.hurtSalive()},IsAllRemoved:function(){return this._lv<=0},hurtSalive:function(){if(this._lv>0){var e=this._lv-1,t=this.salives[e];if(t){var i=t.parent,o=t.position;t.active=!1,i=cc.director.getScene()._children[0],o=this.node.parent.convertToWorldSpaceAR(this.node.position),(o=i.convertToNodeSpaceAR(o)).x+=this.node.width/2,o.y+=this.node.height/2,this.spawnDust(i,o)}this._lv-=1}}}),cc._RF.pop()},{Board:"Board"}],BlockSide:[function(e,t,i){"use strict";cc._RF.push(t,"bfa0bogDUNOgbn2h8Sg+1Iz","BlockSide");var o=e("EnumDefine").CellsRelativeDir,s=e("Board"),n=e("Utils"),a=e("ProcessStory"),c=cc.Enum({L1:0,L2:1,L3:2,R1:3,R2:4,R3:5,T1:6,T2:7,T3:8,B0:9,B1:10,B2:11});cc.Class({extends:cc.Component,properties:{sideLNodes:{default:[],type:cc.Node},sideRNodes:{default:[],type:cc.Node},sideTNodes:{default:[],type:cc.Node},sideBNodes:{default:[],type:cc.Node}},ctor:function(){this.LSpriteFrame=null,this.TSpriteFrame=null,this.RSpriteFrame=null,this.BSpriteFrame=null},onLoad:function(){var e=n.levelData.StageID;this.initStage(e);for(var t=0;t<this.sideLNodes.length;t++){this.sideLNodes[t].active=!1}for(var i=0;i<this.sideRNodes.length;i++){this.sideRNodes[i].active=!1}for(var o=0;o<this.sideTNodes.length;o++){this.sideTNodes[o].active=!1}for(var s=0;s<this.sideBNodes.length;s++){this.sideBNodes[s].active=!1}this._data=null},start:function(){},init:function(e){this._data=e;JSON.stringify(e);if(e.sideLNum>0)for(var t=0;t<e.sideLNum;t++){this.sideLNodes[t].active=!0}if(e.sideRNum>0)for(var i=0;i<e.sideRNum;i++){this.sideRNodes[i].active=!0}if(e.sideTNum>0)for(var o=0;o<e.sideTNum;o++){this.sideTNodes[o].active=!0}if(e.sideBNum>0)for(var s=0;s<e.sideBNum;s++){this.sideBNodes[s].active=!0}},spawnBufferDust:function(e,t,i){this.LSpriteFrame;switch(i){case c.L1:case c.L2:case c.L3:case c.L4:this.LSpriteFrame;break;case c.R1:case c.R2:case c.R3:case c.R4:this.RSpriteFrame;break;case c.T1:case c.T2:case c.T3:case c.T4:this.TSpriteFrame;break;case c.B1:case c.B2:case c.B3:case c.B4:this.BSpriteFrame}cc.loader.loadRes("prefab/particle/BlockSideDust",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.zIndex=10,s.scale=1.2,s.parent=e,s.position=t;s.getComponent(cc.ParticleSystem);s.runAction(cc.sequence(cc.delayTime(.8),cc.removeSelf()))})},IsSideAllRemoved:function(){var e=!1;return(this._data.sideLNum>0||this._data.sideRNum>0||this._data.sideTNum>0||this._data.sideBNum>0)&&(e=!1),e},hurt:function(e){switch(e){case o.Left:this.hurtLeft();break;case o.Right:this.hurtRight();break;case o.Top:this.hurtTop();break;case o.Bottom:this.hurtBottom();break;case o.AllDir:this.skillHurt()}},skillHurt:function(){this.hurtLeft(),this.hurtRight(),this.hurtTop(),this.hurtBottom()},hurtLeft:function(){if(this._data.sideLNum>0){var e=this._data.sideLNum-1,t=this.sideLNodes[e],i=t.parent,o=t.position;t.active=!1,i=s.instance.node,o=t.parent.convertToWorldSpaceAR(t.position),o=i.convertToNodeSpaceAR(o);var n=c.L1;3===this._data.sideLNum?n=c.L3:2===this._data.sideLNum&&(n=c.L2),this.spawnBufferDust(i,o,n),this._data.sideLNum-=1}},hurtRight:function(){if(this._data.sideRNum>0){var e=this._data.sideRNum-1,t=this.sideRNodes[e],i=t.parent,o=t.position;t.active=!1,i=s.instance.node,o=t.parent.convertToWorldSpaceAR(t.position),o=i.convertToNodeSpaceAR(o);var n=c.R1;3===this._data.sideRNum?n=c.R3:2===this._data.sideRNum&&(n=c.R2),this.spawnBufferDust(i,o,n),this._data.sideRNum-=1}},hurtTop:function(){if(this._data.sideTNum>0){var e=this._data.sideTNum-1,t=this.sideTNodes[e],i=t.parent,o=t.position;t.active=!1,i=s.instance.node,o=t.parent.convertToWorldSpaceAR(t.position),o=i.convertToNodeSpaceAR(o);var n=c.T1;3===this._data.sideTNum?n=c.T3:2===this._data.sideTNum&&(n=c.T2),this.spawnBufferDust(i,o,n),this._data.sideTNum-=1}},hurtBottom:function(){if(this._data.sideBNum>0){var e=this._data.sideBNum-1,t=this.sideBNodes[e];t.active=!1;var i=t.parent,o=t.position;i=s.instance.node,o=t.parent.convertToWorldSpaceAR(t.position),o=i.convertToNodeSpaceAR(o);var n=c.B1;3===this._data.sideBNum?n=c.B3:2===this._data.sideBNum&&(n=c.B2),this.spawnBufferDust(i,o,n),this._data.sideBNum-=1}},initStage:function(){var e=a.instance.stageFileNamesData,t=(e.path,n.StageSpriteAtlas.getSpriteFrame(e.blockside));this.LSpriteFrame=t,this.RSpriteFrame=t,this.TSpriteFrame=t,this.BSpriteFrame=t;for(var i=0;i<this.sideLNodes.length;i++){this.sideLNodes[i].getComponent("cc.Sprite").spriteFrame=t}for(var o=0;o<this.sideRNodes.length;o++){this.sideRNodes[o].getComponent("cc.Sprite").spriteFrame=t}for(var s=0;s<this.sideTNodes.length;s++){this.sideTNodes[s].getComponent("cc.Sprite").spriteFrame=t}for(var c=0;c<this.sideBNodes.length;c++){this.sideBNodes[c].getComponent("cc.Sprite").spriteFrame=t}}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",ProcessStory:"ProcessStory",Utils:"Utils"}],BlurMask:[function(e,t,i){"use strict";cc._RF.push(t,"f351aoLeYRFMJ0SkjRFg/yo","BlurMask");var o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(n<3?s(a):n>3?s(t,i,a):s(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,c=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.texture=null,t.spriteFrame=null,t.sprite=null,t._lastSize=new cc.Size(0,0),t._cullingMask=268435456,t.material=null,t.ignoredNodes=[],t.bightness=.5,t.blurAmount=.5,t}return o(t,e),t.prototype.start=function(){var e=this;this.node.scaleY=-1,this.texture=new cc.RenderTexture,this.texture.initWithSize(this.node.width,this.node.height),this.camera=this.node.addComponent(cc.Camera),this.camera.cullingMask=4294967295^this._cullingMask,this.camera.targetTexture=this.texture,this.camera.enabled=!1,this.node._cullingMask=this._cullingMask,this.ignoredNodes.map(function(t){return t._cullingMask=e._cullingMask}),this.spriteFrame=new cc.SpriteFrame,this.sprite=this.node.addComponent(cc.Sprite),this.sprite.spriteFrame=this.spriteFrame,this.material._props.bightness=this.bightness,this.material._props.blurAmount=this.blurAmount,this.sprite._materials[0]=this.material,this.snapshot()},t.prototype.snapshot=function(){var e=this.node.getContentSize();e.width===this._lastSize.width&&e.height===this._lastSize.height||(this.texture.initWithSize(this.node.width,this.node.height),this.camera.targetTexture=this.texture),this._lastSize.width=e.width,this._lastSize.height=e.height,this.camera.render(cc.Canvas.instance.node),this.spriteFrame.setTexture(this.texture)},s([c({type:cc.Material,displayName:"\u6a21\u7cca\u6750\u8d28",tooltip:"\u7528\u4e8e\u5e94\u7528\u6a21\u7cca\u6240\u7528\u7684\u6750\u8d28\uff0c\u5982\u65e0\u7279\u6b8a\u9700\u6c42\u8bf7\u4fdd\u6301\u9ed8\u8ba4"})],t.prototype,"material",void 0),s([c({type:[cc.Node],displayName:"\u5ffd\u7565\u8282\u70b9\u5217\u8868",tooltip:"\u5728\u6b64\u5217\u8868\u5185\u7684\u8282\u70b9\u5c06\u4e0d\u4f1a\u88ab\u6a21\u7cca\u906e\u7f69\u6e32\u67d3"})],t.prototype,"ignoredNodes",void 0),s([c({type:cc.Float,displayName:"\u4eae\u5ea6",tooltip:"\u964d\u4f4e\u80cc\u666f\u7684\u4eae\u5ea6",min:0,max:1})],t.prototype,"bightness",void 0),s([c({type:cc.Float,displayName:"\u6a21\u7cca\u5ea6",tooltip:"\u80cc\u666f\u7684\u6a21\u7cca\u7a0b\u5ea6",min:0,max:1})],t.prototype,"blurAmount",void 0),t=s([a],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],BoardGuide:[function(e,t,i){"use strict";cc._RF.push(t,"7913bjGh3xJao7cTOSSkV8V","BoardGuide");var o=e("Utils"),s=e("Board"),n=e("Words");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.callback=null},start:function(){},showGuide:function(e){this.callback=e;var t=o.levelID;switch(t=parseInt(t)){case 1:this.drawlineGuide(e);break;case 2:this.attackMonsterGuide(e);break;case 3:this.showOpenBox(e);break;case 4:this.clearBombGuide(e);break;case 5:this.clearSaliveAndStakes(e);break;case 6:var i=function(){var e=function(){s.instance.Drawline.drawGuideline()}.bind(this);this.addRoleAndPetSkillGuide(e)}.bind(this);s.instance.showGuideFunc=i,this.monsterShieldGuide(e);break;default:e&&e()}},onBtnOkClicked:function(e){this.node.removeFromParent()},drawlineGuide:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/JustWordGuide",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.zIndex=10,s.parent=t;var a=s.getComponent("JustWordGuide");if(a){var c=n.Drawline_A4;a.show(c,e)}})},attackMonsterGuide:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/AttackMonsterGuide",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.zIndex=10,s.parent=t;var n=s.getComponent("AttackMonsterGuide");n&&n.show(e)})},showOpenBox:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/JustWordGuide",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.zIndex=10,s.parent=t;var a=s.getComponent("JustWordGuide");if(a){var c=n.Drawline_A5;a.show(c,e)}})},clearBombGuide:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/JustWordGuide",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.zIndex=10,s.parent=t;var a=s.getComponent("JustWordGuide");if(a){var c=n.Drawline_S1;a.show(c,e)}})},clearSaliveAndStakes:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/JustWordGuide",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.zIndex=10,s.parent=t;var a=s.getComponent("JustWordGuide");if(a){var c=n.Drawline_A6;a.show(c,e)}})},monsterShieldGuide:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/JustWordGuide",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.zIndex=10,s.parent=t;var a=s.getComponent("JustWordGuide");if(a){var c=n.Drawline_A7;a.show(c,e)}})},addRoleAndPetSkillGuide:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/JustWordGuide",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.zIndex=10,s.parent=t;var a=s.getComponent("JustWordGuide");if(a){var c=n.Drawline_A1;a.show(c,e)}})}}),cc._RF.pop()},{Board:"Board",Utils:"Utils",Words:"Words"}],Board:[function(e,t,i){"use strict";cc._RF.push(t,"674aeUIoG1B7ZSSZD734Nj9","Board");var o=e("Utils").NUMROWS,s=e("Utils").NUMCOLUMNS,n=e("PoolMng"),a=e("Utils"),c=e("EnumDefine").CellType,r=e("EnumDefine").CellGroupType,l=e("EnumDefine").CellAnimationType,h=e("EnumDefine").DrawlineKind,u=(e("EnumDefine").CellsRelativeDir,e("RPGManager")),d=e("PlayFightAudio"),p=e("ShowFloatWord"),v=e("Game"),f=(e("JsonData"),cc.Class({extends:cc.Component,properties:{RPGNode:cc.Node,UI:cc.Node,UIMask:cc.Node,CloseTouch:cc.Node,DrawlineMask:cc.Node,circle:cc.Prefab,RoleSkillNode:cc.Node,switchRole:cc.Node,continueSkillBtn:cc.Node,boardGuideNode:cc.Node,SwitchNodes:cc.Node},onLoad:function(){f.instance=this,this.touchlist=[],this.sameColors=[],this.sideProplist=[],this.lastTouchCell=null,this.DropCell=this.node.getComponent("DropCell"),this.Portal=this.node.getComponent("Portal"),this.SpawnCells=this.node.getComponent("SpawnCells"),this.RemoveCells=this.node.getComponent("RemoveCells"),this.CellAttack=this.node.getComponent("CellAttack"),this.skillUI=this.UI.getComponent("PetSkillUI"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.TriggerCellsSkill=this.node.getComponent("TriggerCellsSkill"),this.CheckSideCells=this.node.getComponent("CheckSideCells"),this.PropCellAttackArea=this.node.getComponent("PropCellAttackArea"),this.DetectDrawlines=this.node.getComponent("DetectDrawlines"),this.CellsAnimation=this.node.getComponent("CellsAnimation"),this.Drawline=this.node.getComponent("DrawLine"),this.userInteract=!1,this.UIMask.active=!1,this.DrawlineMask.zIndex=2,this.DrawlineMask.active=!1,this._cellsAttackDone=!1,this._cellAttackDoneCallback=null,this._potralDone=!1,this._circleNode=null,this.continueSkillBtn.active=!1,this.RoleSkillNode.active=!1,this.isShowSwitch=!1,this.PetSkillUI=this.UI.getComponent("PetSkillUI"),this.BoardGuide=this.boardGuideNode.getComponent("BoardGuide"),this.showGuideFunc=null,this.isShowSwitch=!1,this.switchRole.active=!1,this.setUserInteract(!1),this.registerTouch()},start:function(){this.boardWidth=Math.floor(this.node.width),this.boardHeight=Math.floor(this.node.height)},showSwitchNodes:function(){a.CanShowSwitchPet(a.levelID,a.UseTest)&&(this.isShowSwitch=!0,this.switchRole.active=!0)},init:function(e){this.game=e},statics:{instance:null},getTitleWidth:function(){var e=this.boardWidth/o;return e=Math.floor(e)},getTitleHeight:function(){var e=this.boardHeight/o;return e=Math.floor(e)},closeCombo:function(){this.game.closeCombo()},showCombo:function(e){this.game.showCombo(e)},showGuide:function(){if(this.AttackMonsterGuide){var e=function(){this.Drawline.drawGuideline()}.bind(this);this.AttackMonsterGuide.showNext(e)}else this.showGuideFunc?(this.showGuideFunc(),this.showGuideFunc=null):this.Drawline.drawGuideline()},getlineKind:function(){return h.Normal},clearShowlineTips:function(){this.DetectDrawlines.clearShowlineTips()},showlineCellTips:function(){this.Drawline.getGuideIsDone()&&(this.cancleShowlineCellTips(),this.showlines=function(){this.DetectDrawlines.showlineTips()},this.scheduleOnce(this.showlines,5))},cancleShowlineCellTips:function(){this.showlines&&(this.unschedule(this.showlines),this.showlines=null),this.DetectDrawlines.cancleShowlineTips()},shuffleAllNormalCells:function(e){this.Drawline.getGuideIsDone()?this.DetectDrawlines.shuffleAllNormalCells(e):e&&e()},clearAllSkillCircles:function(){},clearAllCells:function(e){this.SpawnCells.clearAllCells(e)},clearAllSideCells:function(){this.SpawnCells.clearAllSideCells()},createCells:function(e,t){var i=function(){this.setUserInteract(!0),this.Drawline.drawGuideline(),this.showlineCellTips(),this.showSwitchNodes()}.bind(this),o=function(e){this.game.closeLevelGole();var t=function(){this.shuffleAllNormalCells(i)}.bind(this);this.BoardGuide.showGuide(t)}.bind(this),s=function(){t(o)}.bind(this);this.SpawnCells.createBoardCell(e,s)},freshNewTask:function(e){var t=function(){this.setUserInteract(!0),this.showlineCellTips(),e&&e()}.bind(this);this.game.closeLevelGole(),this.shuffleAllNormalCells(t)},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t,e)},e),e.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.touchMove(t,e)},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd(t,e)},e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.touchEnd(t,e)},e)},touchBegin:function(e,t){v.instance.closeLevelGole(),this.Drawline.clearlines();var i=e.getTouches()[0].getLocation(),o=t.touchOneCell(i);if(this.sameColors.length=0,null!=o){var s=o.getComponent("Cell");if(s.IsBrushCell())return;if(!this.Drawline.IsGuideTouch(o))return;if(s.normalCell()||s.propNormalCell()){var n=this.getlineKind(s);return t.touchlist.push(o),t.lastTouchCell=o,o.zIndex=5,s.touch(),this.addSkill(s.celltype),this.Drawline.setlineNodes(this.touchlist),this.Drawline.drawline(n),this.Drawline.showGuideline(!1),this.DrawlineMask.active=!0,this.changeCellsZIndex(s,5),this.showPropsArea(this.touchlist),this.drawlineHurtMonster(this.touchlist),this.cancleShowlineCellTips(),void(this.isShowSwitch&&(this.switchRole&&(this.switchRole.active=!1),this.continueSkillBtn&&(this.continueSkillBtn.active=!1)))}}},touchMove:function(e,t){var i=e.getTouches()[0].getLocation(),o=t.touchOneCell(i);if(o&&o!==this.lastTouchCell){var s=this.touchlist.length;if(s>=2){var n=s-2,a=this.touchlist[n].getComponent("Cell"),c=o.getComponent("Cell");if(a.row===c.row&&a.column===c.column){this.Drawline.deleteline(this.lastTouchCell);var r=this.touchlist.pop();this.lastTouchCell=this.touchlist[this.touchlist.length-1];var l=this.PropCellAttackArea.moveBacklink(this.touchlist,this.lastTouchCell,r);l&&(r=l);var h=r.getComponent("Cell");h.unTouch(),this.lastTouchCell=this.touchlist[this.touchlist.length-1],this.Drawline.setlineNodes(this.touchlist),this.decSkill(h.celltype),this.collectSidePropCells(this.touchlist),this.showPropsArea(this.touchlist),this.drawlineHurtMonster(this.touchlist),this.showCircle(this.touchlist);var u=this.touchlist.length;return void this.showCombo(u)}}var p=t.lastTouchCell;if(t.canConnect(o,p)){if(this.touchlist.indexOf(o)<0){var v=o.getComponent("Cell"),f=this.getlineKind(v);o.zIndex=5,v.touch(),this.touchlist.push(o),this.PropCellAttackArea.moveForWardlink(this.touchlist,this.lastTouchCell,o),this.lastTouchCell=this.touchlist[this.touchlist.length-1],this.Drawline.setlineNodes(this.touchlist),this.addSkill(v.celltype),this.Drawline.drawline(f);var m=this.touchlist.length;d.instance.playCellConnect(m),this.collectSidePropCells(this.touchlist),this.showPropsArea(this.touchlist),this.drawlineHurtMonster(this.touchlist),this.showCircle(this.touchlist);var g=this.touchlist.length;this.showCombo(g)}}else;}},touchEnd:function(e,t){if(this.closeCombo(),this.lastTouchCell){var i=this.lastTouchCell.getComponent("Cell");this.Drawline.getGuideIsDone()&&this.changeCellsZIndex(i,0)}var o=3;this.Drawline.getGuideIsDone()||(o=this.Drawline.getMiniRemoveCnt()),this.touchlist.length<o&&(this.Drawline.getGuideIsDone()||this.Drawline.showGuideline(!0));for(var s=0;s<this.touchlist.length;s++){this.touchlist[s].getComponent("Cell").unTouch()}if(this.touchlist.length<o){for(var n=0;n<t.touchlist.length;n++){var a=t.touchlist[n].getComponent("Cell");this.decSkill(a.celltype),a.unTouch()}this.PropCellAttackArea.reSetPropCells(this.touchlist),this.touchlist.length=0,this.lastTouchCell=null,this.skillUI.hideAllSkill(),this.setUserInteract(!0),this.drawlineHurtMonsterOver(),this.PropCellAttackArea.backAllBrushsData(),this.isShowSwitch&&(this.switchRole&&(this.switchRole.active=!0),this.continueSkillBtn&&(this.continueSkillBtn.active=!1)),this.Drawline.getGuideIsDone()&&(this.DrawlineMask.active=!1),this.showlineCellTips()}else this.DrawlineMask.active=!1,this.PropCellAttackArea.clearBrushData(),this.setUserInteract(!1),this.removeCells(t.touchlist),this.touchlist.length=0,this.lastTouchCell=null,this.clearShowlineTips();this.removeSidePropCells(),t.Drawline.clearlines(),this.ProcessBoardCell.showAllCircles(!1),this.PropCellAttackArea.clear(),this.showCircle(this.touchlist)},touchOneCell:function(e,t){for(var i=0;i<o;i++)for(var n=0;n<s;n++){var a=this.ProcessBoardCell.getCell(n,i);if(a){var c=a.getComponent("Cell"),r=a.parent.convertToNodeSpaceAR(e);if(r.x-=a.width*c.cellscale/2,a.getBoundingBox().contains(r))return a}}return null},removeCells:function(e){var t=this;u.instance.RPGAttack=!0,v.instance.updateStep(-1),this.openUIMask(!0);for(var i=[],o=e.length,s=cc.callFunc(function(){t.RoleSkillNode&&(t.RoleSkillNode.destroy(),t.RoleSkillNode=null),t.PetSkillUI.showRoleSkill(!1),t.switchRole.active=!1,t.continueSkillBtn.active=!1,t.isShowSwitch=!1,t.removeCellsDone(),p.instance.showlines(o)},this),n=[],a=0;a<this.sideProplist.length;a++){var c=this.sideProplist[a];n.push(c)}n.length>0&&this.RemoveCells.pushProplist(n),this.RemoveCells.removeCells(e,i,s),i.length>=2?this.node.runAction(cc.sequence(i)):(i.push(null),this.node.runAction(cc.sequence(i)))},addSkill:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;6===a.levelID&&(this.Drawline.getGuideIsDone()||this.Drawline.guideTurns>=2&&(t=30)),this.skillUI.addSkill(e,t)},decSkill:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;6===a.levelID&&(this.Drawline.getGuideIsDone()||this.Drawline.guideTurns>=2&&(t=30)),this.skillUI.decSkill(e,t)},triggerSkill:function(e){this.TriggerCellsSkill.triggerSkill(e)},cellsAttackDone:function(e){(this._cellsAttackDone=!0,this._cellAttackDoneCallback=e,this._potralDone)&&(u.instance.RPGAttack||this.DropCell.animateFalling(e))},portalDone:function(){this._potralDone=!0,this._cellsAttackDone&&this.DropCell.animateFalling(this._cellAttackDoneCallback)},removeCellsDone:function(){this.RemoveCells.reset(),this._potralDone=!1,this._cellsAttackDone=!1,this._cellAttackDoneCallback=null;var e=function(){this.portalDone()}.bind(this);this.Portal.openPortal(e),this.openUIMask(!1),this.CellAttack.cellsAttack()},setUserInteract:function(e){this.CloseTouch.active=!e},openUIMask:function(e){var t=0;e&&(t=255),this.CloseTouch.opacity=t},nexturn:function(){var e=function(){this.setUserInteract(!0),this.showlineCellTips()}.bind(this);this.DetectDrawlines.shuffleAllNormalCells(e)},canConnect:function(e,t){if(!e||!t)return!1;var i=e.getComponent("Cell"),o=t.getComponent("Cell");return!!this.ProcessBoardCell.checkCellConnect(o,i)&&(!i.IsSideProp()&&!o.IsSideProp()&&(!i.haveBlockOrCover()&&(!!this.CheckSideCells.checkCellsConnect(e,t)&&!(!i.IsSameCellGroup(o)&&i.cellGroup!==r.Universal&&o.cellGroup!==r.Universal))))},removeCell:function(e){this.ProcessBoardCell.setCellNull(e),this.deSpawnCell(e)},deSpawnCell:function(e){if(e){var t=e.getComponent("Cell").celltype;n.instance.returnCell(e,t)}},spawnMonsterCell:function(e,t){var i=e.getComponent("Cell"),o=this.SpawnCells.salive,s=i.column,n=i.row,a=this.SpawnCells.createPrefab(t,s,n,o);if(a){this.ProcessBoardCell.setCell(i.column,i.row,a);(i=a.getComponent("Cell")).init(t,1),a.parent=e.parent,a.position=cc.v2(e.x,e.y),this.deSpawnCell(e)}},changeCellsZIndex:function(e,t){if(this.Drawline.getGuideIsDone())for(var i=0;i<o;i++)for(var n=0;n<s;n++){var a=this.ProcessBoardCell.getCell(n,i);if(a){var c=a.getComponent("Cell");c.IsBlock()?a.zIndex=t:c.IsSameCellGroup(e)&&(a.zIndex=t)}}else this.Drawline.changeCellsZIndex(t)},cellsIdle:function(e,t){this.CellsAnimation.showAnimation(l.Idle,e,t)},cellsBonustime:function(e,t){this.CellsAnimation.showAnimation(l.Bonustime,e,t)},cellsReady:function(e,t){this.CellsAnimation.showAnimation(l.Ready,e,t)},cellsCrazy:function(e,t){this.CellsAnimation.showAnimation(l.Crazy,e,t)},timeUp:function(e){this.CellsAnimation.showAnimation(l.TimeUp,e,1.2)},removeSidePropCells:function(){this.sideProplist.length=0},collectSidePropCells:function(e){if(this.sideProplist.length=0,e.length>=3)for(var t=[],i=0;i<e.length;i++){var o=e[i].getComponent("Cell"),s=o.row,n=o.column;this.ProcessBoardCell.getFourConorCells(n,s,t);for(var a=0;a<t.length;a++){var c=t[a],r=c.getComponent("Cell"),l=r.IsSideProp(),h=r.IsBlockCoverRemoved();if(l&&h)this.sideProplist.indexOf(c)<0&&this.sideProplist.push(c)}}},showPropsArea:function(e){this.PropCellAttackArea.clearCircles(),this.ProcessBoardCell.showAllCircles(!1),this.PropCellAttackArea.showPropsArea(e),this.PropCellAttackArea.showSidePropAreas(this.sideProplist),this.PropCellAttackArea.brushCells(e)},spawnCell:function(e,t,i,o,s){this.SpawnCells.createOneCell(e,t,i,o,s)},spawnOneCell:function(e,t,i){return this.SpawnCells.spawnOneCell(e,t,i)},drawlineHurtMonster:function(e){u.instance.drawlineHurtMonster(e)},drawlineHurtMonsterOver:function(){var e=u.instance.getMonster();e&&e.getComponent("Monster").drawlineHurtOver()},showCircle:function(e){if(e.length<3)this._circleNode&&(this._circleNode.active=!1);else{var t=u.instance.getMonster();if(t){var i="",o=e[0].getComponent("Cell"),s=c.UnKnown;if(o.normalCell()||o.propNormalCell())switch(s=o.celltype,o.propNormalCell()&&(s=o.cellGroup),s){case c.Cell1:i="redcircle";break;case c.Cell2:i="ziseCircle";break;case c.Cell3:i="yellowCircle";break;case c.Cell4:i="greenCircle";break;case c.Cell5:i="whiteCircle"}var n=t.getComponent("Monster");if(s===n.getAttackAddtionCellType()||s===n.getDefenceCellType()){if(!this._circleNode){var a=cc.instantiate(this.circle);a.zIndex=10,a.parent=this.node,this._circleNode=a;var r=cc.scaleTo(.4,1.15,1.15).easing(cc.easeOut(3)),l=cc.scaleTo(.4,1,1).easing(cc.easeOut(3)),h=cc.sequence(r,l);a.runAction(cc.repeatForever(h))}this._circleNode.active=!0;var d=e[e.length-1];this._circleNode.x=d.x+d.width/2,this._circleNode.y=d.y+d.height/2;var p=this._circleNode.getComponent(cc.Sprite);if(cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var o=t.getSpriteFrame(i);p.spriteFrame=o}),s===n.getAttackAddtionCellType()){var v=this._circleNode.getChildByName("attack"),f=this._circleNode.getChildByName("defence");v&&(v.active=!0),f&&(f.active=!1)}else if(s===n.getDefenceCellType()){var m=this._circleNode.getChildByName("attack"),g=this._circleNode.getChildByName("defence");m&&(m.active=!1),g&&(g.active=!0)}}}}},onBtnRoleSkill:function(){this.UIMask.active=!0,this.RoleSkillNode.active=!0,this.switchRole.active=!1,this.RoleSkillNode.getComponent("SwitchRoleSkill").openSkills(!0),this.continueSkillBtn.active=!0},onBtnContinueFunc:function(){this.RoleSkillNode.getComponent("SwitchRoleSkill").openSkills(!1),this.RoleSkillNode.active=!1,this.switchRole.active=!0,this.continueSkillBtn.active=!1,this.UIMask.active=!1},cellRemoveEffect:function(e,t,i){var o=n.instance.getCellBlood(e);if(o){var s=o.getComponent("CellBlood");s.scale=.75,o.parent=t,o.setPosition(i);s.celltype=e,s.play(function(){n.instance.putCellBlood(o,e)})}}}));cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",JsonData:"JsonData",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",RPGManager:"RPGManager",ShowFloatWord:"ShowFloatWord",Utils:"Utils"}],BossRoad:[function(e,t,i){"use strict";cc._RF.push(t,"739e9RCOMZGeI4F1bWSXRRy","BossRoad");var o=e("EnumDefine"),s=e("Utils"),n=o.FightKind,a=e("JsonData");cc.Class({extends:cc.Component,properties:{skeleton:{default:null,type:sp.Skeleton},roadBar:cc.ProgressBar},onLoad:function(){switch(s.levelData.StageType){case n.NormalFight:case n.BossFight:default:this.node.active=!1}this.init()},start:function(){},init:function(){var e=this,t=s.levelID;a.instance.loadLevelData(t,function(t){t.StageType;var i=t.WaveEnemyID.split(";");if(i.length>0){var o=i[0].split(":");if(o.length>0){var s=o[0],n=parseInt(s);a.instance.loadMonsterData(n,function(t){e.loadSkeletonData(t)})}}})},loadSkeletonData:function(e){var t=this,i="spine/monster/"+e.AnimeRes;cc.loader.loadRes(i,sp.SkeletonData,function(e,i){t.skeleton.skeletonData=i,t.skeleton.setAnimation(0,"idle",!0)})},updateRoadBar:function(e){this.roadBar.progress>=1||(this.roadBar.progress+=e)},IsTimeOver:function(){return this.roadBar.progress>=1}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",Utils:"Utils"}],Boxes:[function(e,t,i){"use strict";cc._RF.push(t,"799c7HxV4VEjK65lR/1jK6i","Boxes");var o=e("Utils").NUMROWS,s=e("Utils").NUMCOLUMNS,n=e("Utils"),a=(e("EnumDefine"),e("ProcessStory"));cc.Class({extends:cc.Component,properties:{boxFarm1_1:{default:null,type:cc.SpriteFrame},boxFarm1_2:{default:null,type:cc.SpriteFrame}},onLoad:function(){},start:function(){},spawnBoxes:function(){var e=a.instance.stageFileNamesData,t=e.box1,i=e.box2,o=n.StageSpriteAtlas,s=o.getSpriteFrame(t),c=o.getSpriteFrame(i);this.boxlist1=[],this.boxlist2=[],this.sideboxlist=[],this.createBoxes(s,c)},fadeTo:function(e,t){for(var i=0;i<this.boxlist1.length;i++){this.boxlist1[i].runAction(cc.fadeTo(.5,e))}for(var o=0;o<this.boxlist2.length;o++){this.boxlist2[o].runAction(cc.fadeTo(.5,e))}var s=cc.callFunc(function(){t&&t()},this);this.node.runAction(cc.sequence(cc.delayTime(.5),s))},changeBoxes:function(e,t){for(var i=0;i<this.boxlist1.length;i++){var o=this.boxlist1[i];o.getComponent(cc.Sprite).spriteFrame=e,o.runAction(cc.fadeTo(.5,255))}for(var s=0;s<this.boxlist2.length;s++){var n=this.boxlist2[s];n.getComponent(cc.Sprite).spriteFrame=t,n.runAction(cc.fadeTo(.5,255))}},createBoxes:function(e,t){for(var i=!1,n=!1,a=-3;a<=o+1;a++){n=0!=i,i=!i;for(var c=-5;c<s+5;c++){var r=new cc.Node(""),l=r.addComponent(cc.Sprite);n?(l.spriteFrame=e,this.boxlist1.push(r)):(l.spriteFrame=t,this.boxlist2.push(r)),n=!n,l.sizeMode=cc.Sprite.SizeMode.CUSTOM,l.type=cc.Sprite.Type.SLICED,r.parent=this.node;var h=this.node.width/s,u=this.node.height/o;r.setContentSize(h+1,u+1);var d=h/2+c*h-this.node.width/2,p=u/2+a*u-this.node.height/2;r.setPosition(d,p),r.zIndex=-2,(c<0||c>=s||a<0)&&this.createOutSideBox(c,a)}}},createOutSideBox:function(e,t){var i=this;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(n,a){var c=a.getSpriteFrame("weed2"),r=new cc.Node(""),l=r.addComponent(cc.Sprite);l.spriteFrame=c,l.sizeMode=cc.Sprite.SizeMode.CUSTOM,l.type=cc.Sprite.Type.SLICED,r.parent=i.node;var h=i.node.width/s,u=i.node.height/o;r.setContentSize(h+1,u+1);var d=h/2+e*h-i.node.width/2,p=u/2+t*u-i.node.height/2;r.setPosition(d,p),r.zIndex=-2})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",ProcessStory:"ProcessStory",Utils:"Utils"}],BulletPool:[function(e,t,i){"use strict";cc._RF.push(t,"452c4ocJ8tKzbUajB1JuwDb","BulletPool");var o=cc.Class({name:"BulletPool",properties:{prefab:cc.Prefab,size:0},ctor:function(){},init:function(){this._pool=new cc.NodePool("Bullet"),this._count=0},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab),this._count++),e},put:function(e){this._pool.put(e)}});t.exports=o,cc._RF.pop()},{}],Bullet:[function(e,t,i){"use strict";cc._RF.push(t,"e66dd4Ip0xNQqSdFr4mK+Ck","Bullet");e("EnumDefine").HurtFont;var o=e("PoolMng"),s=cc.v2();cc.Class({extends:cc.Component,properties:{bullettype:-1,moveSpeed:1e3},ctor:function(){this.damage=0,this._callback=null,this._movedt=0,this._moveDelay=1,this._hurtfont=0},init:function(e,t,i,o,s){var n=Math.atan2(i.y,i.x),a=-cc.misc.radiansToDegrees(n),c=90-a;this.node.rotation=c,this.deg=a,this.direction=i.normalize(),this.isMoving=!0,this.bullettype=o,this._callback=s,this._hurtfont=e,this.shootMonster(t)},onLoad:function(){},shootDone:function(e){o.instance.putBullet(this.node,this.bullettype),this._callback&&this._callback(e)},shootMonster:function(e){if(e){var t=e.getComponent("Monster");t.isHaveShield()?this.shootToMonsterShield(t):this.shootToMonsterSkeleton(t)}else this.shootDone(!0)},shootToMonsterShield:function(e){var t=this,i=e.MonsterShield.getShieldData().pos,n=this.node.position;i.sub(n,s);var a=s.mag()/200*.1,c=cc.moveTo(a,i).easing(cc.easeOut(3)),r=cc.callFunc(function(){var i=t.node.parent,s=cc.v2(t.node.x,t.node.y);if(t.bulletEffect(s,i),e.attackShield(t.bullettype,1))o.instance.putBullet(t.node,t.bullettype);else{var n=cc.moveBy(.2,cc.v2(0,-50)),a=cc.callFunc(function(){o.instance.putBullet(t.node,t.bullettype)},t);t.node.runAction(cc.sequence(n,a))}},this),l=cc.sequence(c,r);this.node.runAction(l)},shootToMonsterSkeleton:function(e){var t=this,i=e.node,n=i.position;n.y+=i.height/2;var a=this.node.position;n.sub(a,s);var c=s.mag()/200*.1,r=cc.moveTo(c,n).easing(cc.easeOut(3)),l=cc.callFunc(function(){var i=t.node.parent,s=cc.v2(t.node.x,t.node.y);if(t.bulletEffect(s,i),t.bullettype===e.getDefenceCellType()){var n=cc.moveBy(.2,cc.v2(0,-50)),a=cc.callFunc(function(){o.instance.putBullet(t.node,t.bullettype)},t);t.node.runAction(cc.sequence(n,a))}else e.hurt(t.damage,t._callback,t._hurtfont),o.instance.putBullet(t.node,t.bullettype)},this),h=cc.sequence(r,l);this.node.runAction(h)},bulletEffect:function(e,t){var i=o.instance.getBulletHit();i.scale=1,i.parent=t,i.position=e;var s=cc.scaleTo(.4,0).easing(cc.easeOut(2)),n=cc.callFunc(function(){o.instance.putBulletHit(i)},this),a=cc.sequence(s,n);i.runAction(a)},start:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine",PoolMng:"PoolMng"}],CDCard:[function(e,t,i){"use strict";cc._RF.push(t,"433fd2KnnNPt4SdWFsaPbbm","CDCard");var o=e("EnumDefine").SpinType;cc.Class({extends:cc.Component,properties:{doubleReward:cc.Node,numlabel:cc.Label,reward:cc.Sprite,bkReward:cc.Sprite,bk:cc.Sprite},onLoad:function(){this.doubleReward.active=!1},start:function(){},show:function(e,t,i,s){switch(i&&(this.doubleReward.active=!0),this.numlabel.string=t+"",e){case o.Coin:this.showCoins(s);break;case o.Diamond:this.showDiamonds(s)}},showCoins:function(e){var t=this;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(i,o){t.reward.spriteFrame=o.getSpriteFrame("buttonCoin"),t.bkReward.spriteFrame=o.getSpriteFrame("SaleThree"),e&&e()})},showDiamonds:function(e){var t=this;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(i,o){t.reward.spriteFrame=o.getSpriteFrame("buttonDiamond"),t.bkReward.spriteFrame=o.getSpriteFrame("SaleDiamondThree"),e&&e()})}}),cc._RF.pop()},{EnumDefine:"EnumDefine"}],CDPool:[function(e,t,i){"use strict";cc._RF.push(t,"b1dd9X0jp1IL558kWPGLm+Y","CDPool");var o=cc.Class({name:"CDPool",properties:{prefab:cc.Prefab,size:0},ctor:function(){},init:function(){this._pool=new cc.NodePool("CDPool"),this._count=0},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab),this._count++),e},put:function(e){this._pool.put(e),this._count-=1}});t.exports=o,cc._RF.pop()},{}],CameraControl:[function(e,t,i){"use strict";cc._RF.push(t,"d1e93YcLzhOiohXX6bHj9ay","CameraControl");var o=e("RPGManager"),s=cc.v2(),n=cc.v2();cc.Class({extends:cc.Component,properties:{RPGNode:{default:null,type:cc.Node},cameraNode:cc.Node,jumpZoom:!1,centerAtStart:!1,smoothFollow:!1,followX:{default:0,visible:function(){return this.smoothFollow}},followY:{default:0,visible:function(){return this.smoothFollow}},minFollowDist:{default:0,visible:function(){return this.smoothFollow}},followRatio:{default:0,visible:function(){return this.smoothFollow}},overview:!0,overviewTargets:{default:[],type:[cc.Node],visible:function(){return this.overview}},overviewMargin:{default:0,visible:function(){return this.overview}},speedZoom:!1,zoomInSpeed:{default:0,visible:function(){return this.speedZoom}},zoomOutSpeed:{default:0,visible:function(){return this.speedZoom}},canShake:!1,shakeDuration:{default:0,visible:function(){return this.canShake}},pointerPan:!1,pointerXMult:{default:0,visible:function(){return this.pointerPan}},pointerYMult:{default:0,visible:function(){return this.pointerPan}},useBoundaries:!1,topBound:{default:0,visible:function(){return this.useBoundaries}},bottomBound:{default:0,visible:function(){return this.useBoundaries}},leftBound:{default:0,visible:function(){return this.useBoundaries}},rightBound:{default:0,visible:function(){return this.useBoundaries}}},ctor:function(){this._zoomIn=!1,this._zoomOut=!1,this._zoomCallback=null,this._zoomStep=.2,this._work=!1},onLoad:function(){var e=this;this.overview=!0,this.startFollow=!1,this.anim=this.node.getComponent("cc.Animation"),this.visibleSize=cc.view.getVisibleSize(),this.cameraNode&&(this.camera=this.cameraNode.getComponent("cc.Camera"),this.initZoomRatio=this.camera.zoomRatio,this.ratioZoomIn=this.camera.zoomRatio,this.ratioZoomOut=this.ratioZoomIn-.1),this.centerAtStart,this.previousPos=this.cameraNode.position,this.pointerPan&&(this.overview=!1,this.speedZoom=!1,this.pointerPos=null),this.overview&&(this.jumpZoom=!1,this.speedZoom=!1),this.speedZoom&&(this.jumpZoom=!1);var t=cc.callFunc(function(){e._work=!0},this);this.node.runAction(cc.sequence(cc.delayTime(.5),t))},start:function(){n.x=this.cameraNode.x,n.y=this.cameraNode.y},onEnable:function(){},onDisable:function(){},lateUpdate:function(e){if(this.RPGNode&&this._work){var t=void 0;if(t=this.overview?this.RPGNode.convertToWorldSpaceAR(this.getOverviewTargetsMidpoint()):this.RPGNode.convertToWorldSpaceAR(this.RPGNode.position),this.pointerPan&&this.pointerPos){var i=this.pointerPos.x/(this.visibleSize.width/2)-1,o=this.pointerPos.y/(this.visibleSize.height/2)-1;i*=this.pointerXMult,o*=this.pointerYMult,t=cc.pAdd(t,cc.v2(i,o))}if(n=this.cameraNode.parent.convertToNodeSpaceAR(t),this.smoothFollow?((Math.abs(t.x-n.x)>=this.followX||Math.abs(t.y-n.y)>=this.followY)&&(this.startFollow=!0),this.startFollow&&(n=n.lerp(t,this.followRatio),t.sub(n,s),s.mag<=this.minFollowDist&&(this.startFollow=!1))):n=this.cameraNode.parent.convertToNodeSpaceAR(t),this.useBoundaries){var a=this.visibleSize.width/2/this.camera.zoomRatio,c=this.visibleSize.height/2/this.camera.zoomRatio,r=(n.x,n.x,n.y-c),l=n.y+c;r<this.bottomBound&&(n.y=this.bottomBound+c),l>this.topBound&&(n.y=this.topBound-c),n.y=0}this.cameraNode.position=this.cameraNode.position.lerp(n,.1),this.zoomUpdate(e)}},getOverviewTargetsMidpoint:function(){return o.instance.getTargetMidPoint()},shakeCamera:function(){this.canShake&&(this.anim.play("shake"),this.scheduleOnce(this.stopShake.bind(this),this.shakeDuration))},stopShake:function(){this.anim.stop()},onMouseMove:function(e){this.pointerPos=e.getLocation()},onTouchMove:function(e){this.pointerPos=e.getLocation()},zoomUpdate:function(e){if(this._zoomIn){if(Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=1e-5)return this.camera.zoomRatio=this.ratioZoomIn,this._zoomIn=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomIn,this._zoomStep)}if(this._zoomOut){if(Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,this._zoomOut=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomOut,this._zoomStep)}},isZoom:function(){return this._zoomIn||this._zoomOut},isZoomOut:function(){return Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=1e-5},isZoomIn:function(){return Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=1e-5},resetZoom:function(){this._zoomIn=!1,this._zoomOut=!1},zoomIn:function(e){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomIn=!0},zoomOut:function(e){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomOut=!0}}),cc._RF.pop()},{RPGManager:"RPGManager"}],CameraManager:[function(e,t,i){"use strict";cc._RF.push(t,"67bb7Vj4G1KJI7OmZqcSsG4","CameraManager");var o=cc.Class({extends:cc.Component,properties:{skyCameraNode:cc.Node,midOneCameraNode:cc.Node,battleCameraNode:cc.Node,uiCameraNode:cc.Node},onLoad:function(){o.instance=this},statics:{instance:null},start:function(){}});cc._RF.pop()},{}],CameraZoom:[function(e,t,i){"use strict";cc._RF.push(t,"ff28dQ1vHlImbXGh+RQ8qze","CameraZoom");cc.v2();var o=cc.v2();cc.Class({extends:cc.Component,properties:{cameraNode:cc.Node,smoothFollow:!1,speedZoom:!1,zoomInSpeed:{default:0,visible:function(){return!0}},zoomOutSpeed:{default:0,visible:function(){return!0}},canShake:!1,shakeDuration:{default:0,visible:function(){return this.canShake}},ratioZoomIn:1,ratioZoomOut:1},ctor:function(){this._zoomIn=!1,this._zoomOut=!1,this._zoomCallback=null},onLoad:function(){this.startFollow=!1,this.anim=this.node.getComponent("cc.Animation"),this.visibleSize=cc.view.getVisibleSize(),this.cameraNode&&(this.camera=this.cameraNode.getComponent("cc.Camera"),this.initZoomRatio=this.camera.zoomRatio),this._upDateDt=0,this._upDateDelay=.005},start:function(){o.x=this.cameraNode.x,o.y=this.cameraNode.y},onEnable:function(){},onDisable:function(){},lateUpdate:function(e){this.zoomUpdate(e)},shakeCamera:function(){this.canShake&&(this.anim.play("shake"),this.scheduleOnce(this.stopShake.bind(this),this.shakeDuration))},stopShake:function(){this.anim.stop()},zoomUpdate:function(e){if(this._zoomIn){if(Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=.01)return this.camera.zoomRatio=this.ratioZoomIn,this._zoomIn=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomIn,this.zoomInSpeed)}if(this._zoomOut){if(Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=.01)return this.camera.zoomRatio=this.ratioZoomOut,this._zoomOut=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomOut,this.zoomOutSpeed)}},isZoom:function(){return this._zoomIn||this._zoomOut},isZoomOut:function(){return Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=.01},isZoomIn:function(){return Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=.01},resetZoom:function(){this._zoomIn=!1,this._zoomOut=!1},zoomIn:function(e){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=.01)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomIn=!0},zoomOut:function(e){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=.01)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomOut=!0}}),cc._RF.pop()},{}],CanvasInit:[function(e,t,i){"use strict";cc._RF.push(t,"207a7XD14lAgqW7MavNl3Bk","CanvasInit");var o=e("EnumDefine").EnterKind;cc.Class({extends:cc.Component,properties:{},ctor:function(){this.enterCode=o.Main},setEnterCode:function(e){this.enterCode=e},onLoad:function(){},onDestroy:function(){},start:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine"}],CardPool:[function(e,t,i){"use strict";cc._RF.push(t,"4df83+qHOdBkJTyDSV+ez0y","CardPool");var o=cc.Class({name:"CardPool",properties:{prefab:cc.Prefab,size:0},ctor:function(){},init:function(){this._pool=new cc.NodePool("CardPool");for(var e=0;e<this.size;e++){var t=cc.instantiate(this.prefab);this._pool.put(t)}},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab)),e},put:function(e){this._pool.put(e)}});t.exports=o,cc._RF.pop()},{}],CardinalSplineToXX:[function(e,t,i){"use strict";cc._RF.push(t,"ca96erOpr9D34RA3LrzImT0","CardinalSplineToXX"),cc.CardinalSplineToXX=cc.Class({name:"cc.CardinalSplineToXX",extends:cc.CardinalSplineTo,updatePosition:function(e){this._previousPosition=e;var t=this.target.position,i=e.sub(t),o=Math.atan2(i.y,i.x),s=-cc.misc.radiansToDegrees(o)+90;this.target.rotation=s,this.target.setPosition(e)}}),cc.cardinalSplineToXX=function(e,t,i){return new cc.CardinalSplineToXX(e,t,i)},cc._RF.pop()},{}],CartoonMonster:[function(e,t,i){"use strict";cc._RF.push(t,"97528ZLltNG3JPWc6FwziKe","CartoonMonster"),cc.Class({extends:cc.Component,properties:{midshotOne:cc.Node,midshotTwo:cc.Node,Monster:cc.Node,title:cc.Node},onLoad:function(){this.title.active=!1},midshotOneZoomOut:function(e){this.midshotOne.getComponent("CameraZoom").zoomOut(e)},showMonsters:function(e){var t=this;this.midshotTwo.getComponent("CameraZoom").zoomOut(e);var i=cc.callFunc(function(){t.title.active=!0,t.title.opacity=0,t.title.runAction(cc.fadeIn(.5))},this),o=cc.moveTo(1.5,cc.v2(0,-91)),s=cc.sequence(cc.delayTime(1.5*.8),i),n=cc.spawn(s,o);this.Monster.runAction(cc.sequence(n,null))},start:function(){var e=this;this.node.opacity=0;var t=cc.callFunc(function(){e.startShow()},this);this.node.runAction(cc.sequence(cc.delayTime(.5),cc.fadeIn(1),t))},startShow:function(){var e=this,t=cc.callFunc(function(){cc.director.loadScene("Map")},this),i=function(){this.node.runAction(cc.sequence(cc.fadeOut(1),t))}.bind(this),o=cc.callFunc(function(){e.showMonsters(i)},this);this.node.runAction(cc.sequence(cc.delayTime(2),o)),this.midshotOneZoomOut(null)}}),cc._RF.pop()},{}],Cartoon:[function(e,t,i){"use strict";cc._RF.push(t,"0fd4akGtsdEo4A0CLK/gv2y","Cartoon");var o=e("Words"),s=e("Utils");cc.Class({extends:cc.Component,properties:{SkyCamra:cc.Node,MidOneCamera:cc.Node,GroundCamera:cc.Node,Role:cc.Node,Monster:cc.Node,Word1:cc.Node,Word2:cc.Node,Word3:cc.Node,MonsterS1:cc.Node,MonsterM:cc.Node,MonsterS2:cc.Node},onLoad:function(){this.Word1.opacity=0,this.Word2.opacity=0,this.Word3.opacity=0,this.showMonster=!1,this.ShowRole=!1},start:function(){},show:function(e,t){var i=this;1===e?(this.Word1.getComponent(cc.Label).string=o.CartoonFarm_1,this.Word2.getComponent(cc.Label).string=o.CartoonFarm_2,this.Word3.getComponent(cc.Label).string=o.CartoonFarm_3):(this.Word1.getComponent(cc.Label).string=o.CartoonForest_1,this.Word2.getComponent(cc.Label).string=o.CartoonForest_2,this.Word3.getComponent(cc.Label).string=o.CartoonForest_3,this.setMonster(e)),this.ProcessStory=this.node.getComponent("ProcessStory"),this.ProcessStory.show(t);var s=cc.callFunc(function(){var e=function(){var e=this,t=cc.callFunc(function(){e.moveCamera(!0)},this);this.showWord1(),this.node.runAction(cc.sequence(cc.delayTime(1),t))}.bind(i);i.zoomOut(e)},this);this.node.runAction(cc.sequence(cc.delayTime(.5),s))},setMonster:function(e){for(var t=["Monster17","Monster15","Monster16"],i=this.MonsterM.parent,o=this.MonsterM.group,s=[this.MonsterS1.position,this.MonsterM.position,this.MonsterS2.position],n=this,a=function(e){var a=t[e],c=s[e],r=e;cc.loader.loadRes("json/Monster",function(e,t){for(var s=t.json,l=0;l<s.length;l++){var h=s[l];if(h.MonsterName===a){var u="prefab/monster/";u+=h.AnimeRes,cc.loader.loadRes(u,function(e,t){var s=cc.instantiate(t);s.scale=1,s.removeComponent("Monster"),s.parent=i,s.group=o,s.setPosition(c);var a=s.getChildByName("ProgressBar");a&&a.removeFromParent();var l=s.getChildByName("skeleton");if(l){var h=l.getComponent("sp.Skeleton");h&&h.setAnimation(0,"idle",!0)}0===r?(n.MonsterM.active=!1,n.MonsterM=n.Monster=s):1===r?(n.MonsterS1.active=!1,n.MonsterS1=s):2===r&&(n.MonsterS2.active=!1,n.MonsterS2=s)})}}})},c=0;c<t.length;c++)a(c)},zoomOut:function(e){this.SkyCamra.getComponent("CameraZoom").zoomOut(),this.MidOneCamera.getComponent("CameraZoom").zoomOut(),this.GroundCamera.getComponent("CameraZoom").zoomOut(e)},zoomIn:function(e){this.SkyCamra.getComponent("CameraZoom").zoomIn(),this.MidOneCamera.getComponent("CameraZoom").zoomIn(),this.GroundCamera.getComponent("CameraZoom").zoomIn(e)},moveCamera:function(e){var t=this.MidOneCamera.getComponent("MoveCamera");t.setMove(e),(t=this.GroundCamera.getComponent("MoveCamera")).setMove(e)},showWord1:function(){this.Word1.runAction(cc.fadeIn(1))},showWord2:function(){this.Word2.runAction(cc.fadeIn(1))},hideWord2:function(){this.Word2.runAction(cc.fadeOut(1))},showWord3:function(){this.Word3.runAction(cc.fadeIn(1))},enterMap:function(){var e=cc.callFunc(function(){if(s.levelResultData){var e=s.levelResultData;if(e){var t=e.explorationID,i=s.GetExplorationSubStage(t),o=s.GetExplorattionPath(i);cc.loader.loadRes(o,cc.SpriteAtlas,function(e,t){s.StageSpriteAtlas=t,cc.director.loadScene("Map")})}else cc.director.loadScene("Map")}else cc.director.loadScene("Map")},this);this.node.runAction(cc.sequence(cc.delayTime(.5),e))},update:function(e){var t=this;if(!this.showMonster&&this.GroundCamera.x>=this.Monster.x){this.showMonster=!0,this.moveCamera(!1),this.showWord2();var i=function(){var e=this,t=cc.callFunc(function(){var t=function(){var e=this,t=cc.callFunc(function(){e.moveCamera(!0),e.hideWord2()},this);this.node.runAction(cc.sequence(cc.delayTime(1),t))}.bind(e);e.zoomOut(t)},this);this.node.runAction(cc.sequence(cc.delayTime(1),t))}.bind(this);this.zoomIn(i)}if(!this.ShowRole&&this.GroundCamera.x>=this.Role.x){this.ShowRole=!0,this.moveCamera(!1),this.showWord3();var o=cc.callFunc(function(){t.enterMap()},this);this.node.runAction(cc.sequence(cc.delayTime(1),o))}}}),cc._RF.pop()},{Utils:"Utils",Words:"Words"}],CellAttack:[function(e,t,i){"use strict";cc._RF.push(t,"2c5e2o9ZWlK5bu/4z1IpREx","CellAttack");e("Utils");var o=e("EnumDefine").RemoveCellEffect,s=(e("EnumDefine").CellType,e("RPGManager")),n=e("CameraManager"),a=e("PoolMng"),c=e("PlayFightAudio"),r=e("Game"),l=cc.v2(),h=cc.v2();cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.board=this.node.getComponent("Board"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.celllist=[],this.petCelllist=[],this.longestDurationFire=0,this.ShootToPetDuration=0,this.longestDurationShootMonster=0},reset:function(){this.petCelllist=[],this.celllist=[],this.longestDurationFire=0,this.ShootToPetDuration=0,this.longestDurationShootMonster=0},start:function(){},hurt:function(e){if(e&&e.parent&&e.parent.parent){var t=e.getComponent("Cell");if(this.ProcessBoardCell.getCell(t.column,t.row)){var i=function(e,t){if(e){var i=t.getComponent("Cell");i.normalCell()||i.IsBrushCell()||i.propNormalCell()?this.removeCell(t):this.board.removeCell(t)}}.bind(this);t.hurt(i)}}},removeCell:function(e){var t=e.getComponent("Cell"),i=(t.celltype,t.row),o=t.column,n=e.getPosition();if(n.x+=e.width/2,n.y+=e.height/2,this.ProcessBoardCell.setCell(o,i,null),this.createCellBlood(n,t),s.instance.getActor(t.cellGroup)){var a=this.shootToActor(e);this.longestDurationShootMonster=this.longestDurationShootMonster<a?a:this.longestDurationShootMonster}else{var c=this.shootToMonster(e);this.longestDurationFire=this.longestDurationFire<c?c:this.longestDurationFire}},cellsAttack:function(){var e=this,t=this.longestDurationShootMonster>this.longestDurationFire?this.longestDurationShootMonster:this.longestDurationFire;t=this.ShootToPetDuration>t?this.ShootToPetDuration:t;var i=cc.callFunc(function(){s.instance.fire(e.celllist,e.petCelllist),e.reset()},this);this.node.runAction(cc.sequence(cc.delayTime(t),i));var o=cc.callFunc(function(){s.instance.fireOver()},this);this.node.runAction(cc.sequence(cc.delayTime(t),o))},shootToPet:function(e){var t=this;if(e&&e.parent&&e.parent.parent){var i=e.getComponent("Cell");i.celltype;e.group="UI";var o=i.skillID-100,n=s.instance.PetSkillUI.getPet(o);if(n){var a=cc.director.getScene()._children[0],c=n.parent.convertToWorldSpaceAR(n.position);c.x-=e.width/2;var r=a;c=r.convertToNodeSpaceAR(c);var h=e.parent.convertToWorldSpaceAR(e.getPosition());h=r.convertToNodeSpaceAR(h),e.removeFromParent(!1),e.setPosition(h),e.parent=r,e.zIndex=10,e.scale=.6,c.sub(h,l);var u=cc.callFunc(function(){e.scale=0,t.petCelllist.push(e)},this),d=cc.moveTo(.5,c).easing(cc.easeOut(3)),p=cc.scaleTo(0,0).easing(cc.easeOut(3)),v=cc.sequence(cc.delayTime(.475),p),f=cc.sequence(cc.spawn(d,v),u);return e.runAction(f),.5}this.deSpawnCell(e)}},shootToActor:function(e){var t=this;if(e&&e.parent&&e.parent.parent){var i=e.getComponent("Cell");i.celltype;e.group="UI";var o=s.instance.getActor(i.cellGroup).getComponent("Actor").getWorldPos();o.x-=e.width/2;var n=e.parent.parent;o=n.convertToNodeSpaceAR(o);var a=e.parent.convertToWorldSpaceAR(e.getPosition());a=n.convertToNodeSpaceAR(a),e.removeFromParent(!1),e.setPosition(a),e.parent=n,e.scale=.6,o.sub(a,l);var c=cc.callFunc(function(){e.scale=0,t.celllist.push(e)},this),r=cc.moveTo(.5,o).easing(cc.easeOut(3)),h=cc.scaleTo(0,0).easing(cc.easeOut(3)),u=cc.sequence(cc.delayTime(.475),h),d=cc.sequence(cc.spawn(r,u),c);return e.runAction(d),.5}},shootToMonster:function(e){e.group="UI";var t=s.instance.getMonster();return s.instance.RPGAttack=!0,t?this.shootMonster(e,t):(this.deSpawnCell(e),0)},deSpawnCell:function(e){this.board.deSpawnCell(e)},createCellBlood:function(e,t){if(!t.propNormalCell()){var i=t.getRemoveCellEffect(),s=t.celltype,n=this.node,r=e;switch(i){case o.FruitJuice:this.board.cellRemoveEffect(s,n,r),c.instance.playKillCell();break;case o.ExplosionSmall:var l=a.instance.getExplosion(0);if(l){l.parent=n,l.position=r;l.getComponent("ExplosionSmall").explosion(function(){a.instance.putExplosion(l,0)}),c.instance.playExploision()}break;case o.ExplosionBig:var h=a.instance.getExplosion(1);if(h){h.parent=n,h.position=r;h.getComponent("ExplosionBig").explosion(function(){a.instance.putExplosion(h,1)}),c.instance.playExploision()}}}},shootMonster:function(e,t){return t.getComponent("Monster").isHaveShield()?this.shootToMonsterShield(e,t):this.shootToMonsterSkeleton(e,t)},shootToMonsterShield:function(e,t){var i=this,o=e.getComponent("Cell"),s=t.getComponent("Monster"),a=s.MonsterShield.getShieldData(),c=t.convertToWorldSpaceAR(a.node.getPosition());(c=n.instance.battleCameraNode.getComponent("cc.Camera").getWorldToCameraPoint(c,h)).x-=e.width/2,c.y-=a.node.height/2;var r=e.parent.parent;c=r.convertToNodeSpaceAR(c);var u=e.parent.convertToWorldSpaceAR(e.getPosition());u=r.convertToNodeSpaceAR(u),e.removeFromParent(!1),e.setPosition(u),e.parent=r,c.sub(u,l);var d=l.mag()/200*.1,p=cc.moveTo(d,c).easing(cc.easeOut(3)),v=cc.callFunc(function(){var t=e.parent,n=cc.v2(e.x+e.width*e.scale/2,e.y+e.height*e.scale/2);if(i.bulletEffect(n,t),s.attackShield(o.celltype,1))i.deSpawnCell(e);else{var a=cc.moveBy(.2,cc.v2(0,-50)),c=cc.callFunc(function(){i.deSpawnCell(e)},i);e.runAction(cc.sequence(a,c))}},this),f=cc.sequence(p,v);return e.runAction(f),d},shootToMonsterSkeleton:function(e,t){var i=this,o=e.getComponent("Cell"),s=t.getComponent("Monster"),n=s.getWorldPos();n.x-=e.width/2,n.y+=.35*e.height;var a=e.parent.parent;n=a.convertToNodeSpaceAR(n);var c=e.parent.convertToWorldSpaceAR(e.getPosition());c=a.convertToNodeSpaceAR(c),e.removeFromParent(!1),e.setPosition(c),e.parent=a,n.sub(c,l);var h=l.mag()/200*.1,u=cc.moveTo(h,n).easing(cc.easeOut(3)),d=cc.callFunc(function(){var t=e.parent,a=cc.v2(n);if(i.bulletEffect(a,t),o.celltype===s.getDefenceCellType()){var c=cc.moveBy(.2,cc.v2(0,-50)),l=cc.callFunc(function(){i.deSpawnCell(e)},i);e.runAction(cc.sequence(c,l))}else{var h=10;o.celltype===s.getAttackAddtionCellType()&&(h=parseInt(2*h)),h*=r.instance.comboVal,i.deSpawnCell(e),s.hurt(h)}},this),p=cc.sequence(u,d);return e.runAction(p),h},bulletEffect:function(e,t){var i=a.instance.getBulletHit();i.scale=1,i.parent=t,i.position=e,i.group="UI",i.zIndex=10;var o=cc.scaleTo(.4,0).easing(cc.easeOut(2)),s=cc.callFunc(function(){a.instance.putBulletHit(i)},this),n=cc.sequence(o,s);i.runAction(n)}}),cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",Game:"Game",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",RPGManager:"RPGManager",Utils:"Utils"}],CellBloodPool:[function(e,t,i){"use strict";cc._RF.push(t,"2d4ecdB5k1BCbH++9j0rK7v","CellBloodPool");var o=cc.Class({name:"CellBloodPool",properties:{prefab:cc.Prefab,size:0},ctor:function(){},init:function(){this._pool=new cc.NodePool("CellBlood"),this._count=0},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab),this._count++),e},put:function(e){this._pool.put(e)}});t.exports=o,cc._RF.pop()},{}],CellBlood:[function(e,t,i){"use strict";cc._RF.push(t,"d0dbaO+Ax1CWrAvGpFW2pKD","CellBlood"),cc.Class({extends:cc.Component,properties:{AnimationNode:cc.Node,SysNode:cc.Node},onLoad:function(){this.finished=null},start:function(){},onFinished:function(){this.AnimationNode.getComponent(cc.Animation).stop(),this.finished&&this.finished()},play:function(e){this.finished=e;var t=this.AnimationNode.getComponent(cc.Animation);t.on("finished",this.onFinished,this);t.play()},onAnimCompleted:function(){},unuse:function(){},reuse:function(){}}),cc._RF.pop()},{}],CellPool:[function(e,t,i){"use strict";cc._RF.push(t,"f7b70HRp5VG34ifNiaMDZHo","CellPool");var o=cc.Class({name:"CellPool",properties:{prefab:cc.Prefab,size:0},ctor:function(){},init:function(){this._pool=new cc.NodePool("Cell"),this._count=0},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab),this._count++),e},put:function(e){this._pool.put(e)}});t.exports=o,cc._RF.pop()},{}],CellsAnimation:[function(e,t,i){"use strict";cc._RF.push(t,"e31211RBMxK8ZJ9geV5r+0N","CellsAnimation");var o=e("Utils").NUMROWS,s=e("Utils").NUMCOLUMNS,n=e("EnumDefine").CellAnimationType;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell")},start:function(){},showAnimation:function(e,t,i,a){for(var c=0;c<o;c++)for(var r=0;r<s;r++){var l=this.ProcessBoardCell.getCell(r,c);if(l){var h=l.getComponent("Cell");if(h&&h.normalCell())switch(e){case n.Idle:h.idle();break;case n.Ready:h.ready(!1);break;case n.Bonustime:h.bonustime(!1);break;case n.Crazy:h.crazy(!1);break;case n.TimeUp:h.timeUp()}}}var u=cc.callFunc(function(){t&&t()},this);this.node.runAction(cc.sequence(cc.delayTime(i),u))}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],Cell:[function(e,t,i){"use strict";cc._RF.push(t,"b82dfwP+GpJCo2SX2ZwVlnj","Cell");var o=e("JsonData"),s=e("EnumDefine").CellType,n=e("EnumDefine").CellGroupType,a=e("EnumDefine").RemoveCellEffect,c=e("EnumDefine").CellBlockType,r=e("EnumDefine").CellsRelativeDir,l=e("ProcessBoardCell"),h=e("Board"),u=e("Utils"),d=e("Game"),p=e("Utils").NUMROWS,v=e("Utils").NUMCOLUMNS,f=e("PoolMng"),m=cc.Class({extends:cc.Component,properties:{cellNode:cc.Node},ctor:function(){this.row=0,this.column=0,this.fillHoled=!1,this.celltype=s.UnKnown,this.cellGroup=n.UnKnown,this.blockData=null,this.cellscale=1,this._circleParticle=null,this._lv=0,this.blockCover=null,this.datacell=null,this.skillNode=null,this.petSkillID=s.UnKnown,this._RemoveCellEffect=a.FruitJuice,this.monsterShootTip=null},onLoad:function(){},moveDown:function(e){if(this.normalCell()){var t=this.node.position,i=cc.v2(t.x,t.y);i.y+=this.node.height,this.node.position=i;this.moveTo(.5,e,.1,t)}},setRemoveCellEffect:function(e){this._RemoveCellEffect=e},getRemoveCellEffect:function(){return this._RemoveCellEffect},IsCellNodeSprite:function(){if(this.cellNode&&this.cellNode.getComponent("cc.Sprite"))return!0;return!1},setDataCell:function(e){this.datacell=e},getDataCell:function(){return this.datacell},init:function(e,t){this.celltype=e,this.setCellGroup(e),this._lv=t;var i=this;this.idle(),o.instance.loadBlockData(e,function(e){if(e){var t={};t.BlockId=e.BlockId,t.BlockName=e.BlockName,t.Fall=e.Fall,t.BlockType=e.BlockType,i.blockData=t}})},setCellGroup:function(e){switch(e){case s.Cell1:case s.One_Horinal1:case s.One_Horinal2:case s.One_Horinal3:case s.One_Horinal4:case s.One_Horinal5:case s.SOne_Brush1:case s.SOne_Brush2:case s.SOne_Brush3:case s.SOne_Brush4:this.cellGroup=n.Cell1;break;case s.Cell2:case s.Two_Vertical1:case s.Two_Vertical2:case s.Two_Vertical3:case s.Two_Vertical4:case s.Two_Vertical5:case s.STwo_Brush1:case s.STwo_Brush2:case s.STwo_Brush3:case s.STwo_Brush4:this.cellGroup=n.Cell2;break;case s.Cell3:case s.Three_LeftPlant1:case s.Three_LeftPlant2:case s.Three_LeftPlant3:case s.Three_LeftPlant4:case s.Three_LeftPlant5:case s.SThree_Brush1:case s.SThree_Brush2:case s.SThree_Brush3:case s.SThree_Brush4:this.cellGroup=n.Cell3;break;case s.Cell4:case s.Four_RightPlant1:case s.Four_RightPlant2:case s.Four_RightPlant3:case s.Four_RightPlant4:case s.Four_RightPlant5:case s.SFour_Brush1:case s.SFour_Brush2:case s.SFour_Brush3:case s.SFour_Brush4:this.cellGroup=n.Cell4;break;case s.Cell5:case s.Five_Cross1:case s.Five_Cross2:case s.Five_Cross3:case s.Five_Cross4:case s.Five_Cross5:case s.SFive_Brush1:case s.SFive_Brush2:case s.SFive_Brush3:case s.SFive_Brush4:this.cellGroup=n.Cell5;break;case s.UniversalBrush:this.cellGroup=n.Universal}},addSpider:function(e,t){e.parent=this.node,e.position=cc.v2(0,0),this.blockCover=e.getComponent("BlockCover"),this.blockCover.init(t.lv)},addBlockCover:function(e){var t=this;cc.loader.loadRes("prefab/cell/blockCover",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.active=!0,s.parent=t.node,s.scale=.8,s.position=cc.v2(t.node.width/2,t.node.height/2);var n=t.cellNode.getComponent("cc.Sprite");s.position=n?cc.v2(-t.node.width/2,-t.node.height/2):cc.v2(0,0),t.blockCover=s.getComponent("BlockCover"),t.blockCover.init(e.lv)})},canRemove:function(){var e=!0;return this._lv<=0&&(e=!1),this.blockData&&this.blockData.BlockType===c.NotRemoved&&(e=!1),e},hurt:function(e){if(!(this._lv<=0))if(this.blockCover){this.blockCover.hurt(),this.blockCover.IsAllRemoved()&&(this.blockCover.node.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf())),this.blockCover=null)}else{this.blockData?this.blockData.BlockType===c.NormalRemove&&this.processBlock():this._lv-=1;var t=0===this._lv;t&&(this.DieHurt(),d.instance.updateCell(this.celltype,1)),e&&e(t,this.node)}},processKillBlockDust:function(e,t,i){this.getRemoveCellEffect()===a.ExplosionSmall?this.smallExplosion(e,t):this.spawnBlockDust(e,t,i)},processBlock:function(){var e=this.node.parent,t=cc.v2(this.node.x+this.node.width/2,this.node.y),i="";switch(this.celltype){case s.Salive:var o=this.node.getComponent("Salive");o&&o.hurt(),this._lv-=1;break;case s.Fence:this.processKillBlockDust(e,t,this._lv),this._lv-=1;var n=this._lv;2===n?i="fence2":1===n&&(i="fence3");var a=this.cellNode;a&&cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var o=t.getSpriteFrame(i);a.getComponent("cc.Sprite").spriteFrame=o});break;case s.Weeds:this.processKillBlockDust(e,t,this._lv),this._lv-=1;var c=this._lv;2===c?i="weed2":1===c&&(i="weed2");var r=this.cellNode;r&&cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var o=t.getSpriteFrame(i);r.getComponent("cc.Sprite").spriteFrame=o});break;case s.Stakes:this.processKillBlockDust(e,t,this._lv),this._lv-=1;var l=this._lv;2===l?i="wood2":1===l&&(i="wood3");var h=this.cellNode;h&&cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var o=t.getSpriteFrame(i);h.getComponent("cc.Sprite").spriteFrame=o})}},IsBlockCoverRemoved:function(){return!this.blockCover},collectDiamond:function(){u.showDiamond(this.node.parent,this.node.position,10,null),d.instance.updateDiamond(10),h.instance.removeCell(this.node)},collectSpinKey:function(){},spawnBlockDust:function(e,t,i){var o="prefab/particle/";o+="WoodDust";var n=null,a="",c=this;switch(this.celltype){case s.Fence:1===i?a="fence1":2===i?a="fence2":1===i&&(a="fence3");var r="texture/UI";cc.loader.loadRes(r,cc.SpriteAtlas,function(i,o){n=o.getSpriteFrame(a),r="prefab/particle/WoodDust",c.loadBlockSysDust(r,n,e,t)});break;case s.Weeds:1===i?a="weed1":2===i?a="weed2":1===i&&(a="weed3");var l="texture/UI";cc.loader.loadRes(l,cc.SpriteAtlas,function(i,o){n=o.getSpriteFrame(a),l="prefab/particle/WoodDust",c.loadBlockSysDust(l,n,e,t)});break;case s.Stakes:1===i?a="wood1":2===i?a="wood2":1===i&&(a="wood3");var h="texture/UI";cc.loader.loadRes(h,cc.SpriteAtlas,function(i,o){n=o.getSpriteFrame(a),h="prefab/particle/WoodDust",c.loadBlockSysDust(h,n,e,t)});break;default:o="prefab/particle/WoodDust",n=null,this.loadBlockSysDust(o,n,e,t)}},loadBlockSysDust:function(e,t,i,o){var s=f.instance.getWoodDust();if(s){s.scale=1.2,s.parent=i,s.position=o;var n=s.getComponent(cc.ParticleSystem);n&&(n.resetSystem(),n.spriteFrame=null,n.spriteFrame=t);var a=cc.callFunc(function(){f.instance.putWoodDust(s)},this);s.runAction(cc.sequence(cc.delayTime(2),a))}},scaleAction:function(){var e=this.node.getComponent(cc.Animation);e&&e.play()},touchScaleAction:function(){var e=this.node.getComponent(cc.Animation);e&&e.play()},JumpScaleAction:function(){var e=this.cellscale,t=cc.scaleTo(.15,1.2*e).easing(cc.easeBounceInOut()),i=cc.scaleTo(.15,e).easing(cc.easeBounceInOut()),o=cc.sequence(t,i),s=cc.jumpBy(.15,cc.v2(0,0),6,1).easing(cc.easeOut(3)),n=cc.jumpBy(.15,cc.v2(0,0),-6,1).easing(cc.easeOut(3)),a=cc.skewTo(.075,0,2),c=cc.skewTo(.075,0,0),r=cc.sequence(a,c),l=cc.sequence(s,n),h=cc.spawn(o,l,r);this.node.runAction(h)},showTip:function(){this.scaleAction(),this.cancleShowTip(),this.showTipCnt=0,this.showTipCallback=function(){this.showTipCnt+=1,this.showTipCnt>3?(this.unschedule(this.showTipCallback),this.showTipCallback=null):this.scaleAction()},this.schedule(this.showTipCallback,1.5)},cancleShowTip:function(){this.showTipCallback&&(this.unschedule(this.showTipCallback),this.showTipCallback=null)},openChest:function(e){this.callback=e;var t=this.cellNode;if(t){var i=t.getComponent(cc.Animation);i&&(i.on("finished",this.shitcallback,this),i.play())}},shitcallback:function(){this.callback&&this.callback()},moveTo:function(e,t,i,o){var s=this;this.fillHoled=!1;var n=cc.moveTo(t,o).easing(cc.easeIn(1.5)),a=cc.callFunc(function(){s.scaleAction()},this);this.node.stopActionByTag(10);var c=cc.sequence(cc.delayTime(e),n,a);c.setTag(10),this.node.runAction(c)},NotRemoved:function(){return!(!this.blockData||-1!==this.blockData.BlockType)},IsKey:function(){return this.celltype===s.KeyUp||this.celltype===s.KeyDown||this.celltype===s.KeyLeft||this.celltype===s.KeyRight},IsBlockCell:function(){return!(!this.blockData||0!==this.blockData.Fall)},IsBlock:function(){return!(!this.blockCover||this.blockCover.IsAllRemoved())||!(!this.blockData||0!==this.blockData.Fall)},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.cellNode){var t=this.cellNode.getComponent("sp.Skeleton");t&&(t.timeScale=1,t.setAnimation(0,"ready",e))}},crazy:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.cellNode){var t=this.cellNode.getComponent("sp.Skeleton");t&&(t.timeScale=1,t.setAnimation(0,"crazy",e))}},bonustime:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.cellNode){var t=this.cellNode.getComponent("sp.Skeleton");t&&(t.timeScale=1,t.setAnimation(0,"bonustime",e))}},idle:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.cellNode){var t=this.cellNode.getComponent("sp.Skeleton");t&&(t.timeScale=1,t.setAnimation(0,"idle",e))}},timeUp:function(){if(this.cellNode){var e=this.cellNode.getComponent("sp.Skeleton");e&&(e.timeScale=2,e.setAnimation(0,"time up",!1))}},setAntiAliasTexParameters:function(){if(this.cellNode){var e=this.cellNode.getComponent("sp.Skeleton");if(e)e.skeletonData.textures[0].setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR)}},touch:function(){if(!this.IsBlockCell()&&(this.touchScaleAction(),this.cellNode)){var e=this.cellNode.getComponent("sp.Skeleton");e&&(e.setAnimation(0,"idle02",!1),e.timeScale=2.5)}},unTouch:function(){if(!this.IsBlockCell()&&(this.touchScaleAction(),this.cellNode)){var e=this.cellNode.getComponent("sp.Skeleton");e&&(e.setAnimation(0,"idle",!1),e.timeScale=1)}},unuse:function(){this.row=-1,this.column=-1,this.node.rotation=0,this.node.zIndex=0,this.node.scale=.8,this.celltype=s.UnKnown,this.cellGroup=n.UnKnown,this._lv=0,this.fillHoled=!1,this.idle(!1),this.skillNode&&(this.skillNode.removeFromParent(),this.skillNode=null),this.petSkillID=s.UnKnown,this.AddtionNode&&(this.AddtionNode.removeFromParent(),this.AddtionNode=null),this.removeMonsterShootTip(),this._RemoveCellEffect=a.FruitJuice,this.node.group="board"},reuse:function(){},haveBlockOrCover:function(){return!!this.blockCover||!(this.normalCell()||!this.blockData||this.blockData.BlockType!==c.NormalRemove)},DieHurt:function(){var e=function(e,t){e&&h.instance.removeCell(t)}.bind(this),t=this.node.getComponent("Cell");if(t.normalCell()){var i=t.row,o=t.column,s=l.instance.getSideCell(o,i);if(s){var n=s.getComponent("SideCell");if(n)n.sideLNum()>0&&n.hurt(r.Left),n.sideRNum()>0&&n.hurt(r.Right),n.sideTNum()>0&&n.hurt(r.Top),n.sideBNum()>0&&n.hurt(r.Bottom)}if(o-1>=0){var a=l.instance.getSideCell(o-1,i);if(a){var c=a.getComponent("SideCell");if(c)c.sideRNum()>0&&c.hurt(r.Right)}var u=l.instance.getCell(o-1,i);if(u){var d=u.getComponent("Cell");d.haveBlockOrCover()&&d.hurt(e)}}if(o+1<v){var f=l.instance.getSideCell(o+1,i);if(f){var m=f.getComponent("SideCell");if(m)m.sideLNum()>0&&m.hurt(r.Left)}var g=l.instance.getCell(o+1,i);if(g){var C=g.getComponent("Cell");C.haveBlockOrCover()&&C.hurt(e)}}if(i+1<p){var S=l.instance.getSideCell(o,i+1);if(S){var b=S.getComponent("SideCell");if(b)b.sideBNum()>0&&b.hurt(r.Bottom)}var k=l.instance.getCell(o,i+1);if(k){var _=k.getComponent("Cell");_.haveBlockOrCover()&&_.hurt(e)}}if(i-1>=0){var w=l.instance.getSideCell(o,i-1);if(w){var B=w.getComponent("SideCell");if(B)B.sideTNum()>0&&B.hurt(r.Top)}var D=l.instance.getCell(o,i-1);if(D){var y=D.getComponent("Cell");y.haveBlockOrCover()&&y.hurt(e)}}}},IsBrushCell:function(){switch(this.celltype){case s.SOne_Brush1:case s.SOne_Brush2:case s.SOne_Brush3:case s.SOne_Brush4:case s.STwo_Brush1:case s.STwo_Brush2:case s.STwo_Brush3:case s.STwo_Brush4:case s.SThree_Brush1:case s.SThree_Brush2:case s.SThree_Brush3:case s.SThree_Brush4:case s.SFour_Brush1:case s.SFour_Brush2:case s.SFour_Brush3:case s.SFour_Brush4:case s.SFive_Brush1:case s.SFive_Brush2:case s.SFive_Brush3:case s.SFive_Brush4:case s.UniversalBrush:return!0}return!1},IsSideProp:function(){switch(this.celltype){case s.SBomb1:case s.SBomb2:case s.SBomb3:case s.SBomb4:return!0}return!1},IsProp:function(){switch(this.celltype){case s.One_Horinal1:case s.One_Horinal2:case s.One_Horinal3:case s.One_Horinal4:case s.One_Horinal5:case s.SOne_Brush1:case s.SOne_Brush2:case s.SOne_Brush3:case s.SOne_Brush4:case s.Two_Vertical1:case s.Two_Vertical2:case s.Two_Vertical3:case s.Two_Vertical4:case s.Two_Vertical5:case s.STwo_Brush1:case s.STwo_Brush2:case s.STwo_Brush3:case s.STwo_Brush4:case s.Three_LeftPlant1:case s.Three_LeftPlant2:case s.Three_LeftPlant3:case s.Three_LeftPlant4:case s.Three_LeftPlant5:case s.SThree_Brush1:case s.SThree_Brush2:case s.SThree_Brush3:case s.SThree_Brush4:case s.Four_RightPlant1:case s.Four_RightPlant2:case s.Four_RightPlant3:case s.Four_RightPlant4:case s.Four_RightPlant5:case s.SFour_Brush1:case s.SFour_Brush2:case s.SFour_Brush3:case s.SFour_Brush4:case s.Five_Cross1:case s.Five_Cross2:case s.Five_Cross3:case s.Five_Cross4:case s.Five_Cross5:case s.SFive_Brush1:case s.SFive_Brush2:case s.SFive_Brush3:case s.SFive_Brush4:case s.SBomb1:case s.SBomb2:case s.SBomb3:case s.SBomb4:case s.ClearBombProp:return!0}return!1},normalCell:function(){return this.celltype==s.Cell1||this.celltype==s.Cell2||this.celltype==s.Cell3||this.celltype==s.Cell4||this.celltype==s.Cell5},propNormalCell:function(){switch(this.celltype){case s.One_Horinal1:case s.One_Horinal2:case s.One_Horinal3:case s.One_Horinal4:case s.One_Horinal5:case s.SOne_Brush1:case s.SOne_Brush2:case s.SOne_Brush3:case s.SOne_Brush4:case s.Two_Vertical1:case s.Two_Vertical2:case s.Two_Vertical3:case s.Two_Vertical4:case s.Two_Vertical5:case s.STwo_Brush1:case s.STwo_Brush2:case s.STwo_Brush3:case s.STwo_Brush4:case s.Three_LeftPlant1:case s.Three_LeftPlant2:case s.Three_LeftPlant3:case s.Three_LeftPlant4:case s.Three_LeftPlant5:case s.SThree_Brush1:case s.SThree_Brush2:case s.SThree_Brush3:case s.SThree_Brush4:case s.Four_RightPlant1:case s.Four_RightPlant2:case s.Four_RightPlant3:case s.Four_RightPlant4:case s.Four_RightPlant5:case s.SFour_Brush1:case s.SFour_Brush2:case s.SFour_Brush3:case s.SFour_Brush4:case s.Five_Cross1:case s.Five_Cross2:case s.Five_Cross3:case s.Five_Cross4:case s.Five_Cross5:case s.SFive_Brush1:case s.SFive_Brush2:case s.SFive_Brush3:case s.SFive_Brush4:if(this.cellGroup===n.Cell1||this.cellGroup===n.Cell2||this.cellGroup===n.Cell3||this.cellGroup===n.Cell4||this.cellGroup===n.Cell5)return!0}return!1},IsSameCellGroup:function(e){return this.cellGroup===e.cellGroup},IsHavePetSingleAttack:function(){return this.petSkillID!==s.UnKnown},smallExplosion:function(e,t){var i=f.instance.getExplosion(0);if(i){i.parent=e,i.position=t;i.getComponent("ExplosionSmall").explosion(function(){f.instance.putExplosion(i,0)})}},addMonsterShootTip:function(){this.removeMonsterShootTip();var e=this;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(t,i){var o=new cc.Node("");o.parent=e.node,o.position=cc.v2(e.node.width/2,e.node.height/2),o.group=e.node.group;var s=o.addComponent(cc.Sprite),n=i.getSpriteFrame("paopaoditu");s.spriteFrame=n,e.monsterShootTip=o;var a=cc.scaleTo(.6,1.1).easing(cc.easeOut(3)),c=cc.scaleTo(.6,1).easing(cc.easeOut(3)),r=cc.sequence(a,c),l=cc.repeatForever(r);e.monsterShootTip.runAction(l)})},removeMonsterShootTip:function(){this.monsterShootTip&&(this.monsterShootTip.removeFromParent(),this.monsterShootTip=null)}});t.exports=m,cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",Game:"Game",JsonData:"JsonData",PoolMng:"PoolMng",ProcessBoardCell:"ProcessBoardCell",Utils:"Utils"}],CheckSideCells:[function(e,t,i){"use strict";cc._RF.push(t,"d8a89yHMx9NK5bGn4y3x3Lr","CheckSideCells");var o=e("Utils"),s=e("EnumDefine").CellsRelativeDir;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell")},start:function(){},checkCellsConnect:function(e,t){var i=e.getComponent("Cell"),n=t.getComponent("Cell"),a=o.cellDirWithCell(e,t),c=this.ProcessBoardCell.getSideCell(i.column,i.row),r=this.ProcessBoardCell.getSideCell(n.column,n.row),l=null,h=null;switch(c&&(l=c.getComponent("SideCell")),r&&(h=r.getComponent("SideCell")),a){case s.Left:if(l&&l.sideRNum()>0||h&&h.sideLNum()>0)return!1;break;case s.Right:if(l&&l.sideLNum()>0||h&&h.sideRNum()>0)return!1;break;case s.Top:if(l&&l.sideBNum()>0||h&&h.sideTNum()>0)return!1;break;case s.Bottom:if(l&&l.sideTNum()>0||h&&h.sideBNum()>0)return!1;break;case s.LeftUpper:var u=this.checkLeftTopEdge(e);if(u)return!1;if(u=this.checkRightBottomEdge(t))return!1;if(u=this.checkHHEdge(e,t))return!1;if(u=this.checkVVEdge_LeftTop(e,t))return!1;break;case s.LeftLower:var d=this.checkLeftBottomEdge(e);if(d)return!1;if(d=this.checkRightTopEdge(t))return!1;if(d=this.checkHHEdge(e,t))return!1;if(d=this.checkVVEdge_RightTop(t,e))return!1;break;case s.RightLower:var p=this.checkRightBottomEdge(e);if(p)return!1;if(p=this.checkLeftTopEdge(t))return!1;if(p=this.checkHHEdge(e,t))return!1;if(p=this.checkVVEdge_LeftTop(t,e))return!1;break;case s.RightUpper:var v=this.checkRightTopEdge(e);if(v)return!1;if(v=this.checkLeftBottomEdge(t))return!1;if(v=this.checkHHEdge(e,t))return!1;if(v=this.checkVVEdge_RightTop(e,t))return!1}return!0},checkRightEdgeSide:function(e,t){var i=!0,o=this.ProcessBoardCell.getSideCell(e,t);o&&(o=o.getComponent("SideCell"));var s=this.ProcessBoardCell.getSideCell(e+1,t),n=this.ProcessBoardCell.getSideCell(e,t-1),a=this.ProcessBoardCell.getSideCell(e+1,t-1);return s&&(s=s.getComponent("SideCell")),n&&(n=n.getComponent("SideCell")),a&&(a=a.getComponent("SideCell")),o&&o.sideBNum()>0&&o.sideRNum()>0&&(i=!1),o&&o.sideBNum()>0&&s&&s.sideLNum()>0&&(i=!1),n&&n.sideTNum()>0&&s&&s.sideLNum()>0&&(i=!1),o&&o.sideBNum()>0&&s&&s.sideBNum()>0&&(i=!1),o&&o.sideBNum()>0&&a&&a.sideTNum()>0&&(i=!1),n&&n.sideTNum()>0&&a&&a.sideTNum()>0&&(i=!1),o&&o.sideRNum()>0&&n&&n.sideRNum()>0&&(i=!1),o&&o.sideRNum()>0&&a&&a.sideLNum()>0&&(i=!1),s&&s.sideLNum()>0&&n&&n.sideRNum()>0&&(i=!1),i},checkLeftEdgeSide:function(e,t){var i=!0,o=null,s=this.ProcessBoardCell.getSideCell(e,t);o&&(o=s.getComponent("SideCell"));var n=this.ProcessBoardCell.getSideCell(e-1,t);n&&(n=n.getComponent("SideCell"));var a=this.ProcessBoardCell.getSideCell(e,t-1);a&&(a=a.getComponent("SideCell"));var c=this.ProcessBoardCell.getSideCell(e-1,t-1);return c&&(c=c.getComponent("SideCell")),o&&o.sideBNum()>0&&o.sideLNum()>0&&(i=!1),o&&o.sideBNum()>0&&n&&n.sideRNum()>0&&(i=!1),a&&a.sideTNum()>0&&n&&n.sideRNum()>0&&(i=!1),o&&o.sideBNum()>0&&n&&n.sideBNum()>0&&(i=!1),o&&o.sideBNum()>0&&c&&c.sideTNum()>0&&(i=!1),a&&a.sideTNum()>0&&c&&c.sideTNum()>0&&(i=!1),o&&o.sideLNum()>0&&a&&a.sideLNum()>0&&(i=!1),o&&o.sideLNum()>0&&c&&c.sideRNum()>0&&(i=!1),n&&n.sideRNum()>0&&a&&a.sideRNum()>0&&(i=!1),i},checkVVEdge_LeftTop:function(e,t){var i=e.getComponent("Cell"),o=t.getComponent("Cell"),s=this.ProcessBoardCell.getSideCell(i.column,i.row),n=this.ProcessBoardCell.getSideCell(i.column,i.row-1),a=this.ProcessBoardCell.getSideCell(o.column,o.row),c=this.ProcessBoardCell.getSideCell(o.column,o.row+1);s&&(s=s.getComponent("SideCell")),n&&(n=n.getComponent("SideCell")),a&&(a=a.getComponent("SideCell")),c&&(c=c.getComponent("SideCell"));var r=!1;return s&&s.sideRNum()>0&&a&&a.sideLNum()>0&&(r=!0),s&&s.sideRNum()>0&&n&&n.sideRNum()>0&&(r=!0),c&&c.sideLNum()>0&&n&&n.sideRNum()>0&&(r=!0),c&&c.sideLNum()>0&&a&&a.sideLNum()>0&&(r=!0),r},checkVVEdge_RightTop:function(e,t){var i=e.getComponent("Cell"),o=t.getComponent("Cell"),s=this.ProcessBoardCell.getSideCell(i.column,i.row),n=this.ProcessBoardCell.getSideCell(i.column,i.row-1),a=this.ProcessBoardCell.getSideCell(o.column,o.row),c=this.ProcessBoardCell.getSideCell(o.column,o.row+1);s&&(s=s.getComponent("SideCell")),n&&(n=n.getComponent("SideCell")),a&&(a=a.getComponent("SideCell")),c&&(c=c.getComponent("SideCell"));var r=!1;return s&&s.sideLNum()>0&&a&&a.sideRNum()>0&&(r=!0),s&&s.sideLNum()>0&&n&&n.sideLNum()>0&&(r=!0),c&&c.sideRNum()>0&&n&&n.sideLNum()>0&&(r=!0),c&&c.sideRNum()>0&&a&&a.sideRNum()>0&&(r=!0),r},checkHHEdge:function(e,t){var i=e.getComponent("Cell"),o=t.getComponent("Cell"),s=this.ProcessBoardCell.getSideCell(i.column,i.row),n=this.ProcessBoardCell.getSideCell(i.column,i.row-1),a=this.ProcessBoardCell.getSideCell(o.column,o.row),c=this.ProcessBoardCell.getSideCell(o.column,o.row+1);s&&(s=s.getComponent("SideCell")),n&&(n=n.getComponent("SideCell")),a&&(a=a.getComponent("SideCell")),c&&(c=c.getComponent("SideCell"));var r=!1;return s&&s.sideBNum()>0&&a&&a.sideTNum()>0&&(r=!0),s&&s.sideBNum()>0&&c&&c.sideBNum()>0&&(r=!0),a&&a.sideTNum()>0&&n&&n.sideTNum()>0&&(r=!0),c&&c.sideBNum()>0&&n&&n.sideTNum()>0&&(r=!0),r},checkRightBottomEdge:function(e){var t=e.getComponent("Cell"),i=this.ProcessBoardCell.getSideCell(t.column,t.row),o=this.ProcessBoardCell.getSideCell(t.column-1,t.row),s=this.ProcessBoardCell.getSideCell(t.column,t.row+1);i&&(i=i.getComponent("SideCell")),o&&(o=o.getComponent("SideCell")),s&&(s=s.getComponent("SideCell"));var n=!1;return i&&i.sideTNum()>0&&i.sideLNum()>0&&(n=!0),i&&i.sideTNum()>0&&o&&o.sideRNum()>0&&(n=!0),i&&i.sideLNum()>0&&s&&s.sideBNum()>0&&(n=!0),o&&o.sideRNum()>0&&s&&s.sideBNum()>0&&(n=!0),n},checkLeftTopEdge:function(e){var t=e.getComponent("Cell"),i=this.ProcessBoardCell.getSideCell(t.column,t.row),o=this.ProcessBoardCell.getSideCell(t.column+1,t.row),s=this.ProcessBoardCell.getSideCell(t.column,t.row-1);i&&(i=i.getComponent("SideCell")),o&&(o=o.getComponent("SideCell")),s&&(s=s.getComponent("SideCell"));var n=!1;return i&&i.sideRNum()>0&&i.sideBNum()>0&&(n=!0),i&&i.sideRNum()>0&&s&&s.sideTNum()>0&&(n=!0),i&&i.sideBNum()>0&&o&&o.sideLNum()>0&&(n=!0),o&&o.sideLNum()>0&&s&&s.sideTNum()>0&&(n=!0),n},checkRightTopEdge:function(e){var t=e.getComponent("Cell"),i=this.ProcessBoardCell.getSideCell(t.column,t.row),o=this.ProcessBoardCell.getSideCell(t.column-1,t.row),s=this.ProcessBoardCell.getSideCell(t.column,t.row-1);i&&(i=i.getComponent("SideCell")),o&&(o=o.getComponent("SideCell")),s&&(s=s.getComponent("SideCell"));var n=!1;return i&&i.sideLNum()>0&&i.sideBNum()>0&&(n=!0),i&&i.sideLNum()>0&&s&&s.sideTNum()>0&&(n=!0),i&&i.sideBNum()>0&&o&&o.sideRNum()>0&&(n=!0),o&&o.sideRNum()>0&&s&&s.sideTNum()>0&&(n=!0),n},checkLeftBottomEdge:function(e){var t=e.getComponent("Cell"),i=this.ProcessBoardCell.getSideCell(t.column,t.row),o=this.ProcessBoardCell.getSideCell(t.column,t.row+1),s=this.ProcessBoardCell.getSideCell(t.column+1,t.row);i&&(i=i.getComponent("SideCell")),o&&(o=o.getComponent("SideCell")),s&&(s=s.getComponent("SideCell"));var n=!1;return i&&i.sideTNum()>0&&i.sideRNum()>0&&(n=!0),i&&i.sideTNum()>0&&s&&s.sideLNum()>0&&(n=!0),i&&i.sideRNum()>0&&o&&o.sideBNum()>0&&(n=!0),o&&o.sideBNum()>0&&s&&s.sideLNum()>0&&(n=!0),n}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],ChestBox:[function(e,t,i){"use strict";cc._RF.push(t,"1dd60Cy91BHs5abxc9ZuPom","ChestBox");e("Utils");var o=e("BaseUI"),s=e("OpenSdk");cc.Class({extends:o,properties:{ChestCardsNode:cc.Node,Bk:cc.Node,startlabel_card:cc.Label,endlabel_card:cc.Label,startlabel_coin:cc.Label,endlabel_coin:cc.Label,startlabel_diamond:cc.Label,endlabel_diamond:cc.Label,cardBk:cc.Node,coinBk:cc.Node,diamondBk:cc.Node,midBk:cc.Node},onLoad:function(){this.ChestCards=this.ChestCardsNode.getComponent("ChestCards")},start:function(){},setOpenChest:function(e){this.chest=e},show:function(e,t){if(this.cardBk.active=!1,this.coinBk.active=!1,this.diamondBk.active=!1,this.spinData=e,e){var i=e.cardNums,o=e.coinNums,s=e.diamondNums;if(i){var n=i[0],a=i[1];this.startlabel_card.string=n+"",this.endlabel_card.string=a+"",this.cardBk.active=!(n<=0&&a<=0)}if(o){var c=o[0],r=o[1];this.startlabel_coin.string=c+"",this.endlabel_coin.string=r+"",this.coinBk.active=!(c<=0&&r<=0)}if(s){var l=s[0],h=s[1];this.startlabel_diamond.string=l+"",this.endlabel_diamond.string=h+"",this.diamondBk.active=!(l<=0&&h<=0)}}this.node.scale=1,this.scaleShow(this.midBk,t),this.Bk.active=!0},onBtnUnlock:function(){var e=function(){var e=function(){this.Bk.active=!1,this.node.active=!1,this.midBk.scale=1;var e=this.chest;this.ChestCards.openChest(e.node)}.bind(this);this.scaleClose(this.midBk,e)}.bind(this);s.instance.showVideo(e,null)},onBtnClose:function(){var e=function(){this.Bk.active=!1,this.node.active=!1,this.midBk.scale=1}.bind(this);this.scaleClose(this.midBk,e)}}),cc._RF.pop()},{BaseUI:"BaseUI",OpenSdk:"OpenSdk",Utils:"Utils"}],ChestCardStory:[function(e,t,i){"use strict";cc._RF.push(t,"38717igi4pBPJuaFyEMzIeM","ChestCardStory");var o=e("Utils"),s=e("EnumDefine").ExplorationSubStage;cc.Class({extends:cc.Component,properties:{sun:cc.Sprite,perspective:cc.Sprite,midshotOne_1:cc.Sprite,midshotOne_2:cc.Sprite,midshotOne_3:cc.Sprite,midshotOne_4:cc.Sprite,foreground1:cc.Sprite,foreground2:cc.Sprite,foreground3:cc.Sprite,foreground4:cc.Sprite,ground:cc.Node,midshotOne:cc.Node,clouds:{default:[],type:cc.Sprite},snowFallNode:cc.Node},onLoad:function(){this.stageFileNamesData=null,this.nodelist=[]},start:function(){},adjust:function(){this.adjustGround(this.foreground1.node),this.adjustGround(this.foreground2.node),this.adjustGround(this.foreground3.node),this.adjustGround(this.foreground4.node),this.adjustMidShot(this.midshotOne_1.node),this.adjustMidShot(this.midshotOne_2.node),this.adjustMidShot(this.midshotOne_3.node),this.adjustMidShot(this.midshotOne_4.node)},updateAlignment:function(){},show:function(e){this.initExploration(e),this.adjust()},initExploration:function(e,t){this.nodelist=[],this.subStage=e;var i=this.getExplorationData(e);this.stageFileNamesData=i;var s=i.path,n=this,a=o.StageSpriteAtlas;a?(this.setAtlas(a,i),t&&t()):cc.loader.loadRes(s,cc.SpriteAtlas,function(e,o){n.setAtlas(o,i),t&&t()})},setAtlas:function(e,t){var i=e.getSpriteFrame(t.sun);this.sun&&(this.sun.spriteFrame=i,this.nodelist.push(this.sun.node)),i=e.getSpriteFrame(t.perspective),this.perspective&&(this.perspective.spriteFrame=i,this.updateAlignment(this.perspective.node),this.nodelist.push(this.perspective.node)),i=e.getSpriteFrame(t.midshot),this.midshotOne_1&&(this.midshotOne_1.spriteFrame=i,this.nodelist.push(this.midshotOne_1.node)),i=e.getSpriteFrame(t.midshot),this.midshotOne_2&&(this.midshotOne_2.spriteFrame=i,this.nodelist.push(this.midshotOne_2.node)),i=e.getSpriteFrame(t.midshot),this.midshotOne_3&&(this.midshotOne_3.spriteFrame=i,this.nodelist.push(this.midshotOne_3.node)),i=e.getSpriteFrame(t.midshot),this.midshotOne_4&&(this.midshotOne_4.spriteFrame=i,this.nodelist.push(this.midshotOne_4.node)),i=e.getSpriteFrame(t.foreground),this.foreground1&&(this.foreground1.spriteFrame=i,this.fliter(i),this.nodelist.push(this.foreground1.node)),i=e.getSpriteFrame(t.foreground),this.foreground2&&(this.foreground2.spriteFrame=i,this.fliter(i),this.nodelist.push(this.foreground2.node)),i=e.getSpriteFrame(t.foreground),this.foreground3&&(this.foreground3.spriteFrame=i,this.fliter(i),this.nodelist.push(this.foreground3.node)),i=e.getSpriteFrame(t.foreground),this.foreground4&&(this.foreground4.spriteFrame=i,this.fliter(i),this.nodelist.push(this.foreground4.node));for(var o=this.clouds,s=0;s<o.length;s++){var n=o[s];n&&(i=e.getSpriteFrame(t.clouds[s]),n.spriteFrame=i,this.nodelist.push(n.node))}},adjustGround:function(e){switch(this.subStage){case s.Farm1:case s.Farm2:case s.Farm3:e.height=102,e.y=290;break;case s.Forest1:case s.Forest2:case s.Forest3:e.height=175,e.y=310}},adjustMidShot:function(e){switch(this.subStage){case s.Farm1:e.height=201,e.y=184;break;case s.Farm2:e.height=297,e.y=264;break;case s.Farm3:e.height=201,e.y=184;break;case s.Forest1:case s.Forest2:case s.Forest3:e.height=292,e.y=262}},fadeTo:function(e,t){for(var i=0;i<this.nodelist.length;i++){this.nodelist[i].runAction(cc.fadeTo(.5,e))}var o=cc.callFunc(function(){t&&t()},this);this.node.runAction(cc.sequence(cc.delayTime(.5),o))},getExplorationData:function(e){var t="",i="",o="",n="",a="",c="",r="",l="",h="",u="",d="",p=[];switch(e){case s.Farm1:t="texture/farm",a="farm_boxtop1",c="farm_boxbottom1",r="farm_boxbottom1",l="farm_foreground1",h="farm_midshot1",u="farm_perspective1",d="farm_sun1",p=["cloud1","cloud2","cloud3"],i="farm_boxone1",o="farm_boxtwo1",n="farm_boxtop3";break;case s.Farm2:t="texture/farm",a="farm_boxtop2",c="farm_boxbottom2",r="farm_boxbottom2",l="farm_foreground2",h="farm_midshot2",u="farm_perspective2",d="farm_sun2",p=["cloud1","cloud2","cloud3"],i="farm_boxone2",o="farm_boxtwo2",this.moveWinds(this.midshotOne_1,0,-35),this.moveWinds(this.midshotOne_2,0,-35),this.moveWinds(this.midshotOne_3,0,-35),this.moveWinds(this.midshotOne_4,0,-35),n="farm_boxtop1";break;case s.Farm3:t="texture/farm",a="farm_boxtop3",c="farm_boxbottom3",r="farm_boxbottom3",l="farm_foreground3",h="farm_midshot3",u="farm_perspective3",d="moon",p=["cloud1","cloud2","cloud3"],i="farm_boxone3",o="farm_boxtwo3",n="farm_boxtop2",this.showSnowFall();break;case s.Forest1:t="texture/forest",a="forest_boxtop1",c="forest_boxbottom1",r="forest_boxbottom1",l="forest_foreground1",h="forest_midshot1",u="forest_perspective1",d="forest_sun",p=["forest_cloud1","forest_cloud1big","forest_cloud1"],this.hideWinds(this.midshotOne_1),this.hideWinds(this.midshotOne_2),this.hideWinds(this.midshotOne_3),this.hideWinds(this.midshotOne_4),i="forest_boxone1",o="forest_boxtwo1",n="forest_boxtop3";break;case s.Forest2:t="texture/forest",a="forest_boxtop2",c="forest_boxbottom2",r="forest_boxbottom2",l="forest_foreground2",h="forest_midshot2",u="forest_perspective2",d="forest_sun",p=["forest_cloud2","forest_cloud2big","forest_cloud2"],this.hideWinds(this.midshotOne_1),this.hideWinds(this.midshotOne_2),this.hideWinds(this.midshotOne_3),this.hideWinds(this.midshotOne_4),i="forest_boxone2",o="forest_boxtwo2",n="forest_boxtop1";break;case s.Forest3:t="texture/forest",a="forest_boxtop3",c="forest_boxbottom3",r="forest_boxbottom3",l="forest_foreground3",h="forest_midshot3",u="forest_perspective3",d="moon",p=["forest_cloud3","forest_cloud3big","forest_cloud3"],this.hideWinds(this.midshotOne_1),this.hideWinds(this.midshotOne_2),this.hideWinds(this.midshotOne_3),this.hideWinds(this.midshotOne_4),i="forest_boxone3",o="forest_boxtwo3",n="forest_boxtop2"}var v={};return v.path=t,v.box1=i,v.box2=o,v.topin=c,v.topout=a,v.bottom=r,v.foreground=l,v.midshot=h,v.perspective=u,v.sun=d,v.clouds=p,v.blockside=n,v},moveWinds:function(e,t,i){for(var o=e.node.children,s=0;s<o.length;s++){var n=o[s];n&&(n.x+=t,n.y+=i)}},hideWinds:function(e){for(var t=e.node.children,i=0;i<t.length;i++){var o=t[i];o&&(o.active=!1)}},fliter:function(e){var t=e.getTexture();t.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),t.setWrapMode(cc.Texture2D.WrapMode.GL_REPEAT,cc.Texture2D.WrapMode.GL_REPEAT)},showSnowFall:function(){}});cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],ChestCards:[function(e,t,i){"use strict";cc._RF.push(t,"302e7Uv8nNJ4KaM7sqd2cuw","ChestCards");var o=e("Utils"),s=e("Words"),n=e("LocalStorage"),a=(e("EnumDefine"),e("XPoolMng")),c=e("EnumDefine").CardPoolKind,r=(e("EnumDefine").ExplorationSubStage,cc.v2()),l=cc.v2();cc.Class({extends:cc.Component,properties:{SkyCamra:cc.Node,MidOneCamera:cc.Node,GroundCamera:cc.Node,chest1:cc.Node,chest2:cc.Node,chest3:cc.Node,chest4:cc.Node,UAV:cc.Node,groundCameraNode:cc.Node,dust:cc.Node,chestBoxNode:cc.Node,ColorBk:cc.Node,UIBaseNode:cc.Node,JustWordGuideNode:cc.Node,BackNode:cc.Node},onLoad:function(){this.UAV.active=!1,this.followX=50,this.minFollowDist=20,this.smoothFollow=!0,this.followRatio=.1,this.dust.active=!1,this.haveDropChest=!1,this.chestBoxNode.active=!1,this.uibase=this.UIBaseNode.getComponent("UIBase"),this.SpinCards=this.node.getComponent("SpinCards"),this.processSpinData=this.node.getComponent("ProcessSpinData"),this.SpinCards.setUIBase(this.uibase),this.boxgroup="SpinChestUI",this.ColorBk.active=!1,this.ColorBk.zIndex=-1,this.canCenterChest=!1,this.chest=null,this.canCenterAllChest=!1,this.chest1.active=!1,this.chest2.active=!1,this.chest3.active=!1,this.chest4.active=!1,this.JustWordGuideNode.active=!1,this.BackNode.active=!1,this.chestDatalist=[],this.willDropList=[],this.dropedList=[],this.maxDropedListCnt=4,this.openChestCount=0},start:function(){},spinChestDatas:function(e){for(var t=null,i=0;i<this.SpinJsonDatalist.length;i++){var o=this.SpinJsonDatalist[i];e===o.ID&&(t=o)}this.XData=t},getChestDatas:function(e){var t=this.XData;return 0===e?{coinNums:t.coinNums,diamondNums:null,cardNums:null,petNums:null}:1===e?{coinNums:null,diamondNums:t.diamondNums,cardNums:null,petNums:null}:2===e?{coinNums:null,diamondNums:null,cardNums:t.cardNums,petNums:t.petNums}:void 0},loadEndlessJsonData:function(e){var t=this;cc.loader.loadRes("json/EndlessSpin",function(i,o){for(var s=o.json,n=[],a=0;a<s.length;a++){var c=s[a],r={};r.ID=parseInt(c.ID),r.coinNums=t.splitNums(c.coinNums),r.diamondNums=t.splitNums(c.diamondNums),r.cardNums=t.splitNums(c.cardNums),r.petNums=t.splitNums(c.petNums),n.push(r)}t.SpinJsonDatalist=n,e&&e()})},splitNums:function(e){var t=0,i=0,o=e.split(",");return 1==o.length?(t=parseInt(o[0]),i=parseInt(o[0])):o.length>=2&&(t=parseInt(o[0]),i=parseInt(o[1])),[t,i]},show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.rewardChestcnt=t,this.endlessLevel=i,this.ProcessStory=this.node.getComponent("ChestCardStory"),this.ProcessStory.show(e);var o=n.instance.getOpenChestGuide();this.guideDone=o;for(var s=[],a=["chest1","chest2","chest3"],c=0;c<a.length;c++){var r=a[c],l=this.UAV.getChildByName(r);l&&s.push(l)}this.uavChestlist=s;for(var h=t;h<s.length;h++){var u=s[h];u&&(u.active=!1)}var d=function(){var e=this.endlessLevel;this.spinChestDatas(e),this.showChests(),this.startShow()}.bind(this);this.loadEndlessJsonData(d)},showJustWordGuide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.guideDone)t&&t();else{n.instance.setOpenChestGuide(!0),this.JustWordGuideNode.active=!0;var i=this.JustWordGuideNode.getComponent("JustWordGuide");i&&i.show(e,t)}},startShow:function(){var e=this,t=cc.callFunc(function(){e.zoomOut()},this),i=cc.callFunc(function(){e.moveCamera(!0)},this),o=cc.callFunc(function(){},this);this.node.runAction(cc.sequence(cc.delayTime(.5),t,cc.delayTime(1),i,cc.delayTime(5),o))},zoomOut:function(){this.SkyCamra.getComponent("CameraZoom").zoomOut(),this.MidOneCamera.getComponent("CameraZoom").zoomOut(),this.GroundCamera.getComponent("CameraZoom").zoomOut()},zoomIn:function(e){this.SkyCamra.getComponent("CameraZoom").zoomIn(),this.MidOneCamera.getComponent("CameraZoom").zoomIn(),this.GroundCamera.getComponent("CameraZoom").zoomIn(e)},moveCamera:function(e){var t=this.MidOneCamera.getComponent("MoveCamera");t.setMove(e),(t=this.GroundCamera.getComponent("MoveCamera")).setMove(e)},showChests:function(){for(var e=[0,1,2,3],t=[this.chest1,this.chest2,this.chest3,this.chest4],i=[],o=[],s=0;s<4;s++){var n=e[s],a=t[s];this.filterChest(a,n,o,i);var c=a.getComponent("Chest");c.setID(n),c.setChestBox(this.chestBoxNode)}this.willDropList=i,this.dropedList=o},filterChest:function(e,t,i,o){var s=n.instance.getEndlessChestUnlock(t);if(!s)return e.active=!1,void o.push(e);var a=s.place,c=s.open,r=s.spin,l={id:t,place:a,open:c,spin:r};if(this.chestDatalist.push(l),0===a||1===a&&1===c)return e.active=!1,void(o.length<this.rewardChestcnt&&o.push(e));1===a&&0===c&&(e.active=!0,e.getComponent("Chest").spinData=r,i.push(e))},canDropNewChest:function(){return!(this.dropedList.length>=this.maxDropedListCnt)},showUAV:function(){this.UAV.active=!0;var e=this.UAV,t=this.willDropList;if(!(t.length<=0)){var i=[];t.length>=3&&(t.length=3);var n,a=t[0];n=a.x;var c=function(){var o=this,c=cc.v2(e.x,e.y),r=[],l=cc.moveTo(1.5,cc.v2(n,c.y));r.push(l);var h=cc.callFunc(function(){var e=o.dropChest(a,0);i.push(e)},this);r.push(h);for(var u=function(s){var n=t[s],a=s,l=cc.callFunc(function(){var t=cc.v2(n.x,c.y),s=cc.callFunc(function(){var e=o.dropChest(n,a);i.push(e)},o),r=cc.moveTo(.5,t);e.runAction(cc.sequence(r,s))},o);r.push(l),r.push(cc.delayTime(.5))},d=1;d<t.length;d++)u(d);var p=cc.callFunc(function(){o.removeUAV(),o.canCenterChest=!1,o.canCenterAllChest=!0},this);r.push(p);var v=cc.callFunc(function(){var e=function(){if(!this.guideDone)for(var e=0;e<i.length;e++){var t=i[e].getComponent("Chest");0===e&&t.showGuide()}}.bind(o),t=s.SpinCards_1;o.showJustWordGuide(t,e)},this);r.push(cc.delayTime(.5)),r.push(v),e.runAction(cc.sequence(r))}.bind(this);o.ScaleShow(e,c)}},removeUAV:function(){this.haveDropChest=!0;var e=cc.moveBy(2,cc.v2(1e3,0)).easing(cc.easeInOut(3)),t=this.UAV,i=cc.callFunc(function(){t.removeFromParent(),t=null},this);t.runAction(cc.sequence(cc.delayTime(.2),e,i))},dropChest:function(e,t){var i=this,o=e.position,s=this.uavChestlist[t],n=cc.moveTo(.5,o).easing(cc.easeBackIn(5)),a=cc.scaleTo(.5,1.2).easing(cc.easeOut(3)),c=cc.spawn(n,a),r=e.parent,l=e.group,h=s.parent.convertToWorldSpaceAR(s.getPosition());h=r.convertToNodeSpaceAR(h),s.parent=r,s.position=h,s.group=l,s.zIndex=2,this.chest=s;var u=e.getComponent("Chest").ID,d=s.getComponent("Chest");d.ID=u,d.setChestBox(this.chestBoxNode),this.guideDone||d.showTitle();var p=this.getChestDatas(t);d.spinData=p,this.setChestData(u,1,0,p);var v=cc.callFunc(function(){var e=cc.instantiate(i.dust);e.active=!0,e.parent=r,e.position=cc.v2(o.x,o.y-s.height/2),e.group=l,e.zIndex=0,e.scale=3,d.Jump()});return s.runAction(cc.sequence(c,v)),s},showReward:function(e,t){var i=this.processSpinData.getSpinData(t),o=this.boxgroup,s=e.parent.convertToWorldSpaceAR(e.position),n=this.groundCameraNode.getComponent("cc.Camera"),a=cc.v2();n.getWorldToCameraPoint(s,a);var c=function(){this.zoomOut(),this.canCenterChest=!1,this.canCenterAllChest=!0}.bind(this),r=function(){this.ColorBk.active=!0,e.active=!1}.bind(this);this.SpinCards.show(e,a,i,o,c,r)},openChest:function(e){var t=function(){var t=cc.director.getScene()._children[0],i=e.parent.convertToWorldSpaceAR(e.position);i.y+=.5*e.height,i=t.convertToNodeSpaceAR(i);var o=e.getComponent(cc.Animation);o.play("openChestX");var s=function(){var t=e.getComponent("Chest"),i=t.spinData,o=t.ID;this.setChestData(o,1,1,i),this.playReWardAudio(),this.showflashEffect(e,cc.v2(0,0)),this.showReward(e,i),this.openChestCount+=1,t.unlock=!0}.bind(this);o.on("finished",this.shitcallback,this),this.openchestAnimationFinishedCallback=s;var n=cc.callFunc(function(){},this);e.runAction(cc.sequence(cc.delayTime(1),n))}.bind(this);this.chest=e,this.canCenterChest=!0,this.canCenterAllChest=!1,this.zoomIn(t)},shitcallback:function(){this.openchestAnimationFinishedCallback&&this.openchestAnimationFinishedCallback()},showflashEffect:function(e,t){var i=a.instance.getCard(c.OpenChest);if(i){i.parent=e,i.position=t,i.group=this.groupUI,i.scale=3;var o=i.getComponent(cc.ParticleSystem);o&&o.resetSystem();var s=cc.callFunc(function(){a.instance.putCard(i,c.OpenChest)},this);i.runAction(cc.sequence(cc.delayTime(2),s))}},playReWardAudio:function(){},onBackBtn:function(){if(this.writeChestData(),this.closeFunc){var e={};e.chest=this.openChestCount,this.closeFunc(e)}},update:function(e){var t=this.canDropNewChest(),i=this.GroundCamera.x;(t&&(this.UAV.active||i>=this.UAV.x&&(this.moveCamera(!1),this.UAV.active=!0,this.showUAV())),t)||i>=this.dropedList[0].x&&(this.canCenterAllChest=!0,this.moveCamera(!1));if(this.UAV.active&&!this.haveDropChest){var o=this.centerUAV();this.centerGroundCamera(o)}if(this.canCenterChest){var s=this.centerChest();this.centerGroundCamera(s)}else if(this.canCenterAllChest){var n=this.centerAllChest();this.centerGroundCamera(n)}if((this.canCenterAllChest||this.canCenterChest)&&!this.BackNode.active){this.BackNode.active=!0;var a=this.BackNode;a.scale=0;var c=cc.scaleTo(.5,1).easing(cc.easeOut(5));a.runAction(c)}},centerGroundCamera:function(e){var t=this.groundCameraNode;l=t.parent.convertToNodeSpaceAR(e),this.smoothFollow?(Math.abs(e.x-l.x)>=this.followX&&(this.startFollow=!0),this.startFollow&&(l=l.lerp(e,this.followRatio),e.sub(l,r),r.mag<=this.minFollowDist&&(this.startFollow=!1))):l=t.parent.convertToNodeSpaceAR(e),l.y=0,t.position=t.position.lerp(l,.1)},centerUAV:function(){var e=cc.view.getVisibleSize().width;cc.view.getVisibleSize().height;return r.x=this.UAV.x+.8*e,r.y=this.UAV.y,r},centerChest:function(){var e=cc.view.getVisibleSize().width;cc.view.getVisibleSize().height;return r.x=this.chest.x+.5*e,r.y=this.chest.y,r},centerAllChest:function(){for(var e=cc.view.getVisibleSize().width,t=(cc.view.getVisibleSize().height,[this.chest1,this.chest2,this.chest3,this.chest4]),i=0,o=0;o<t.length;o++){i+=t[o].x}return i/=t.length,r.x=i+.5*e,r},writeChestData:function(){for(var e=0;e<this.chestDatalist.length;e++){var t=this.chestDatalist[e],i=parseInt(t.id);n.instance.setEndlessChestUnlock(i,t)}},setChestData:function(e,t,i,o){for(var s=0;s<this.chestDatalist.length;s++){var n=this.chestDatalist[s];if(n)parseInt(n.id)===e&&(n.place=t,n.open=i,n.spin=o)}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils",Words:"Words",XPoolMng:"XPoolMng"}],ChestPop:[function(e,t,i){"use strict";cc._RF.push(t,"2a4e1+/JEFLNaoFk7RqbXd0","ChestPop");var o=e("BaseUI");cc.Class({extends:o,properties:{titleLabel:cc.Label,midbk:cc.Node,contentLabel:cc.Label},onLoad:function(){},start:function(){},show:function(e,t){this.okFunc=e,this.cancleFunc=t},onBtnOk:function(){var e=function(){this.midbk.scale=1,this.node.active=!1,this.okFunc&&this.okFunc()}.bind(this);this.scaleClose(this.midbk,e)},onBtnCancle:function(){var e=function(){this.midbk.scale=1,this.node.active=!1,this.cancleFunc&&this.cancleFunc()}.bind(this);this.scaleClose(this.midbk,e)}}),cc._RF.pop()},{BaseUI:"BaseUI"}],ChestReWard:[function(e,t,i){"use strict";cc._RF.push(t,"f2287ycVshAToVFxBeyUV6P","ChestReWard");e("EnumDefine").EnterKind;var o=e("Utils"),s=o.ProduceType,n=e("LocalStorage");cc.Class({extends:cc.Component,properties:{chest:cc.Node,glare:cc.Node,role:cc.Node,bk:cc.Node,audioReWard:{type:cc.AudioSource,default:null}},onLoad:function(){this.glare.active=!1,this.role.active=!1,this.uibase=null},showChest:function(e,t,i){var o=this;this.uibase=t,this.chest.active=!0;var s=this.chest.getComponent(cc.Animation);if(s){s.play("chestShake");var n=cc.callFunc(function(){s.stop(),s.on("finished",o.shitcallback,o),s.play("openChest");var t=function(){this.playReWardAudio(),this.showReWard(e,i),this.showflashEffect(this.chest,cc.v2(0,0)),s.stop()}.bind(o);o.openchestAnimationFinishedCallback=t},this);this.chest.runAction(cc.sequence(cc.delayTime(.5),n,cc.delayTime(1),cc.removeSelf()))}},shitcallback:function(){this.openchestAnimationFinishedCallback&&this.openchestAnimationFinishedCallback()},showflashEffect:function(e,t){cc.loader.loadRes("prefab/particle/killDustParticle",function(i,o){var s=cc.instantiate(o);s&&(s.scale=1,s.parent=e,s.position=t,s.runAction(cc.sequence(cc.delayTime(2),cc.removeSelf())))});cc.loader.loadRes("prefab/flashEffect",function(i,o){var s=cc.instantiate(o);if(s){s.scale=.5,s.parent=e,s.position=t;var n=s.getComponent(cc.Animation);n&&n.play(),s.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf()))}})},showReWard:function(e,t){var i=function(e){var i=e.role;if(""===i||void 0===i)this.rewardCoinAndDiamond(e,t);else{var o=parseInt(i),s=n.instance.getRoleData(o);s?this.rewardCoinAndDiamond(e,t):((s={}).roletype=o,s.lock=!1,s.level=1,n.instance.setRoleData(s),this.reWardOneRole(t))}}.bind(this);this.loadScoreReWardData(e,i)},reWardOneRole:function(e){var t=this;this.glare.active=!0,this.role.active=!0,this.bk.active=!0;var i=this.glare;i.active=!0;var s=cc.repeatForever(cc.rotateBy(3,360));i.runAction(s);var n=[cc.v2(-o.randomRange(20,30),o.randomRange(100,200)/8),cc.v2(-o.randomRange(20,30),o.randomRange(100,200)/8),cc.v2(0,0)],a=cc.bezierBy(.2,n),c=cc.callFunc(function(){var e=cc.jumpBy(.5,cc.v2(0,0),10,1).easing(cc.easeOut(2)),i=cc.jumpBy(.5,cc.v2(0,0),-10,1).easing(cc.easeOut(2));t.role.runAction(cc.sequence(e,i))}),r=cc.callFunc(function(){e&&e()},this);this.role.runAction(cc.sequence(a,c,cc.delayTime(2.4),r))},rewardCoinAndDiamond:function(e,t){(function(){}).bind(this);var i=parseInt(e.coin),o=parseInt(e.diamond),s=this.rewardCoin(i),n=this.rewardDiamond(o),a=s>n?s:n,c=cc.callFunc(function(){t&&t()},this),r=cc.sequence(cc.delayTime(a),c);this.node.runAction(r),this.bk.active=!1},showCoinDiamondPicture:function(e,t,i){cc.loader.loadRes("prefab/chest/ChestCoinDiamonds",function(o,s){var n=cc.instantiate(s);n&&(n.scale=1,n.parent=e,n.position=t,n.scale=0,i&&i(n))})},rewardCoin:function(e){var t=this.uibase.coinlabel,i=this.chest.parent.convertToWorldSpaceAR(this.chest.position);i=this.node.convertToNodeSpaceAR(i);var n=this.node,a=t.node.parent.convertToWorldSpaceAR(t.node.position);a=this.node.convertToNodeSpaceAR(a);var c=e/10,r=function(){this.uibase.updateCoin(c),this.uibase.playCoin()}.bind(this);return o.produceRandomNodeLineMove(s.ButtonCoin,10,i,a,n,r)},rewardDiamond:function(e){var t=this.chest.parent.convertToWorldSpaceAR(this.chest.position);t=this.node.convertToNodeSpaceAR(t);var i=this.node,n=this.uibase.diamondlabel,a=n.node.parent.convertToWorldSpaceAR(n.node.position);a=this.node.convertToNodeSpaceAR(a);var c=e,r=e/c,l=function(){this.uibase.updateDiamond(r),this.uibase.playCoin()}.bind(this);return o.produceRandomNodeLineMove(s.Diamond,c,t,a,i,l)},start:function(){},playReWardAudio:function(){this.audioReWard&&this.audioReWard.play()},loadScoreReWardData:function(e,t){cc.loader.loadRes("json/StarReward",function(i,o){for(var s=o.json,n=0;n<s.length;n++){var a=s[n],c=parseInt(a.star);if(e>=c){t&&t(a);break}}})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],Chest:[function(e,t,i){"use strict";cc._RF.push(t,"33b39FX1iFMSLs+hMARd1+8","Chest");var o=e("Utils");cc.Class({extends:cc.Component,properties:{titleNode:cc.Node,guideHand:cc.Node},ctor:function(){this.ID=-1,this.unlock=!1},onLoad:function(){this.titleNode&&(this.titleNode.active=!1),this.guideHand&&(this.guideHand.active=!1),this.spinData=null},start:function(){},setID:function(e){this.ID=e},setChestBox:function(e){this.boxNode=e},showGuide:function(){this.guideHand.active=!0;var e=this.guideHand.getComponent(cc.Animation).play();e.wrapMode=cc.WrapMode.Loop,e.speed=.1},showTitle:function(){this.titleNode.active=!0,o.ScaleShow(this.titleNode)},Jump:function(){var e=this.node.scale,t=cc.scaleTo(.2,1.2*e,.8*e).easing(cc.easeBounceInOut()),i=cc.scaleTo(.2,e,e).easing(cc.easeBounceInOut()),o=cc.sequence(t,i),s=cc.jumpBy(.2,cc.v2(0,0),35,1).easing(cc.easeOut(3)),n=cc.jumpBy(.2,cc.v2(0,0),-35,1).easing(cc.easeOut(3)),a=cc.jumpBy(.2,cc.v2(0,0),25,1).easing(cc.easeOut(3)),c=cc.jumpBy(.2,cc.v2(0,0),-25,1).easing(cc.easeOut(3)),r=cc.sequence(s,n,a,c),l=cc.spawn(o,r);this.node.runAction(l)},showGuideTouch:function(){},hideAll:function(){this.titleNode.active=!1,this.guideHand.active=!1,this.node.acitve=!1},touch:function(e){if(!this.unlock){var t=this.boxNode;if(t){t.active=!0;var i=t.getComponent("ChestBox"),o=function(){i.setOpenChest(this)}.bind(this);i.show(this.spinData,o)}}}}),cc._RF.pop()},{Utils:"Utils"}],CloseToBorderComponent:[function(e,t,i){"use strict";cc._RF.push(t,"6bfe4RRvIFCjpSNWCSrwW/v","CloseToBorderComponent");var o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(n<3?s(a):n>3?s(t,i,a):s(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,c=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeToBottom=!1,t.marginBottomInPx=0,t}return o(t,e),t.prototype.onLoad=function(){this.closeToBottom&&(this.node.position=cc.v2(this.node.position.x,-this.node.parent.height/2+this.node.anchorY*this.node.height+this.marginBottomInPx))},s([c({tooltip:"\u662f\u5426\u7d27\u8d34\u4e0b\u65b9\uff0c\u4e0d\u80fd\u548c\u7d27\u8d34\u4e0a\u65b9\u540c\u65f6\u4f7f\u7528"})],t.prototype,"closeToBottom",void 0),s([c({tooltip:"\u8ddd\u79bb\u4e0b\u65b9\u7684\u8ddd\u79bb\uff08px\uff09\uff0c\u5f00\u542f\u7d27\u8d34\u4e0b\u65b9\u65f6\u4f7f\u7528"})],t.prototype,"marginBottomInPx",void 0),t=s([a],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],CloudMove:[function(e,t,i){"use strict";cc._RF.push(t,"cdc91HgZ7pHT7trhpeYegEa","CloudMove"),cc.Class({extends:cc.Component,properties:{clouds:{default:[],type:cc.Node},offsets:{default:[],type:cc.Float},s1:cc.Node,s2:cc.Node,s3:cc.Node,sun:cc.Node},start:function(){this.sun.position=this.s1.position;var e=[this.s1.position,this.s2.position,this.s3.position],t=cc.cardinalSplineTo(400,e,0);this.sun.runAction(t)},update:function(e){cc.view.getVisibleOrigin();for(var t=cc.view.getVisibleSize(),i=0;i<this.clouds.length;i++){var o=this.clouds[i],s=o.x+this.offsets[i];s>t.width+o.width&&(s=-o.width/2-t.width/2),o.x=s}}}),cc._RF.pop()},{}],CoinDiamondCards:[function(e,t,i){"use strict";cc._RF.push(t,"5944bVey91IHpKA6bp+Cwih","CoinDiamondCards"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},spawnReWards:function(e,t,i,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,n=cc.director.getScene()._children[0],a=function(){this.CloseTouch.active=!1,this.openChestCnt+=1,this.openChestCnt>=16&&this.spawnNewBox()}.bind(this);if(1===s)this.spawnOneReWard(o,n,i,e,t,a);else{var c=function(){for(var c=this,r=[],l=function(l){var h=null;l===s-1&&(h=a);var u=cc.callFunc(function(){c.spawnOneReWard(o,n,i,e,t,h)},c);r.push(u),r.push(cc.delayTime(1.2))},h=0;h<s;h++)l(h);this.node.runAction(cc.sequence(r))}.bind(this);this.spawnDoubleLabel(i,c)}},spawnOneReWard:function(e,t,i,o,s,n){var a=this,c=cc.instantiate(e);c.active=!0,c.group=this.groupUI,c.position=i,c.parent=t,c.getChildByName("num").getComponent("cc.Label").string=s+"",c.scale=0;var r=cc.scaleTo(.4,1).easing(cc.easeOut(3)),l=cc.moveBy(.7,cc.v2(0,15)),h=cc.spawn(r,l),u=cc.callFunc(function(){a.spinRewardDone(c,o,s,i,n)},this),d=cc.sequence(h,u);c.runAction(d)},spinRewardDone:function(e,t,i,o,s){switch(t){case SpinType.Coin:e.removeFromParent(),this.coinReward(i,o,s);break;case SpinType.Diamond:e.removeFromParent(),this.diamondReward(i,o,s);break;case SpinType.SpinKey:this.keyReward(e,i,s);break;case SpinType.DoubleSpin:this.doubleSpinReward(e,i,s)}},coinReward:function(e,t,i){if(this.uibase){var o=this.UIBaseNode,s=t,n=this.uibase.coinlabel,a=n.node.parent.convertToWorldSpaceAR(n.node.position);a=o.convertToNodeSpaceAR(a);var c=function(){i&&i()}.bind(this);Utils.ProduceReWard(this.uibase,e,ProduceType.ButtonCoin,s,a,o,c,this.groupUI)}},diamondReward:function(e,t,i){if(this.uibase){var o=this.UIBaseNode,s=t,n=this.uibase.diamondlabel,a=n.node.parent.convertToWorldSpaceAR(n.node.position);a=o.convertToNodeSpaceAR(a);var c=function(){i&&i()}.bind(this);Utils.ProduceReWard(this.uibase,e,ProduceType.Diamond,s,a,o,c,this.groupUI)}}}),cc._RF.pop()},{}],CoinPool:[function(e,t,i){"use strict";cc._RF.push(t,"2266bC4iapDcKV28fhTERMV","CoinPool");var o=cc.Class({name:"CoinPool",properties:{linePrefab:cc.Prefab,linesize:2,slantLine:cc.Prefab,slantsize:2,scorelabelPrefab:cc.Prefab,scorelabelSize:5,saleCoin:cc.Prefab,saleCoinSize:5,bulletHit:cc.Prefab,bulletHitSize:5,monsterDieDust:cc.Prefab,monsterDieDust_Size:1,woodDust:cc.Prefab,woodDust_size:3},ctor:function(){},init:function(){this.linepool=new cc.NodePool("linenode"),this.slantLinePool=new cc.NodePool("slantlinenode"),this.scorelabelPool=new cc.NodePool(""),this.saleCoinPool=new cc.NodePool(""),this.bulletHitPool=new cc.NodePool(""),this.monsterDieDustPool=new cc.NodePool(""),this.woodDustPool=new cc.NodePool("")},getScoreLabel:function(){var e=this.scorelabelPool.get();return e||(e=cc.instantiate(this.scorelabelPrefab)),e},putScoreLabel:function(e){this.scorelabelPool.put(e)},getline:function(){var e=this.linepool.get();return e||(e=cc.instantiate(this.linePrefab)),e},putline:function(e){this.linepool.put(e)},getslantline:function(){var e=this.slantLinePool.get();return e||(e=cc.instantiate(this.slantLine)),e},putslantline:function(e){this.slantLinePool.put(e)},getSaleCoin:function(){var e=this.saleCoinPool.get();return e||(e=cc.instantiate(this.saleCoin)),e},putSaleCoin:function(e){this.saleCoinPool.put(e)},getBulletHit:function(){var e=this.bulletHitPool.get();return e||(e=cc.instantiate(this.bulletHit)),e},putBulletHit:function(e){this.bulletHitPool.put(e)},getMonsterDieDust:function(){var e=this.monsterDieDustPool.get();return e||(e=cc.instantiate(this.monsterDieDust)),e},putMonsterDieDust:function(e){this.monsterDieDustPool.put(e)},getWoodDust:function(){var e=this.woodDustPool.get();return e||(e=cc.instantiate(this.woodDust)),e},putWoodDust:function(e){this.woodDustPool.put(e)}});t.exports=o,cc._RF.pop()},{}],CoinUI:[function(e,t,i){"use strict";cc._RF.push(t,"4a3ddjecaRLypdAwkHyeV14","CoinUI");e("Utils").ProduceType,e("LocalStorage");var o=e("BaseUI");cc.Class({extends:o,properties:{coinNum1:{default:null,type:cc.Label},diamondNum1:{default:null,type:cc.Label},coinNum2:{default:null,type:cc.Label},diamondNum2:{default:null,type:cc.Label},coinNum3:{default:null,type:cc.Label},diamondNum3:{default:null,type:cc.Label},coinNum4:{default:null,type:cc.Label},diamondNum4:{default:null,type:cc.Label},CloseTouchNode:cc.Node},onLoad:function(){this.scaleShow(this.node),this.coinNums=[1e3,1e4,1e5,21e4],this.diamondNums=[10,80,750,1200],this.numlabels=[this.coinNum1,this.coinNum2,this.coinNum3,this.coinNum4],this.diamondlabels=[this.diamondNum1,this.diamondNum2,this.diamondNum3,this.diamondNum4];for(var e=this.coinNums,t=this.diamondNums,i=0;i<this.numlabels.length;i++)this.numlabels[i].string=e[i]+"",this.diamondlabels[i].string=t[i]+"";this.CloseTouchNode.active=!1},start:function(){},setUIBase:function(e){this.uibase=e},spawnDiamondUI:function(){var e=this,t=e.node;cc.loader.loadRes("prefab/UI/DiamondUI",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.active=!0,s.group=e.node.group,s.parent=t,s.position=cc.v2(),s.zIndex=10,e.scaleShow(s),s.getComponent("DiamondUI").setUIBase(e)})},onBtnBuy:function(e,t){if(this.uibase){var i=parseInt(t),o=this.numlabels[i],s=this.coinNums[i],n=this.diamondNums[i];if(this.uibase.getDiamondNum()<n)this.spawnDiamondUI();else{this.uibase.updateDiamond(-n);var a=cc.director.getScene()._children[0],c=o,r=c.node.parent.convertToWorldSpaceAR(c.node.position);r=a.convertToNodeSpaceAR(r),this.CloseTouchNode.active=!0;var l=function(){this.CloseTouchNode.active=!1}.bind(this);this.uibase.produceCoin(s,r,a,l)}}},onBtnCloseClicked:function(e){var t=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t)}}),cc._RF.pop()},{BaseUI:"BaseUI",LocalStorage:"LocalStorage",Utils:"Utils"}],CommonUtil:[function(e,t,i){"use strict";cc._RF.push(t,"65355xzZuFLWqGBo91C8Ldk","CommonUtil");var o=e("EnumDefine").PetType,s=e("Utils"),n=cc.color(228,85,65,255),a=cc.color(97,29,218,255),c=cc.color(223,129,27,255),r=cc.color(73,233,51,255),l=cc.color(211,84,235,255),h="killRedEffect1",u="killZiSeEffect1",d="killYellowEffect1",p="killGreenEffect1",v="killwhiteEffect1";t.exports={ColorGroup1:n,ColorGroup2:a,ColorGroup3:c,ColorGroup4:r,ColorGroup5:l,bornCardTexture1:h,bornCardTexture2:u,bornCardTexture3:d,bornCardTexture4:p,bornCardTexture5:v,getGroupColor:function(e){var t=cc.color(255,255,255,255);switch(e){case 0:t=n;break;case 1:t=a;break;case 2:t=c;break;case 3:t=r;break;case 4:t=l}return t},getPetGroupID:function(e){var t=0;switch(e){case o.Pet1:case o.Pet2:case o.Pet3:t=0;break;case o.Pet4:case o.Pet5:case o.Pet6:t=1;break;case o.Pet7:case o.Pet8:case o.Pet9:t=2;break;case o.Pet10:case o.Pet11:case o.Pet12:t=3;break;case o.Pet13:case o.Pet14:case o.Pet15:t=4}return t},setBornCardSySSpriteFrame:function(e,t){var i=e.getComponent(cc.ParticleSystem);if(i)switch(i.spriteFrame=null,t){case 0:var o=h;cc.loader.loadRes("texture/Effect",cc.SpriteAtlas,function(e,t){var s=t.getSpriteFrame(o);i.spriteFrame=s});break;case 1:var s=u;cc.loader.loadRes("texture/Effect",cc.SpriteAtlas,function(e,t){var o=t.getSpriteFrame(s);i.spriteFrame=o});break;case 2:var n=d;cc.loader.loadRes("texture/Effect",cc.SpriteAtlas,function(e,t){var o=t.getSpriteFrame(n);i.spriteFrame=o});break;case 3:var a=p;cc.loader.loadRes("texture/Effect",cc.SpriteAtlas,function(e,t){var o=t.getSpriteFrame(a);i.spriteFrame=o});break;case 4:var c=v;cc.loader.loadRes("texture/Effect",cc.SpriteAtlas,function(e,t){var o=t.getSpriteFrame(c);i.spriteFrame=o})}},enterCartoonScene:function(){var e=function(e){if(e){var t=parseInt(e.explorationID),i=s.GetExplorationSubStage(t),o=s.GetExplorattionPath(i);cc.loader.loadRes(o,cc.SpriteAtlas,function(t,i){s.StageSpriteAtlas=i,cc.director.loadScene("Cartoon",function(e){cc.director.getScene()._children[0].getComponent("loadCartoon").show(e)}.bind(this,e))})}else cc.director.loadScene("Map")}.bind(this),t=s.levelID;cc.loader.loadRes("json/Cartoon",function(i,o){for(var s=null,n=o.json,a=0;a<n.length;a++){var c=n[a];if(c.LevelID===t){s=c;break}}e&&e(s)})}},cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],ContentAdapter:[function(e,t,i){"use strict";cc._RF.push(t,"4010diIR0ZMhJ1/d++3vQ8Y","ContentAdapter");var o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(n<3?s(a):n>3?s(t,i,a):s(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,c=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){var e=Math.min(cc.view.getCanvasSize().width/this.node.width,cc.view.getCanvasSize().height/this.node.height),t=this.node.width*e,i=this.node.height*e;this.node.width=this.node.width*(cc.view.getCanvasSize().width/t),this.node.height=this.node.height*(cc.view.getCanvasSize().height/i)},t=s([a],t)}(cc.Component));i.default=c,cc._RF.pop()},{}],DayReWard:[function(e,t,i){"use strict";cc._RF.push(t,"0f9e75K5+5FeaU8Q4apADb8","DayReWard");e("EnumDefine");var o=e("Utils"),s=o.ProduceType,n=e("LocalStorage"),a=e("BaseUI");cc.Class({extends:a,properties:{receiveNodes:{default:[],type:cc.Node},bk:cc.Node,audioReWard:{type:cc.AudioSource,default:null}},onLoad:function(){this.rewards=[],this.uibase=null,this.scaleShow(this.node,null);for(var e=0;e<this.receiveNodes.length;e++){var t=this.receiveNodes[e];this.processA(t)}},setUIBase:function(e){this.uibase=e},start:function(){},onBtnCloseClicked:function(e){var t=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t)},onBtnReceiveClicked:function(e,t){for(var i=null,o=0;o<this.rewards.length;o++){var s=this.rewards[o];if(parseInt(s.index)===parseInt(t)){i=s;break}}if(i){var a=this.receiveNodes[t].getChildByName("GetBtn"),c=a.getChildByName("Label"),r=a.getComponent(cc.Button);r.interactable=!1,r.enableAutoGrayEffect=!0,c.getComponent(cc.Label).string="\u5df2\u9886\u53d6",this.rewardCoinAndDiamond(i);var l=t+1;l>7&&(l=1),n.instance.setDayReWard(l);var h=new Date,u=h.getMonth(),d=h.getDay(),p={};p.month=parseInt(u),p.day=parseInt(d),n.instance.setDayReWardDateTime(p)}},processA:function(e){var t=0,i=0,o=e.getChildByName("coinlabel"),s=e.getChildByName("diamondlabel"),a=(e.getChildByName("buttonDiamond"),e.name),c=n.instance.getDayReWard();c=parseInt(c);var r=e.getChildByName("GetBtn"),l=r.getChildByName("Label"),h=r.getComponent(cc.Button),u=this.checkTime(),d=0;"A1"===a?(t=1e3,i=10,d=1):"A2"===a?(t=1500,i=15,d=2):"A3"===a?(i=20,d=3):"A4"===a?(t=3e3,i=30,d=4):"A5"===a?(t=5e3,i=40,d=5):"A6"===a?(t=8e3,i=50,d=6):(t=1e4,i=80,d=7);var p=o.getComponent(cc.Label);if(p.string=t+"",(p=s.getComponent(cc.Label)).string=i+"",c===d)u?h.interactable=!0:(h.interactable=!1,h.enableAutoGrayEffect=!0,l.getComponent(cc.Label).string="\u5df2\u9886\u53d6");else if(c>d){h.interactable=!1,h.enableAutoGrayEffect=!0,l.getComponent(cc.Label).string="\u5df2\u9886\u53d6"}else if(c<d){h.interactable=!1,h.enableAutoGrayEffect=!0,l.getComponent(cc.Label).string="\u9886\u53d6"}var v={};v.coin=t,v.diamond=i,v.coinlabel=o,v.diamondlabel=s,v.button=h,v.index=d-1,this.rewards.push(v)},checkTime:function(){var e=!1,t=new Date,i=t.getMonth(),o=t.getDay();i=parseInt(i),o=parseInt(o);var s=n.instance.getDayReWardDateTime();return s.month=parseInt(s.month),s.day=parseInt(s.day),i!==s.month?e=!0:i===s.month&&o!==s.day&&(e=!0),e},rewardCoinAndDiamond:function(e,t){var i=parseInt(e.coin),o=parseInt(e.diamond),s=this.rewardCoin(i,e.coinlabel),n=this.rewardDiamond(o,e.diamondlabel),a=s>n?s:n,c=cc.callFunc(function(){t&&t()},this),r=cc.sequence(cc.delayTime(a),c);this.node.runAction(r),this.bk.active=!1},rewardCoin:function(e,t){var i=t.parent.convertToWorldSpaceAR(t.position);i=this.node.convertToNodeSpaceAR(i);var n=this.node,a=(t=this.uibase.coinlabel).node.parent.convertToWorldSpaceAR(t.node.position);a=this.node.convertToNodeSpaceAR(a);var c=e/10,r=function(){this.uibase.updateCoin(c),this.uibase.playCoin()}.bind(this);return o.produceRandomNodeLineMove(s.ButtonCoin,10,i,a,n,r)},rewardDiamond:function(e,t){var i=t.parent.convertToWorldSpaceAR(t.position);i=this.node.convertToNodeSpaceAR(i);var n=this.node,a=this.uibase.diamondlabel,c=a.node.parent.convertToWorldSpaceAR(a.node.position);c=this.node.convertToNodeSpaceAR(c);var r=e,l=e/r,h=function(){this.uibase.updateDiamond(l),this.uibase.playCoin()}.bind(this);return o.produceRandomNodeLineMove(s.Diamond,r,i,c,n,h)},playReWardAudio:function(){this.audioReWard&&this.audioReWard.play()}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],DetectDrawlines:[function(e,t,i){"use strict";cc._RF.push(t,"cc1d3ZtcI5AlqJPmafIc6rh","DetectDrawlines");e("Utils").NUMROWS,e("Utils").NUMCOLUMNS,e("EnumDefine").CellType,e("Utils");var o=e("Sort");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.minLen=3,this.celllist=[];this.dirs=[{col:-1,row:1},{col:0,row:1},{col:1,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:0,row:-1},{col:1,row:-1}]},start:function(){},clearShowlineTips:function(){this.cancleShowlineTips(),this.celllist=[]},cancleShowlineTips:function(){for(var e=0;e<this.celllist.length;e++){this.celllist[e].getComponent("Cell").cancleShowTip()}},showlineTips:function(){if(0===this.celllist.length){var e=[];if(this.celllist=[],this.detectAllCellsDrawlines(e,this.minLen),e.length>0){var t=e[0];if(t&&t.length>0)for(var i=0;i<t.length;i++){var o=t[i];this.celllist.push(o)}}}for(var s=0;s<this.celllist.length;s++){this.celllist[s].getComponent("Cell").showTip()}},shuffleAllNormalCells:function(e){var t=this,i=[];if(this.detectAllCellsDrawlines(i),0===i.length){var s=[];if(!(i=this.ProcessBoardCell.randomGetNormalCells()))return void(e&&e());for(var n=[],a=0;a<i.length;a++){var c=i[a];if(c){var r=c.getComponent("Cell"),l=[];l[0]=r.column,l[1]=r.row,l[2]=cc.v2(c.x,c.y),s.push(l),n.push(a)}}o.shuffle(n);for(var h=function(e){var o=n[e],a=i[o],c=s[e];if(a){var r=c[0],l=c[1],h=c[2],u=cc.callFunc(function(){var e=a.getComponent("Cell");e.column=r,e.row=l},t),d=cc.moveTo(.5,h);a.runAction(cc.sequence(d,u))}},u=0;u<n;u++)h(u);var d=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(cc.delayTime(.6),d))}else e&&e()},detectAllCellsDrawlines:function(e){for(var t=this.ProcessBoardCell.randomGetNormalCells(),i=0;i<t.length;i++){var o=t[i];if(this.detectOneCellAllDrawlines(o,e),e.length>0)return}},detectOneCellAllDrawlines:function(e,t){for(var i=this.dirs,o=0;o<i.length;o++){var s=[];this.detectOneDrawline(o,e,s),s.length>this.minLen&&t.push(s)}},detectOneDrawline:function(e,t,i){if(t){var o=[];o.push(t);for(var s=this.dirs,n=!0;o.length>0;){var a=o.shift();i.indexOf(a)<0&&i.push(a);var c=a.getComponent("Cell"),r=c.celltype,l=c.column,h=c.row,u=!1;if(n){n=!1;var d=s[e],p=d.col+l,v=d.row+h;u=this.pushStackCell(r,p,v,o,i)}else u=this.dirPushStack(l,h,r,o,i,s);if(!u)return}}},dirPushStack:function(e,t,i,o,s,n){for(var a=!1,c=0;c<n.length;c++){var r=n[c],l=r.col+e,h=r.row+t;if(this.pushStackCell(i,l,h,o,s)){a=!0;break}}return a},pushStackCell:function(e,t,i,o,s){var n=this.ProcessBoardCell.getCell(t,i);if(n){var a=n.getComponent("Cell");if(a.normalCell()&&a.IsBlockCoverRemoved()&&a.celltype===e&&s.indexOf(n)<0)return o.push(n),!0}return!1}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Sort:"Sort",Utils:"Utils"}],DiamondUI:[function(e,t,i){"use strict";cc._RF.push(t,"71ff6IGRuVOFokfJ6td7q3n","DiamondUI");var o=e("Utils"),s=(o.ProduceType,e("BaseUI"));cc.Class({extends:s,properties:{rmb1:{default:null,type:cc.Label},num1:{default:null,type:cc.Label},rmb2:{default:null,type:cc.Label},num2:{default:null,type:cc.Label},rmb3:{default:null,type:cc.Label},num3:{default:null,type:cc.Label},rmb4:{default:null,type:cc.Label},num4:{default:null,type:cc.Label},rmb5:{default:null,type:cc.Label},num5:{default:null,type:cc.Label},CloseTouchNode:cc.Node},ctor:function(){this.uibase=null},onLoad:function(){this.scaleShow(this.node),this.nums=[60,190,640,1980,3450],this.rmbs=[6,18,60,180,300],this.numlabels=[this.num1,this.num2,this.num3,this.num4,this.num5],this.rmblabels=[this.rmb1,this.rmb2,this.rmb3,this.rmb4,this.rmb5];for(var e=this.nums,t=this.rmbs,i=0;i<this.numlabels.length;i++)this.numlabels[i].string=e[i]+"",this.rmblabels[i].string=t[i]+"";this.CloseTouchNode.active=!1},start:function(){},setUIBase:function(e){this.uibase=e},onBtnBuy:function(e,t){if(this.uibase&&o.UseTest){var i=parseInt(t),s=this.numlabels[i],n=this.nums[i],a=cc.director.getScene()._children[0],c=s,r=c.node.parent.convertToWorldSpaceAR(c.node.position);r=a.convertToNodeSpaceAR(r),this.CloseTouchNode.active=!0;var l=function(){this.CloseTouchNode.active=!1}.bind(this);this.uibase.produceDiamond(n,r,a,l)}},onBtnCloseClicked:function(e){var t=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t)}}),cc._RF.pop()},{BaseUI:"BaseUI",Utils:"Utils"}],DoubleRequest:[function(e,t,i){"use strict";cc._RF.push(t,"b70c2ybbjhPPad96BYXxDnZ","DoubleRequest");var o=e("BaseUI");cc.Class({extends:o,properties:{},onLoad:function(){this.scaleShow(this.node,null)},start:function(){},show:function(e,t){this.yescall=e,this.nocall=t},YesBtn:function(e){this.yescall&&this.yescall(),this.close()},NoBtn:function(e){this.nocall&&this.nocall(),this.close()},closBtn:function(){this.close()},close:function(){var e=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,e)}}),cc._RF.pop()},{BaseUI:"BaseUI"}],DrawLine:[function(e,t,i){"use strict";cc._RF.push(t,"33409TPtkZM9Z4iMRGMbjXc","DrawLine");var o=e("Utils"),s=e("PoolMng"),n=e("EnumDefine").DrawlineKind,a=e("Utils").NUMROWS,c=e("Utils").NUMCOLUMNS;cc.Enum({normalToNormal:0,normalToProp:1,propToNormal:2,propToProp:3});cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.board=this.node.getComponent("Board"),this.spawnCells=this.node.getComponent("SpawnCells"),this.processBoardCell=this.node.getComponent("ProcessBoardCell");var e=o.levelID;[1,2,3,4,5,6].indexOf(e)>=0?this.needDrawline=!0:this.needDrawline=!1,this.guideNodelist=[],this.guideTurns=0,this.turns=2},ctor:function(){this.lineNodelist=[],this.templisthv=[],this.templistslant=[],this.guideNode=null,this.needDrawline=!1,this._guideDone=!1},start:function(){},clearlines:function(){for(var e=0;e<this.templisthv.length;e++){var t=this.templisthv[e];s.instance.putline(t)}for(var i=0;i<this.templistslant.length;i++){var o=this.templistslant[i];s.instance.putslantline(o)}this.templisthv.length=0,this.templistslant.length=0,this.lineNodelist.length=0},setlineNodes:function(e){this.lineNodelist.length=0;for(var t=0;t<e.length;t++)this.lineNodelist[t]=e[t]},deleteline:function(e){var t=this.lineNodelist.indexOf(e);if(t>=0&&this.lineNodelist.splice(t,1),this.templisthv.length>0){var i=this.templisthv[this.templisthv.length-1];s.instance.putline(i);var o=this.templisthv.length-1;this.templisthv.splice(o,1)}},drawline:function(e){if(!(this.lineNodelist.length<=1)){var t=this.lineNodelist[this.lineNodelist.length-1],i=this.lineNodelist[this.lineNodelist.length-2].position,o=t.position,s=this.node;this.spawnlineNode(i,o,s,e),this.lineNodelist.push(t)}},spawnlineNode:function(e,t,i,o){var s=this.createOneline(e,t,i,o);if(s){switch(o){case n.Normal:this.templisthv.push(s);break;case n.AttackAddtion:this.templistslant.push(s);break;case n.Defence:this.templisthv.push(s)}var a=s.position,c=cc.callFunc(function(){s.position=a},this),r=e.sub(t).normalize(),l=-r.x*Math.abs(e.x-t.x)*.5,h=-r.y*Math.abs(e.y-t.y)*.5,u=cc.moveBy(.5,cc.v2(l,h)),d=cc.sequence(cc.show(),u,c),p=cc.repeatForever(d);s.stopAllActions(),s.runAction(p)}},createOneline:function(e,t,i,o){var a=t.sub(e),c=Math.atan2(a.y,a.x),r=-cc.misc.radiansToDegrees(c),l=null;switch(o){case n.Normal:(l=s.instance.getline()).getChildByName("attack").active=!1,l.getChildByName("defence").active=!1;break;case n.AttackAddtion:(l=s.instance.getline()).getChildByName("attack").active=!0,l.getChildByName("defence").active=!1;break;case n.Defence:(l=s.instance.getline()).getChildByName("attack").active=!1,l.getChildByName("defence").active=!0}if(l){l.parent=i,l.rotation=r,l.zIndex=2;var h=cc.v2();return h.x=(e.x+t.x)/2,h.y=(e.y+t.y)/2,l.x=h.x-l.width/2+37.5,l.y=h.y-l.height/2+37.5,l}},getGuideIsDone:function(){return this._guideDone||!this.needDrawline},guideDone:function(){this._guideDone=!0},showGuideline:function(e){if(this.guideNode&&(this.guideNode.active=e,e)){for(var t=this.guideNode,i=[],o=0;o<this.guideNodelist.length;o++){var s=this.guideNodelist[o],n=s.position;n.x+=s.width,i.push(n)}t.stopAllActions(),t.active=!0;var a=.5*i.length,c=cc.catmullRomTo(a,i).easing(cc.easeSineInOut(3)),r=cc.callFunc(function(){t.position=i[0]},this),l=cc.sequence(cc.show(),c,cc.delayTime(.5),r,cc.delayTime(1)),h=cc.repeatForever(l);t.runAction(h)}},IsGuideTouch:function(e){return!this.needDrawline||!0===this._guideDone||0===this.guideNodelist.length||this.guideNodelist.indexOf(e)>=0},getLevelGuidelist:function(){var e=[];if(0===this.guideTurns){var t=this.processBoardCell.getCell(2,2),i=this.processBoardCell.getCell(3,2),o=this.processBoardCell.getCell(4,2),s=this.processBoardCell.getCell(5,2);e.push(t),e.push(i),e.push(o),e.push(s)}else if(1===this.guideTurns){var n=this.processBoardCell.getCell(2,4),a=this.processBoardCell.getCell(3,4),c=this.processBoardCell.getCell(4,4),r=this.processBoardCell.getCell(5,4);e.push(n),e.push(a),e.push(c),e.push(r)}return e},getRemoveSaliveAndStakeslist:function(){var e=[];if(0===this.guideTurns){var t=this.processBoardCell.getCell(3,2),i=this.processBoardCell.getCell(4,2),o=this.processBoardCell.getCell(5,2);e.push(t),e.push(i),e.push(o)}else{var s=this.processBoardCell.getCell(2,3),n=this.processBoardCell.getCell(3,2),a=this.processBoardCell.getCell(4,2),c=this.processBoardCell.getCell(5,2);e.push(s),e.push(n),e.push(a),e.push(c)}return e},getClearBomblist:function(){var e=[],t=this.processBoardCell.getCell(5,3),i=this.processBoardCell.getCell(5,4),o=this.processBoardCell.getCell(5,5);return e.push(t),e.push(i),e.push(o),e},getOpenBoxGuideCelllist:function(){var e=[];if(0===this.guideTurns){var t=this.processBoardCell.getCell(1,4),i=this.processBoardCell.getCell(1,5),o=this.processBoardCell.getCell(1,6);e.push(t),e.push(i),e.push(o)}else{var s=this.processBoardCell.getCell(2,2),n=this.processBoardCell.getCell(3,2),a=this.processBoardCell.getCell(4,2),c=this.processBoardCell.getCell(5,2);e.push(s),e.push(n),e.push(a),e.push(c)}return e},getAttackMonsterGuideCellist:function(){var e=[];if(0===this.guideTurns){var t=this.processBoardCell.getCell(3,2),i=this.processBoardCell.getCell(2,2),o=this.processBoardCell.getCell(1,3),s=this.processBoardCell.getCell(1,4),n=this.processBoardCell.getCell(2,5);e.push(t),e.push(i),e.push(o),e.push(s),e.push(n)}else{var a=this.processBoardCell.getCell(2,2),c=this.processBoardCell.getCell(3,2),r=this.processBoardCell.getCell(4,3),l=this.processBoardCell.getCell(5,3);e.push(a),e.push(c),e.push(r),e.push(l)}return e},getRemoveBoardCellGuideCellist:function(){var e=[];if(0===this.guideTurns){var t=this.processBoardCell.getCell(2,3),i=this.processBoardCell.getCell(3,3),o=this.processBoardCell.getCell(4,3),s=this.processBoardCell.getCell(5,3);e.push(t),e.push(i),e.push(o),e.push(s)}else{var n=this.processBoardCell.getCell(1,4),a=this.processBoardCell.getCell(2,3),c=this.processBoardCell.getCell(3,3),r=this.processBoardCell.getCell(4,4),l=this.processBoardCell.getCell(5,4);e.push(n),e.push(a),e.push(c),e.push(r),e.push(l)}return e},getMiniRemoveCnt:function(){return this.guideNodelist.length},drawGuideline:function(){if(this.needDrawline&&!this._guideDone){if(this.guideTurns>=this.turns)return this.guideNode&&(this.guideNode.removeFromParent(),this.guideNode=null),void(this._guideDone=!0);1===o.levelID?this.guideNodelist=this.getRemoveBoardCellGuideCellist():2===o.levelID?this.guideNodelist=this.getAttackMonsterGuideCellist():3===o.levelID?this.guideNodelist=this.getOpenBoxGuideCelllist():4===o.levelID?(this.guideNodelist=this.getClearBomblist(),this.turns=1):5===o.levelID?this.guideNodelist=this.getRemoveSaliveAndStakeslist():6===o.levelID&&(this.turns=2,this.guideNodelist=this.getLevelGuidelist());this.guideNodelist[0].getComponent("Cell");this.board.DrawlineMask.active=!0,this.changeCellsZIndex(100),this.guideTurns+=1;for(var e=[],t=0;t<this.guideNodelist.length;t++){var i=this.guideNodelist[t],s=i.position;s.x+=i.width,e.push(s)}if(this.guideNode){var n=this.guideNode;n.stopAllActions(),n.active=!0;var a=.5*e.length,c=cc.catmullRomTo(a,e).easing(cc.easeSineInOut(3)),r=cc.callFunc(function(){n.position=e[0]},this),l=cc.sequence(cc.show(),c,cc.delayTime(.5),r,cc.delayTime(1)),h=cc.repeatForever(l);n.runAction(h)}else{var u=e[0],d=this;cc.loader.loadRes("prefab/guideHand",function(t,i){t&&cc.error(t);var o=cc.instantiate(i);o.parent=d.node,o.position=u,o.group="UI",d.guideNode=o;var s=.5*e.length,n=cc.catmullRomTo(s,e).easing(cc.easeSineInOut(3)),a=cc.callFunc(function(){o.position=e[0]},d),c=cc.sequence(cc.show(),n,cc.delayTime(.5),a,cc.delayTime(1)),r=cc.repeatForever(c);o.runAction(r)})}}},changeCellsZIndex:function(e){for(var t=this.guideNodelist,i=0;i<t.length;i++)for(var o=t[i],s=0;s<a;s++)for(var n=0;n<c;n++){var r=this.processBoardCell.getCell(n,s);if(r)r.getComponent("Cell").IsBlock()?r.zIndex=e:r===o&&(o.zIndex=e)}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",PoolMng:"PoolMng",Utils:"Utils"}],DropCell:[function(e,t,i){"use strict";cc._RF.push(t,"dc389MgnitNNITbrDvFbrs3","DropCell");var o=e("Utils").NUMROWS,s=e("Utils").NUMCOLUMNS,n=(e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT),a=e("Utils"),c=e("EnumDefine").CellType,r=e("Game");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.board=this.node.getComponent("Board"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.spawnCells=this.node.getComponent("SpawnCells"),this.DropFromSide=this.node.getComponent("DropFromSide")},ctor:function(){this._falldoneFunc=null},start:function(){},checkSideTop:function(e,t){var i=this.ProcessBoardCell.getSideCell(e,t);return i?i.getComponent("SideCell").sideTNum():0},checkSideBottom:function(e,t){var i=this.ProcessBoardCell.getSideCell(e,t);return i?i.getComponent("SideCell").sideBNum():0},dropPosition:function(e,t,i){return this.board.SpawnCells.getCellPos(t,i)},animateFalling:function(e){var t=this;null!=e&&(this._falldoneFunc=e);var i=[];this.fillHoles(i,!0);for(var o=0,s=0;s<i.length;s++)for(var a=0,c=i[s],r=0;r<c.length;r++){var l=c[r],h=l.getComponent("Cell"),u=l.getPosition(),d=h.celltype,p=this.dropPosition(d,h.column,h.row),v=.1*a;a+=1;var f=(u.y-p.y)/n*.1;o=Math.max(o,f+v),h.moveTo(v,f,.1,p)}var m=cc.callFunc(function(){t.openBottomBox();var e=t.DropFromSide.fillSideHoles(),i=cc.callFunc(function(){var e=[];if(t.fillHoles(e,!1),e.length>0)t.animateFalling(null);else{var i=[];t.topUpCell(i),t.animateNewCellFalling(i)}},t),o=cc.sequence(cc.delayTime(e),i);t.node.runAction(o)},this),g=cc.sequence(cc.delayTime(o),m);this.node.runAction(g)},animateNewCellFalling:function(e){for(var t=this,i=0,o=0;o<e.length;o++)for(var s=e[o],n=s[0],a=n.getComponent("Cell").row+1,c=0,r=0;r<s.length;r++){var l=(n=s[r]).getComponent("Cell"),h=this.dropPosition(l.celltype,l.column,a);n.position=h;var u=.1*(s.length-c-1),d=.1*(a-l.row);c+=1,i=Math.max(i,d+u);var p=l.celltype,v=this.dropPosition(p,l.column,l.row);l.moveTo(u,d,.06,v)}var f=cc.callFunc(function(){var e=t.DropFromSide.fillSideHoles(),i=cc.callFunc(function(){e>0?t.animateFalling():t.DropCellDone()},t),o=cc.sequence(cc.delayTime(e),i);t.node.runAction(o)},this);this.node.runAction(cc.sequence(cc.delayTime(i),f))},DropCellDone:function(){var e=this,t=cc.callFunc(function(){e._falldoneFunc&&(e._falldoneFunc(),e._falldoneFunc=null)},this);this.node.runAction(cc.sequence(cc.delayTime(.1),t))},dropPropCell:function(e,t){var i=null;if(a.PropFlashCnt>0){a.PropFlashCnt=0;var o=c.PropFlash;i=this.spawnCells.spawnPropCell(e,t,o)}return i},dropKey:function(){},fillHoles:function(e,t){for(var i=0;i<s;i++){for(var n=[],a=0;a<o;a++){if(!(this.checkSideTop(i,a)>0))if(!this.ProcessBoardCell.getCell(i,a))for(var c=a+1;c<o;c++){var r=!1,l=this.ProcessBoardCell.getCell(i,c);if(l){var h=l.getComponent("Cell");if(h.IsBlock())break;if(this.checkSideBottom(i,c)>0)break;h.IsBlock()||this.checkSideBottom(i,c)<=0&&(r=!0)}if(l&&r){if(t)this.ProcessBoardCell.setCell(i,c,null),this.ProcessBoardCell.setCell(i,a,l),l.getComponent("Cell").row=a;n.push(l);break}if(this.checkSideTop(i,c)>0)break}}n.length>0&&e.push(n)}},topUpCell:function(e){for(var t=0;t<s;t++){for(var i=[],n=o-1;n>=0&&!this.ProcessBoardCell.getCell(t,n)&&!(this.checkSideTop(t,n)>0);--n){var a=null;(a=this.dropPropCell(t,n))||(a=this.spawnCells.randomSpawnCell(t,n)),a&&i.push(a)}i.length>0&&e.push(i)}},openBottomBox:function(){for(var e=[],t=0;t<s;t++){var i=this.ProcessBoardCell.getCell(t,0);if(i){var o=i.getComponent("Cell");o.celltype===c.DropBottomBox&&o.IsBlockCoverRemoved()&&e.push(i)}}if(e.length>0)for(var n=0;n<e.length;n++){var l=e[n],h=l.getComponent("Cell").celltype;a.showBaby(l.parent,l.position),this.board.removeCell(l),r.instance.updateCell(h,1)}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",Utils:"Utils"}],DropFromSide:[function(e,t,i){"use strict";cc._RF.push(t,"d17e3uG/wRLwYHlepg405lF","DropFromSide");var o=e("Utils").NUMROWS,s=e("Utils").NUMCOLUMNS,n=(e("Utils"),e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT);e("EnumDefine").CellType,cc.v2();cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.board=this.node.getComponent("Board"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.CheckSideCells=this.node.getComponent("CheckSideCells")},start:function(){},checkColumnBlocks:function(e,t){for(var i=t;i<o;i++){var s=this.ProcessBoardCell.getCell(e,i);if(s)if(s.getComponent("Cell").IsBlock())return!0;var n=this.ProcessBoardCell.getSideCell(e,i);if(n&&(n=n.getComponent("SideCell")),n&&n.sideTNum()>0)return!0;if((n=this.ProcessBoardCell.getSideCell(e,i+1))&&(n=n.getComponent("SideCell")),n&&n.sideBNum()>0)return!0}return!1},checkRightEdgeSide:function(e,t){return this.CheckSideCells.checkRightEdgeSide(e,t)},checkLeftEdgeSide:function(e,t){return this.CheckSideCells.checkLeftEdgeSide(e,t)},GetFillCell_LeftEdge:function(e,t){var i=this.ProcessBoardCell.getCell(e,t);if(i){var o=i.getComponent("Cell"),s=o.IsBlock();if(!o.fillHoled&&!s&&!o.IsKey())if(this.checkLeftEdgeSide(e,t))return i}return null},GetFillCell_RighEdge:function(e,t){var i=this.ProcessBoardCell.getCell(e,t);if(i){var o=i.getComponent("Cell"),s=o.IsBlock();if(!o.fillHoled&&!s&&!o.IsKey())if(this.checkRightEdgeSide(e,t))return i}return null},searchRightBottom:function(e,t){for(var i=t,o=e;o<s&&i>=0;o+=1,i-=1){if(this.ProcessBoardCell.getCell(o,i))break}return[o-1,i+1]},searchLeftBottom:function(e,t){for(var i=t,o=e;o>=0&&i>=0;o-=1,i-=1){if(this.ProcessBoardCell.getCell(o,i))break}return[o+1,i+1]},fillSideHoles:function(){var e=0,t=0,i=this.getHoleslist();if(i.length>0)for(var o=0;o<i.length;o++){for(var s=i[o],a=0,c=0;c<s.length;c++){var r=s[c],l=r.position,h=r.getComponent("Cell"),u=this.board.SpawnCells.getCellPos(h.column,h.row),d=.1*a;a+=1;var p=Math.abs(u.y-l.y)/n*.1;e=Math.max(e,p+d),h.moveTo(d+t,p,.1,u)}t+=.05}return e+t},getHoleslist:function(){for(var e=[],t=s-1;t>=0;t--){for(var i=[],n=0;n<o-1;n++){this.ProcessBoardCell.getCell(t,n)||this.checkColumnBlocks(t,n)&&this.fillBlockHole(i,t,n)}i.length>0&&e.push(i)}return e},fillBlockHole:function(e,t,i){for(var n=!1,a=t+1,c=i+1;a<s&&c<o;){var r=this.GetFillCell_LeftEdge(a,c);if(!r)break;var l=this.searchLeftBottom(a-1,c-1),h=l[0],u=l[1];this.ProcessBoardCell.setCell(a,c,null),this.ProcessBoardCell.setCell(h,u,r);var d=r.getComponent("Cell");d.row=u,d.column=h,d.fillHoled=!0,e.push(r),n=!0,a+=1,c+=1}if(n)return!0;for(a=t-1,c=i+1;a>=0&&c<o;){var p=this.GetFillCell_RighEdge(a,c);if(!p)break;var v=this.searchRightBottom(a+1,c-1),f=v[0],m=v[1];this.ProcessBoardCell.setCell(a,c,null),this.ProcessBoardCell.setCell(f,m,p);var g=p.getComponent("Cell");g.row=m,g.column=f,g.fillHoled=!0,e.push(p),a-=1,c+=1}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],EndlessAddStep:[function(e,t,i){"use strict";cc._RF.push(t,"604b1ixIQ9I06E0x4DOeOrq","EndlessAddStep");var o=e("RPGManager"),s=e("Utils"),n=e("LocalStorage"),a=e("BaseUI"),c=e("OpenSdk");cc.Class({extends:a,properties:{midBk:cc.Node},onLoad:function(){this.scaleShow(this.midBk),this.uibaseData=n.instance.getUIBase()},start:function(){},onBtnCloseClicked:function(e){var t=function(){o.instance.ProcessGameDone.endlessLose(),this.node.removeFromParent()}.bind(this);this.scaleClose(this.midBk,t)},onBtnAddStepClicked:function(e){if(this.uibaseData.diamond>=10){this.uibaseData.diamond-=10;var t=function(){o.instance.ProcessGameDone.addStepSuccess(5),this.node.removeFromParent()}.bind(this);this.scaleClose(this.midBk,t)}else;},onBtnLookAdsClicked:function(e){var t=function(){var e=function(){o.instance.ProcessGameDone.addStepSuccess(5),this.node.removeFromParent()}.bind(this);this.scaleClose(this.midBk,e)}.bind(this);c.instance.showVideo(t,null)},onDisable:function(){s.writeUIBaseData(this.uibaseData)}}),cc._RF.pop()},{BaseUI:"BaseUI",LocalStorage:"LocalStorage",OpenSdk:"OpenSdk",RPGManager:"RPGManager",Utils:"Utils"}],EndlessLoadlevelEditor:[function(e,t,i){"use strict";cc._RF.push(t,"dc5a9pUc4ZN957aa7rBFt7+","EndlessLoadlevelEditor");e("BaseUI");var o=e("Utils"),s=(e("LocalStorage"),e("EnumDefine").LevelResult,e("EnumDefine").DayKind,cc.Class({extends:cc.Component,properties:{},onLoad:function(){s.instance=this},start:function(){},statics:{instance:null},loadLevels:function(e,t){var i,s=cc.director.getScene()._children[0];if(""!==(i=this.getlevelPath(e))){cc.loader.loadRes(i,function(e,i){e&&cc.error(e);var n=cc.instantiate(i);if(n.parent=s,n.addComponent("levelEditor"),n.active=!1,n){var a=n.getComponent("levelEditor");if(a){var c=a.readBoardCells(),r=a.readGoles();o.LevelEditorBoardData=c,o.LevelEditorLevelGoles=r,t()}}else t()})}else t()},getlevelPath:function(e){return"EndlessLevels/"+["EndlessLv1","EndlessLv1"][e-1]}}));cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],EndlessPunish:[function(e,t,i){"use strict";cc._RF.push(t,"d0771QycdVB6riZd8WzDmLq","EndlessPunish");var o=e("EnumDefine").CellType,s=e("EndlessUtil").PunishKind,n=e("EndlessUtil");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.TaskUI=this.node.getComponent("TaskUI"),this.EndlessShoot=this.node.getComponent("EndlessShoot"),this.Endless=this.node.getComponent("Endless")},punish:function(e,t){switch(this.data=e,e.Type){case s.Block:this.punishStakes(t);break;case s.Salive:this.punishSalive(t);break;case s.Step:this.punishStep(t);break;case s.WeakenAttack:this.punishAttackHalf(t)}},punishSalive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.data.val,i=this.data.lv,s=o.Salive;this.EndlessShoot.shoot(s,t,i,e)},punishStakes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.data.val,i=this.data.lv,s=o.Stakes;this.EndlessShoot.shoot(s,t,i,e)},punishStep:function(e){var t=this.data.val;this.TaskUI.updateStep(t),this.floatWord(),e&&e()},punishAttackHalf:function(e){var t=this.data.val;this.Endless.processAttackCoefficient(t,.5),this.floatWord(),e&&e()},floatWord:function(){var e=this.data,t=e.val,i=e.name+""+t;n.SpawnFloatWord(i,"UI")}}),cc._RF.pop()},{EndlessUtil:"EndlessUtil",EnumDefine:"EnumDefine"}],EndlessReward:[function(e,t,i){"use strict";cc._RF.push(t,"166aeS/pIVLnJHB5oOTAih5","EndlessReward");var o=e("EnumDefine").CellType,s=e("EndlessUtil").ReWardKind,n=e("EndlessUtil"),a=e("LocalStorage");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.TaskUI=this.node.getComponent("TaskUI"),this.EndlessShoot=this.node.getComponent("EndlessShoot"),this.Endless=this.node.getComponent("Endless")},reward:function(e,t){if(e)switch(this.data=e,e.Type){case s.BigBomb:this.rewardBigBomb(t);break;case s.SmallBomb:this.rewardSmallBomb(t);break;case s.UniversalBrush:this.rewardBush(t);break;case s.Key:this.rewardKey(t);break;case s.StrengthenAttack:this.enhanceAttack(t);break;case s.Step:this.rewardStep(t);break;default:t&&t()}},rewardBush:function(e){var t=this.data.val,i=o.UniversalBrush;this.EndlessShoot.shoot(i,t,1,e)},rewardBigBomb:function(e){var t=this.data.val,i=o.SBomb4;this.EndlessShoot.shoot(i,t,1,e)},rewardSmallBomb:function(e){var t=this.data.val,i=o.SBomb3;this.EndlessShoot.shoot(i,t,1,e)},rewardKey:function(e){var t=this.data.val,i=a.instance.getFreeSpinVal();i+=t,a.instance.setFreeSpinVal(i);var o=cc.director.getScene()._children[0],s=cc.v2();cc.loader.loadRes("prefab/FloatSp",function(i,n){i&&cc.error(i);var a=cc.instantiate(n);a.parent=o,a.position=s,a.group="UI",a.scale=0;var c=cc.scaleTo(.3,1.5).easing(cc.easeOut(3)),r=cc.moveBy(2,cc.v2(0,50)),l=cc.spawn(c,r),h=cc.moveBy(2,cc.v2(0,100)),u=cc.callFunc(function(){},this),d=cc.sequence(l,h,u,cc.removeSelf());a.runAction(d);var p=a.getComponent("FloatSp");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(i,o){var s=o.getSpriteFrame("key");p.show(s,t),e&&e()})})},rewardStep:function(e){var t=this.data.val;this.TaskUI.updateStep(t),this.floatWord(),e&&e()},enhanceAttack:function(e){var t=this.data.val;this.Endless.processAttackCoefficient(t,2),this.floatWord(),e&&e()},floatWord:function(){var e=this.data,t=e.val,i=e.name+""+t;n.SpawnFloatWord(i,"UI")}}),cc._RF.pop()},{EndlessUtil:"EndlessUtil",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage"}],EndlessShoot:[function(e,t,i){"use strict";cc._RF.push(t,"88dd4YxqnhFwIo4iJTRzJXR","EndlessShoot");var o=e("Board"),s=e("ProcessBoardCell"),n=e("Game"),a=e("EnumDefine").CellType,c=e("RPGManager");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},shoot:function(e,t,i){var o=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=[],c=s.instance.randomGetNormalCells(t);if(c){for(var r=function(t){var s=c[t],n=cc.callFunc(function(){o.shootCell(e,i,s,.5)},o);a.push(n),a.push(cc.delayTime(.1))},l=0;l<c.length;l++)r(l);a.push(cc.delayTime(.5));var h=cc.callFunc(function(){n&&n()},this);a.push(h),this.node.runAction(cc.sequence(a))}else n&&n()},shootCell:function(e,t,i,s){var r=n.instance.getTaskUI().steplabel,l=c.instance.boardNode,h=r.node.parent.convertToWorldSpaceAR(r.node.position),u=l,d=h=l.convertToNodeSpaceAR(h),p=i.getComponent("Cell"),v=p.column,f=p.row;switch(e){case a.Stakes:var m=o.instance.SpawnCells,g=function(o){this.spawnCell(i,e,t,o,u,d,"UI",s)}.bind(this);m.spawnSpriteCell(e,v,f,t,g);break;default:var C=o.instance.spawnOneCell(e,v,f);this.spawnCell(i,e,t,C,u,d,"UI",s)}},spawnCell:function(e,t,i,n,a,c,r,l){var h=this;if(n){n.parent=a,n.position=c,n.group=r;var u=e.position,d=Math.abs(e.width-n.width),p=Math.abs(e.height-n.height);u.x+=d,u.y+=p;var v=cc.v2();u.sub(n.position,v);var f=0;f=l>=0?l:v.mag()/300*.1;var m=cc.moveTo(f,u),g=cc.callFunc(function(){var a=e.getComponent("Cell"),c=a.column,r=a.row,l=e.parent,u=cc.v2(e.x,e.y),d=e.group;n.parent=l,n.position=u,n.group=d,(a=n.getComponent("Cell")).init(t,i),s.instance.setCell(c,r,n),o.instance.deSpawnCell(e),h.spawnDust(l,cc.v2(u.x+e.width/2,u.y+e.height/2),d);var p=n.getComponent("Salive");p&&p.init(i);var v=n.scale;n.scale=0;var f=cc.scaleTo(.3,v).easing(cc.easeOut(3));n.runAction(f)},this),C=cc.sequence(m,g);n.runAction(C)}},spawnDust:function(e,t,i){var o;o="prefab/particle/dust";cc.loader.loadRes(o,function(o,s){o&&cc.error(o);var n=cc.instantiate(s);n.active=!0,n.parent=e,n.position=t,n.group=i,n.zIndex=10})}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",Game:"Game",ProcessBoardCell:"ProcessBoardCell",RPGManager:"RPGManager"}],EndlessSpin:[function(e,t,i){"use strict";cc._RF.push(t,"d37903NoSpORqEIyJwxHXv9","EndlessSpin");var o=e("Utils");e("Sort");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.rewardDatas=[],this.rewardOdds=[],this.punishDatas=[],this.punishOdds=[],this.tasks=[],this.taskOdds=[],this.initTask(),this.initPunish(),this.initReward()},start:function(){},initReward:function(e){var t=function(t){for(var i=[],o=[],s=0;s<t.length;s++){var n=t[s];i.push(n),o.push(n.odd)}this.rewardDatas=i,this.rewardOdds=o,e&&e()}.bind(this);this.loadRewardJsonData(t)},initPunish:function(e){var t=function(t){for(var i=[],o=[],s=0;s<t.length;s++){var n=t[s];i.push(n),o.push(n.odd)}this.punishDatas=i,this.punishOdds=o,e&&e()}.bind(this);this.loadPunishJsonData(t)},initTask:function(e){var t=function(t){for(var i=[],o=[],s=0;s<t.length;s++){var n=t[s];i.push(n),o.push(n.odd)}this.taskDatas=i,this.taskOdds=o,e&&e()}.bind(this);this.loadTaskJsonData(t)},loadTaskJsonData:function(e){cc.loader.loadRes("json/EndlessTask",function(t,i){for(var o=i.json,s=[],n=0;n<o.length;n++){var a=o[n],c={};c.Type=parseInt(a.Type),c.name=a.name,c.val=parseInt(a.val),c.step=parseInt(a.step),c.odd=parseInt(a.odd),s.push(c)}e&&e(s)})},loadPunishJsonData:function(e){cc.loader.loadRes("json/EndlessPunish",function(t,i){for(var o=i.json,s=[],n=0;n<o.length;n++){var a=o[n],c={lv:1};c.Type=parseInt(a.Type),c.name=a.name,c.val=parseInt(a.val),c.odd=parseInt(a.odd),a.Lv&&(c.lv=parseInt(a.Lv)),s.push(c)}e&&e(s)})},loadRewardJsonData:function(e){cc.loader.loadRes("json/EndlessReward",function(t,i){for(var o=i.json,s=[],n=0;n<o.length;n++){var a=o[n],c={lv:1};c.Type=parseInt(a.Type),c.name=a.name,c.val=parseInt(a.val),c.odd=parseInt(a.odd),a.Lv&&(c.lv=parseInt(a.Lv)),s.push(c)}e&&e(s)})},computeSpin:function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e[i];return o.computeSpin(t)},spinTaskData:function(){if(0!==this.taskOdds.length){var e=this.computeSpin(this.taskOdds),t=this.computeSpin(this.punishOdds),i=this.computeSpin(this.rewardOdds);return[this.taskDatas[e],this.punishDatas[t],this.rewardDatas[i]]}},filterReWardString:function(e){var t=e.val;return e.name+""+t},filterPunishString:function(e){var t=e.val;return e.name+""+t},filterTaskString:function(e){var t=e.val;return e.step+""+t}}),cc._RF.pop()},{Sort:"Sort",Utils:"Utils"}],EndlessStory:[function(e,t,i){"use strict";cc._RF.push(t,"3f941Ml51ZFtIZn+mkTT/zW","EndlessStory"),cc.Class({extends:cc.Component,properties:{description:cc.Label,PassBtn:cc.Button},onLoad:function(){},start:function(){},showDescription:function(){var e=function(){this.closeWord()}.bind(this);this.typingAni(this.description,"\u5728\u4e00\u4e2a\u9065\u8fdc\u7684\u6751\u843d\u91cc\uff0c\u751f\u6d3b\u7740\u4e00\u7fa4\u7eaf\u6734\u52e4\u52b3\u7684\u4eba\u4eec\u3002\u7136\u800c\uff0c\u4ed6\u4eec\u4e00\u76f4\u4ee5\u6765\u7ecf\u5e38\u53d7\u5230\u9644\u8fd1\u5c71\u4e2d\u91ce\u517d\u548c\u602a\u7269\u56f4\u653b\u4fb5\u6270\uff0c\u6751\u5e84\u4e2d\u7684\u8d22\u4ea7\u4e0d\u65ad\u88ab\u8fd9\u4e9b\u4e0d\u901f\u4e4b\u5ba2\u6240\u6bc1\u574f\u3002\u7ec8\u4e8e\uff0c\u6751\u843d\u4e2d\u6700\u5f3a\u5927\u7684\u82f1\u96c4\u4eec\u633a\u8eab\u800c\u51fa\uff0c\u4e3a\u4e86\u4fdd\u536b\u6751\u5e84\uff0c\u4e0e\u602a\u7269\u4eec\u8fdb\u884c\u4e86\u65e0\u6570\u6b21\u7684\u6218\u6597\u2026\u2026",e)},typingAni:function(e,t,i){var o=this,s="",n=t.split(""),a=n.length,c=0;o.func=function(){s+=n[c],e.string=s,++c==a&&(o.unschedule(o.func,o),i&&i())},o.schedule(o.func,.1,cc.macro.REPEAT_FOREVER,0)},closeWord:function(){var e=this,t=cc.callFunc(function(){e.showChuHua()},this);this.description.node.runAction(cc.sequence(cc.delayTime(3),cc.fadeOut(1),t))},showChuHua:function(){},enterClick:function(e){cc.director.loadScene("Main")},passClick:function(e){var t=this;this.PassBtn.node.active=!1;var i=cc.callFunc(function(){t.showChuHua()},this);this.description.node.runAction(cc.sequence(cc.fadeOut(.4),i))}}),cc._RF.pop()},{}],EndlessUtil:[function(e,t,i){"use strict";cc._RF.push(t,"ee7c2lV28NC8ICqlEH4WOG0","EndlessUtil");var o=cc.Enum({Block:0,Salive:1,Step:2,WeakenAttack:3}),s=cc.Enum({BigBomb:0,SmallBomb:1,Key:2,StrengthenAttack:3,UniversalBrush:4,Step:5}),n=cc.Enum({Cell1:0,Cell2:1,Cell3:2,Cell4:3,Cell5:4,KillMonster:5,HurtMonster:6,TriggerRoleSkill:7,TriggerPetSkill:8,UnKnown:100});t.exports={PunishKind:o,ReWardKind:s,TaskID:n,SpawnFloatWord:function(e,t){var i=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/FloatWord",function(o,s){o&&cc.error(o);var n=cc.instantiate(s);n.group=t,n.zIndex=10,n.scale=0,n.parent=i,n.position=cc.v2(0,100),n.getComponent("FloatWord").show(e)})}},cc._RF.pop()},{}],EndlessWinLose:[function(e,t,i){"use strict";cc._RF.push(t,"1ce5dEye9xIXqHMoD7tFSUY","EndlessWinLose");e("JsonData"),e("LocalStorage");var o=e("Utils"),s=e("RPGManager"),n=e("EnumDefine").LevelResult,a=(e("EnumDefine").CellType,e("EndlessLoadlevelEditor")),c=e("EnumDefine").LevelMode;e("ProcessStory"),e("EndlessUtil").PunishKind,e("EndlessUtil").ReWardKind;cc.Class({extends:cc.Component,properties:{TaskRoadNode:cc.Node,BoardNode:cc.Node,GameNode:cc.Node},onLoad:function(){this.TaskRoad=this.TaskRoadNode.getComponent("TaskRoad"),this.TaskUI=this.node.getComponent("TaskUI"),this.EndlessPunish=this.node.getComponent("EndlessPunish"),this.Board=this.BoardNode.getComponent("Board"),this.Game=this.GameNode.getComponent("Game"),this.explorationID=1},start:function(){},taskWin:function(){var e=function(e){this.nextTask(e)}.bind(this);this.TaskRoad.doneOneTask(e)},nextTask:function(e){var t=function(){this.enterTask(e)}.bind(this);a.instance.loadLevels(e,t)},enterTask:function(e){var t=Math.floor(e/10),i=1,s=!1;(i+=t)>this.explorationID&&(this.explorationID=i,s=!0);var a=o.GetExplorationSubStage(i),r=o.GetExplorattionPath(a),l=this;cc.loader.loadRes(r,cc.SpriteAtlas,function(t,a){var r={};r.levelID=e,r.stageID=1,r.explorationID=i,r.coinNum=0,r.diamondNum=0,r.levelResult=n.Fighting,o.levelResultData=r,o.levelMode=c.Endless,o.StageSpriteAtlas=a,cc.audioEngine.pause(o.mainSceneAudioID);var h=o.mainSceneAudioID;cc.audioEngine.stop(h),o.mainSceneAudioID=-1,o.passLevelStars=-1,o.FreeSpinVal=0,o.KillMonsterCnt=0,o.KillClearBombCnt=0,l.freshNewTask(e,s,i),l.TaskUI.clearGoles()})},freshNewTask:function(e,t,i){var o=function(){this.startGame(e)}.bind(this);s.instance.freshMonsters(1200),s.instance.startMove(o,1200),this.Game.playAudio()},startGame:function(){var e=function(e){this.Game.showLevelGole(),e&&e()}.bind(this);this.Board.freshNewTask(e),this.TaskUI.showGole()}}),cc._RF.pop()},{EndlessLoadlevelEditor:"EndlessLoadlevelEditor",EndlessUtil:"EndlessUtil",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",ProcessStory:"ProcessStory",RPGManager:"RPGManager",Utils:"Utils"}],Endless:[function(e,t,i){"use strict";cc._RF.push(t,"8d1aaEtILRDobvcxfxkW7Xd","Endless");var o=e("Game"),s=(e("RPGManager"),e("LocalStorage")),n=e("Utils"),a=e("Words"),c=e("ProcessStory"),r=e("EnumDefine").ExplorationSubStage;cc.Class({extends:cc.Component,properties:{ChestCards:cc.Prefab,JustWordGuide:cc.Node},onLoad:function(){this.JustWordGuide.active=!1},start:function(){this.EndlessPunish=this.node.getComponent("EndlessPunish"),this.EndlessReward=this.node.getComponent("EndlessReward"),this.EndlessSpin=this.node.getComponent("EndlessSpin"),this.TaskUI=this.node.getComponent("TaskUI"),this.TaskRoad=this.node.getComponent("TaskRoad"),this.AttactRound=0,this.eventRound=0,this.subStageIndex=0,this.waveTurns=10,this.transitWaveNums=10,this.subStagelist=[r.Farm1,r.Farm2,r.Farm3,r.Forest1,r.Forest2,r.Forest3],this.endlessAchieveData={}},processAttackCoefficient:function(e,t){o.instance.AttackCoefficient=t,this.AttactRound=e},initTask:function(){this.TaskRoad.showRoadBar(),this.showGuide()},accountKillMonster:function(e){var t=this.endlessAchieveData.monster;this.endlessAchieveData.monster=t?t+e:e},accountKillWave:function(e){var t=this.endlessAchieveData.wave;this.endlessAchieveData.wave=t?t+e:e},accountOpenChest:function(e){var t=this.endlessAchieveData.chest;this.endlessAchieveData.chest=t?t+e:e},accountPunish:function(e){var t=this.endlessAchieveData.punish;this.endlessAchieveData.punish=t?t+e:e},accountReWard:function(e){var t=this.endlessAchieveData.reward;this.endlessAchieveData.reward=t?t+e:e},showGuide:function(){var e=s.instance.getEndlessStarPlayGuide();if(!e||void 0===e){this.JustWordGuide.active=!0;var t=this.JustWordGuide.getComponent("JustWordGuide");if(t){var i=a.Endless_1,o=function(){s.instance.setEndlessStarPlayGuide(!0)}.bind(this);t.show(i,o)}}},showSpinChest:function(e,t){var i=cc.director.getScene()._children[0],o=cc.instantiate(this.ChestCards);o.active=!0,o.parent=i,o.position=cc.v2(),o.scale=1,o.zIndex=10;var s=function(e){if(e){var i=e.chest;this.accountOpenChest(i)}t&&t(),o.removeFromParent()}.bind(this),n=o.getComponent("ChestCards");if(n){n.closeFunc=s;var a=this.subStageIndex,c=this.subStagelist[a],r=Math.floor(e/10);0===r&&(r=1),n.show(c,3,r)}},initTaskEvents:function(e,t){if(e){var i=[],o=t;if(o%10==0){for(var s=o;s<o+10;s++){e[s]&&i.push(s)}this.eventIndexlist=i,this.TaskRoad&&this.TaskRoad.showEvents(i)}}},checkEvent:function(e){if(!this.taskData){var t=!1;if(this.eventIndexlist.indexOf(e)>=0&&(t=!0),t){var i=this.EndlessSpin.spinTaskData();this.taskData=i[0],this.punishData=i[1],this.rewardData=i[2],this.TaskUI.setTaskData(this.taskData,this.punishData,this.rewardData),this.TaskUI.initTaskData(),this.TaskUI.showTaskPop()}else this.taskData=null,this.punishData=null,this.rewardData=null}},oneWaveDone:function(e,t){this.accountKillWave(1);var i=function(){var e=function(e){t&&t(e)}.bind(this);this.TaskRoad.oneWaveDone(e)}.bind(this);if(e&&e%this.waveTurns==0){var o=function(i){var o=function(){this.TaskRoad.reset(),t&&t(i)}.bind(this),s=function(){this.showSpinChest(e,o)}.bind(this);this.TaskUI.showChestPop(s,o)}.bind(this);this.TaskRoad.oneWaveDone(o)}else i()},updateRound:function(e){if(this.AttactRound>0&&(this.AttactRound-=1,this.AttactRound<=0&&o.instance.resetAttackCoefficient()),this.taskData){var t=function(){this.eventRound+=1;var t=this.taskData.Type,i=this.taskData.val,o=this.taskData.step,s=!1;this.eventRound<=o&&(this.TaskUI.TaskData[t]>=i&&(s=!0));s?this.reward(e):!s&&this.eventRound>=o?this.punish(e):e&&e()}.bind(this);this.TaskUI.updateTaskPop(t)}else e&&e()},punish:function(e){this.accountPunish(1),this.TaskUI.closeAllPop();var t=this.punishData,i=function(){var i=function(){e&&e(),this.reset()}.bind(this);this.EndlessPunish.punish(t,i)}.bind(this);this.TaskUI.showPunishTaskPop(t,i)},reward:function(e){this.accountReWard(1),this.TaskUI.closeAllPop();var t=this.rewardData,i=function(){var i=function(){e&&e(),this.reset()}.bind(this);this.EndlessReward.reward(t,i)}.bind(this);this.TaskUI.showRewardTaskPop(t,i)},reset:function(){this.taskData=null,this.punishData=null,this.rewardData=null,this.eventRound=0,this.TaskUI.reset()},endlessDone:function(){},checkTransitScene:function(e){e>0&&e%this.transitWaveNums==0&&this.transitScene()},transitScene:function(){var e=function(){var e=this.subStageIndex;e+=1,e%=this.subStagelist.length,e=Math.floor(e),this.subStageIndex=e;var t=this.subStagelist[e],i=n.GetExplorattionPath(t);cc.loader.loadRes(i,cc.SpriteAtlas,function(e,i){n.StageSpriteAtlas=i;var s=function(){c.instance.adjust(),c.instance.fadeTo(255);var e=c.instance.stageFileNamesData,t=e.box1,s=e.box2,n=i.getSpriteFrame(t),a=i.getSpriteFrame(s),r=o.instance.Boxes,l=function(){r.changeBoxes(n,a)}.bind(this);r.fadeTo(30,l)}.bind(this);c.instance.initExploration(t,s)})}.bind(this);c.instance.fadeTo(30,e)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",LocalStorage:"LocalStorage",ProcessStory:"ProcessStory",RPGManager:"RPGManager",Utils:"Utils",Words:"Words"}],EnumDefine:[function(e,t,i){"use strict";cc._RF.push(t,"7650b51u9ZMDKSLy0dY8S+o","EnumDefine");var o=cc.Enum({Normal:0,Invasion:1,Move:2}),s=cc.Enum({SpiderWeb:0,Salive:1}),n=cc.Enum({Normal:0,Endless:1}),a=cc.Enum({A:0,B:1,S:2}),c=cc.Enum({Level1:1,Level2:40,Level3:80,Level4:120}),r=cc.Enum({Level1:1,Level2:2,Level3:3,Level4:4}),l=cc.Enum({Level:0,Monster:1,Video:2,UnlockRole:3,Pet:4,UpGradeRoleLevel:5,ClearBomb:6,Star:7,Task:8}),h=cc.Enum({OneStar:0,TwoStar:1,ThreeStar:2}),u=cc.Enum({Day:0,Noon:1,Night:2}),d=cc.Enum({Red:0,Purble:1,Orange:2,ScoreRed:3}),p=cc.Enum({Cell1:0,Cell2:1,Cell3:2,Cell4:3,Cell5:4}),v=cc.Enum({Idle:0,Ready:1,Bonustime:2,Crazy:3,TimeUp:4}),f=cc.Enum({Prop:0,Coin:1,Diamond:2,Skill:3,UnKnown:-1}),m=cc.Enum({FruitJuice:0,ExplosionSmall:1,ExplosionBig:2}),g=cc.Enum({Normal:0,AttackAddtion:1,Defence:2}),C=cc.Enum({NormalFight:0,BossFight:1,UnKnown:-1}),S=cc.Enum({NormalRemove:1,DropBottomRemove:2,SkillRemove:3,NotRemove:4}),b=cc.Enum({Cell1:0,Cell2:1,Cell3:2,Cell4:3,Cell5:4,ClearBomb:5,DropBox:6,Chest:7,Step:8,Block:9}),k=cc.Enum({Left:0,Right:1,Top:2,Bottom:3,LeftUpper:5,RightUpper:6,LeftLower:7,RightLower:8,UnKnown:-1}),_=cc.Enum({Cell1:0,Cell2:1,Cell3:2,Cell4:3,Cell5:4,Universal:5,UnKnown:1e3}),w=cc.Enum({Pet1:1,Pet2:2,Pet3:3,Pet4:4,Pet5:5,Pet6:6,Pet7:7,Pet8:8,Pet9:9,Pet10:10,Pet11:11,Pet12:12,Pet13:13,Pet14:14,Pet15:15,Pet16:16,UnKnown:1e3}),B=cc.Enum({Cell1:0,Cell2:1,Cell3:2,Cell4:3,Cell5:4,RXCellType:7,One_Horinal1:20,One_Horinal2:21,One_Horinal3:22,One_Horinal4:23,One_Horinal5:24,Two_Vertical1:30,Two_Vertical2:31,Two_Vertical3:32,Two_Vertical4:33,Two_Vertical5:34,Three_LeftPlant1:40,Three_LeftPlant2:41,Three_LeftPlant3:42,Three_LeftPlant4:43,Three_LeftPlant5:44,Four_RightPlant1:50,Four_RightPlant2:51,Four_RightPlant3:52,Four_RightPlant4:53,Four_RightPlant5:54,Five_Cross1:60,Five_Cross2:61,Five_Cross3:62,Five_Cross4:63,Five_Cross5:64,SOne_Brush1:100,SOne_Brush2:101,SOne_Brush3:102,SOne_Brush4:103,STwo_Brush1:104,STwo_Brush2:105,STwo_Brush3:106,STwo_Brush4:107,SThree_Brush1:108,SThree_Brush2:109,SThree_Brush3:110,SThree_Brush4:111,SFour_Brush1:112,SFour_Brush2:113,SFour_Brush3:114,SFour_Brush4:115,SFive_Brush1:116,SFive_Brush2:117,SFive_Brush3:118,SFive_Brush4:119,SBomb1:120,SBomb2:121,SBomb3:122,SBomb4:123,SOne_Attack1:130,SOne_Attack2:131,SOne_Attack3:132,SOne_Attack4:133,STwo_Attack1:140,STwo_Attack2:141,STwo_Attack3:142,STwo_Attack4:143,SThree_Attack1:150,SThree_Attack2:151,SThree_Attack3:152,SThree_Attack4:153,SFour_Attack1:160,SFour_Attack2:161,SFour_Attack3:162,SFour_Attack4:163,SFive_Attack1:170,SFive_Attack2:171,SFive_Attack3:172,SFive_Attack4:173,Salive:200,Weeds:201,Fence:202,Stakes:203,KeyUp:204,KeyDown:205,KeyLeft:206,KeyRight:207,Chest:208,BlockDiamond:209,DropBottomBox:210,BlockSide:211,BlockCover:212,SpinKey:213,NoneCell:214,SolidCell:215,ClearBombProp:216,UniversalBrush:217,UnKnown:1e3}),D=cc.Enum({Actor1:0,Actor2:1,Actor3:2,Actor4:3,Actor5:4,UnKnown:-1}),y=cc.Enum({BattleCamera:0,SkyCamera:1,MidOneCamera:2}),N=cc.Enum({kHorinal:0,kVertical:1}),P=cc.Enum({Win:0,Lose:1,TimeUp:2,Fighting:3,UnKnown:4}),T=cc.Enum({Main:0,Map:1,ActorUI:2,Battle:3,UnKnown:-1}),A=cc.Enum({Coin:0,Diamond:1,PetA:2,PetB:3,DoubleSpin:4,SpinKey:5,UnKnown:10}),R=cc.Enum({Farm1:10001,Farm2:10002,Farm3:10003,Forest1:20001,Forest2:20002,Forest3:20003,Snow1:30001,Snow2:30002,Snow3:30003,Volcano1:40001,Volcano2:40002,Volcano3:40003});var I=cc.Enum({Monster:0,Bomb:1,Block:2,Chest:3,Cell1:4,Cell2:5,Cell3:6,Cell4:7,Cell5:8}),F=cc.Enum({OpenChest:0,ShootMeteor:1,FireSmoke:2,BornCard:3,CDCard:4,PetCard:5,UnKnown:100}),L=cc.Enum({ButtonCoin:0,ButtonDiamond:1,SpinKey:2,SpinDouble:3,UnKnown:100});t.exports={CellType:B,PetType:w,PetAttribute:a,CellGroupType:_,CellBlockType:S,ActorType:D,CameraType:y,ChestType:f,Direction:N,SpinType:A,PetInfo:function(){this.petid=-1,this.attack=10},LevelResult:P,EnterKind:T,ExplorationSubStage:R,FightKind:C,CellsRelativeDir:k,DrawlineKind:g,RemoveCellEffect:m,CellAnimationType:v,LevelEditorID:b,HurtFont:d,MonsterShieldType:p,DayKind:u,StarLevelKind:I,StarKind:h,AchieveType:l,RoleShapeLevel:c,PetShapeLevel:r,SaliveKind:o,MonsterSkillKind:s,LevelMode:n,CDPoolKind:L,CardPoolKind:F},cc._RF.pop()},{}],EveryDayLogin:[function(e,t,i){"use strict";cc._RF.push(t,"d9a1f6yJjhAeZOFC5TJ3PGT","EveryDayLogin"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],Exploration:[function(e,t,i){"use strict";cc._RF.push(t,"d2d62sH3OxHAY07fLnRqz1Q","Exploration");var o=e("BaseUI"),s=e("Utils"),n=e("LocalStorage"),a=e("EnumDefine").LevelResult,c=e("EnumDefine").DayKind;cc.Class({extends:o,properties:{stage_title:cc.Label,exploration_title:cc.Label,explorationDesri:cc.Label,midbk:cc.Node,road:cc.Node,levelNodes:{default:[],type:cc.Node},blueBtn:{default:null,type:cc.SpriteFrame},grayBtn:{default:null,type:cc.SpriteFrame},redBtn:{default:null,type:cc.SpriteFrame},greenBtn:{default:null,type:cc.SpriteFrame},starSprite:{default:null,type:cc.SpriteFrame},FlagNode:cc.Node,Mask:cc.Node,guideHand:cc.Node,StarChestNode:cc.Node,StageUINode:cc.Node,StarBtn:cc.Button},onLoad:function(){this.StageUINode&&(this.StageUI=this.StageUINode.getComponent("StageUI"))},xinit:function(){this.stageID=-1,this.explorationID=-1,this.itemID=-1,this.closeFunc=null,this.unlockNextExploration=null,this.oneStageExplorationCnt=1,this.oneExplorationItemCnt=1,this.oneItemCnt=5,this.levelIDlist=[],this.MapStage=null,this.Flag=this.FlagNode.getComponent("Flag"),this.FlagNode.active=!1,this.scaleShow(this.node,null),this.Mask.active=!1,this.StarBtn.interactable=!1,this.StarBtn.enableAutoGrayEffect=!0},init:function(e,t,i,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.xinit(),this.initStarChest(t),this.dayKind=o,this.MapStage=c,this.stageID=e,this.explorationID=t,this.lastExplorationID=i,this.itemID=s,this.closeFunc=a,this.explorationID<this.lastExplorationID?this.FlagNode.active=!1:this.FlagNode.active=!0,this.levelIDlist=[];for(var r=0;r<=this.levelNodes.length;r++){var l=this.levelNodes[r];if(l){var h=l.getComponent("LevelNode");if(h){var u=(t-1)*this.oneItemCnt+r+1,d=n.instance.getStoryLevelData(u),p=n.instance.getLevelStars(u),v=!0;d&&(v=d.lock),h.init(u,e,t,v,p),this.levelIDlist.push(u)}}}this.initLevels(),this.nextlevel(),this.spawnBoss(),this.initTitle(),this.showGuideHand()},initLevels:function(){for(var e=n.instance.getLastestLevelID(),t=-1,i=0;i<this.levelIDlist.length;i++){var o=this.levelIDlist[i];cc.log("i",i,o);var a=n.instance.getStoryLevelData(o);if(a&&a.lock||!a){t=o-1,this.Flag.init(i-1);break}}-1===t&&(t=this.levelIDlist[this.levelIDlist.length-1],this.Flag.init(this.levelIDlist.length-1)),this.lastUnlockID=t;for(var c=0;c<this.levelIDlist.length;c++){var r=this.levelIDlist[c],l=n.instance.getStoryLevelData(r),h=this.levelNodes[c];if(l&&!l.lock&&(this.unlockNode(h,r,!1),r<t?this.ChangeBtn(h,this.greenBtn):r>=e+1?this.ChangeBtn(h,this.redBtn):this.ChangeBtn(h,this.greenBtn)),l&&l.lock||!l){var u=h.getComponent("cc.Button");u&&(u.interactable=s.UseTest)}}},nextlevel:function(){var e=s.levelResultData;if(e){e.stageID,e.explorationID;var t=e.levelID,i=this.getlevelNode(t);if(i)switch(e.levelResult){case a.Win:var o=function(){this.moveToNext(t,i)}.bind(this),c=n.instance.getLevelStars(t);s.passLevelStars>c?(c=s.passLevelStars,this.showWinStars(i,t,c,o)):o();break;case a.Lose:this.ChangeBtn(i,this.grayBtn)}}},moveToNext:function(e,t){var i=this.levelIDlist.indexOf(e),o=this.levelIDlist.indexOf(this.lastUnlockID);if(!(this.lastUnlockID>e||this.lastExplorationID>this.explorationID)){var s=function(){var o=this;this.ChangeBtn(t,this.greenBtn);var s={};if(s.levelID=e+1,s.lock=!1,n.instance.setStoryLevelData(s),n.instance.setLastestLevelID(e),e>=1&&this.guideHand&&(this.guideHand.active=!1),(t=this.getlevelNode(e+1))&&(this.unlockNode(t,e+1,!0),this.ChangeBtn(t,this.redBtn)),i+1>=this.oneItemCnt){var a=function(){this.MapStage.winUnlockExploration(this.explorationID+1)}.bind(this);this.unlockNextExploration=a;var c=cc.callFunc(function(){o.onBtnBackClicked()},this),r=cc.sequence(cc.delayTime(1),c);this.node.runAction(r)}else this.Mask.active=!1}.bind(this);o+1>=this.oneItemCnt?s&&s():(this.Mask.active=!0,this.Flag.nextlevel(s))}},ChangeBtn:function(e,t){var i=e.getChildByName("sp");if(i){var o=i.getComponent("cc.Sprite");o&&(o.spriteFrame=t)}},unlockNode:function(e,t){e.getComponent("LevelNode").unlock()},showWinStars:function(e,t,i,o){var s=this,n=cc.callFunc(function(){e.getComponent("LevelNode").showWinStar(i)},this),a=cc.callFunc(function(){s.processStarChest(e,t)},this),c=cc.callFunc(function(){o&&o()},this);this.node.runAction(cc.sequence(cc.delayTime(.5),n,cc.delayTime(.5),a,cc.delayTime(.2),c))},getlevelNode:function(e){for(var t=0;t<this.levelIDlist.length;t++){if(this.levelIDlist[t]===e)return this.levelNodes[t]}return null},onBtnBackClicked:function(){var e=function(){this.closeFunc&&this.closeFunc(),this.unlockNextExploration&&this.unlockNextExploration(),s.levelResultData=null,s.levelID=-1,this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,e)},spawnBoss:function(){var e=this,t=cc.v2(190,-105);switch(this.dayKind){case c.Day:case c.Noon:case c.Night:}var i=["BOSS1","BOSS2","BOSS3","BOSS4","BOSS5","BOSS6","BOSS7","BOSS8","BOSS9","BOSS10","BOSS11","BOSS12","BOSS13","BOSS14","BOSS15","BOSS16"][this.explorationID-1];cc.loader.loadRes("json/Monster",function(o,s){for(var n=s.json,a=0;a<n.length;a++){var c=n[a];if(c.MonsterName===i){var r="prefab/monster/";r+=c.AnimeRes,cc.loader.loadRes(r,function(i,o){var s=cc.instantiate(o);s.scale=.35,s.removeComponent("Monster"),s.parent=e.road,s.zIndex=-1,s.group="default",s.setPosition(t);var n=s.getChildByName("ProgressBar");n&&n.removeFromParent();var a=s.getChildByName("skeleton");if(a){var c=a.getComponent("sp.Skeleton");c&&c.setAnimation(0,"idle",!0)}})}}})},initTitle:function(){var e=this;cc.loader.loadRes("json/ExplorationInfo",function(t,i){for(var o=i.json,s=0;s<o.length;s++){var n=o[s];n.ExplorationID===e.explorationID&&(e.stage_title.string=n.stageTitle,e.exploration_title.string=n.explorationTitle,e.explorationDesri.string=n.explorationContent)}})},showGuideHand:function(){if(n.instance.getLastestLevelID()>=1)this.guideHand.active=!1;else{var e=this.guideHand.getComponent(cc.Animation).play();e.wrapMode=cc.WrapMode.Normal,e.wrapMode=cc.WrapMode.Loop,e.speed=.1}},initStarChest:function(){var e=this.StageUI.starcnt,t=this.StarChestNode,i=t.getChildByName("starnum").getComponent("cc.Label");i.string=e+"",this.starcnt=e;var o=t.getChildByName("ProgressBar");o=o.getComponent("cc.ProgressBar");var n=s.StarNums,a=n[0],c=n[n.length-1],r=c;this.starcnt+e>a&&(r=c);var l=this.starcnt/r;o.progress=l,(i=t.getChildByName("allnum").getComponent("cc.Label")).string=r+""},processStarChest:function(e,t){var i=n.instance.getLevelStars(t),o=s.passLevelStars;if(o>i){n.instance.setLevelStars(t,o);var a=o-i;this.xxstars(e,a),this.StageUI.collectStars(a)}},xxstars:function(e,t){var i=this.StarChestNode;i.getChildByName("starnum").getComponent("cc.Label").string=this.starcnt+t+"";var o=i.getChildByName("ProgressBar");o=o.getComponent("cc.ProgressBar");var n=s.StarNums,a=n[0],c=n[n.length-1],r=c,l=this.starcnt+t;l>a&&(r=c);var h=this.starcnt/r,u=l/r;this.updateProgress=function(){(h+=.01)>=u&&(h=u,this.unschedule(this.updateProgress),this.updateProgress=null),o.progress=h},this.schedule(this.updateProgress,.05),this.starcnt+=t,this.openStarBtn();var d=this.StarChestNode.getChildByName("starbk"),p=d,v=cc.v2(),f=d.group;this.spawnStarDust(p,v,f)},spawnStarDust:function(e,t,i){cc.loader.loadRes("prefab/particle/starDust",function(o,s){var n=cc.instantiate(s);n.scale=2,n.parent=e,n.position=t,n.group=i})},openStarBtn:function(){var e=s.StarNums[0];if(this.starcnt>=e){this.StarBtn.interactable=!0,this.StarBtn.enableAutoGrayEffect=!1;var t=this.StarBtn.node,i=cc.scaleTo(1,1.1,1.1).easing(cc.easeOut(3)),o=cc.scaleTo(1,1,1).easing(cc.easeOut(3)),n=cc.sequence(i,o),a=cc.repeatForever(n);t.scale=1,t.stopAllActions(),t.runAction(a)}},onStarBtn:function(){this.StageUI.onOpenStar()}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],ExplortaionStory:[function(e,t,i){"use strict";cc._RF.push(t,"0493b7itLlGO51fG9X+vdfY","ExplortaionStory");var o=e("Utils"),s=e("EnumDefine").ExplorationSubStage;cc.Class({extends:cc.Component,properties:{sun:cc.Sprite,perspective:cc.Sprite,midshotOne:cc.Sprite,foreground:cc.Sprite,clouds:{default:[],type:cc.Sprite},RPG:cc.Node,snowFallNode:cc.Node},onLoad:function(){if(o.levelResultData){var e=o.levelResultData;if(e){var t=e.explorationID;this.initExploration(t),this.nodelist=[]}}},start:function(){},updateAlignment:function(e){if(e){var t=e.getComponent(cc.Widget);t&&(t.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE,t.updateAlignment())}},initExploration:function(e,t){this.nodelist=[];var i=o.GetExplorationSubStage(e);this.subStage=i;var s=this.getExplorationData(i);this.stageFileNamesData=s;var n=s.path,a=this,c=o.StageSpriteAtlas;c?(this.setAtlas(c,s),t&&t()):cc.loader.loadRes(n,cc.SpriteAtlas,function(e,i){a.setAtlas(i,s),t&&t()})},setAtlas:function(e,t){var i=e.getSpriteFrame(t.sun);if(this.sun&&(this.sun.spriteFrame=i,this.nodelist.push(this.sun.node)),i=e.getSpriteFrame(t.perspective),this.perspective&&(this.perspective.spriteFrame=i,this.updateAlignment(this.perspective.node),this.nodelist.push(this.perspective.node)),i=e.getSpriteFrame(t.midshot),this.midshotOne){this.midshotOne.spriteFrame=i,this.nodelist.push(this.midshotOne.node);var o=this.midshotOne.node;this.justWinds(o)}i=e.getSpriteFrame(t.foreground),this.foreground&&(this.foreground.spriteFrame=i,this.fliter(i),this.nodelist.push(this.foreground.node));for(var s=this.clouds,n=0;n<s.length;n++){var a=s[n];a&&(i=e.getSpriteFrame(t.clouds[n]),a.spriteFrame=i,this.nodelist.push(a.node))}},justWinds:function(e){var t=e.getChildByName("wind1"),i=e.getChildByName("wind2");if(t&&i)switch(this.subStage){case s.Farm1:t.position=cc.v2(78,29),i.position=cc.v2(203,17);break;case s.Farm2:t.position=cc.v2(91,-9),i.position=cc.v2(214,-14);break;case s.Farm3:t.position=cc.v2(93,35),i.position=cc.v2(212,23)}},fadeIn:function(e){for(var t=0;t<this.nodelist.length;t++){var i=this.nodelist[t];i.opacity=0,i.runAction(cc.fadeIn(e))}},getExplorationData:function(e){var t="",i="",o="",n="",a="",c=[];switch(e){case s.Farm1:t="texture/farm",i="farm_foreground1",o="farm_midshot1",n="farm_perspective1",a="farm_sun1",c=["cloud1","cloud2","cloud3"];break;case s.Farm2:t="texture/farm",i="farm_foreground2",o="farm_midshot2",n="farm_perspective2",a="farm_sun2",c=["cloud1","cloud2","cloud3"],this.moveWinds(this.midshotOne,0,-35);break;case s.Farm3:t="texture/farm",i="farm_foreground3",o="farm_midshot3",n="farm_perspective3",a="moon",c=["cloud1","cloud2","cloud3"],this.showSnowFall();break;case s.Forest1:t="texture/forest",i="forest_foreground1",o="forest_midshot1",n="forest_perspective1",a="forest_sun",c=["forest_cloud1","forest_cloud1big","forest_cloud1"],this.hideWinds(this.midshotOne),this.RPG.y+=20;break;case s.Forest2:t="texture/forest",i="forest_foreground2",o="forest_midshot2",n="forest_perspective2",a="forest_sun",c=["forest_cloud2","forest_cloud2big","forest_cloud2"],this.hideWinds(this.midshotOne),this.RPG.y+=20;break;case s.Forest3:t="texture/forest",i="forest_foreground3",o="forest_midshot3",n="forest_perspective3",a="moon",c=["forest_cloud3","forest_cloud3big","forest_cloud3"],this.hideWinds(this.midshotOne),this.RPG.y+=20}var r={};return r.path=t,r.foreground=i,r.midshot=o,r.perspective=n,r.sun=a,r.clouds=c,r},moveWinds:function(e,t,i){for(var o=e.node.children,s=0;s<o.length;s++){var n=o[s];n&&(n.x+=t,n.y+=i)}},hideWinds:function(e){for(var t=e.node.children,i=0;i<t.length;i++){var o=t[i];o&&(o.active=!1)}},fliter:function(e){var t=e.getTexture();t.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),t.setWrapMode(cc.Texture2D.WrapMode.GL_REPEAT,cc.Texture2D.WrapMode.GL_REPEAT)},showSnowFall:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],ExplosionBig:[function(e,t,i){"use strict";cc._RF.push(t,"9f373FM6k5CH60SkVOKZNNh","ExplosionBig"),cc.Class({extends:cc.Component,properties:{sys1:cc.ParticleSystem,sys2:cc.ParticleSystem},onLoad:function(){},start:function(){},explosion:function(e){var t=this,i=cc.callFunc(function(){t.sys1.resetSystem()},this),o=cc.callFunc(function(){t.sys2.resetSystem()},this),s=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(i,cc.delayTime(.08),o,cc.delayTime(1),s))}}),cc._RF.pop()},{}],ExplosionPool:[function(e,t,i){"use strict";cc._RF.push(t,"b07b8zS7CVLabT5JykOJIec","ExplosionPool");var o=cc.Class({name:"ExplosionPool",properties:{prefab:cc.Prefab,size:0},ctor:function(){},init:function(){this._pool=new cc.NodePool(""),this._count=0},get:function(){var e=this._pool.get();return e||(e=cc.instantiate(this.prefab),this._count++),e},put:function(e){this._pool.put(e)}});t.exports=o,cc._RF.pop()},{}],ExplosionSmall:[function(e,t,i){"use strict";cc._RF.push(t,"9d412owgJlAzosFAYWsBVW7","ExplosionSmall"),cc.Class({extends:cc.Component,properties:{sys1:cc.ParticleSystem},onLoad:function(){},start:function(){},explosion:function(e){var t=this,i=cc.callFunc(function(){t.sys1.node.scale=.8,t.sys1.resetSystem()},this),o=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(i,cc.delayTime(.5),o))}}),cc._RF.pop()},{}],FarmLevelGole:[function(e,t,i){"use strict";cc._RF.push(t,"f8a83NMrklJY6zoDgBHcb+x","FarmLevelGole");e("JsonData");var o=e("Utils"),s=e("EnumDefine").CellType,n=(e("LoadlevelEditor"),e("EnumDefine").LevelEditorID),a=(e("EnumDefine"),e("EnumDefine").StarLevelKind,e("BaseUI"));cc.Class({extends:a,properties:{midbk:cc.Node,goleSp:cc.Node,goleWave:cc.Node,goleDropBox:cc.Node,goleCell:cc.Node,levelBk:cc.Node,cell1SkeletonData:sp.SkeletonData,cell2SkeletonData:sp.SkeletonData,cell3SkeletonData:sp.SkeletonData,cell4SkeletonData:sp.SkeletonData,cell5SkeletonData:sp.SkeletonData},ctor:function(){this.goleNodes=[]},onLoad:function(){this.moveDone=!1,this.shitout=!1},start:function(){},onBtnCloseUI:function(){this.close()},close:function(e){var t=function(){this.node.active=!1,e&&e()}.bind(this);this.scaleClose(this.node,t)},clearGoles:function(){for(var e=0;e<this.goleNodes.length;e++){var t=this.goleNodes[e];t&&t.destroy()}this.goleNodes=[]},show:function(e){this.node.scale=0,this.callback=e;var t=function(){this.showGole()}.bind(this);this.normalShow(this.node,1,t)},enterlevelBk:function(){},showGole:function(){this.clearGoles();var e=o.LevelEditorLevelGoles,t=e.WaveNum,i=e.GoleCells;e.StarLevel,i[n.Step];if(t>0){var s=cc.instantiate(this.goleWave);s.active=!0,s.parent=this.levelBk,this.goleNodes.push(s),s.getChildByName("num").getComponent("cc.Label").string=t+""}for(var a in i){var c=i[a];if(c>0){var r=parseInt(a);switch(r){case n.DropBox:this.spawnDropBox(c);break;case n.Cell1:case n.Cell2:case n.Cell3:case n.Cell4:case n.Cell5:this.spawncell(r,c);break;case n.Block:this.spawnSp("wood1",c);break;case n.ClearBomb:this.spawnSp("bomb",c);break;case n.Chest:this.spawnSp("chest1",c)}}}for(var l,h=this.levelBk.width,u=0,d=this.goleNodes.length,p=0;p<this.goleNodes.length;p++){var v=this.goleNodes[p];u+=v.width*v.scale}l=(h-u-8*(d-1))/2;for(var f=0;f<this.goleNodes.length;f++){var m=this.goleNodes[f];m.active=!0,m.x=l+m.width*m.scale/2+(m.width*m.scale+8)*f,m.x-=h/2,m.y=0}},spawncell:function(e,t){var i=cc.instantiate(this.goleCell);i.active=!0,i.parent=this.levelBk,this.goleNodes.push(i);o.getCellName(e);var n=i.getChildByName("sp"),a=null;switch(e){case s.Cell1:a=this.cell1SkeletonData;break;case s.Cell2:a=this.cell2SkeletonData;break;case s.Cell3:a=this.cell3SkeletonData;break;case s.Cell4:a=this.cell4SkeletonData;break;case s.Cell5:a=this.cell5SkeletonData}n.getComponent("sp.Skeleton").skeletonData=a,i.getChildByName("num").getComponent("cc.Label").string=t+""},spawnDropBox:function(e){var t=cc.instantiate(this.goleDropBox);t.active=!0,t.parent=this.levelBk,this.goleNodes.push(t);var i=t.getChildByName("sp");cc.loader.loadRes("spine/baby/lockbaby",sp.SkeletonData,function(e,t){e&&cc.error(e),i.getComponent("sp.Skeleton").skeletonData=t}),t.getChildByName("num").getComponent("cc.Label").string=e+""},spawnSp:function(e,t){var i=cc.instantiate(this.goleSp);i.active=!0,i.parent=this.levelBk,this.goleNodes.push(i);var o=i.getChildByName("sp").getComponent("cc.Sprite");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(t,i){var s=i.getSpriteFrame(e);o.spriteFrame=s}),i.getChildByName("num").getComponent("cc.Label").string=t+""}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LoadlevelEditor:"LoadlevelEditor",Utils:"Utils"}],FightUI:[function(e,t,i){"use strict";cc._RF.push(t,"530910GpJdFIqaHhaC9A3/3","FightUI");e("JsonData"),e("LocalStorage"),e("EnumDefine").ActorType;var o=e("Utils"),s=e("EnumDefine").CellType,n=e("EnumDefine").LevelEditorID,a=e("EnumDefine").LevelResult,c=e("RPGManager"),r=(e("EnumDefine").FightKind,e("EnumDefine").StarLevelKind),l=e("EnumDefine").StarKind;cc.Class({extends:cc.Component,properties:{coin:{default:null,type:cc.SpriteFrame},coinlabel:{default:null,type:cc.Label},curWavelabel:{default:null,type:cc.Label},steplabel:{default:null,type:cc.Label},wavelabel:{default:null,type:cc.Label},stepbk:cc.Node,leftbk:cc.Node,goleMonster:cc.Node,goleCell:cc.Node,goleDropBox:cc.Node,goleSp:cc.Node,combo:cc.Node,cell1SkeletonData:sp.SkeletonData,cell2SkeletonData:sp.SkeletonData,cell3SkeletonData:sp.SkeletonData,cell4SkeletonData:sp.SkeletonData,cell5SkeletonData:sp.SkeletonData,waveNode:cc.Node},ctor:function(){this.StageType=0,this.bossTime=200,this.timeDt=0,this.timeDelay=1,this.bossTimeOver=!1,this.startTimeUpdate=!1,this.curWave=1},onLoad:function(){this.coinlabel.string="0",this.coinVal=0,this.diamondVal=0,this.scoreVal=0,this.playSteps=0,this.monsterTarget={},this.cellTargets={},this.goleMonster.active=!1,this.goleCell.active=!1,this.goleDropBox.active=!1,this.goleSp.active=!1,this.stepbk.active=!0,this.starLevelDone={},this.starLevelDone[l.OneStar]=!1,this.starLevelDone[l.TwoStar]=!1,this.starLevelDone[l.ThreeStar]=!1,this.combo.active=!1,this.golelist=[],this.showWave(!1),this.leftbk.active=!1},passBtnFunc:function(){c.instance.processWin()},showLeftBk:function(){this.leftbk.active=!0},showWave:function(e){this.waveNode.active=e},closeCombo:function(){var e=this;this.combo.stopAllActions();var t=cc.scaleTo(.5,0).easing(cc.easeOut(5)),i=cc.callFunc(function(){e.combo.active=!1},this);this.combo.runAction(cc.sequence(t,i))},scaleShowCombo:function(){this.combo.active=!0,this.combo.scale=0,this.combo.stopAllActions();var e=cc.scaleTo(.5,1).easing(cc.easeOut(5)),t=cc.callFunc(function(){},this);this.combo.runAction(cc.sequence(e,t))},showCombo:function(e){if(this.combo){var t=[1.1,1.3,1.5],i=[5,10,15];if(e<i[0])return this.comboVal=1,void this.closeCombo();var o=1;o=e>=i[0]&&e<i[1]?t[0]:e>=i[1]&&e<i[2]?t[1]:t[2],this.comboVal=o,this.scaleShowCombo();var s=this.combo.getChildByName("num");if(s)s.getComponent("cc.Label").string=o+""}},showGole:function(){if(null!==o.LevelEditorLevelGoles){var e=o.LevelEditorLevelGoles;this.showGoleData(e)}else this.showGoleFromXls(o.levelData);var t=40*this.golelist.length;this.stepbk.width=t,this.leftbk.height+=40*(this.golelist.length-1)},showGoleFromXls:function(e){var t={};t[s.Cell1]=e.TomatoNum,t[s.Cell2]=e.EggplantNum,t[s.Cell3]=e.OrangeNum,t[s.Cell4]=e.AppleNum,t[s.Cell5]=e.PeachNum,t[s.Chest]=e.DemandTreasure;var i=e.WaveEnemyID,o=i.length;";"===i[o-1]&&(i=i.substring(0,o-1));var n=i.split(";").length,a={};a.StepNum=e.playSteps,a.WaveNum=n,a.GoleCells=t,this.showGoleData(a)},showGoleData:function(e){var t=e.WaveNum,i=e.GoleCells,o=e.StarLevel,s=i[n.Step];this.waveNum=t,this.goleCells=i,this.starLevelData=o,this.StartStepNum=s,this.playSteps=s,this.steplabel.string=this.playSteps+"";var a=0;if(t>0){var c=cc.instantiate(this.goleMonster);c.active=!0,c.parent=this.leftbk,c.addComponent(cc.Widget);var r=c.getComponent(cc.Widget);r.left=-33,r.top=-52,r.isAlignTop=!0,r.isAlignLeft=!0,r.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE,a+=1;var l=c.getChildByName("num").getComponent("cc.Label");l.string=t+"",this.monsterTarget.num=t,this.monsterTarget.label=l,this.golelist.push(c),this.monsterGole=c,this.showWave(!0),this.curWavelabel.string=this.curWave+""}for(var h in i){var u=i[h];if(u>0){var d=parseInt(h);switch(d){case n.Cell1:case n.Cell2:case n.Cell3:case n.Cell4:case n.Cell5:this.spawncell(d,u,-33,-52,a,45),a+=1;break;case n.DropBox:this.spawnDropBox(d,u,-33,-52,a,45),a+=1;break;case n.ClearBomb:this.spawnSp(d,"bomb",u,-33,-52,a,45),a+=1;break;case n.Block:this.spawnSp(d,"wood1",u,-33,-52,a,45),a+=1;break;case n.Chest:this.spawnSp(d,"chest1",u,-33,-52,a,45),a+=1}}}},spawncell:function(e,t,i,n,a,c){var r=cc.instantiate(this.goleCell);r.active=!0,r.parent=this.leftbk,r.position=cc.v2(i,n-a*c),r.addComponent(cc.Widget);var l=r.getComponent(cc.Widget);l.left=i,l.top=n+a*c,l.isAlignTop=!0,l.isAlignLeft=!0,l.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE;o.getCellName(e);var h=r.getChildByName("target");h.scale=.4;var u=null;switch(e){case s.Cell1:u=this.cell1SkeletonData;break;case s.Cell2:u=this.cell2SkeletonData;break;case s.Cell3:u=this.cell3SkeletonData;break;case s.Cell4:u=this.cell4SkeletonData;break;case s.Cell5:u=this.cell5SkeletonData}h.getComponent("sp.Skeleton").skeletonData=u;var d=r.getChildByName("num").getComponent("cc.Label");d.string=t+"";var p={};p.num=t,p.startnum=t,p.label=d,this.cellTargets[e]=p,this.golelist.push(r)},spawnDropBox:function(e,t,i,o,s,n){var a=cc.instantiate(this.goleDropBox);a.active=!0,a.parent=this.leftbk,a.position=cc.v2(i,o-s*n),a.addComponent(cc.Widget);var c=a.getComponent(cc.Widget);c.left=i,c.top=o+s*n,c.isAlignTop=!0,c.isAlignLeft=!0,c.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE;var r=a.getChildByName("target");r.scale=.35;cc.loader.loadRes("spine/baby/lockbaby",sp.SkeletonData,function(e,t){e&&cc.error(e),r.getComponent("sp.Skeleton").skeletonData=t});var l=a.getChildByName("num").getComponent("cc.Label");l.string=t+"";var h={};h.num=t,h.startnum=t,h.label=l,this.cellTargets[e]=h,this.golelist.push(a)},spawnSp:function(e,t,i,o,s,n,a){var c=cc.instantiate(this.goleSp);c.active=!0,c.parent=this.leftbk,c.position=cc.v2(o,s-n*a),c.addComponent(cc.Widget);var r=c.getComponent(cc.Widget);r.left=o,r.top=s+n*a,r.isAlignTop=!0,r.isAlignLeft=!0,r.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE;var l=c.getChildByName("target");l.scale=.5;var h=l.getComponent("cc.Sprite");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,i){var o=i.getSpriteFrame(t);h.spriteFrame=o});var u=c.getChildByName("num").getComponent("cc.Label");u.string=i+"";var d={};d.num=i,d.startnum=i,d.label=u,this.cellTargets[e]=d,this.golelist.push(c)},start:function(){},getSteps:function(){return this.playSteps},checkResult:function(){return this.checkTarget()?this.playSteps>=0?a.Win:a.Lose:this.playSteps<=0?a.Lose:a.Fighting},checkTarget:function(){var e=!0,t=!0;for(var i in this.cellTargets){if(this.cellTargets[i].num>0){e=!1;break}}return this.monsterTarget.num>0&&(t=!1),e&&t},updateStep:function(e){this.playSteps+=e,this.playSteps<0&&(this.playSteps=0),this.steplabel.string=this.playSteps+"",o.levelResultData.step=this.playSteps},updateWave:function(e){this.monsterTarget.num-=e,this.monsterTarget.num<0&&(this.monsterTarget.num=0);var t=this.monsterTarget.num;this.monsterTarget.label.string=t+"",this.updataStarlevel()},showNextWave:function(){this.monsterTarget.num>0&&(this.curWave+=1,this.curWavelabel.string=this.curWave+"")},updateCell:function(e,t){var i=e=parseInt(e);switch(e){case s.Cell1:case s.Cell2:case s.Cell3:case s.Cell4:case s.Cell5:i=e;break;case s.ClearBombProp:i=n.ClearBomb,o.KillClearBombCnt+=t;break;case s.Chest:i=n.Chest;break;case s.DropBottomBox:i=n.DropBox;break;case s.Weeds:case s.Fence:case s.Stakes:i=n.Block}for(var a in this.cellTargets)if(i===(a=parseInt(a))){var c=this.cellTargets[a];c.num-=t,c.num<0&&(c.num=0),c.label.string=c.num+"",this.cellTargets[a]=c}this.updataStarlevel()},updateRemoveCells:function(e){var t=o.levelID,i=this;cc.loader.loadRes("json/LevelReward",function(s,n){for(var a=n.json,c=0;c<a.length;c++){var r=a[c],l=0;if(r.LevelID===t){var h=r["10\u8fde"],u=r["15\u8fde"];e>=10&&e<15?l=h:e>=15&&(l=u);var d=o.levelResultData;i.coinVal+=l,i.coinlabel.string=i.coinVal+"",d.coinNum=i.coinVal}}})},updateCoin:function(e){this.coinVal+=e,this.coinlabel.string=this.coinVal+"",o.levelResultData.coinNum=this.coinVal},updateDiamond:function(e){this.diamondVal+=e,o.levelResultData.diamondNum=this.diamondVal},updateScore:function(e){this.scoreVal+=e,o.levelResultData.score=this.scoreVal},addBossTime:function(e){},getBossTimeOver:function(){return this.bossTimeOver},resumeTimeUpdate:function(){this.startTimeUpdate=!0},onBtnPauseClicked:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/PauseUI",function(e,i){var o=cc.instantiate(i);o&&(o.parent=t,o.active=!0)});var i=o.fightSceneAudioID;cc.audioEngine.pause(i)},loadLineHarvestData:function(e,t){cc.loader.loadRes("json/LineHarvest",function(i,o){for(var s=o.json,n=0;n<s.length;n++){var a=s[n];if(e===parseInt(a.Line)){t&&t(a);break}}})},getGoleData:function(){var e=[];for(var t in this.cellTargets){var i=this.cellTargets[t];if(i.num>0){var o={};o.celltype=t,o.num=i.num,e.push(o)}}var s=this.monsterTarget.num,n={};return n.datalist=e,n.wavenum=s,n.goleMonster=this.goleMonster,n.goleCell=this.goleCell,n.goleDropBox=this.goleDropBox,n.goleSp=this.goleSp,n},updataStarlevel:function(){var e=this.starLevelData;if(e&&void 0!==e){var t=e[1],i=e[2],s=e[3];this.starLevelDone[l.OneStar]&&this.starLevelDone[l.TwoStar]&&this.starLevelDone[l.ThreeStar]||(this.starLevelDone[l.OneStar]||(this.starLevelDone[l.OneStar]=this.checkStarLevel(t)),this.starLevelDone[l.TwoStar]||(this.starLevelDone[l.TwoStar]=this.checkStarLevel(i)),this.starLevelDone[l.ThreeStar]||(this.starLevelDone[l.ThreeStar]=this.checkStarLevel(s)),o.starLevelDone=this.starLevelDone)}},checkStarLevel:function(e){if(e.length<0)return!1;var t=e[0],i=t.num,o=t.step,s=t.kind;switch(0===o&&(o=this.StartStepNum),s){case r.Monster:return this.IsStarMonsterDone(i,o);case r.Bomb:var a=n.ClearBomb;return this.IsStarCellDone(a,i,o);case r.Block:var c=n.Block;return this.IsStarCellDone(c,i,o);case r.Chest:var l=n.Chest;return this.IsStarCellDone(l,i,o);case r.Cell1:var h=n.Cell1;return this.IsStarCellDone(h,i,o);case r.Cell2:var u=n.Cell2;return this.IsStarCellDone(u,i,o);case r.Cell3:var d=n.Cell3;return this.IsStarCellDone(d,i,o);case r.Cell4:var p=n.Cell4;return this.IsStarCellDone(p,i,o);case r.Cell5:var v=n.Cell5;return this.IsStarCellDone(v,i,o)}},IsStarMonsterDone:function(e,t){0===e&&(e=this.waveNum);var i=this.monsterTarget.num;if(this.waveNum-i>=e&&this.StartStepNum-this.playSteps<=t)return!0;return!1},IsStarCellDone:function(e,t,i){var o=this.cellTargets[e];if(o&&(0===t&&(t=o.startnum),o.startnum-o.num>=t&&this.StartStepNum-this.playSteps<=i))return!0;return!1}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],Flag:[function(e,t,i){"use strict";cc._RF.push(t,"02b79Z3kupANK2Rob0DLZCo","Flag"),cc.Class({extends:cc.Component,properties:{tipNodes:{default:[],type:cc.Node},levelNodes:{default:[],type:cc.Node},flag:cc.Node},onLoad:function(){this.index=0},start:function(){},init:function(e){var t=this.levelNodes[e];t&&(this.node.position=cc.v2(t.x,t.y),this.index=e)},nextlevel:function(e){var t=this.index,i=this.tipNodes[2*t+0],o=this.tipNodes[2*t+1],s=[cc.v2(i.x,i.y),cc.v2(o.x,o.y)],n=cc.cardinalSplineTo(1,s,0),a=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(n,a))}}),cc._RF.pop()},{}],FloatSp:[function(e,t,i){"use strict";cc._RF.push(t,"3c67fX6GrBKT4OGciLq6Sh9","FloatSp"),cc.Class({extends:cc.Component,properties:{numlabel:cc.Label,sp:cc.Sprite},onLoad:function(){},start:function(){},set:function(e,t){this.sp&&(this.sp.spriteFrame=e),this.numlabel.string=t+""},show:function(e,t){this.sp&&(this.sp.spriteFrame=e),this.numlabel.string=t+"";var i=this.node;i.zIndex=10,i.scale=0;var o=cc.scaleTo(.7,2).easing(cc.easeIn(4)),s=cc.moveBy(.7,cc.v2(0,100)).easing(cc.easeIn(3)),n=cc.spawn(o,s),a=cc.scaleTo(.7,0).easing(cc.easeOut(4)),c=cc.moveBy(.7,cc.v2(0,100)).easing(cc.easeOut(3)),r=cc.spawn(a,c),l=cc.sequence(n,r,cc.removeSelf());i.runAction(l)}}),cc._RF.pop()},{}],FloatWord:[function(e,t,i){"use strict";cc._RF.push(t,"b89adGxzZ5Mmps3AT4UaYmv","FloatWord"),cc.Class({extends:cc.Component,properties:{wordlabel:cc.Label},onLoad:function(){},start:function(){},show:function(e){this.wordlabel.string=e+"";var t=this.node;t.scale=0;var i=cc.scaleTo(.7,2).easing(cc.easeIn(4)),o=cc.moveBy(.7,cc.v2(0,100)).easing(cc.easeIn(3)),s=cc.spawn(i,o),n=cc.scaleTo(.7,0).easing(cc.easeOut(4)),a=cc.moveBy(.7,cc.v2(0,100)).easing(cc.easeOut(3)),c=cc.spawn(n,a),r=cc.sequence(s,cc.delayTime(1),c,cc.fadeOut(1),cc.removeSelf());t.runAction(r)}}),cc._RF.pop()},{}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"57ffdIDOCJLb55qK4pUkjBB","Game");var o=e("LocalStorage"),s=e("Utils"),n=e("RPGManager"),a=e("EnumDefine").LevelResult,c=e("EnumDefine").ActorType,r=e("EnumDefine").LevelMode,l=cc.Class({extends:cc.Component,properties:{Board:cc.Node,BoxesNode:cc.Node,RPG:cc.Node,UINode:cc.Node,FightUI:cc.Node,EndlessTaskUI:cc.Node,Root:cc.Node,LevelGoleNode:cc.Node,AllCardsNode:cc.Node},statics:{instance:null},onLoad:function(){switch(l.instance=this,this.playBkAudio=this.Root.getComponent("PlayBkAudios"),this.poolMng=this.node.getComponent("PoolMng"),this.poolMng.init(),this.Boxes=this.BoxesNode.getComponent("Boxes"),this.Boxes.spawnBoxes(),this.board=this.Board.getComponent("Board"),this.board.init(this),this.fightUI=this.FightUI.getComponent("FightUI"),this.LevelGoleNode.active=!1,this.Endless=this.EndlessTaskUI.getComponent("Endless"),this.TaskUI=this.EndlessTaskUI.getComponent("TaskUI"),this.AllCardsNode.active=!1,this.AttackCoefficient=1,s.levelMode){case r.Normal:this.FightUI.active=!0,this.EndlessTaskUI.active=!1;break;case r.Endless:this.FightUI.active=!1,this.EndlessTaskUI.active=!0}for(var e=[],t=[c.Actor1,c.Actor2,c.Actor3,c.Actor4,c.Actor5],i=0;i<t.length;i++){var n=t[i],a=o.instance.getRoleData(n);a&&e.push(a)}this.roleDatas=e},start:function(){this.startGame()},battleExit:function(){this.UINode.active=!1,this.FightUI.active=!1,this.Board.active=!1},resetAttackCoefficient:function(){this.AttackCoefficient=1},startGame:function(){var e=s.levelMode,t=s.levelResultData;t.coinNum=0,t.diamondNum=0,t.levelResult=a.Fighting;var i=t.levelID,o=function(t){var i=this.roleDatas,o=function(){e===r.Endless&&this.Endless&&this.Endless.initTask(),t&&t()}.bind(this);this.showAllCards(i,o),this.showLevelGole()}.bind(this);switch(this.board.createCells(i,o),n.instance.createRPG(i),this.playAudio(),e){case r.Normal:this.fightUI.showGole();break;case r.Endless:this.TaskUI.showGole()}},showLevelGole:function(){switch(s.levelMode){case r.Normal:this.LevelGoleNode.active=!0,this.LevelGoleNode.getComponent("FarmLevelGole").show();break;case r.Endless:}},closeLevelGole:function(){switch(s.levelMode){case r.Normal:if(this.LevelGoleNode){var e=function(){this.fightUI.showLeftBk()}.bind(this);this.LevelGoleNode.getComponent("FarmLevelGole").close(e)}break;case r.Endless:if(this.LevelGoleNode)this.LevelGoleNode.getComponent("FarmLevelGole").close()}},showAllCards:function(e,t){var i=function(e){t&&t(e)}.bind(this);this.board.setUserInteract(!1),this.AllCardsNode.active=!0,this.AllCardsNode.getComponent("AllCards").show(e,i)},showCombo:function(e){switch(s.levelMode){case r.Normal:this.fightUI.showCombo(e);break;case r.Endless:this.TaskUI.showCombo(e)}},closeCombo:function(){switch(s.levelMode){case r.Normal:this.fightUI.closeCombo(),this.comboVal=this.fightUI.comboVal;break;case r.Endless:this.TaskUI.closeCombo(),this.comboVal=this.TaskUI.comboVal}},updateRoleSkill:function(){switch(s.levelMode){case r.Normal:break;case r.Endless:this.TaskUI.updateRoleSkill()}},updatePetSkil:function(){switch(s.levelMode){case r.Normal:break;case r.Endless:this.TaskUI.updatePetSkil()}},updateHurtMonster:function(e){switch(s.levelMode){case r.Normal:break;case r.Endless:this.TaskUI.updateHurtMonster(e)}},updateCoin:function(e){switch(s.levelMode){case r.Normal:this.fightUI.updateCoin(e);break;case r.Endless:this.TaskUI.updateCoin(e)}},updateRemoveCells:function(e){switch(s.levelMode){case r.Normal:this.fightUI.updateRemoveCells(e);break;case r.Endless:}},updateDiamond:function(e){this.fightUI.updateDiamond(e)},updateStep:function(e){switch(s.levelMode){case r.Normal:this.fightUI.updateStep(e);break;case r.Endless:this.TaskUI.updateStep(e)}},updateScore:function(e){switch(s.levelMode){case r.Normal:this.fightUI.updateScore(e);break;case r.Endless:}},updateCell:function(e,t){switch(s.levelMode){case r.Normal:this.fightUI.updateCell(e,t);break;case r.Endless:this.TaskUI.updateCell(e,t)}},updateWave:function(e){switch(s.levelMode){case r.Normal:this.fightUI.updateWave(e);break;case r.Endless:this.TaskUI.updateWave(e)}},checkResult:function(){switch(s.levelMode){case r.Normal:return this.fightUI.checkResult();case r.Endless:return this.TaskUI.checkResult()}},removeCell:function(e){this.board.removeCell(e)},getFightUI:function(){return this.fightUI},getTaskUI:function(){return this.TaskUI},getSteps:function(){switch(s.levelMode){case r.Normal:return this.fightUI.getSteps();case r.Endless:return this.TaskUI.getSteps()}},getGoleData:function(){switch(s.levelMode){case r.Normal:return this.fightUI.getGoleData();case r.Endless:return null}},stopAudio:function(){this.playBkAudio.stop()},pauseAudio:function(){this.playBkAudio.pause()},playAudio:function(){this.playBkAudio.play()},resumeAudio:function(){this.playBkAudio.resume()}});cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],HurtCell:[function(e,t,i){"use strict";cc._RF.push(t,"f82edCac5xFm5G/V6C8y7kr","HurtCell"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],IIIustration:[function(e,t,i){"use strict";cc._RF.push(t,"c0481TXebpKfrsBbOqRw8Wt","IIIustration"),cc.Class({extends:cc.Component,properties:{chahuaNodes:{default:[],type:cc.Node},GoNode:cc.Node,description:cc.Label,PassBtn:cc.Button},onLoad:function(){this.poslist=[cc.v2(0,401),cc.v2(0,144),cc.v2(-100,-85),cc.v2(190,-87),cc.v2(0,-325)],this.GoNode.scale=0,this.showDescription()},start:function(){},showDescription:function(){var e=function(){this.closeWord()}.bind(this);this.typingAni(this.description,"\u5728\u4e00\u4e2a\u9065\u8fdc\u7684\u6751\u843d\u91cc\uff0c\u751f\u6d3b\u7740\u4e00\u7fa4\u7eaf\u6734\u52e4\u52b3\u7684\u4eba\u4eec\u3002\u7136\u800c\uff0c\u4ed6\u4eec\u4e00\u76f4\u4ee5\u6765\u7ecf\u5e38\u53d7\u5230\u9644\u8fd1\u5c71\u4e2d\u91ce\u517d\u548c\u602a\u7269\u56f4\u653b\u4fb5\u6270\uff0c\u6751\u5e84\u4e2d\u7684\u8d22\u4ea7\u4e0d\u65ad\u88ab\u8fd9\u4e9b\u4e0d\u901f\u4e4b\u5ba2\u6240\u6bc1\u574f\u3002\u7ec8\u4e8e\uff0c\u6751\u843d\u4e2d\u6700\u5f3a\u5927\u7684\u82f1\u96c4\u4eec\u633a\u8eab\u800c\u51fa\uff0c\u4e3a\u4e86\u4fdd\u536b\u6751\u5e84\uff0c\u4e0e\u602a\u7269\u4eec\u8fdb\u884c\u4e86\u65e0\u6570\u6b21\u7684\u6218\u6597\u2026\u2026",e)},typingAni:function(e,t,i){var o=this,s="",n=t.split(""),a=n.length,c=0;o.func=function(){s+=n[c],e.string=s,++c==a&&(o.unschedule(o.func,o),i&&i())},o.schedule(o.func,.1,cc.macro.REPEAT_FOREVER,0)},closeWord:function(){var e=this,t=cc.callFunc(function(){e.showChuHua()},this);this.description.node.runAction(cc.sequence(cc.delayTime(3),cc.fadeOut(1),t))},showChuHua:function(){var e=this;this.PassBtn.node.active=!1;for(var t=[],i=function(i){var o=e.poslist[i],s=e.chahuaNodes[i],n=cc.callFunc(function(){var e=cc.moveTo(.5,o).easing(cc.easeIn(4));s.runAction(cc.sequence(e,null))},e);t.push(n),t.push(cc.delayTime(.5))},o=0;o<this.poslist.length;o++)i(o);var s=cc.callFunc(function(){var t=cc.scaleTo(.5,1).easing(cc.easeOut(4));e.GoNode.runAction(t)},this);t.push(s),this.node.runAction(cc.sequence(t))},enterClick:function(e){cc.director.loadScene("Main")},passClick:function(e){var t=this,i=cc.callFunc(function(){t.showChuHua()},this);this.description.node.runAction(cc.sequence(cc.fadeOut(.4),i))}}),cc._RF.pop()},{}],JsonData:[function(e,t,i){"use strict";cc._RF.push(t,"f089fKz3x1AZKuQqtZAUol2","JsonData");var o=cc.Class({extends:cc.Component,properties:{},statics:{instance:null},onLoad:function(){o.instance=this},start:function(){},loadLevelData:function(e,t){cc.loader.loadRes("json/level",function(i,o){for(var s=o.json,n=0;n<s.length;n++){var a=s[n];e===a.LevelId&&t&&t(a)}})},loadPetDetailDatas:function(e){cc.loader.loadRes("json/PetDetail",function(t,i){var o=i.json;e&&e(o)})},loadPetDetailData:function(e,t){cc.loader.loadRes("json/PetDetail",function(i,o){for(var s=o.json,n=0;n<s.length;n++){var a=s[n];if(a.ID===e)return void(t&&t(a))}})},loadPetDatas:function(e){cc.loader.loadRes("json/Pet",function(t,i){var o=i.json;e(o)})},loadPetData:function(e,t,i){cc.loader.loadRes("json/Pet",function(o,s){for(var n=s.json,a=0;a<n.length;a++){var c=n[a];parseInt(c.ID)===e&&parseInt(c.Level)===t&&i&&i(c)}})},getBuyRoleData:function(e,t){cc.loader.loadRes("json/BuyRole",function(i,o){for(var s=o.json,n=0;n<s.length;n++){var a=s[n];if(a.ID===e)return void(t&&t(a))}})},loadRoleUpgradeData:function(e,t,i){cc.loader.loadRes("json/RoleUpgrade",function(o,s){for(var n=s.json,a=0;a<n.length;a++){var c=n[a];if(c.roletype=parseInt(c.roletype),c.level=parseInt(c.level),c.attack=parseInt(c.attack),c.upgradecoin=parseInt(c.upgradecoin),c.roletype===e&&c.level===t)return void(i&&i(c))}})},loadMonsterData:function(e,t){cc.loader.loadRes("json/Monster",function(i,o){for(var s=o.json,n=0;n<s.length;n++){if(s[n].ID===e)return void(t&&t(data))}})},loadBlockData:function(e,t){cc.loader.loadRes("json/Block",function(i,o){for(var s=o.json,n=0;n<s.length;n++){var a=s[n];if(a.BlockId===e)return void(t&&t(a))}})},loadJsonSkillData:function(e,t,i){cc.loader.loadRes("json/Skill",function(o,s){for(var n=s.json,a=0;a<n.length;a++){var c=n[a];if(e===c.ID&&t===c.level){i&&i(c);break}}})}});cc._RF.pop()},{}],JustWordGuide:[function(e,t,i){"use strict";cc._RF.push(t,"c749bTUeg9KbYtYjpAFtea6","JustWordGuide"),cc.Class({extends:cc.Component,properties:{description:cc.Label},onLoad:function(){this.guideDone=!1,this.registerTouch();var e=this.node.getChildByName("midbk");e&&(this.midscale=e.scale,e.scale=0),this.midbk=e},show:function(e,t){var i=this;this.callback=t,""!==e&&this.description&&(this.description.string=e);var o=cc.callFunc(function(){i.guideDone=!0},this);this.node.runAction(cc.sequence(cc.delayTime(.3),o));var s=this.node.getChildByName("role");s.getComponent("sp.Skeleton").setAnimation(0,"idle02",!0);var n=cc.v2(s.x,s.y);s.x-=600;var a=cc.moveTo(.5,n),c=cc.callFunc(function(){var e=i.midbk;if(e){var t=i.midscale,o=cc.scaleTo(.5,t).easing(cc.easeOut(5));e.runAction(o)}},this);s.runAction(cc.sequence(a,cc.delayTime(.1),c))},start:function(){},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t)},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd(t)},e)},touchBegin:function(e){},touchEnd:function(e){this.guideDone&&(this.callback&&this.callback(),this.node.active=!1)}}),cc._RF.pop()},{}],LabelLocalized:[function(e,t,i){"use strict";cc._RF.push(t,"e4f88adp3hERoJ48DZ2PSAl","LabelLocalized");var o=e("i18n");cc.Class({extends:cc.Label,properties:{textKey:{default:"TEXT_KEY",multiline:!0,tooltip:"Enter i18n key here",notify:function(){this.string=this.localizedString}},localizedString:{override:!0,tooltip:"Here shows the localized string of Text Key",get:function(){return o.t(this.textKey)},set:function(e){this.textKey=e}}},onLoad:function(){this.localizedString&&(this.string=this.localizedString)}}),cc._RF.pop()},{i18n:"i18n"}],LevelBtn:[function(e,t,i){"use strict";cc._RF.push(t,"4674c9rc2JNEIg1ywfS5LvG","LevelBtn");var o=e("JsonData"),s=e("Utils"),n=e("LocalStorage"),a=(e("EnumDefine"),e("LoadlevelEditor")),c=e("EnumDefine").LevelResult;cc.Class({extends:cc.Component,properties:{blueBtn:{default:null,type:cc.SpriteFrame},grayBtn:{default:null,type:cc.SpriteFrame},redBtn:{default:null,type:cc.SpriteFrame},greenBtn:{default:null,type:cc.SpriteFrame},scrollView:{default:null,type:cc.ScrollView},contentNode:cc.Node,allMapNode:{default:[],type:cc.Node},UI:cc.Node},onLoad:function(){this.maxlevel=80,this.levelsUnit=10,this.oneMapSize=cc.size(640,1609),this.content=this.scrollView.content,this.lastUnlockID=-1},start:function(){},initLevels:function(){var e=1,t=0;for(t=1;t<=this.maxlevel;t++){var i=n.instance.getStoryLevelData(t);if(i&&i.lock||!i){e=t-1;break}}for(t=1;t<=this.maxlevel;t++){var o=this.getlevelNode(t);if(o){var s=n.instance.getStoryLevelData(t);if(s&&s.lock||!s){var a=o.getChildByName("lock");o.getChildByName("levelID").active=!1,a.active=!0;var c=o.getComponent("cc.Button");c&&(c.interactable=!0)}else this.unlockNode(o,t,!1),t<e?this.ChangeBtn(o,this.greenBtn):this.ChangeBtn(o,this.redBtn);this.addBoss(o,t);var r=n.instance.getLevelStars(t);this.showStars(o,r)}}this.setMapContentSize(e),this.lastUnlockID=e;var l=this.getlevelNode(e);if(l){var h=l.position;this.contentNode.position=cc.v2(0,50-h.y)}},setMapContentSize:function(e){var t=0,i=parseInt(e/this.levelsUnit);t=0===parseInt(e%this.levelsUnit)?i-1:i,t+=1;var o=(t=(t+=1)>=8?8:t)*this.oneMapSize.height;this.content.height=o;for(var s=2*t+1;s<this.allMapNode.length;s++){this.allMapNode[s].active=!1}},nextlevel:function(e){var t=parseInt(s.levelID),i=e.levelResult,o=this.getlevelNode(t);if(o)switch(i){case c.Win:var a=n.instance.getLevelStars(t);if(s.passLevelStars>a&&(a=s.passLevelStars,this.showWinStars(o,t)),t>=this.maxlevel)return;if(this.lastUnlockID>t)return void this.jumpScrollView(this.lastUnlockID);if(o){this.ChangeBtn(o,this.greenBtn),t+=1;var r={};r.levelID=t,r.lock=!1,n.instance.setStoryLevelData(r),(o=this.getlevelNode(t))&&(this.unlockNode(o,t,!0),this.ChangeBtn(o,this.redBtn))}break;case c.Lose:this.ChangeBtn(o,this.grayBtn)}},jumpScrollView:function(e){},getlevelNode:function(e){var t=this.node.children;if(e<=t.length)return t[e-1]},ChangeBtn:function(e,t){e.getComponent("cc.Sprite").spriteFrame=t},unlockNode:function(e,t,i){var o=e.getChildByName("lock"),s=e.getChildByName("levelID"),n=e.getComponent("cc.Button");if(n&&(n.interactable=!0),s){s.active=!0;var a=s.getComponent("cc.Label");a&&(a.string=t+"")}o&&(o.active=!1)},showWinStars:function(e,t){var i=e.getChildByName("star1"),o=e.getChildByName("star2"),a=e.getChildByName("star3"),c=[];i&&c.push(i),o&&c.push(o),a&&c.push(a);var r=n.instance.getLevelStars(t),l=s.passLevelStars;if(l>r){var h=l-r;this.UI.getComponent("MapUI").collectStars(t,c,h);for(var u=0;u<h;u++){var d=c[u];d&&(d.active=!0)}}},showStars:function(e,t){var i=e.getChildByName("star1"),o=e.getChildByName("star2"),s=e.getChildByName("star3"),n=[];i&&n.push(i),o&&n.push(o),s&&n.push(s);var a=0;for(t>=n.length&&(t=n.length);a<t;a++){var c=n[a];c&&(c.active=!0)}for(;a<n.length;a++){var r=n[a];r&&(r.active=!1)}},addBoss:function(e,t){var i=this;o.instance.loadLevelData(t,function(t){var s=t.StageType,n=t.WaveEnemyID;if(1===s){var a=n.split(";");if(a.length>0){var c=a[0].split(":");if(c.length>0){var r=c[0],l=parseInt(r);o.instance.loadMonsterData(l,function(t){i.spawnMonster(t,e)})}}}})},spawnMonster:function(e,t){var i="prefab/monster/"+e.AnimeRes;cc.loader.loadRes(i,function(i,o){i&&(cc.error(i),cc.log("monster name:",e.AnimeRes));var s=cc.instantiate(o);s.setAnchorPoint(.5,0),s.addComponent("Monster"),s.parent=t.parent,s.position=t.position,s.x-=s.width;var n=s.getComponent("Monster");n.idle(),n.hideHp()})},onBtnLevelClicked:function(e,t){t=parseInt(t),s.levelID=t,s.levelResultData.levelID=t;var i=cc.director.getScene()._children[0],n=this;cc.loader.loadRes("prefab/LevelGole",function(e,c){var r=cc.instantiate(c);r.parent=i;var l=r.getComponent("LevelGole");l&&o.instance.loadLevelData(t,function(e){s.levelData=e;var i=function(){l.showGole()}.bind(n);a.instance.loadLevels(t,i)})})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LoadlevelEditor:"LoadlevelEditor",LocalStorage:"LocalStorage",Utils:"Utils"}],LevelGole:[function(e,t,i){"use strict";cc._RF.push(t,"25006Jb9d5H44YenC127Ut1","LevelGole");e("JsonData");var o=e("Utils"),s=e("EnumDefine").CellType,n=e("EnumDefine").LevelEditorID,a=e("EnumDefine").StarLevelKind,c=e("BaseUI"),r=e("EnumDefine").LevelMode;cc.Class({extends:c,properties:{midbk:cc.Node,goleSp:cc.Node,goleWave:cc.Node,goleDropBox:cc.Node,goleCell:cc.Node,starGoleWord:cc.Node,levelStartBk:cc.Node,levelBk:cc.Node,levelTitle:cc.Label,level:cc.Label,cell1SkeletonData:sp.SkeletonData,cell2SkeletonData:sp.SkeletonData,cell3SkeletonData:sp.SkeletonData,cell4SkeletonData:sp.SkeletonData,cell5SkeletonData:sp.SkeletonData,UIBaseNode:cc.Node,startBtn:cc.Button},onLoad:function(){this.goleNodes=[],this.scaleShow(this.midbk,null),this.uibase=this.UIBaseNode.getComponent("UIBase")},start:function(){},showGole:function(e,t){this.levelID=t,this.explorationID=e;var i=o.LevelEditorLevelGoles,s=i.WaveNum,a=i.GoleCells,c=i.StarLevel,r=a[n.Step];if(this.waveNum=s,this.StepNum=r,s>0){var l=cc.instantiate(this.goleWave);l.active=!0,l.parent=this.levelBk,this.goleNodes.push(l),l.getChildByName("num").getComponent("cc.Label").string=s+""}for(var h in a){var u=a[h];if(u>0){var d=parseInt(h);switch(d){case n.DropBox:this.spawnDropBox(u);break;case n.Cell1:case n.Cell2:case n.Cell3:case n.Cell4:case n.Cell5:this.spawncell(d,u);break;case n.Block:this.spawnSp("wood1",u);break;case n.ClearBomb:this.spawnSp("bomb",u);break;case n.Chest:this.spawnSp("chest1",u)}}}for(var p,v=this.levelBk.width,f=0,m=this.goleNodes.length,g=0;g<this.goleNodes.length;g++){f+=this.goleNodes[g].width}p=(v-f-8*(m-1))/2;for(var C=0;C<this.goleNodes.length;C++){var S=this.goleNodes[C];S.active=!0,S.x=p+S.width/2+(S.width+8)*C,S.x-=v/2,S.y=0}this.initStartlevel(c),this.initTitle(),this.level.string=t+":"},spawncell:function(e,t){var i=cc.instantiate(this.goleCell);i.active=!0,i.parent=this.levelBk,this.goleNodes.push(i);o.getCellName(e);var n=i.getChildByName("sp"),a=null;switch(e){case s.Cell1:a=this.cell1SkeletonData;break;case s.Cell2:a=this.cell2SkeletonData;break;case s.Cell3:a=this.cell3SkeletonData;break;case s.Cell4:a=this.cell4SkeletonData;break;case s.Cell5:a=this.cell5SkeletonData}n.getComponent("sp.Skeleton").skeletonData=a,i.getChildByName("num").getComponent("cc.Label").string=t+""},spawnDropBox:function(e){var t=cc.instantiate(this.goleDropBox);t.active=!0,t.parent=this.levelBk,this.goleNodes.push(t);var i=t.getChildByName("sp");cc.loader.loadRes("spine/baby/lockbaby",sp.SkeletonData,function(e,t){e&&cc.error(e),i.getComponent("sp.Skeleton").skeletonData=t}),t.getChildByName("num").getComponent("cc.Label").string=e+""},spawnSp:function(e,t){var i=cc.instantiate(this.goleSp);i.active=!0,i.parent=this.levelBk,this.goleNodes.push(i);var o=i.getChildByName("sp").getComponent("cc.Sprite");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(t,i){var s=i.getSpriteFrame(e);o.spriteFrame=s}),i.getChildByName("num").getComponent("cc.Label").string=t+""},onBtnCloseClicked:function(e){var t=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.midbk,t)},onBtnStartClicked:function(e){if(this.uibase.getLifeNum()<=0)this.uibase.onBtnLifeClicked();else{this.uibase.updateLife(-1),this.startBtn.interactable=!1;o.levelID;var t=o.levelData;this.enterStory(t)}},enterStory:function(e){cc.audioEngine.pause(o.mainSceneAudioID);var t=o.mainSceneAudioID;cc.audioEngine.stop(t),o.mainSceneAudioID=-1,o.passLevelStars=-1,o.FreeSpinVal=0,o.KillMonsterCnt=0,o.KillClearBombCnt=0,o.levelMode=r.Normal,cc.director.loadScene("scene/Farm")},initStartlevel:function(e){if(e){var t=e[1],i=e[2],o=e[3],s=this.levelStartBk.width,n=[cc.v2(140-s/2,46),cc.v2(140-s/2,0),cc.v2(140-s/2,-51)],a=this.createStartNode(t),c=this.createStartNode(i),r=this.createStartNode(o);a.parent=this.levelStartBk,a.position=n[0],c.parent=this.levelStartBk,c.position=n[1],r.parent=this.levelStartBk,r.position=n[2]}},createStartNode:function(e){if(!(e.length<0)){var t=e[0],i=t.num,o=t.step,s=t.kind,n=null,c=null;switch(s){case a.Monster:case a.Bomb:case a.Block:case a.Chest:case a.Cell1:case a.Cell2:case a.Cell3:case a.Cell4:case a.Cell5:n=this.starGoleWord}if(n){(c=cc.instantiate(n)).active=!0;var r=c.getComponent(cc.Label);switch(s){case a.Monster:r.string=0===i&&0===o?"\u51fb\u8d25"+this.waveNum+"\u6ce2\u602a\u7269":this.StepNum+"\u6b65\u51fb\u8d25"+this.waveNum+"\u6ce2\u602a\u7269";break;case a.Bomb:r.string=0===i&&0===o?"\u5f15\u7206\u5168\u90e8\u70b8\u5f39":this.StepNum+"\u6b65\u5f15\u7206"+i+"\u4e2a\u70b8\u5f39";break;case a.Block:r.string=0===i&&0===o?"\u6d88\u9664\u6240\u6709\u963b\u6321\u7269\u4f53":this.StepNum+"\u6b65\u6d88\u9664"+i+"\u4e2a\u963b\u6321\u7269";break;case a.Chest:r.string=0===i&&0===o?"\u6253\u5f00\u6240\u6709\u5b9d\u7bb1":this.StepNum+"\u6b65\u6253\u5f00"+i+"\u4e2a\u5b9d\u7bb1";break;case a.Cell1:r.string=this.StepNum+"\u6b65\u6d88\u9664"+i+"\u4e2a\u897f\u7ea2\u67ff";break;case a.Cell2:r.string=this.StepNum+"\u6b65\u6d88\u9664"+i+"\u4e2a\u8304\u5b50";break;case a.Cell3:r.string=this.StepNum+"\u6b65\u6d88\u9664"+i+"\u4e2a\u6a58\u5b50";break;case a.Cell4:r.string=this.StepNum+"\u6b65\u6d88\u9664"+i+"\u4e2a\u82f9\u679c";break;case a.Cell5:r.string=this.StepNum+"\u6b65\u6d88\u9664"+i+"\u4e2a\u841d\u535c"}}return c}},initTitle:function(){var e=this;cc.loader.loadRes("json/ExplorationInfo",function(t,i){for(var o=i.json,s=0;s<o.length;s++){var n=o[s];n.ExplorationID===e.explorationID&&(e.levelTitle.string=n.explorationTitle)}})}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",Utils:"Utils"}],LevelNode:[function(e,t,i){"use strict";cc._RF.push(t,"6e4178nhetFu5L3ZdbVf1dd","LevelNode");var o=e("JsonData"),s=e("Utils"),n=e("Words"),a=e("LoadlevelEditor");cc.Class({extends:cc.Component,properties:{levelLabel:cc.Label,lockNode:cc.Node,spNode:cc.Node,stars:{default:[],type:cc.Node}},onLoad:function(){this.levelID=-1,this.stageID=-1,this.explorationID=-1,this.lock=!1,this.starcnt=0;for(var e=0;e<this.stars.length;e++){this.stars[e].active=!1}},start:function(){},init:function(e,t,i,o,n){this.levelID=e,this.stageID=t,this.explorationID=i,this.lock=o,this.starcnt=n,this.levelLabel.string=this.levelID+"";for(var a=0;a<n;a++){this.stars[a].active=!0}o?(this.levelLabel.node.active=!1,this.spNode.height=50,this.spNode.getComponent(cc.Button).interactable=s.UseTest):(this.levelLabel.node.active=!0,this.spNode.heigth=100,this.spNode.getComponent(cc.Button).interactable=!0)},onBtnLevelClicked:function(e){var t=parseInt(this.levelID);if(s.levelID=t,5===t){var i=function(){this.loadLevelGole(t)}.bind(this);this.loadBossLevelGuide(i)}else this.loadLevelGole(t)},loadLevelGole:function(e){var t={};t.levelID=e,t.stageID=this.stageID,t.explorationID=this.explorationID,s.levelResultData=t;var i=cc.director.getScene()._children[0],n=this;o.instance.loadLevelData(e,function(t){s.levelData=t;var o=function(){var t=i.getChildByName("LevelGole");if(t){var o=cc.instantiate(t);o.active=!0,o.parent=i,o.zIndex=10,o.getComponent("LevelGole").showGole(n.explorationID,e)}}.bind(n);a.instance.loadLevels(e,o)})},loadBossLevelGuide:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/guide/JustWordGuide",function(i,o){var s=cc.instantiate(o);s.parent=t,s.zIndex=10;var a=s.getComponent("JustWordGuide");if(a){var c=n.Drawline_A8;a.show(c,e)}})},showWinStar:function(e){for(var t=this,i=this.spNode,o=[cc.scaleTo(.05,1.3).easing(cc.easeBounceInOut()),cc.scaleTo(.05,1).easing(cc.easeBounceInOut()),cc.scaleTo(.05,1.3).easing(cc.easeBounceInOut()),cc.scaleTo(.05,1).easing(cc.easeBounceInOut()),cc.scaleTo(.05,1.3).easing(cc.easeBounceInOut()),cc.scaleTo(.05,1).easing(cc.easeBounceInOut())],s=[],n=function(e){var i=t.stars[e],n=cc.callFunc(function(){i.active=!0;var e=i.scale;i.scale=0;var o=cc.scaleTo(.1,e).easing(cc.easeBounceInOut());i.runAction(o),t.showflashEffect(i.parent,i.position,i.group)},t);s.push(o[2*e+0]),s.push(o[2*e+1]),s.push(n)},a=0;a<e;a++)n(a);i.runAction(cc.sequence(s))},showSp:function(e){var t=this,i=this.spNode;i.height=100,i.scaleY=.5;var o=cc.scaleTo(.1,1),s=cc.scaleTo(.05,1.4).easing(cc.easeBounceInOut()),n=cc.scaleTo(.05,1).easing(cc.easeBounceInOut()),a=cc.scaleTo(.05,1.3).easing(cc.easeBounceInOut()),c=cc.scaleTo(.05,1).easing(cc.easeBounceInOut()),r=cc.callFunc(function(){t.levelLabel.node.active=!0,e&&e()},this),l=cc.sequence(o,s,n,a,c,r);i.runAction(l)},showflashEffect:function(e,t,i){cc.loader.loadRes("prefab/particle/starDust",function(o,s){var n=cc.instantiate(s);n.scale=1,n.parent=e,n.position=t,n.group=i,n.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0})},unlock:function(){if(this.lock){var e=this.spNode.getComponent("cc.Button");e&&(e.interactable=!0),this.levelLabel.node.active=!0,this.lock=!1,this.showSp();var t=this.spNode;this.showflashEffect(t.parent,t.position,t.group)}}}),cc._RF.pop()},{JsonData:"JsonData",LoadlevelEditor:"LoadlevelEditor",Utils:"Utils",Words:"Words"}],LifeTime:[function(e,t,i){"use strict";cc._RF.push(t,"c1c20Gi+8NHW6VbYn64eAf4","LifeTime");e("Utils");var o=e("LocalStorage");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.minute=0,this.second=0,this.isRun=!1},onDisable:function(){},start:function(){},setBase:function(e){this.Base=e},showTime:function(){if(!this.isRun){this.isRun=!0;var e=o.instance.getLifeDataTime();if(e){var t=new Date,i=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),s=60*parseInt(e.hour)*60+60*parseInt(e.minute)+parseInt(e.second),n=Math.abs(i-s);if(n>=300){var a=Math.abs(n-300),c=Math.floor(a/60);this.timeDone(c)}else this.minute=Math.floor(n/60),this.minute=Math.abs(5-this.minute-1),this.second=60-Math.floor(n%60),this.setTimelabel(this.minute,this.second),this.countDownTime()}else{var r=new Date,l=r.getHours(),h=r.getMinutes(),u=r.getSeconds(),d={};d.hour=l,d.minute=h,d.second=u,o.instance.setLifeDataTime(d),this.minute=4,this.second=60,this.setTimelabel(this.minute,this.second),this.countDownTime()}}},setTimelabel:function(e,t){this.Base.setTimelabel(e,t)},countDownTime:function(){this.passCall=function(){this.second-=1,this.second<=0&&(this.second=60,this.minute-=1,this.minute<0&&this.timeDone(1)),this.setTimelabel(this.minute,this.second)},this.schedule(this.passCall,1)},timeDone:function(e){this.passCall&&(this.unschedule(this.passCall),this.passCall=null);var t=new Date,i=t.getHours(),s=t.getMinutes(),n=t.getSeconds(),a={};a.hour=i,a.minute=s,a.second=n,o.instance.setLifeDataTime(a),this.isRun=!1,this.Base.updateLife(e)}}),cc._RF.pop()},{LocalStorage:"LocalStorage",Utils:"Utils"}],LifeUI:[function(e,t,i){"use strict";cc._RF.push(t,"7d97d8P7INCXbAOQ2xQlKAF","LifeUI");e("Utils").ProduceType,e("LocalStorage");var o=e("BaseUI");cc.Class({extends:o,properties:{CloseTouchNode:cc.Node,curlifelabel:cc.Label,maxlifelabel:cc.Label,secondLabel:cc.Label,minuteLabel:cc.Label,timeNode:cc.Node,videoBtn:cc.Button,progressBar:cc.ProgressBar},onLoad:function(){},setUIBase:function(e){this.uibase=e},upDateProgressBar:function(){var e=100*this.lifenum/20/100;this.progressBar.progress=e},show:function(e){this.scaleShow(this.node),this.updateLife(e),this.uibase.IsLifeNumFull()&&this.closeTime()},updateLife:function(e){this.lifenum=e,this.curlifelabel.string=e+"",this.maxlifelabel.string="20",this.upDateProgressBar()},setTimelabel:function(e,t){this.minuteLabel.string=e<10?"0"+e:e+"",this.secondLabel.string=t<10?"0"+t:t+""},showTime:function(){this.timeNode.active=!0},closeTime:function(){this.timeNode.active=!1,this.videoBtn.interactable=!1,this.videoBtn.color=cc.Color.GRAY},start:function(){},onBtnCloseClicked:function(e){var t=function(){this.closeFunc&&this.closeFunc(),this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t)},onBtnClickLookVideo:function(e){this.uibase.IsLifeNumFull()||this.uibase.updateLife(5)}}),cc._RF.pop()},{BaseUI:"BaseUI",LocalStorage:"LocalStorage",Utils:"Utils"}],LoadEndlessLevel:[function(e,t,i){"use strict";cc._RF.push(t,"ff67bPD855ArYpV4YBNztvZ","LoadEndlessLevel");e("BaseUI");var o=e("Utils"),s=(e("LocalStorage"),e("EnumDefine").LevelResult,e("EnumDefine").DayKind,cc.Class({extends:cc.Component,properties:{},onLoad:function(){s.instance=this},start:function(){},statics:{instance:null},loadLevels:function(e,t){var i,s=cc.director.getScene()._children[0];if(""!==(i=this.getlevelPath(e))){cc.loader.loadRes(i,function(e,i){e&&cc.error(e);var n=cc.instantiate(i);if(n.parent=s,n.addComponent("levelEditor"),n.active=!1,n){var a=n.getComponent("levelEditor");if(a){var c=a.readBoardCells(),r=a.readGoles();o.LevelEditorBoardData=c,o.LevelEditorLevelGoles=r,t()}}else t()})}else t()},getlevelPath:function(e){return"EndlessLevels/"+["levelX1","levelX2","levelX3"][e-1]}}));cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],LoadingBarCtrl:[function(e,t,i){"use strict";cc._RF.push(t,"102a9wU40RJd4SnQqQQzQT9","LoadingBarCtrl");var o=e("i18n");cc.Class({extends:cc.Component,properties:{progressBar:{default:null,type:cc.ProgressBar},progressTips:{default:null,type:cc.Label}},onLoad:function(){this._urls=[],this.resource=null,this.progressBar.progress=0,this._clearAll(),this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.3"),this.node.on(cc.Node.EventType.TOUCH_START,function(){this.resource||cc.loader.load(this._urls,this._progressCallback.bind(this),this._completeCallback.bind(this))},this),cc.profiler.hideStats()},_clearAll:function(){for(var e=0;e<this._urls.length;++e){var t=this._urls[e];cc.loader.release(t)}},_progressCallback:function(e,t,i){this.progress=e/t,this.resource=i,this.completedCount=e,this.totalCount=t},_completeCallback:function(e,t){},update:function(e){if(this.resource){var t=this.progressBar.progress;if(t>=1)return this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.1"),this.progressBar.node.active=!1,this.enabled=!1,void this.loadStages();t<this.progress&&(t+=e),this.progressBar.progress=t,this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.2")+this.resource.id+" ("+this.completedCount+"/"+this.totalCount+")"}},loadStages:function(){cc.loader.loadRes(e,cc.SpriteAtlas,function(e,t){});var e="texture/";cc.loader.loadResDir(folderName,cc.SpriteFrame,function(e,t){cc.log("assets",t)})}}),cc._RF.pop()},{i18n:"i18n"}],LoadingBar:[function(e,t,i){"use strict";cc._RF.push(t,"21ddbSSQDlA76zWhYasyATC","LoadingBar");var o=e("i18n"),s=e("Utils"),n=e("LocalStorage");cc.Class({extends:cc.Component,properties:{progressBar:{default:null,type:cc.ProgressBar},progressTips:{default:null,type:cc.Label},IIIustrationNode:cc.Node},onLoad:function(){(this.IIIustrationNode.active=!1,this._loadindex=0,this._urls=[cc.url.raw("resources/texture/UI"),cc.url.raw("resources/texture/Effect"),cc.url.raw("resources/texture/farm"),cc.url.raw("resources/texture/forest"),cc.url.raw("resources/texture/snow"),cc.url.raw("resources/texture/volcano"),cc.url.raw("resources/bkSounds/MainScene"),cc.url.raw("resources/bkSounds/crazy"),cc.url.raw("resources/bkSounds/boss fight"),cc.url.raw("resources/bkSounds/jazz fight")],this.resource=null,this.progressBar.progress=0,this._clearAll(),this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.3"),this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),this.resource)||(cc.loader.load(this._urls,this._progressCallback.bind(this),this._completeCallback.bind(this)),cc.view.enableAntiAlias(!1),cc.profiler.hideStats(),cc.debug.setDisplayStats(!1))},_clearAll:function(){for(var e=0;e<this._urls.length;++e){var t=this._urls[e];cc.loader.release(t)}},_progressCallback:function(e,t,i){switch(this.progress=e/t,this.resource=i,this.completedCount=e,this.totalCount=t,e){case 1:s.UISpriteAtals=i;break;case 2:break;case 3:s.FarmStageSpriteAtlas=i;break;case 4:s.ForestStageSpriteAtlas=i;break;case 5:s.SnowStageSpriteAtlas=i;break;case 6:s.VolcanoStageSpriteAtlas=i}},_completeCallback:function(e,t){},update:function(e){if(this.resource){var t=this.progressBar.progress;if(t>=1)return this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.1"),this.progressBar.node.active=!1,this.enabled=!1,this.node.runAction(cc.fadeOut(1)),void this.loadXX();t<this.progress&&(t+=e),this.progressBar.progress=t,this.progressTips.textKey=o.t("cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.2")+this.resource.id+" ("+this.completedCount+"/"+this.totalCount+")"}},loadXX:function(){var e=this;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(t,i){s.UISpriteAtlas=i,e.loadIIIustration()})},loadIIIustration:function(){if(n.instance.getIIIustrationDone())cc.director.loadScene("Main");else{var e=cc.director.getScene()._children[0],t=cc.instantiate(this.IIIustrationNode);t.active=!0,t.parent=e,n.instance.setIIIustrationDone(!0)}}}),cc._RF.pop()},{LocalStorage:"LocalStorage",Utils:"Utils",i18n:"i18n"}],LoadlevelEditor:[function(e,t,i){"use strict";cc._RF.push(t,"da6b88QxLJMCq04eE1djSxH","LoadlevelEditor");e("Utils").NUMROWS,e("Utils").NUMCOLUMNS,e("EnumDefine").CellType,e("JsonData"),e("PoolMng");var o=e("Utils"),s=cc.Class({extends:cc.Component,properties:{},onLoad:function(){s.instance=this},start:function(){},statics:{instance:null},loadLevels:function(e,t){var i,s=cc.director.getScene()._children[0];if(""!==(i=this.getlevelPath(e))){var n=function(e){var i=e.getComponent("levelEditor");if(i){var s=i.readBoardCells(),n=i.readGoles();o.LevelEditorBoardData=s,o.LevelEditorLevelGoles=n,t()}}.bind(this);cc.loader.loadRes(i,function(e,i){e&&cc.error(e);var o=cc.instantiate(i);o.parent=s,o.addComponent("levelEditor"),o.active=!1,o?n(o):t()})}else t()},getlevelPath:function(e){return"levels/"+["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24","level25","level26","level27","level28","level29","level30","level31","level32","level33","level34","level35","level36","level37","level38","level39","level40","level41","level42","level43","level44","level45","level46","level47","level48","level49","level50"][e-1]}});cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",PoolMng:"PoolMng",Utils:"Utils"}],LocalStorage:[function(e,t,i){"use strict";cc._RF.push(t,"d5db7dxwa1DcoULa01a/lbE","LocalStorage");var o=e("JsonData"),s=e("EnumDefine").ActorType,n=e("EnumDefine").CellType,a=e("Utils");a.UseTest=!1;var c=cc.Class({extends:cc.Component,properties:{},statics:{instance:null},ctor:function(){},onLoad:function(){c.instance=this},start:function(){},setRoleData:function(e){var t="roledata700"+e.roletype;cc.sys.localStorage.setItem(t,JSON.stringify(e))},getRoleData:function(e){var t="roledata700"+e,i=cc.sys.localStorage.getItem(t);if(i&&void 0!==i){var n=JSON.parse(i);return n.roletype=parseInt(n.roletype),n.level=parseInt(n.level),n.attack=parseInt(n.attack),n}if(e===s.Actor1){var a={};return a.roletype=e,a.level=1,a.attack=0,o.instance.loadRoleUpgradeData(a.roletype+1,a.level,function(e){a.attack=e.attack}),a}return null},setPetData:function(e){var t="petdata1700"+e.ID;cc.sys.localStorage.setItem(t,JSON.stringify(e))},getPetData:function(e){var t="petdata1700"+e,i=cc.sys.localStorage.getItem(t);if(i){var o=JSON.parse(i);return o.ID=parseInt(o.ID),o.level=parseInt(o.level),o.attack=parseInt(o.attack),o.cardNum=parseInt(o.cardNum),o}},setBattlePetData:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("battlePet700",t)},getBattlePetData:function(){var e=cc.sys.localStorage.getItem("battlePet700");return e?JSON.parse(e):null},setStoryLevelData:function(e){var t="levelKey700:"+e.levelID,i=JSON.stringify(e);cc.sys.localStorage.setItem(t,i)},getStoryLevelData:function(e){if(1===e)return{levelID:1,lock:!1};var t="levelKey700:"+e,i=cc.sys.localStorage.getItem(t);return i?JSON.parse(i):null},setExplorationData:function(e){var t="explorationKey700:"+e.ID,i=JSON.stringify(e);cc.sys.localStorage.setItem(t,i)},getExplorationData:function(e){if(1===e)return{ID:1,lock:!1};var t="explorationKey700:"+e,i=cc.sys.localStorage.getItem(t);return i?JSON.parse(i):null},setUIBase:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("UIBaseKey10700",t)},getUIBase:function(){var e=cc.sys.localStorage.getItem("UIBaseKey10700");if(!e){var t={coin:3e3,diamond:10,life:20};return a.UseTest&&(t.diamond=1e5),t}return JSON.parse(e)},getLevelStepAward:function(e){var t="LevelStepsAward700"+e,i=cc.sys.localStorage.getItem(t);return i&&void 0!==i||(i=!1),i},setLevelStepAward:function(e,t){var i="LevelStepsAward700"+e;cc.sys.localStorage.setItem(i,t)},getBattleGuideRolePetCell:function(){var e=cc.sys.localStorage.getItem("BattleGuideRolePetCell700");return e&&void 0!==e||(e=!1),e},setBattleGuideRolePetCell:function(e){cc.sys.localStorage.setItem("BattleGuideRolePetCell700",e)},getExplorationStars:function(e){var t="ExplorationStars700"+e,i=cc.sys.localStorage.getItem(t);return i&&void 0!==i||(i=0),i=parseInt(i)},setExplorationStars:function(e,t){var i="ExplorationStars700"+e;cc.sys.localStorage.setItem(i,t)},getLevelStars:function(e){var t="LevelStars700"+e,i=cc.sys.localStorage.getItem(t);return i&&void 0!==i||(i=0),i=parseInt(i)},setLevelStars:function(e,t){var i="LevelStars700"+e;cc.sys.localStorage.setItem(i,t)},getStarReWard:function(e){var t="StarReWard700"+e,i=cc.sys.localStorage.getItem(t);return i&&void 0!==i||(i=0),i=parseInt(i)},setStarReWard:function(e,t){var i="StarReWard700"+e;cc.sys.localStorage.setItem(i,t)},getDayReWard:function(){var e=cc.sys.localStorage.getItem("DayReWard700");return e&&void 0!==e||(e=1),e=parseInt(e)},setDayReWard:function(e){cc.sys.localStorage.setItem("DayReWard700",e)},getDayReWardDateTime:function(){var e=cc.sys.localStorage.getItem("DayReWardDateTime700");if(!e||void 0===e){var t={month:-1,day:-1};return t}return JSON.parse(e)},setDayReWardDateTime:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("DayReWardDateTime700",t)},getSetData:function(){var e=cc.sys.localStorage.getItem("SetKey700");if(!e||void 0===e){var t={musicOnOff:!0,soundOnOff:!0};return t}return JSON.parse(e)},setSetData:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("SetKey700",t)},getFreeSpinVal:function(){var e=cc.sys.localStorage.getItem("FreeSpinKey700");return e&&void 0!==e||(e=0),e=parseInt(e)},setFreeSpinVal:function(e){cc.sys.localStorage.setItem("FreeSpinKey700",e)},getLevelPassed:function(e){var t="LevelPassed700"+e;return cc.sys.localStorage.getItem(t)},setLevelPassed:function(e,t){var i="LevelPassed700"+e;cc.sys.localStorage.setItem(i,t)},getEndlessChestUnlock:function(e){var t="EndlessChestUnlock1700"+e,i=cc.sys.localStorage.getItem(t);if(!i||void 0===i){return{place:0,open:0,spin:null}}return JSON.parse(i)},setEndlessChestUnlock:function(e,t){var i="EndlessChestUnlock1700"+e,o=JSON.stringify(t);cc.sys.localStorage.setItem(i,o)},getPetSkill:function(e){var t="PetSkill700"+e,i=cc.sys.localStorage.getItem(t),o=[];i&&(","===i[i.length-1]&&(i=i.substring(0,i.length-1)),o=i.split(","));for(var s=0;s<o.length;s++)o[s]=parseInt(o[s]);return o},setPetSkill:function(e,t){var i="PetSkill700"+e;cc.sys.localStorage.setItem(i,t)},getRoleSkill:function(e){var t="RoleSkill1700"+e,i=cc.sys.localStorage.getItem(t),o=[];return i?(","===i[i.length-1]&&(i=i.substring(0,i.length-1)),o=i.split(",")):i&&""!==i||0===e&&(o=[n.One_Horinal]),o},setRoleSkill:function(e,t){var i="RoleSkill1700"+e;cc.sys.localStorage.setItem(i,t)},getRoleCurrentUsedSkill:function(e){var t="CurrentRoleSkillKey700"+e,i=cc.sys.localStorage.getItem(t);i||(i=this.getRoleSkill(e)[0]);return i=parseInt(i)},setRoleCurrentUsedSkill:function(e,t){var i="CurrentRoleSkillKey700"+e;cc.sys.localStorage.setItem(i,t)},getLastestLevelID:function(){var e=cc.sys.localStorage.getItem("lastestlevelkey700");return e&&void 0!==e&&""!==e||(e=-1),e=parseInt(e)},setLastestLevelID:function(e){cc.sys.localStorage.setItem("lastestlevelkey700",e)},getUpGradeRoleGuideDone:function(){return cc.sys.localStorage.getItem("UpGradeRoleDone700")},setUpGradeRoleGuideDone:function(e){cc.sys.localStorage.setItem("UpGradeRoleDone700",e)},getUpGradePetGuideDone:function(){return cc.sys.localStorage.getItem("UpGradePetDone700")},setUpGradePetGuideDone:function(e){cc.sys.localStorage.setItem("UpGradePetDone700",e)},getActorUIGuideDone:function(){return cc.sys.localStorage.getItem("ActorUIGuide700")},setActorUIGuideDone:function(e){cc.sys.localStorage.setItem("ActorUIGuide700",e)},getPetUIGuideDone:function(){return cc.sys.localStorage.getItem("PetUIGuideKey700")},setPetUIGuideDone:function(e){cc.sys.localStorage.setItem("PetUIGuideKey700",e)},getSpinChestGuideDone:function(){return cc.sys.localStorage.getItem("SpinChestGuideKey1700")},setSpinChestGuideDone:function(e){cc.sys.localStorage.setItem("SpinChestGuideKey1700",e)},getSwitchPetGuideDone:function(){return cc.sys.localStorage.getItem("SwitchPetGuideKey6700")},setSwitchPetGuideDone:function(e){cc.sys.localStorage.setItem("SwitchPetGuideKey6700",e)},getOpenRoleGuideDone:function(){return cc.sys.localStorage.getItem("OpenRoleGuideKey700")},setOpenRoleGuideDone:function(e){cc.sys.localStorage.setItem("OpenRoleGuideKey700",e)},getUpGradeRoleGuide:function(){return cc.sys.localStorage.getItem("UpGradeRoleGuideKey700")},setUpGradeRoleGuide:function(e){cc.sys.localStorage.setItem("UpGradeRoleGuideKey700",e)},getUpGradeRoleDoneGuide:function(){return cc.sys.localStorage.getItem("UpGradeRoleGuideDoneKey700")},setUpGradeRoleDoneGuide:function(e){cc.sys.localStorage.setItem("UpGradeRoleGuideDoneKey700",e)},getOpenChestGuideDone:function(){return cc.sys.localStorage.getItem("OpenChestGuideKey700")},setOpenChestGuideDone:function(e){cc.sys.localStorage.setItem("OpenChestGuideKey700",e)},getStarDone:function(e){var t="ReWardStar11700"+e,i=cc.sys.localStorage.getItem(t);return i=i&&void 0!==i?JSON.parse(i):{one:"false",two:"false"}},setStarDone:function(e,t){var i="ReWardStar11700"+e;t=JSON.stringify(t),cc.sys.localStorage.setItem(i,t)},getAchieveDone:function(e){var t="AchieveDone1700"+e;return cc.sys.localStorage.getItem(t)},setAchieveDone:function(e,t){var i="AchieveDone1700"+e;cc.sys.localStorage.setItem(i,t)},getAchieveIsHave:function(e){var t="AchieveIsHave1700"+e;return cc.sys.localStorage.getItem(t)},setAchieveIsHave:function(e,t){var i="AchieveIsHave1700"+e;cc.sys.localStorage.setItem(i,t)},getKillMonsterCnt:function(){var e=cc.sys.localStorage.getItem("MonsterCntKey1700");return e||(e=0),e=parseInt(e)},setKillMonsterCnt:function(e){cc.sys.localStorage.setItem("MonsterCntKey1700",e)},getKillBombCnt:function(){var e=cc.sys.localStorage.getItem("BombCntKey1700");return e||(e=0),e=parseInt(e)},setKillBombCnt:function(e){cc.sys.localStorage.setItem("BombCntKey1700",e)},getSpinDataTime:function(){var e=cc.sys.localStorage.getItem("SpinDataTime4700");return e?JSON.parse(e):null},setSpinDataTime:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("SpinDataTime4700",t)},getLifeDataTime:function(){var e=cc.sys.localStorage.getItem("LifeDataTime700");return e?JSON.parse(e):null},setLifeDataTime:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("LifeDataTime700",t)},getSpinCnt:function(){var e=cc.sys.localStorage.getItem("SpinCntKey700");return e||(e=0),parseInt(e)},setSpinCnt:function(e){cc.sys.localStorage.setItem("SpinCntKey700",e)},getIIIustrationDone:function(){return cc.sys.localStorage.getItem("IIIustrationKey700")},setIIIustrationDone:function(e){cc.sys.localStorage.setItem("IIIustrationKey700",e)},getSpinDoubleNum:function(){var e=cc.sys.localStorage.getItem("SpinDoubleKey700");return e&&void 0!==e||(e=0),e=parseInt(e)},setSpinDoubleNum:function(e){cc.sys.localStorage.setItem("SpinDoubleKey700",e)},getEndlessTaskData:function(){var e=cc.sys.localStorage.getItem("TaskRoadKey700");return e?JSON.parse(e):null},setEndlessTaskData:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("TaskRoadKey700",t)},getTouchPetGuide:function(){return cc.sys.localStorage.getItem("TouchPet700")},setTouchPetGuide:function(e){cc.sys.localStorage.setItem("TouchPet700",e)},getUpGradePetGuide:function(){return cc.sys.localStorage.getItem("UpGradePetDone700")},setUpGradePetGuide:function(e){cc.sys.localStorage.setItem("UpGradePetDone700",e)},getShowRoleUIGuide:function(){return cc.sys.localStorage.getItem("OpenRoleUI700")},setShowRoleUIGuide:function(e){cc.sys.localStorage.setItem("OpenRoleUI700",e)},getOpenChestGuide:function(){return cc.sys.localStorage.getItem("OpenChestCardsGuide700")},setOpenChestGuide:function(e){cc.sys.localStorage.setItem("OpenChestCardsGuide700",e)},getEndlessStarPlayGuide:function(){return cc.sys.localStorage.getItem("EndlessStartPlayGuide700")},setEndlessStarPlayGuide:function(e){cc.sys.localStorage.setItem("EndlessStartPlayGuide700",e)}});cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",Utils:"Utils"}],LookVideoReWard:[function(e,t,i){"use strict";cc._RF.push(t,"12140hbZGVLSKPOUUkxL+SR","LookVideoReWard");e("EnumDefine").EnterKind;var o=e("BaseUI"),s=(e("LocalStorage"),e("OpenSdk"));cc.Class({extends:o,properties:{midbk:cc.Node,rewardDiamond:cc.Node,rewardCoin:cc.Node,videoBtn:cc.Node,rewardTimes:cc.Label},onLoad:function(){this.scaleShow(this.midbk),this.lookVideo=!1,this.servaltimes=1,this.pos2list=[cc.v2(42,406),cc.v2(86,406)],this.pos1list=[cc.v2(138,406)]},start:function(){},onBtnClose:function(){var e=function(){this.callback&&this.callback(this.coinnum,this.diamondnum,this.servaltimes,this.lookVideo),this.node.removeFromParent()}.bind(this);this.scaleClose(this.midbk,e)},onBtnLookVideo:function(){var e=function(){this.lookVideo=!0,this.onBtnClose()}.bind(this);s.instance.showVideo(e,null)},show:function(e,t,i,o){this.callback=o,this.coinnum=e,this.diamondnum=t,this.servaltimes=i,this.rewardCoin.active=!1,this.rewardDiamond.active=!1,this.rewardTimes.string=this.servaltimes+"";var s=[];e>0&&(this.rewardCoin.active=!0,this.rewardCoin.getChildByName("num").getComponent(cc.Label).string=e+"",s.push(this.rewardCoin));t>0&&(this.rewardDiamond.active=!0,this.rewardDiamond.getChildByName("num").getComponent(cc.Label).string=t+"",s.push(this.rewardDiamond));1===s.length&&(s[0].position=this.pos1list[0])}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",OpenSdk:"OpenSdk"}],MainUI:[function(e,t,i){"use strict";cc._RF.push(t,"4c758/jNTpLr69GwewnE8wt","MainUI");var o=e("Utils"),s=e("EnumDefine").LevelResult;cc.Class({extends:cc.Component,properties:{buttonSet:cc.Button,buttonStart:cc.Button,buttonHelp:cc.Button,mainfront:cc.Node,logo:cc.Node,cloud1:cc.Node,cloud2:cc.Node,cloud3:cc.Node,UIBase:cc.Node},onLoad:function(){this.cloud1.active=!1,this.cloud2.active=!1,this.cloud3.active=!1,this.uibase=this.UIBase.getComponent("UIBase"),this.AudioEngineControl=this.node.getComponent("AudioEngineControl")},moveMainFront:function(){var e=this,t=cc.moveTo(.5,cc.v2(0,-252)).easing(cc.easeOut(3)),i=cc.callFunc(function(){e.moveClouds(),e.moveLogo()},this);this.mainfront.runAction(cc.sequence(t,i))},moveLogo:function(){var e=cc.moveTo(.2,cc.v2(0,350)).easing(cc.easeBounceInOut());this.logo.runAction(cc.sequence(e,null))},moveClouds:function(){this.cloud1.active=!0,this.cloud2.active=!0,this.cloud3.active=!0;var e=this.cloud1.scale;this.cloud1.scale=0;var t=cc.scaleTo(.5,e).easing(cc.easeOut(3));this.cloud1.runAction(t),e=this.cloud2.scale,this.cloud2.scale=0,t=cc.scaleTo(.5,e).easing(cc.easeOut(3)),this.cloud2.runAction(t),e=this.cloud3.scale,this.cloud3.scale=0,t=cc.scaleTo(.5,e).easing(cc.easeOut(3)),this.cloud3.runAction(t)},start:function(){},onBtnSetClicked:function(){var e=function(){this.buttonSet.interactable=!0}.bind(this);this.buttonSet.interactable=!1;var t=cc.director.getScene()._children[0],i=this;if(null===t.getChildByName("set")){var o=this.buttonSet.node,s=o.parent.convertToWorldSpaceAR(o.position);(s=t.convertToNodeSpaceAR(s)).y+=50,cc.loader.loadRes("prefab/set",function(o,n){var a=cc.instantiate(n);a.parent=t,a.position=s,a.active=!0,a.name="set",a.getComponent("Set").show(e,i.AudioEngineControl)})}else t.getChildByName("set").getComponent("Set").hide(e)},onBtnStartClicked:function(){o.levelID=-1;var e={};e.levelResult=s.UnKnown,e.levelID=-1,o.levelResultData=e,cc.director.loadScene("Map")},onBtnHelpClicked:function(){},onSignInBtnClicked:function(){var e=cc.director.getScene()._children[0],t=this;cc.loader.loadRes("prefab/SignIn",function(i,o){var s=cc.instantiate(o);s&&(s.parent=e,s.getComponent("DayReWard").uibase=t.uibase)})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],MapFlag:[function(e,t,i){"use strict";cc._RF.push(t,"94d88iUsfpP4ZGVWkpBDT8I","MapFlag"),cc.Class({extends:cc.Component,properties:{tips:cc.Node,explorations:cc.Node},onLoad:function(){this.index=0},start:function(){},init:function(e){this.explorations.children[e];this.index=e;var t=this.tips.children[3*e+0],i=cc.v2(t.x,t.y);this.node.position=i},nextlevel:function(e){var t=this.index,i=this.tips.children,o=i[3*t+0],s=i[3*t+1],n=i[3*t+2],a=[cc.v2(o.x,o.y),cc.v2(s.x,s.y),cc.v2(n.x,n.y)],c=cc.cardinalSplineTo(3,a,0),r=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(c,r))}}),cc._RF.pop()},{}],MapStage:[function(e,t,i){"use strict";cc._RF.push(t,"d25b4a628ZKe6PNHe3BSwCG","MapStage");var o=e("Utils"),s=e("LocalStorage"),n=e("EnumDefine").LevelResult,a=e("EnumDefine").LevelMode,c=(e("EnumDefine").EnterKind,e("EnumDefine").DayKind),r=e("Words");cc.Class({extends:cc.Component,properties:{scrollView:{default:null,type:cc.ScrollView},contentNode:cc.Node,allMapNode:{default:[],type:cc.Node},XXExplorationNodes:cc.Node,FlagNode:cc.Node,CloseTouch:cc.Node,UI:cc.Node,ExplorationDayNode:cc.Node,grayBtn:{default:null,type:cc.SpriteFrame},redBtn:{default:null,type:cc.SpriteFrame},greenBtn:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.maxlevel=48,this.levelsUnit=5,this.oneMapSize=cc.size(640,1609),this.content=this.scrollView.content,this.lastUnlockID=-1,this.MapFlag=this.FlagNode.getComponent("MapFlag"),this.explorationNodes=this.XXExplorationNodes.children,this.StageUI=this.UI.getComponent("StageUI"),this.ExplorationDayNode.active=!1},start:function(){(this.initExplorations(),s.instance.getLastestLevelID()>=1)?this.StageUI.showGuide()||this.nextExploration():this.nextExploration()},initExplorations:function(){var e=-1,t=0;for(t=1;t<=this.maxlevel;t++){var i=s.instance.getExplorationData(t);if(i&&i.lock||!i){e=t-1,this.MapFlag.init(e-1);break}}for(-1===e&&(e=this.maxlevel,this.MapFlag.init(e-1)),t=1;t<=this.maxlevel;t++){var o=this.getExplorationNode(t);if(o){var n=!0,a=s.instance.getExplorationData(t);a&&(n=a.lock),n||(t<e?this.ChangeBtn(o,this.greenBtn):this.ChangeBtn(o,this.redBtn));var c=o.getComponent("StageButton"),l=r.ExplorationTitles[t-1];c.init(l,n)}}this.setMapContentSize(e),this.lastUnlockID=e;var h=this.getExplorationNode(e);if(h){var u=h.position;this.contentNode.position=cc.v2(0,250-u.y)}},nextExploration:function(){if(o.levelResultData){var e=o.levelResultData;if(e)switch(o.levelMode){case a.Endless:break;case a.Normal:var t=e.stageID,i=e.explorationID;if(!this.getExplorationNode(i))return;switch(e.levelResult){case n.Win:case n.Lose:this.spawnExploration(t,i)}}}},winUnlockExploration:function(e){var t=this.getExplorationNode(e);if(t&&!(this.lastUnlockID>e)){this.CloseTouch&&(this.CloseTouch.active=!0);var i=function(){var i={};i.ID=e,i.lock=!1,s.instance.setExplorationData(i),this.unlockNode(t,e,!0),this.CloseTouch&&(this.CloseTouch.active=!1),this.ChangeBtn(t,this.greenBtn),this.StageUI.freshAllUI(!0)}.bind(this);this.MapFlag.nextlevel(i)}},getExplorationNode:function(e){return e-1<this.explorationNodes.length?this.explorationNodes[e-1]:null},unlockNode:function(e,t){e.getComponent("StageButton").unlock(),this.ChangeBtn(e,this.redBtn)},setMapContentSize:function(e){var t=0,i=parseInt(e/this.levelsUnit);t=0===parseInt(e%this.levelsUnit)?i-1:i,t+=1;var o=(t=(t+=1)>=8?8:t)*this.oneMapSize.height;this.content.height=o;for(var s=2*t+1;s<this.allMapNode.length;s++){this.allMapNode[s].active=!1}},spawnExploration:function(e,t){var i=o.GetDayKind(t),s=null;switch(i){case c.Day:case c.Noon:case c.Night:s=this.ExplorationDayNode}var n=cc.director.getScene()._children[0];if(s){var a=cc.instantiate(s);a.active=!0,a.parent=n;var r=a.getComponent("Exploration");if(r){var l=function(){var e=n.getChildByName("Mask");e&&(e.active=!1)}.bind(this);r.init(e,t,this.lastUnlockID,i,1,l,this)}var h=n.getChildByName("Mask");h&&(h.active=!0)}},ChangeBtn:function(e,t){var i=e.getChildByName("sp");if(i){var o=i.getComponent("cc.Sprite");o&&(o.spriteFrame=t)}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils",Words:"Words"}],MapUI:[function(e,t,i){"use strict";cc._RF.push(t,"ca612+QyO5GqolxSYGIrV8E","MapUI");var o=e("EnumDefine").EnterKind,s=e("Utils"),n=s.ProduceType,a=e("LocalStorage");cc.Class({extends:cc.Component,properties:{chestBox:cc.Node,star:cc.Node,starlabel:cc.Label,chestTip:cc.Node,chestBtn:cc.Button,UIBase:cc.Node,audioStar:{type:cc.AudioSource,default:null},RoleGuide:cc.Node},onLoad:function(){this.maxlevel=80,this.stageStarCnt=0,this.chestTip.active=!1;for(var e=0,t=1;t<=this.maxlevel;t++){var i=a.instance.getLevelStars(t);e+=parseInt(i)}this.starcnt=e,this.starlabel.string=e+"",this.checkOpenChestTip(),this.uibase=this.UIBase.getComponent("UIBase"),this.chestBtn.interactable=!1,this.RoleGuide.active=!1},start:function(){},checkOpenChestTip:function(){var e=function(e){this.stageStarCnt=e,this.openChestTip()}.bind(this);this.loadScoreReWardData(this.starcnt,e)},addStar:function(e){this.starcnt+=e,this.starlabel.string=this.starcnt+""},openChestTip:function(){this.chestTip.active=!0,this.chestTip.getComponent(cc.Animation).play("arrow"),this.chestBtn.interactable=!0},onOpenChestBox:function(){a.instance.setStarReWard(this.stageStarCnt,1);var e=this;cc.loader.loadRes("prefab/ChestReWard",function(t,i){t&&cc.error(t);var o=cc.instantiate(i);o.parent=e.node.parent,o.position=cc.v2();var s=o.getComponent("ChestReWard"),n=function(){o.removeFromParent(),e.checkOpenChestTip()}.bind(e);e.chestBtn.interactable=!1,e.chestTip.active=!1,s.showChest(e.starcnt,e.uibase,n)})},onBtnBackClicked:function(){cc.director.loadScene("Main")},onBtnRoleClicked:function(){cc.director.loadScene("ActorUI",function(){var e=cc.director.getScene()._children[0].getComponent("CanvasInit");e&&e.setEnterCode(o.Map)}.bind(this))},onBtnPetClicked:function(){cc.director.loadScene("PetUI",function(){var e=cc.director.getScene()._children[0].getComponent("CanvasInit");e&&e.setEnterCode(o.Map)}.bind(this))},collectStars:function(e,t,i){var o=this,c=t.length,r=t[s.randomRangeInt(0,c)];if(r&&void 0!==r){var l=r.parent.convertToWorldSpaceAR(r.position);l=this.node.convertToNodeSpaceAR(l);var h=this.star,u=h.parent.convertToWorldSpaceAR(h.position);(u=this.node.convertToNodeSpaceAR(u)).x-=40;var d=this.node,p=function(){this.addStar(1),this.starAudio()}.bind(this),v=s.produceRandomNodeLineMove(n.Star,i,l,u,d,p),f=cc.callFunc(function(){a.instance.setLevelStars(e,i),o.checkOpenChestTip()},this);this.node.runAction(cc.sequence(cc.delayTime(v),f))}},loadScoreReWardData:function(e,t){cc.loader.loadRes("json/StarReward",function(i,o){for(var s=o.json,n=0;n<s.length;n++){var c=s[n],r=parseInt(c.star);if(e>=r)if(0===a.instance.getStarReWard(r)){t&&t(r);break}}})},starAudio:function(){this.audioStar&&this.audioStar.play()}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],MonsterMove:[function(e,t,i){"use strict";cc._RF.push(t,"e4be7UIDSdHwaG5aFo099X0","MonsterMove"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._movedt=0,this._moveDelay=.1,this._moveUnitVal=5,this.canMove=!1},start:function(){},setMove:function(e){this.canMove=e},move:function(e){(this._movedt+=e,this._movedt>=this._moveDelay)&&(this._movedt=0,this.node.position.x+=this._moveUnitVal)},update:function(e){this.canMove&&this.move(e)}}),cc._RF.pop()},{}],MonsterShield:[function(e,t,i){"use strict";cc._RF.push(t,"b4022szjOlPkLJs8KyTRXT1","MonsterShield");e("EnumDefine").CellType,e("EnumDefine").MonsterSkillType;var o=e("EnumDefine").MonsterShieldType;e("RPGManager"),e("Utils"),e("CameraManager"),e("PoolMng"),e("PlayFightAudio"),e("ProcessBoardCell");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.shieldDatalist=[]},onDisable:function(){},start:function(){},init:function(e){if(e&&0!==e.length)for(var t=10,i=0;i<e.length;i++){var o=e[i];this.initShieldData(i,o,t),t-=1}},initShieldData:function(e,t,i){if(t){this.shieldData=t;var s="prefab/monster/",n="";switch(t.type){case o.Cell1:n="RedMonsterShield";break;case o.Cell2:n="BlueMonsterShield";break;case o.Cell3:n="YellowMonsterShield";break;case o.Cell4:n="GreenMonsterShield";break;case o.Cell5:n="WhiteMonsterShield"}s+=n;var a=this;cc.loader.loadRes(s,function(e,o){var s=cc.instantiate(o);if(s){s.zIndex=i;var n=a.node.getComponent("Monster");s.parent=a.node;var c=n.skeleton.width/s.width,r=n.skeleton.height/s.height;s.scale=.8*Math.min(c,r),s.position=cc.v2(n.skeleton.x-s.width*s.scale,n.skeleton.y+s.height*s.scale/2);var l=s.getChildByName("num").getComponent("cc.Label");l.string=t.num+"";var h=a.node.convertToWorldSpaceAR(s.getPosition());h=a.node.parent.convertToNodeSpaceAR(h);var u={};u.label=l,u.type=t.type,u.node=s,u.num=t.num,u.pos=h,a.shieldDatalist.push(u)}})}},showflashEffect:function(e,t,i,s){var n="prefab/particle/",a="";switch(i){case o.Cell1:a="RedDefencekillDustParticle";break;case o.Cell2:a="BlueDefencekillDustParticle";break;case o.Cell3:a="YellowDefencekillDustParticle";break;case o.Cell4:a="GreenDefencekillDustParticle";break;case o.Cell5:a="WhiteDefencekillDustParticle"}n+=a,cc.loader.loadRes(n,function(i,o){var n=cc.instantiate(o);n&&(n.zIndex=2,n.scale=.6*s,n.parent=e,n.position=t,n.runAction(cc.sequence(cc.delayTime(.5),cc.removeSelf())))})},isHaveShield:function(){return 0!==this.shieldDatalist.length},canAttackShield:function(e){if(this.shieldDatalist.length>0){var t=this.shieldDatalist[0];if(t&&t.type===e)return!0}return!1},attackShield:function(e,t){if(this.shieldDatalist.length>0){var i=this.shieldDatalist[0];if(i&&i.type===e){var o=i.num;if(o=(o-=t)<0?0:o,i.num=o,i.label.string=o+"",o<=0&&(this.shieldDatalist.shift(),this.destroyShiled(i.node,i.type),this.shieldDatalist.length>0)){var s=this.shieldDatalist[0],n=s.node.scale;s.node.scale=0;var a=cc.scaleTo(.25,1.1*n,1.1*n).easing(cc.easeOut(5)),c=cc.scaleTo(.25,1*n,1*n).easing(cc.easeOut(5)),r=cc.sequence(a,c);s.node.runAction(r)}return!0}}return!1},destroyShiled:function(e,t){var i=this.node.parent,o=this.node.convertToWorldSpaceAR(e.getPosition());o=this.node.parent.convertToNodeSpaceAR(o);var s=e.scale;this.showflashEffect(i,o,t,s),e.removeFromParent()},getShieldData:function(){return this.shieldDatalist.length>0?this.shieldDatalist[0]:null}}),cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",ProcessBoardCell:"ProcessBoardCell",RPGManager:"RPGManager",Utils:"Utils"}],MonsterSkill:[function(e,t,i){"use strict";cc._RF.push(t,"88500GUwdNMWqxYDjSQDZ1E","MonsterSkill");var o=e("EnumDefine").CellType,s=e("EnumDefine").SaliveKind,n=e("EnumDefine").MonsterSkillKind,a=e("RPGManager"),c=(e("Utils"),e("ProcessBoardCell")),r=e("Board");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.skillData=null,this.skillDamages=[],this._fullhp=0,this._damage=0,this.hurtRound=0,this.triggerHurtRound=!1,this.skillIndex=0,this.ShootSaliveTip=null,this.saliveTargetCells=[]},start:function(){},init:function(e,t){this.skillData=e,this._fullhp=t,this.showTip=!1},listernHurt:function(e){if(this.skillData){this._damage+=e;var t=1*this._damage/this._fullhp;if(!this.triggerHurtRound){t>=.05&&(this.triggerHurtRound=!0)}}},updateOneRound:function(e){var t=this;if(!this.skillData||this.skillData.shootSkill<=0||!this.triggerHurtRound)e&&e();else if(this.hurtRound+=1,this.hurtRound===this.skillData.round)this.hurtRound=0,this.triggerHurtRound=!1,this.skillIndex+=1,this.updateSkills(),this.removeSaliveTip(),this.triggerSkillX(e);else{if(1===this.hurtRound){this.showShootSalieveTip();var i=cc.callFunc(function(){t.readyTargetCells()},this);this.node.runAction(cc.sequence(cc.delayTime(.5),i))}if(this.ShootSaliveTip){var o=this.skillData.round-this.hurtRound;this.ShootSaliveTip.setRound(o)}e&&e()}},updateSkills:function(){var e=this.skillData,t=e.shootSkill;t-=1,e.shootSkill=t},removeSaliveTip:function(){var e=this;if(this.showTip=!1,this.ShootSaliveTip&&this.ShootSaliveTip.node.active){var t=cc.scaleTo(.5,0).easing(cc.easeOut(3)),i=cc.callFunc(function(){e.ShootSaliveTip.node.active=!1},this);this.ShootSaliveTip.node.runAction(cc.sequence(t,i))}},readyTargetCells:function(){var e=this.skillData.skills.length,t=c.instance.randomGetNormalCells(e);if(t)for(var i=0;i<t.length;i++){t[i].getComponent("Cell").addMonsterShootTip()}this.saliveTargetCells=t},showShootSalieveTip:function(){var e=this;if(!this.showTip){this.showTip=!0;var t=this.node.scale,i=cc.scaleTo(.4,1.1*t).easing(cc.easeIn(3)),o=cc.scaleTo(.4,t).easing(cc.easeIn(3)),s=[];s.push(i),s.push(o);var n=cc.callFunc(function(){e.loadShootSaliveTip()},this);s.push(n),this.node.runAction(cc.sequence(s))}},loadShootSaliveTip:function(){var e=this;cc.loader.loadRes("prefab/monsterSkill/ShootSaliveTip",function(t,i){t&&cc.error(t);var o=cc.instantiate(i);o.parent=e.node,o.name="saliveTip",o.position=cc.v2(.3*-e.node.width,.5*e.node.height);var s=o.getComponent("ShootSaliveTip");e.ShootSaliveTip=s;var a=e.skillData.round-1;e.ShootSaliveTip.setRound(a);var c=e.skillData.skillKind,r=e.skillData.lv;switch(c){case n.SpiderWeb:s.showSpider(r);break;case n.Salive:s.showSlaive(r)}})},triggerSkillX:function(e){for(var t=this,i=this.skillData.skills,o=(i.length,this.skillData.lv),s=this.skillData.skillKind,n=this.saliveTargetCells,a=[],c=0;c<n.length;c++){var r=n[c];r.getComponent("Cell").monsterShootTip&&a.push(r)}if(a&&0!==a.length){var l=this.node.getComponent("Monster");this._fullhp=l.hp;var h=this.node.scale,u=cc.scaleTo(.1,h+1).easing(cc.easeOut(3)),d=cc.scaleTo(.1,h).easing(cc.easeOut(3)),p=[];p.push(u),p.push(d);for(var v=0;v<a.length;v++)v<i.length&&function(){var e=a[v];if(e){var n=i[v],c=cc.callFunc(function(){t.shootSkill(s,n,o,e,.3)},t);p.push(c),p.push(cc.delayTime(.1))}}();p.push(cc.delayTime(.3));var f=cc.callFunc(function(){e&&e()},this);p.push(f),this.node.runAction(cc.sequence(p))}else e&&e()},shootSkill:function(e,t,i,o,s){switch(e){case n.SpiderWeb:this.spawnSpider(t,i,o,s);break;case n.Salive:this.spawnSalive(t,i,o,s)}},spawnSpider:function(e,t,i,o){var s=i.getComponent("Cell"),n=s.column,c=s.row,l=r.instance.SpawnCells.createBlockCover();l.parent=a.instance.boardNode;var h=a.instance.getWorldPos(this.node);h=l.parent.convertToNodeSpaceAR(h),l.x=h.x,l.y=h.y,l.group="UI";var u=i.position,d=Math.abs(i.width-l.width),p=Math.abs(i.height-l.height);u.x+=d,u.y+=p;var v=cc.v2(),f=l.position;u.sub(f,v);var m=o,g=cc.moveTo(m,u).easing(cc.easeIn(3)),C=cc.callFunc(function(){var e={};e.column=n,e.row=c,e.lv=t,s.removeMonsterShootTip(),s.addSpider(l,e)},this),S=l.scale;l.scale=0;var b=cc.scaleTo(.2*m,S).easing(cc.easeOut(3)),k=cc.spawn(b,g),_=cc.sequence(k,C);l.runAction(_)},spawnSalive:function(e,t,i,s){var n=i.getComponent("Cell"),c=n.column,l=n.row,h=r.instance.SpawnCells.createSalive(o.Salive,e,t,c,l),u=h.getComponent("Salive");u&&(u.skill=e),h.parent=a.instance.boardNode;var d=a.instance.getWorldPos(this.node);d=h.parent.convertToNodeSpaceAR(d),h.x=d.x,h.y=d.y,h.group="UI",this.shootWeapon(i,h,e,t,s)},shootWeapon:function(e,t,i,o,s){var n=this,a=e.position,l=Math.abs(e.width-t.width),h=Math.abs(e.height-t.height);a.x+=l,a.y+=h;var u=cc.v2(),d=t.position;a.sub(d,u);var p=s,v=cc.moveTo(p,a).easing(cc.easeIn(3)),f=cc.callFunc(function(){var s=e.getComponent("Cell");s.removeMonsterShootTip();var a=s.column,l=s.row,h=e.parent,u=cc.v2(e.x,e.y),d=e.group;t.parent=h,t.position=u,t.group=d,(s=t.getComponent("Cell")).init(s.celltype,o),c.instance.setCell(a,l,t),n.XXSaliveDust(i,h,cc.v2(u.x+e.width/2,u.y+e.height/2)),r.instance.deSpawnCell(e)},this),m=t.scale;t.scale=0;var g=cc.scaleTo(.2*p,m).easing(cc.easeOut(3)),C=cc.spawn(g,v),S=cc.sequence(C,f);t.runAction(S)},XXSaliveDust:function(e,t,i){var o="";switch(e){case s.Move:o="prefab/monsterSkill/saliveDust";break;case s.Invasion:o="prefab/monsterSkill/invasionSaliveDust";break;case s.Normal:o="prefab/monsterSkill/saliveDust"}var n=this;cc.loader.loadRes(o,function(e,o){e&&cc.error(e);var s=cc.instantiate(o);s.active=!0,s.parent=t,s.position=i,s.group=n.node.group,s.zIndex=10})},loadMonsterSkillData:function(e,t){cc.loader.loadRes("json/MonsterSkill",function(i,o){for(var s=o.json,n=0;n<s.length;n++){var a=s[n];a.ID===e&&t&&t(a)}})}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",ProcessBoardCell:"ProcessBoardCell",RPGManager:"RPGManager",Utils:"Utils"}],Monster:[function(e,t,i){"use strict";cc._RF.push(t,"750f8Ra7ZVFDJA7HBeSJzA0","Monster");var o=e("RPGManager"),s=e("Utils"),n=e("CameraManager"),a=e("PoolMng"),c=e("PlayFightAudio"),r=s.ProduceType,l=e("EnumDefine").CellType,h=e("EnumDefine").HurtFont,u=e("LocalStorage"),d=cc.v2();cc.Class({extends:cc.Component,properties:{skeleton:cc.Node,bloodBar:{type:cc.ProgressBar,default:null}},ctor:function(){this.monsterData={},this.hpLabel=null,this.fullhpLabel=null},onLoad:function(){this.bloodBar&&(this.bloodBar.progress=1),this.hp=100,this.fullhp=100,this.skeleton&&(this.Skeleton=this.skeleton.getComponent("sp.Skeleton"),this.node.width=this.skeleton.width,this.node.height=this.skeleton.height)},showBlood:function(e){this.bloodHp.active=e},init:function(e){this.monsterSkill=this.node.getComponent("MonsterSkill"),this.monsterData=e,this.hp=this.fullhp=parseInt(e.JsonData.Life),1===s.levelID&&(this.hp=this.fullhp=40);var t=this.node.getComponent("MonsterSkill"),i=e.skillData;"{}"===JSON.stringify(i)&&(i=null),t.init(i,this.fullhp);var o=this.node.getChildByName("ProgressBar");if(o){o.scale=.95,o.y+=20;var n=this;cc.loader.loadRes("prefab/bloodHp",function(e,t){var i=cc.instantiate(t);if(i){n.bloodHp=i,i.parent=o,i.scale=1.4;var s=i.getChildByName("hp"),a=i.getChildByName("fullhp");s&&(n.damageLabel=s.getComponent("cc.Label"),n.hpLabel=a.getComponent("cc.Label"),n.damageLabel.string="0",n.hpLabel.string=n.hp,n.showBlood(!1))}})}this.spawnCell(e.addtionCellType),this.spawnDefence(e.defenceCellType);var a=this.node.getComponent("MonsterShield");a.init(e.shieldlist),this.MonsterShield=a},getAttackAddtionCellType:function(){return this.monsterData.addtionCellType},getDefenceCellType:function(){return this.monsterData.defenceCellType},isHaveShield:function(){return this.MonsterShield.isHaveShield()},isDefenceAttack:function(e){return this.MonsterShield.isDefenceAttack(e)},canAttack:function(e){var t=!0;return this.isHaveShield()&&(t=!1),t},attackShield:function(e,t){this.MonsterShield.attackShield(e,t)},spawnDefence:function(e){var t="";switch(e){case l.Cell1:t="spine/fruite/tomatoes";break;case l.Cell2:t="spine/fruite/eggplant";break;case l.Cell3:t="spine/fruite/orange";break;case l.Cell4:t="spine/fruite/apple";break;case l.Cell5:t="spine/fruite/radish"}if(""!==t){var i=this;cc.loader.loadRes("prefab/cell/monsterDefence",function(e,o){var s=cc.instantiate(o);s&&(s.parent=i.node,s.scale=.7,s.position=cc.v2(-s.width/2*s.scale/2,i.bloodBar.node.y-10-s.height*s.scale),cc.loader.loadRes(t,sp.SkeletonData,function(e,t){e&&cc.error(e);var i=s.getChildByName("skeleton");i&&(i.getComponent("sp.Skeleton").skeletonData=t)}))})}},spawnCell:function(e){var t="";switch(e){case l.Cell1:t="prefab/cell/cell1";break;case l.Cell2:t="prefab/cell/cell2";break;case l.Cell3:t="prefab/cell/cell3";break;case l.Cell4:t="prefab/cell/cell4";break;case l.Cell5:t="prefab/cell/cell5"}if(""!==t){var i=this;cc.loader.loadRes(t,function(e,t){var o=cc.instantiate(t);o&&(o.removeComponent("Cell"),o.parent=i.node,o.scale=.7,o.position=cc.v2(-o.width*o.scale/2,i.bloodBar.node.y-10-o.height*o.scale))})}},hideHp:function(){this.bloodBar.node.active=!1},getWorldPos:function(){var e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());return n.instance.battleCameraNode.getComponent("cc.Camera").getWorldToCameraPoint(e,d),d},start:function(){},drawlineHurt:function(e){e=e>=this.hp?this.hp:e,this.showBlood(!0),this.damageLabel&&(this.damageLabel.string=e+""),this.bloodHpScale()},drawlineHurtOver:function(){this.showBlood(!1)},bloodHpScale:function(){if(this.bloodHp){this.bloodHp.stopAllActions(),this.bloodHp.scale=1.4;var e=this.bloodHp.scale,t=cc.scaleTo(.25,1.2*e,1.2*e).easing(cc.easeOut(3)),i=cc.scaleTo(.25,1*e,1*e).easing(cc.easeOut(3)),o=cc.sequence(t,i);this.bloodHp.runAction(o)}},hurt:function(e,t,i){if(void 0===i&&(i=h.Red),this.hp<=0)t&&t(!0);else{c.instance.playMonsterhit(),e=parseInt(e),this.hp=this.hp-e,this.updateBloodBar(),o.instance.Game.updateHurtMonster(e),this.monsterSkill.listernHurt(e);var s=this.node.position;this.spawnbloodlabel(i,s,this.node.parent,e);var n=function(){return this.hp<=0?(this.die(),void(t&&t(!0))):(this.idle(),void(t&&t(!1)))}.bind(this);this.hurted(n)}},idle:function(){this.Skeleton.setAnimation(0,"idle",!0),this.Skeleton.timeScale=1},hurted:function(e){this.Skeleton.setAnimation(0,"hurt",!1),this.Skeleton.timeScale=3,this.Skeleton.setCompleteListener(function(t,i){"hurt"===(t.animation?t.animation.name:"")&&e&&e()})},die:function(){c.instance.playMonsterDie(),this.Skeleton.setAnimation(0,"dead",!1);var e=cc.v2(this.node.x,this.node.y);e.y+=.4*this.node.height;var t=this.node.parent,i=a.instance.getMonsterDieDust();i.parent=t,i.position=e;var n=this.monsterData.JsonData.DieColor,r=this.monsterData.JsonData.MonsterName,l=s.IsBoss(r),h=n.split(","),u=i.getComponent("cc.ParticleSystem");u&&(u.resetSystem(),u.totalParticles=30,l&&(u.totalParticles=50,i.scale=2.5),u.startColor=new cc.Color(parseInt(h[0]),parseInt(h[1]),parseInt(h[2])),u.endColor=new cc.Color(parseInt(h[0]),parseInt(h[1]),parseInt(h[2])));var d=cc.callFunc(function(){a.instance.putMonsterDieDust(i)},this);i.runAction(cc.sequence(cc.delayTime(2),d));var p=this.reWardCoin();this.createWord(),this.updateScore(),o.instance.removeMonster(this.node,p),this.node.removeFromParent(!1)},isBoss:function(){var e=this.monsterData.JsonData.MonsterName;return s.IsBoss(e)},updateScore:function(){var e=this.monsterData.JsonData.DeathIntegral;o.instance.Game.updateScore(e)},reWardCoin:function(){var e=this.monsterData.JsonData.DeathCoin,t=s.levelID;1===u.instance.getLevelPassed(t)&&(e/=3,e=Math.floor(e));var i=0,o=!0;return i=this.isBoss()?this.bossBombCoins(e):this.bombCoins(e,200),e<=0&&(o=!1),{reward:o,duration:i}},bossBombCoins:function(e){for(var t=[150,200,450,600],i=[parseInt(.1*e),parseInt(.2*e),parseInt(.3*e),parseInt(.4*e)],o=0,s=0;s<t.length;s++){var n=t[s],a=i[s];o=this.bombCoins(a,n)}return o},bombCoins:function(e,t){var i=o.instance.rpgNode,s=this.node.parent.convertToWorldSpace(this.node.position),n=s=i.convertToNodeSpace(s);n.y+=this.node.height/2;var a=Math.floor(e/5),c=this.node.group,l=function(e){this.flyToRoles(e,.5,.02,.2,a,null)}.bind(this);return this.produceRandomNodeLineMove(r.ButtonCoin,5,t,n,i,l,c),.58},flyToRoles:function(e,t,i,s,n,a){for(var c=this,r=[],l=o.instance.actorlist,h=0;h<l.length;h++){var u=l[h],d=o.instance.rpgNode,p=u.parent.convertToWorldSpace(u.position);(p=d.convertToNodeSpace(p)).y+=u.height/2,r.push(p)}var v=1,f=[];if(e.length<r.length)v=1,f.push(e);else{v=Math.floor(e.length/r.length);for(var m=0;m<e.length;m+=v)f.push(e.slice(m,m+v))}for(var g=[],C=function(e){var o=f[e],l=r[0];e<r.length&&(l=r[e]);var h=e===f.length-1,u=cc.callFunc(function(){var e=null;h&&(e=a),c.flyToRole(o,t,i,l,n,e)},c);g.push(u),g.push(cc.delayTime(s))},S=0;S<f.length;S++)C(S);g.length>0&&this.node.parent.runAction(cc.sequence(g))},flyToRole:function(e,t,i,s,n,c){for(var r=function(r){var l=e[r],h=t,u=l.position,d=cc.v2();d.x=(u.x+s.x)/2,d.y=(u.y+s.y)/2;var p=[u,d,s],v=cc.bezierTo(h,p),f=cc.scaleTo(.1,1.3).easing(cc.easeOut(3)),m=cc.callFunc(function(){o.instance.Game.updateCoin(n),c&&c(),a.instance.putSaleCoin(l)}),g=cc.sequence(cc.delayTime(r*i),f,v,m);l.runAction(g)},l=0;l<e.length;l++)r(l)},createWord:function(){var e=["ouch","argh","kaboom","wah","grrr"],t=e[s.randomRangeInt(0,e.length)],i=this.node.position,o=this.node.parent,n=this.node.height;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,s){var a=s.getSpriteFrame(t),c=new cc.Node("");c.zIndex=10,c.addComponent(cc.Sprite).spriteFrame=a,o.addChild(c),c.position=i,c.y+=.8*n,c.scale=0;var r=cc.scaleTo(.5,.8).easing(cc.easeOut(3)),l=cc.skewTo(.5,1.2,1.2),h=cc.moveBy(.5,cc.v2(0,120)).easing(cc.easeOut(4)),u=cc.fadeOut(.5),d=cc.sequence(r,cc.spawn(h,l),u,cc.removeSelf());c.runAction(d)})},updateBloodBar:function(){var e=1*this.hp/this.fullhp;this.bloodBar.progress=e,this.hpLabel.string=this.hp+""},spawnbloodlabel:function(e,t,i,o){var n=null;(n=a.instance.getScoreLabel()).parent=i,n.zIndex=10,n.position=t,n.getComponent(cc.Label).string=o+"";var c=null;if(0===s.randomRangeInt(0,1)){var r=[cc.v2(1*s.randomRange(20,40),1*s.randomRange(20,40)),cc.v2(1*s.randomRange(40,60),1*s.randomRange(40,60)),cc.v2(1*s.randomRange(60,80),0)];c=cc.bezierBy(.5,r)}else{var l=[cc.v2(1*-s.randomRange(20,40),1*s.randomRange(20,40)),cc.v2(1*-s.randomRange(40,60),1*s.randomRange(40,60)),cc.v2(1*-s.randomRange(60,80),0)];c=cc.bezierBy(.5,l)}var h=cc.callFunc(function(){a.instance.putScoreLabel(n)},this);n.scale=0,n.opacity=255;var u=cc.scaleTo(.1,.6).easing(cc.easeOut(5)),d=c.easing(cc.easeOut(5)),p=cc.sequence(u,d,cc.fadeOut(.2),h);n.runAction(p)},randomPoslist:function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;if(1===t)e.push(i);else for(var n=0;n<t;n++){var a=s.randomRange(i.x-o/4,i.x+o/4),c=s.randomRange(i.y-o/4,i.y+o/4);e.push(cc.v2(a,c))}},produceRandomNodeLineMove:function(e,t,i,o,s,n){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"default";if(!(t<=0)){var r=[],l=[];this.randomPoslist(r,t,o,i);for(var h=0;h<t;h++){var u=h,d=a.instance.getSaleCoin();if(d){var p=r[h];d.position=p,l.push(d),d.scale=0,d.zIndex=10,d.parent=s,d.group=c,u>=t-1&&n&&n(l)}}}}}),cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",RPGManager:"RPGManager",Utils:"Utils"}],MoveCameraShot:[function(e,t,i){"use strict";cc._RF.push(t,"7c949D61EtHzY0OxRo4i85F","MoveCameraShot");e("RPGManager"),e("Utils"),e("EnumDefine").FightKind,cc.v2(),cc.v2();cc.Class({extends:cc.Component,properties:{canMove:!1,moveUnitVal:5},onLoad:function(){this.camera=this.getComponent(cc.Camera),this.initZoomRatio=this.camera.zoomRatio,this.ratioZoomIn=this.camera.zoomRatio,this.ratioZoomOut=this.ratioZoomIn-.1},ctor:function(){this._zoomIn=!1,this._zoomOut=!1,this._zoomCallback=null,this._zoomStep=.2,this._move=!1},start:function(){},update:function(e){this.zoomUpdate(e),this._move&&(this.node.x+=this.moveUnitVal)},setMove:function(e){this._move=e},setMoveSpeed:function(e){this.moveUnitVal=e},zoomUpdate:function(e){if(this._zoomIn&&this.camera){if(Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=1e-5)return this.camera.zoomRatio=this.ratioZoomIn,this._zoomIn=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomIn,this._zoomStep)}if(this._zoomOut&&this.camera){if(Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,this._zoomOut=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomOut,this._zoomStep)}},resetZoom:function(){this._zoomIn=!1,this._zoomOut=!1},zoomIn:function(e){if(this.camera){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomIn=!0}else e&&e()},zoomOut:function(e){if(this.camera){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=1e-5)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomOut=!0}else e&&e()}}),cc._RF.pop()},{EnumDefine:"EnumDefine",RPGManager:"RPGManager",Utils:"Utils"}],MoveCamera:[function(e,t,i){"use strict";cc._RF.push(t,"1dc13qLqbBIHYxuAqL4XszW","MoveCamera");e("RPGManager"),e("Utils"),e("EnumDefine").FightKind,cc.v2(),cc.v2();cc.Class({extends:cc.Component,properties:{canMove:!1,moveUnitVal:5},onLoad:function(){this.camera=this.getComponent(cc.Camera)},ctor:function(){this._move=!1},start:function(){},update:function(e){this._move&&(this.node.x+=this.moveUnitVal)},setMove:function(e){this._move!==e&&(this._move=e)},setMoveSpeed:function(e){this.moveUnitVal=e}}),cc._RF.pop()},{EnumDefine:"EnumDefine",RPGManager:"RPGManager",Utils:"Utils"}],MultiResoultionCompat:[function(e,t,i){"use strict";cc._RF.push(t,"b6c42Wz64tDYYqUBUbC2YRW","MultiResoultionCompat");var o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(n<3?s(a):n>3?s(t,i,a):s(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,c=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return o(t,e),i=t,t.prototype.onLoad=function(){cc.view.setDesignResolutionSize(i.DEFAULT_RESOLUTION_WIDTH,i.DEFAULT_RESOLUTION_HEIGHT,cc.ResolutionPolicy.SHOW_ALL)},t.getShowAllModeScale=function(){return Math.min(cc.view.getCanvasSize().width/this.DEFAULT_RESOLUTION_WIDTH,cc.view.getCanvasSize().height/this.DEFAULT_RESOLUTION_HEIGHT)},t.getShowAllModeRealHeight=function(){return this.DEFAULT_RESOLUTION_HEIGHT*this.getShowAllModeScale()},t.getShowAllModeRealWidth=function(){return this.DEFAULT_RESOLUTION_WIDTH*this.getShowAllModeScale()},t.getShowAllModeVerticalBorderHeight=function(){return cc.view.getCanvasSize().height-this.getShowAllModeRealHeight()},t.getShowAllModeHorizontalBorderWidth=function(){return cc.view.getCanvasSize().width-this.getShowAllModeRealWidth()},t.getShowAllModeNodePositionCloseToBottom=function(e){var t=i.getShowAllModeScale(),o=i.getShowAllModeVerticalBorderHeight()/2,s=(e.y*t-o)/t;return cc.v2(e.x,s)},t.convertNodePosInDesignToNodePosInCanvas=function(e){return e.sub(cc.v2(this.getShowAllModeScale(),this.getShowAllModeScale()))},t.convertNodePosInCanvasToNodePosInDesign=function(e){return e.div(cc.v2(this.getShowAllModeScale(),this.getShowAllModeScale()))},t.convertWidthInDesignToWidthInCanvas=function(e){return e*this.getShowAllModeScale()},t.convertWidthInCanvasToWidthInDesign=function(e){return e/this.getShowAllModeScale()},t.convertHeightInDesignToHeightInCanvas=function(e){return e*this.getShowAllModeScale()},t.convertHeightInCanvasToHeightInDesign=function(e){return e/this.getShowAllModeScale()},t.DEFAULT_RESOLUTION_WIDTH=720,t.DEFAULT_RESOLUTION_HEIGHT=1280,t=i=s([a],t)}(cc.Component));i.default=c,cc._RF.pop()},{}],NormalPetContent:[function(e,t,i){"use strict";cc._RF.push(t,"fdba0lAwxlOzoWMAIk2CptQ","NormalPetContent");var o=e("JsonData"),s=e("LocalStorage"),n=(e("EnumDefine").PetType,e("EnumDefine").EnterKind,e("EnumDefine").PetShapeLevel),a=e("Utils"),c=e("BaseUI"),r=e("Words");cc.Class({extends:c,properties:{info:cc.Node,attacklabel:cc.Label,levellabel:cc.Label,pet:sp.Skeleton,petNamelabel:cc.Label,skill:cc.Node,decriptionBoard:cc.Node,spinChestBtnBox:cc.Node,upGradeBtnBox:cc.Node,CardProgressBar:cc.Node,cardNumlabel:cc.Label,upGradeCardNumLabel:cc.Label,upGradeTip:cc.Node,UIBaseNode:cc.Node,SpinChestPrefab:cc.Prefab,upGradeContentNode:cc.Node,UpGradeGuide:cc.Node,UpGradeDoneGuide:cc.Node,upGradeBtn:cc.Button,BottomBk:cc.Node},onLoad:function(){this.SkillDecripCNWords={0:[1,2,3,4],1:[5,6,7,8],2:[9,10,11,12]},this.upGradeContentNode.active=!1,this.UpGradeGuide.active=!1,this.UpGradeDoneGuide.active=!1,this.maxlevel=4,this.isFreshed=!1},start:function(){},visibleBaseUI:function(e){this.UIBaseNode&&(this.UIBaseNode.active=e)},replaceUIBaseNode:function(e){this.visibleBaseUI(!1),this.UIBaseNode=e},showGuide:function(e){if(e&&(e.cardNum>=2&&!s.instance.getUpGradePetGuideDone())){var t=this.UpGradeGuide;t.active=!0;var i=t.getComponent("TouchGuide");if(i){var o=function(){s.instance.setUpGradePetGuideDone(!0);var e=function(){this.levelUp()}.bind(this);this.scaleShow(this.upGradeBtn.node,e)}.bind(this);i.show("",o)}return}},fresh:function(e){if(e&&!(e.length<=0)){this.isFreshed=!0;for(var t=0;t<e.length;t++){var i=e[t];if(i&&i.ID===this.petData.ID&&i.cardNum>0){var o=i.cardNum,n=s.instance.getPetData(i.ID);this.levellabel.string=n.level+"",this.attacklabel.string=n.attack+"",this.petData=n,this.loadPet(n.ID);var a=r.getPetName(n.ID-1);this.petNamelabel.string=a,this.showSkillDecription(),this.scheduleCardProgress(o),this.showSkill(),this.checkMaxLevel()}}}},show:function(e,t){this.scaleShow(this.node),this.enter=t;var i=s.instance.getPetData(e);if(i){this.levellabel.string=i.level+"",this.attacklabel.string=i.attack+"",this.petData=i,this.loadPet(e);var o=r.getPetName(e);this.petNamelabel.string=o,this.showSkillDecription(),this.initCardProgress(),this.showSkill(),this.showGuide(i),this.checkMaxLevel()}},checkMaxLevel:function(){this.petData.level>=this.maxlevel&&(this.BottomBk.active=!1)},upGradeDone:function(e){var t=function(){if(!s.instance.getUpGradePetGuideDone()){var e=this.UpGradeGuide;e.active=!0;var t=e.getComponent("JustWordGuide"),i=r.getUpGradePet();t.show(i),s.instance.setUpGradePetGuideDone(!0)}}.bind(this);this.scaleShow(this.node,t),this.levellabel.string=e.level+"",this.attacklabel.string=e.attack+"",this.petData=e,this.loadPet(e.ID),this.showSkillDecription(),this.showSkill(),this.initCardProgress(),this.freshPetsCardnfo(),this.checkMaxLevel()},freshPetsCardnfo:function(){var e=this.info.getComponent("PetCardInfo");e&&e.freshPet(this.petData)},levelUp:function(){if(this.petData.cardNum>=this.UpgradeNumber){var e=function(e){this.upGradeDone(e),this.UIBaseNode.active=!0}.bind(this);this.UIBaseNode.active=!1,this.node.active=!1,this.upGradeContentNode.active=!0;var t=this.upGradeContentNode.getComponent("UpGradeContent");if(t){var i=this.petData,o=i.ID,s=i.level+1,n=i.cardNum-this.UpgradeNumber;t.show(o,s,n,e)}}},initCardProgress:function(){var e=this.petData.ID,t=this.petData.level,i=this.petData.cardNum;this.cardNumlabel.string=i+"";var s=function(e){var t=parseInt(e.UpgradeNumber);this.upGradeCardNumLabel.string=t+"",this.UpgradeNumber=t;var o=i/t;o>=1?(this.upGradeTip.active=!0,this.upGradeBtnBox.active=!0,this.spinChestBtnBox.active=!1,this.upGradeTip.active=!0):(this.upGradeBtnBox.active=!1,this.spinChestBtnBox.active=!0,this.upGradeTip.active=!1),this.CardProgressBar.getComponent("cc.ProgressBar").progress=o,this.setBarTexture(o)}.bind(this);o.instance.loadPetData(e,t+1,s)},scheduleCardProgress:function(e){var t=this.petData.ID,i=this.petData.level,s=this.petData.cardNum-e;this.cardNumlabel.string=s+e+"";var n=function(t){var i=parseInt(t.UpgradeNumber);this.upGradeCardNumLabel.string=i+"",this.UpgradeNumber=i;var o=s/i,n=(s+e)/i;n>=1?(this.upGradeTip.active=!0,this.upGradeBtnBox.active=!0,this.spinChestBtnBox.active=!1,this.upGradeTip.active=!0):(this.upGradeBtnBox.active=!1,this.spinChestBtnBox.active=!0,this.upGradeTip.active=!1),this.addProgress(o,n),this.setBarTexture(n)}.bind(this);o.instance.loadPetData(t,i+1,n)},addProgress:function(e,t){var i=this.CardProgressBar.getComponent("cc.ProgressBar");i.progress=e,e<1&&(this.updateProgress=function(){(e+=.01)>=t&&(i.progress=t,this.unschedule(this.updateProgress),this.updateProgress=null),i.progress=e},this.schedule(this.updateProgress,0))},setBarTexture:function(e){var t=this.CardProgressBar.getChildByName("bar").getComponent("cc.Sprite"),i=this.CardProgressBar.getComponent("cc.Sprite"),o="petprogressTwo",s="petprogressOne";e>=1&&(o="bombBarFront",s="bombBarBack");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,n){t.spriteFrame=n.getSpriteFrame(o),i.spriteFrame=n.getSpriteFrame(s)})},showSkillDecription:function(){var e=this.petData.ID,t=this.decriptionBoard.getChildByName("skill"),i=this.decriptionBoard.getChildByName("role"),s=r.Pets_RoleDescription[e],c=function(e){var o=this.petData.level,c=e.Star,r=0;switch(a.GetPetLevelShape(o)){case n.Level1:r=0;break;case n.Level2:r=1;break;case n.Level3:r=2;break;case n.Level4:r=3}var l=this.SkillDecripCNWords[c][r];cc.loader.loadRes("json/CNWord",function(e,o){for(var n=o.json,a=0;a<n.length;a++){var c=n[a];if(c.ID===l){var r=t.getComponent(cc.Label);r.string=c.CN+"",(r=i.getComponent(cc.Label)).string=s}}})}.bind(this);o.instance.loadPetDetailData(e,c)},showSkill:function(){var e=this.petData.ID,t=this.petData.level,i=a.GetPetSkillName(e,t),o=this.skill;this.currentSkillNode&&(this.currentSkillNode.destroy(),this.currentSkillNode=null);var s="prefab/petSkillCell/"+i,n=this;cc.loader.loadRes(s,function(e,t){e&&cc.error(e);var i=cc.instantiate(t);i.scale=1,i.position=cc.v2(-44,-54),i.parent=o,n.currentSkillNode=i})},closeBtn:function(e){var t=function(){this.isFreshed&&this.freshPetsCardnfo(),this.info.removeFromParent()}.bind(this);this.scaleClose(this.node,t),s.instance.setPetData(this.petData)},onBtnUpGrade:function(e){this.levelUp()},onBtnSpinChest:function(e){this.loadSpinChest()},spawnBattleSpinChest:function(e){var t=cc.director.getScene()._children[0],i=cc.instantiate(e);i.active=!0,i.zIndex=10,i.parent=t;var o=i.getChildByName("game").getComponent("SpinChest");o.groupUI="SpinChestUI";var s=function(e){this.fresh(e)}.bind(this);o.closeFunc=s},loadSpinChest:function(){var e=cc.director.getScene(),t=e._children[0],i=cc.instantiate(this.SpinChestPrefab),o=e.name;if(i){i.parent=t;var s=i.getChildByName("game").getComponent("SpinChest");this.UIBaseNode&&"Farm"!==o&&s.replaceUIBase(this.UIBaseNode);var n=function(e){this.fresh(e)}.bind(this);s.closeFunc=n}},loadPet:function(e){var t="spine/pet/";t+=a.getPetFileName(e-1);var i=this;cc.loader.loadRes(t,sp.SkeletonData,function(e,t){e&&cc.error(e);var o=i.pet.addComponent("sp.Skeleton");o.skeletonData=t,o.setAnimation(0,"idle",!0)})}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils",Words:"Words"}],NormalRoleContent:[function(e,t,i){"use strict";cc._RF.push(t,"44b9a+I/45ECpV7v7cKQ1WL","NormalRoleContent");var o=e("JsonData"),s=e("LocalStorage"),n=e("EnumDefine").ActorType,a=e("EnumDefine").RoleShapeLevel,c=e("Utils"),r=e("BaseUI"),l=e("AchieveManager");cc.Class({extends:r,properties:{info:cc.Node,attackLabel:cc.Label,levelLabel:cc.Label,role:sp.Skeleton,roleNamelabel:cc.Label,buyNum:cc.Label,upGradeNode:cc.Node,skill:cc.Node,UIBaseNode:cc.Node,upGradeContentNode:cc.Node,UpGradeGuide:cc.Node,UpGradeDoneGuide:cc.Node,upGradeBtn:cc.Button,progressBar:cc.ProgressBar,bar:cc.Node,stage1:cc.Node,stage2:cc.Node,stage3:cc.Node,stage4:cc.Node,cell1SkeletonData:sp.SkeletonData,cell2SkeletonData:sp.SkeletonData,cell3SkeletonData:sp.SkeletonData,cell4SkeletonData:sp.SkeletonData,cell5SkeletonData:sp.SkeletonData,BaseUINode:cc.Node,AddAttack:cc.Node,AddLevel:cc.Node,audioLevelUp:{type:cc.AudioSource,default:null},Cell:{default:null,type:sp.Skeleton},decriptionBoard:cc.Node,role1:cc.Node,role2:cc.Node,role3:cc.Node,role4:cc.Node,gou1:cc.Node,gou2:cc.Node,gou3:cc.Node,gou4:cc.Node,link1:cc.Node,link2:cc.Node,link3:cc.Node,link4:cc.Node},ctor:function(){this.maxlevel=120,this.roletype=0,this.lock=!1,this.levelUpCoin=0},onLoad:function(){this.uibase=this.UIBaseNode.getComponent("UIBase"),this.upGradeContentNode.active=!1,this.scaleShow(this.node);var e=this.stage1.getChildByName("level"),t=e.getComponent("cc.Label");this.levellabel1=t,t=(e=this.stage2.getChildByName("level")).getComponent("cc.Label"),this.levellabel2=t,t=(e=this.stage3.getChildByName("level")).getComponent("cc.Label"),this.levellabel3=t,t=(e=this.stage4.getChildByName("level")).getComponent("cc.Label"),this.levellabel4=t,this.levellabel1.string=a.Level1+"",this.levellabel2.string=a.Level2+"",this.levellabel3.string=a.Level3+"",this.levellabel4.string=a.Level4+"",this.UpGradeGuide.active=!1,this.UpGradeDoneGuide.active=!1},start:function(){if(s.instance.getUpGradeRoleGuide());else{var e=this.UpGradeGuide;e.active=!0;var t=e.getComponent("TouchGuide");if(t){var i=function(){s.instance.setUpGradeRoleGuide(!0);var e=function(){this.levelUp()}.bind(this);this.scaleShow(this.upGradeBtn.node,e)}.bind(this);t.show("",i)}}},visibleBaseUI:function(e){this.UIBaseNode&&(this.UIBaseNode.active=e)},replaceUIBaseNode:function(e){this.visibleBaseUI(!1),this.UIBaseNode=e,this.uibase=this.UIBaseNode.getComponent("UIBase")},show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.closeFunc=t,this.roletype=e;var i=s.instance.getRoleData(e);this.roleData=i;var a=this;switch(o.instance.loadRoleUpgradeData(this.roletype+1,this.roleData.level,function(e){a.updateInfo(e)}),this.roleNamelabel.string=c.getRoleName(e),this.roleData.level>=this.maxlevel&&(this.upGradeNode.active=!1),e){case n.Actor1:this.Cell.skeletonData=this.cell1SkeletonData;var r=cc.color(228,85,65,255),l=cc.color(231,103,103,255);this.initStageNodes(r,l);break;case n.Actor2:this.Cell.skeletonData=this.cell2SkeletonData;var h=cc.color(97,29,218,255),u=cc.color(99,83,218,255);this.initStageNodes(h,u);break;case n.Actor3:this.Cell.skeletonData=this.cell3SkeletonData;var d=cc.color(223,129,27,255),p=cc.color(226,157,81,255);this.initStageNodes(d,p);break;case n.Actor4:this.Cell.skeletonData=this.cell4SkeletonData;var v=cc.color(73,233,51,255),f=cc.color(144,233,148,255);this.initStageNodes(v,f);break;case n.Actor5:this.Cell.skeletonData=this.cell5SkeletonData;var m=cc.color(211,84,235,255),g=cc.color(206,133,230,255);this.initStageNodes(m,g)}var C=this.roleData.level;this.createCurrentSkillNode(e,C),this.initDescriptionCNWord(),this.darknode(!1)},initStageNodes:function(e,t){this.stage1.color=e,this.stage2.color=e,this.stage3.color=e,this.stage4.color=e,this.bar.color=t},updateInfo:function(e){if(e){this.levelLabel.string=e.level+"",this.attackLabel.string=e.attack+"";var t=e.level;if(t<this.maxlevel){var i=this;o.instance.loadRoleUpgradeData(this.roletype+1,t+1,function(e){i.buyNum.string=e.upgradecoin+"",i.levelUpCoin=parseInt(e.upgradecoin)})}this.initRole(),this.upDateProgressBar()}},upDateProgressBar:function(){var e=100*this.roleData.level/this.maxlevel/100;this.progressBar.progress=e},initRole:function(){var e=this.roletype,t=this.role,i=c.getActorSpineName(e,this.roleData.level);this.loadRole(t,i,!0),this.loadRoles(e);var o=this.roleData.level;o<a.Level2?(this.role2.color=cc.Color.BLACK,this.role3.color=cc.Color.BLACK,this.role4.color=cc.Color.BLACK,this.link1.active=!1,this.link2.active=!0,this.link3.active=!0,this.link4.active=!0,this.gou1.active=!0,this.gou2.active=!1,this.gou3.active=!1,this.gou4.active=!1):o>=a.Level2&&o<a.Level3?(this.role2.color=cc.Color.WHITE,this.role3.color=cc.Color.BLACK,this.role4.color=cc.Color.BLACK,this.link1.active=!1,this.link2.active=!1,this.link3.active=!0,this.link4.active=!0,this.gou1.active=!0,this.gou2.active=!0,this.gou3.active=!1,this.gou4.active=!1):o>=a.Level3&&o<a.Level4?(this.role2.color=cc.Color.WHITE,this.role3.color=cc.Color.WHITE,this.role4.color=cc.Color.BLACK,this.link1.active=!1,this.link2.active=!1,this.link3.active=!1,this.link4.active=!0,this.gou1.active=!0,this.gou2.active=!0,this.gou3.active=!0,this.gou4.active=!1):o>=a.Level4&&(this.role2.color=cc.Color.WHITE,this.role3.color=cc.Color.WHITE,this.role4.color=cc.Color.WHITE,this.link1.active=!1,this.link2.active=!1,this.link3.active=!1,this.link4.active=!1,this.gou1.active=!0,this.gou2.active=!0,this.gou3.active=!0,this.gou4.active=!0)},loadRoles:function(e){var t=c.getActorSpineName(e,a.Level1);this.loadRole(this.role1,t),t=c.getActorSpineName(e,a.Level2),this.loadRole(this.role2,t),t=c.getActorSpineName(e,a.Level3),this.loadRole(this.role3,t),t=c.getActorSpineName(e,a.Level4),this.loadRole(this.role4,t)},loadRole:function(e,t,i){var o="spine/actor/"+t,s=e.getComponent("sp.Skeleton");cc.loader.loadRes(o,sp.SkeletonData,function(e,t){e&&cc.error(e),s.skeletonData=t,i&&s.setAnimation(0,"idle",!0)})},spawnAddAttack:function(e){var t=cc.instantiate(this.AddAttack);t.getChildByName("num").getComponent(cc.Label).string=e+"",t.active=!0,t.zIndex=10,t.scale=0,t.group=this.uibase.node.group;var i=this.node;t.parent=i,t.position=cc.v2(0,100);var o=cc.scaleTo(.7,2).easing(cc.easeIn(4)),s=cc.moveBy(.7,cc.v2(0,100)).easing(cc.easeIn(3)),n=cc.spawn(o,s),a=cc.scaleTo(.7,0).easing(cc.easeOut(4)),c=cc.moveBy(.7,cc.v2(0,200)).easing(cc.easeOut(3)),r=cc.spawn(a,c),l=cc.sequence(n,r,cc.removeSelf());t.runAction(l)},spawnAddlevel:function(){var e=cc.instantiate(this.AddLevel);e.active=!0,e.zIndex=10,e.group=this.uibase.node.group,e.scale=0;var t=this.node;e.parent=t,e.position=cc.v2(0,100);var i=cc.scaleTo(.7,2).easing(cc.easeIn(4)),o=cc.moveBy(.7,cc.v2(0,100)).easing(cc.easeIn(3)),s=cc.spawn(i,o),n=cc.scaleTo(.7,0).easing(cc.easeOut(4)),a=cc.moveBy(.7,cc.v2(0,200)).easing(cc.easeOut(3)),c=cc.spawn(n,a),r=cc.sequence(s,c,cc.removeSelf());e.runAction(r)},levelUp:function(){var e=this.roletype;if(this.roleData.level>this.maxlevel)this.upGradeNode.active=!1;else if(this.checkCoin(this.levelUpCoin)){var t=this;o.instance.loadRoleUpgradeData(e+1,this.roleData.level+1,function(i){if(i){var o={};o.roletype=e,o.level=i.level,o.attack=i.attack,s.instance.setRoleData(o);var n=Math.abs(i.attack-t.roleData.attack),c=Math.abs(i.level-t.roleData.level);t.roleData=o,t.upDateProgressBar(),t.levelLabel.string=i.level+"",t.attackLabel.string=i.attack+"";var r=t.levelLabel.node,h=cc.v2(0,0);t.showflashEffect(r,h),r=t.attackLabel.node,h=cc.v2(0,0),t.showflashEffect(r,h),t.buyNum.string=i.upgradecoin+"",t.levelUpCoin=parseInt(i.upgradecoin),t.audioLevelUp.play();var u=i.level;if(l.instance.checkUpGradeRoleLevel(i.level),u>=t.maxlevel&&(t.upGradeNode.active=!1),u===a.Level2)t.roleShapeUpdate(o),t.loadRoles(e),t.role1.color=cc.Color.WHITE,t.role2.color=cc.Color.WHITE,t.role3.color=cc.Color.BLACK,t.role4.color=cc.Color.BLACK,t.link1.active=!1,t.link2.active=!1,t.link3.active=!0,t.link4.active=!0,t.gou1.active=!0,t.gou2.active=!0,t.gou3.active=!1,t.gou4.active=!1,t.unlockSkill(t.roletype,t.roleData.level);else if(u===a.Level3)t.roleShapeUpdate(o),t.role1.color=cc.Color.WHITE,t.role2.color=cc.Color.WHITE,t.role3.color=cc.Color.WHITE,t.role4.color=cc.Color.BLACK,t.link1.active=!1,t.link2.active=!1,t.link3.active=!1,t.link4.active=!0,t.gou1.active=!0,t.gou2.active=!0,t.gou3.active=!0,t.gou4.active=!1,t.unlockSkill(t.roletype,t.roleData.level);else if(u===a.Level4)t.roleShapeUpdate(o),t.role1.color=cc.Color.WHITE,t.role2.color=cc.Color.WHITE,t.role3.color=cc.Color.WHITE,t.role4.color=cc.Color.WHITE,t.link1.active=!1,t.link2.active=!1,t.link3.active=!1,t.link4.active=!1,t.gou1.active=!0,t.gou2.active=!0,t.gou3.active=!0,t.gou4.active=!0,t.unlockSkill(t.roletype,t.roleData.level);else{var d=[],p=cc.callFunc(function(){t.spawnAddAttack(n)},this),v=cc.callFunc(function(){t.spawnAddlevel(c)},this);d.push(p),d.push(cc.delayTime(.2)),d.push(v),t.node.runAction(cc.sequence(d))}}})}else this.uibase.onBtnAddCoinClicked()},checkCoin:function(e){var t=!1;this.uibase&&(this.uibase.getCoinNum()>=e&&(t=!0,this.uibase.updateCoin(-e)));return t},showflashEffect:function(e,t){cc.loader.loadRes("prefab/particle/starDust",function(i,o){var s=cc.instantiate(o);s.active=!0,s.zIndex=10,s.scale=2,s.parent=e,s.position=t,s.runAction(cc.sequence(cc.delayTime(2),cc.removeSelf()))})},scaleUp:function(e){if(!(e.getNumberOfRunningActions()>0)){var t=e.scale,i=cc.scaleTo(.25,1.2*t,1.2*t).easing(cc.easeOut(3)),o=cc.scaleTo(.25,1*t,1*t).easing(cc.easeOut(3)),s=cc.sequence(i,o);e.runAction(s)}},unlockSkill:function(e,t){this.createCurrentSkillNode(e,t)},createCurrentSkillNode:function(e,t){this.currentSkillNode&&(this.currentSkillNode.destroy(),this.currentSkillNode=null);var i=c.GetRoleSkillName(e,t),o=this.skill,s=cc.v2(-44,-64),n="prefab/roleSkillcell/";n+=i;var a=this;cc.loader.loadRes(n,function(e,t){e&&cc.error(e);var i=cc.instantiate(t);i.parent=o,i.scale=1,i.position=s,a.currentSkillNode=i})},initDescriptionCNWord:function(){var e=this.decriptionBoard.getChildByName("skill"),t=this.decriptionBoard.getChildByName("role"),i=this.roleData.level,o=0;switch(c.GetRoleLevelShape(i)){case a.Level1:o=0;break;case a.Level2:o=1;break;case a.Level3:o=2;break;case a.Level4:o=3}var s={0:[50,51,52,53],1:[60,61,62,63],2:[70,71,72,73],3:[80,81,82,83],4:[90,91,92,93]}[this.roletype][o],n={0:[100],1:[101],2:[102],3:[103],4:[104]}[this.roletype][0];cc.loader.loadRes("json/CNWord",function(i,o){for(var a=o.json,c=0;c<a.length;c++){var r=a[c];if(r.ID===s)e.getComponent(cc.Label).string=r.CN+"";if(r.ID===n)t.getComponent(cc.Label).string=r.CN+""}})},upGradeDone:function(){var e=function(){var e=this.roleData.roletype,t=this.roleData.level,i=c.getActorSpineName(e,t);this.loadRole(this.role,i,!0)}.bind(this);this.scaleShow(this.node,e)},roleShapeUpdate:function(e){var t=function(){this.upGradeDone(),this.UIBaseNode.active=!0}.bind(this);this.UIBaseNode.active=!1,this.node.active=!1,this.upGradeContentNode.active=!0;var i=this.upGradeContentNode.getComponent("UpGradeRoleContent");i&&i.show(e,t)},darknode:function(e){e?(this.role.color=cc.Color.BLACK,this.role1.color=cc.Color.BLACK):(this.role.color=cc.Color.WHITE,this.role1.color=cc.Color.WHITE)},onBtnUpdate:function(){this.levelUp()},onBtnClose:function(){var e=this,t=this.node.scale,i=cc.scaleTo(.1,1.1*t).easing(cc.easeBounceInOut()),o=cc.scaleTo(.1,0).easing(cc.easeBounceInOut()),s=cc.callFunc(function(){e.closeFunc&&e.closeFunc(),e.info.removeFromParent()},this),n=cc.sequence(i,o,s);this.node.runAction(n)}}),cc._RF.pop()},{AchieveManager:"AchieveManager",BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],OpenSdk:[function(e,t,i){"use strict";cc._RF.push(t,"720b4C8a6JEQbREItluKd8e","OpenSdk");var o=cc.Class({extends:cc.Component,properties:{},statics:{instance:null},onLoad:function(){o.instance=this},start:function(){},showVideo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&e()},hideBanner:function(){},showBanner:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]},showInterstitial:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]}});cc._RF.pop()},{}],PageViewCtrl:[function(e,t,i){"use strict";cc._RF.push(t,"becf9ZpBi5KG43ard9opUPT","PageViewCtrl");e("JsonData"),e("LocalStorage");var o=e("EnumDefine").ActorType;e("Utils");cc.Class({extends:cc.Component,properties:{curNum:3,curTotal:10,pageTeample:cc.Prefab,target:cc.PageView,label:cc.Label,Actor1WeaponNode:cc.Node,Actor2WeaponNode:cc.Node,Actor3WeaponNode:cc.Node,Actor4WeaponNode:cc.Node,Actor5WeaponNode:cc.Node,bk:cc.Node,slidL:cc.Button,slidR:cc.Button},_createPage:function(){var e=cc.instantiate(this.pageTeample);e.position=new cc.v2(0,0);var t=new cc.Color;return t.r=Math.floor(255*Math.random()),t.g=Math.floor(255*Math.random()),t.b=Math.floor(255*Math.random()),e.color=t,e},onLoad:function(){this.target.setCurrentPageIndex(0),this.initPageContent(),this.slidL.node.active=!1,this.slidR.node.active=!0},onJumpHome:function(){this.target.scrollToPage(0)},plusPage:function(e){this.curNum>this.curTotal||(this.curNum++,e&&e())},lessPageNum:function(e){this.curNum<=0||(this.curNum--,e&&e())},onAddPage:function(){var e=this;this.plusPage(function(){e.target.addPage(e._createPage())})},onInsertPage:function(){var e=this;this.plusPage(function(){e.target.insertPage(e._createPage(),e.target.getCurrentPageIndex())})},onRemovePage:function(){var e=this;this.lessPageNum(function(){var t=e.target.getPages();e.target.removePage(t[t.length-1])})},onRemovePageAtIndex:function(){var e=this;this.lessPageNum(function(){e.target.removePageAtIndex(e.target.getCurrentPageIndex())})},onRemoveAllPage:function(){this.target.removeAllPages(),this.curNum=0},onPageEvent:function(e,t){if(t===cc.PageView.EventType.PAGE_TURNING){var i=e.getCurrentPageIndex();switch(console.log("\u5f53\u524d\u6240\u5728\u7684\u9875\u9762\u7d22\u5f15:"+i),i){case 0:this.showActor1(!1),this.slidL.node.active=!1,this.slidR.node.active=!0;break;case 1:this.showActor2(!1),this.slidL.node.active=!0,this.slidR.node.active=!0;break;case 2:this.showActor3(!1),this.slidL.node.active=!0,this.slidR.node.active=!0;break;case 3:this.showActor4(!1),this.slidL.node.active=!0,this.slidR.node.active=!0;break;case 4:this.showActor5(!1),this.slidL.node.active=!0,this.slidR.node.active=!1}}},showActor1:function(e){this.Actor1WeaponNode.getChildByName("link").active=e,this.Actor2WeaponNode.getChildByName("link").active=!e,this.Actor3WeaponNode.getChildByName("link").active=!e,this.Actor4WeaponNode.getChildByName("link").active=!e,this.Actor5WeaponNode.getChildByName("link").active=!e},showActor2:function(e){this.Actor1WeaponNode.getChildByName("link").active=!e,this.Actor2WeaponNode.getChildByName("link").active=e,this.Actor3WeaponNode.getChildByName("link").active=!e,this.Actor4WeaponNode.getChildByName("link").active=!e,this.Actor5WeaponNode.getChildByName("link").active=!e},showActor3:function(e){this.Actor1WeaponNode.getChildByName("link").active=!e,this.Actor2WeaponNode.getChildByName("link").active=!e,this.Actor3WeaponNode.getChildByName("link").active=e,this.Actor4WeaponNode.getChildByName("link").active=!e,this.Actor5WeaponNode.getChildByName("link").active=!e},showActor4:function(e){this.Actor1WeaponNode.getChildByName("link").active=!e,this.Actor2WeaponNode.getChildByName("link").active=!e,this.Actor3WeaponNode.getChildByName("link").active=!e,this.Actor4WeaponNode.getChildByName("link").active=e,this.Actor5WeaponNode.getChildByName("link").active=!e},showActor5:function(e){this.Actor1WeaponNode.getChildByName("link").active=!e,this.Actor2WeaponNode.getChildByName("link").active=!e,this.Actor3WeaponNode.getChildByName("link").active=!e,this.Actor4WeaponNode.getChildByName("link").active=!e,this.Actor5WeaponNode.getChildByName("link").active=e},slidLFunc:function(){var e=this.target.getCurrentPageIndex();(e-=1)<0&&(e=0),this.target.scrollToPage(e)},slidRFunc:function(){var e=this.target.getCurrentPageIndex();e+=1;var t=this.target.getPages();e>t.length-1&&(e=t.length-1),this.target.scrollToPage(e)},initPageContent:function(){for(var e=this.target.getPages(),t=[o.Actor1,o.Actor4,o.Actor3,o.Actor2,o.Actor5],i=0;i<e.length;i++){var s=e[i].getComponent("RoleAndPets"),n=t[i];s.init(n)}this.showActor1(!1)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PauseUI:[function(e,t,i){"use strict";cc._RF.push(t,"14b29mOORpG96+c5zlMwi56","PauseUI");e("RPGManager");var o=e("Game"),s=e("Utils"),n=e("BaseUI");cc.Class({extends:n,properties:{},onLoad:function(){this.node.scale=1;var e=function(){o.instance.pauseAudio()}.bind(this);this.scaleShow(this.node,e)},start:function(){},onBtnResumeClicked:function(e){var t=function(){o.instance.resumeAudio(),this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t);var i=s.fightSceneAudioID;cc.audioEngine.resume(i)},onBtnBackToMapClicked:function(e){var t=function(){cc.director.loadScene("Map")}.bind(this);this.scaleClose(this.node,t);var i=s.fightSceneAudioID;cc.audioEngine.stop(i),s.fightSceneAudioID=-1}}),cc._RF.pop()},{BaseUI:"BaseUI",Game:"Game",RPGManager:"RPGManager",Utils:"Utils"}],PetCardInfo:[function(e,t,i){"use strict";cc._RF.push(t,"2d9f5cxu4hB1Ii63yF7crUv","PetCardInfo");var o=e("EnumDefine").EnterKind,s=e("BaseUI");cc.Class({extends:s,properties:{NormalContentNode:cc.Node,UpGradeContentNode:cc.Node},ctor:function(){this.enter=o.UnKnown},onLoad:function(){this.NormalContentNode.active=!0,this.UpGradeContentNode.active=!1;var e=this.NormalContentNode.getComponent("NormalPetContent");this.func=e},replaceUIBaseNode:function(e){this.func.replaceUIBaseNode(e)},visibleBaseUI:function(){this.func.visibleBaseUI()},setRoleAndPets:function(e){this.RoleAndPets=e},show:function(e,t){this.enter=t,this.func.show(e,t)},freshPet:function(e){var t=cc.director.getScene()._children[0].getChildByName("ActorUI");if(t){var i=t.getComponent("ActorUI");i&&i.freshPet(e)}}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine"}],PetCard:[function(e,t,i){"use strict";cc._RF.push(t,"2881be9OINO3JbsPC6eYthH","PetCard");var o=e("Utils"),s=e("LocalStorage"),n=e("JsonData"),a=e("EnumDefine").EnterKind;cc.Class({extends:cc.Component,properties:{nameBk:cc.Sprite,cardBk:cc.Sprite,cardRole:cc.Sprite,star:cc.Sprite,petName:cc.Label,cardProgressBar:cc.ProgressBar,spinlabel:cc.Label,curlabel:cc.Label,upgradelabel:cc.Label,attacklabel:cc.Label,Tip:cc.Node,spinBox:cc.Node,line:cc.Sprite,touchBox:cc.Node,handGuide:cc.Node,newNode:cc.Node,attackNode:cc.Node},onLoad:function(){this.Tip.active=!1,this.line.node.active=!1,this.handGuide.active=!1,this.newNode.active=!1,this.maxlevel=4,this.cardProgressBar.progress=0,this.blockClick=!1},start:function(){},registerTouch:function(){var e=this.touchBox;e.on(cc.Node.EventType.TOUCH_START,function(e){this.touchBegin(e)},this),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){this.touchMove(e)},this),e.on(cc.Node.EventType.TOUCH_END,function(e){this.touchEnd(e)},this),e.on(cc.Node.EventType.TOUCH_CANCEL,function(e){this.touchEnd(e)},this)},touchBegin:function(e){var t=e.getTouches()[0].getLocation();this.startpos=t,this.touchBeginClick&&this.touchBeginClick()},touchMove:function(e){},touchEnd:function(e){var t=e.getTouches()[0].getLocation(),i=this.startpos;Math.abs(t.x-i.x);t.y-i.y>=20&&t.y>i.y?(this.swipeCallback&&this.swipeCallback(this.node,this.ID),this.swipeClick&&this.swipeClick()):this.touchEndClick&&this.touchEndClick()},showNew:function(){var e=this.newNode;e.active=!0;var t=e.scale,i=cc.scaleTo(.1,1.2*t).easing(cc.easeBounceInOut()),o=cc.scaleTo(.1,1*t).easing(cc.easeBounceInOut()),s=cc.callFunc(function(){var t=e.getComponent(cc.Animation).play();t.wrapMode=cc.WrapMode.Normal,t.speed=.6},this),n=cc.sequence(i,o,s,null);e.runAction(n)},init:function(e,t,i){this.swipeCallback=i,this.ID=e;var s=!1;t||(s=!0),this.lock=s;var n=o.GetPetChinaName(e-1);if(this.petName.string=n,this.spinBox.active=!1,s){this.showBar(!1),this.star.setState(cc.Sprite.State.GRAY),this.cardProgressBar.node.active=!1;var a=this,c=o.getGhostPetFileName(e-1);cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame(c);a.cardRole.spriteFrame=i})}else this.nameBk.node.active=!0,this.showBar(!0),this.initCard(t)},showTouchGuide:function(){if(!this.lock&&(1===this.ID&&!s.instance.getTouchPetGuide())){this.handGuide.active=!0;var e=this.handGuide.getComponent(cc.Animation).play();e.wrapMode=cc.WrapMode.Loop,e.speed=.2}},clickShow:function(){this.lock||this.blockClick||(!0===this.handGuide.active&&(this.handGuide.active=!1,s.instance.setTouchPetGuide(!0)),this.showPetInfo())},onEnable:function(){},onDisable:function(){},showPetInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=cc.director.getScene()._children[0],i=this.ID;"Farm"===cc.director.getScene().name&&(e="UI"),cc.loader.loadRes("prefab/ActorUI/PetCardInfo",function(o,s){var n=cc.instantiate(s);n.active=!0,n.scale=1,n.group=e,n.parent=t,n.position=cc.v2(0,0);var c=n.getComponent("PetCardInfo");c.visibleBaseUI(),c.show(i,a.ActorUI)})},showCards:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){i?this.showNew():this.newNode.active=!1,this.spinlabel.string=t+"",this.spinBox.active=!0,this.petData=e;var s=e.ID,a=e.level,c=e.attack,r=e.cardNum-t;this.curlabel.string=r+ +t+"",this.attacklabel.string=c+"";var l=!1;a>=this.maxlevel&&(a=this.maxlevel,l=!0);var h=function(e){var i=parseInt(e.UpgradeNumber);this.upgradelabel.string=i+"";var o=r/i,s=(t+r)/i;this.Tip.active=s>=1;this.addProgress(o,s,!0)}.bind(this);n.instance.loadPetData(s,a+1,h),this.cardProgressBar.node.active=!l;var u=o.GetPetSkillName(s,a),d=this.node;this.showCurSkill(d,u);var p=o.GetPetChinaName(s-1);this.petName.string=p,this.showPet(s)}},fresh:function(e){this.initCard(e)},initCard:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){this.cardProgressBar.progress=0,this.petData=e;var i=e.ID,s=e.level,a=e.attack,c=e.cardNum;this.curlabel.string=c+"",this.attacklabel.string=a+"";var r=s+1,l=!1;r>=this.maxlevel&&(r=this.maxlevel,l=!0);var h=function(e){var i=parseInt(e.UpgradeNumber);this.upgradelabel.string=i+"";var o=c/i;this.Tip.active=o>=1;var s=o;this.addProgress(0,s,t)}.bind(this);n.instance.loadPetData(i,r,h),this.cardProgressBar.node.active=!l;var u=o.GetPetSkillName(i,s),d=this.node;this.showCurSkill(d,u);var p=o.GetPetChinaName(i-1);this.petName.string=p,this.showPet(i)}},addProgress:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.cardProgressBar.node,s=o.getChildByName("bar").getComponent("cc.Sprite"),n=o.getComponent("cc.Sprite"),a="petprogressTwo",c="petprogressOne";t>=1&&(a="bombBarFront",c="bombBarBack"),this.cardProgressBar.progress=e;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){s.spriteFrame=t.getSpriteFrame(a),n.spriteFrame=t.getSpriteFrame(c)}),this.cardProgressBar.progress<1&&(i?(this.updateProgress=function(){((e+=.01)>=t||this.cardProgressBar.progress>=1)&&(this.cardProgressBar.progress=1,this.unschedule(this.updateProgress),this.updateProgress=null),this.cardProgressBar.progress=e},this.schedule(this.updateProgress,0)):this.cardProgressBar.progress=t)},showCurSkill:function(e,t){var i="prefab/petSkillCell/"+t,o=this;cc.loader.loadRes(i,function(t,i){t&&cc.error(t);var s=cc.instantiate(i);s.scale=.4,s.position=cc.v2(30,49),s.parent=e,o.skillCell&&(o.skillCell.removeFromParent(),o.skillCell=null),o.skillCell=s})},showPet:function(e,t){var i=this.cardRole,s=o.getPetFileName(e-1);cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,o){var n=o.getSpriteFrame(s);i.spriteFrame=n,t&&t()})},showBar:function(e){this.cardProgressBar.node.active=e,this.attackNode.active=e},showNewFlag:function(e){this.newNode.active=e},setColor:function(e){var t=this.node.getChildByName("bk");t&&(t.color=e)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PetExtraction:[function(e,t,i){"use strict";cc._RF.push(t,"038fb+7eZtIDrSYU55D3JcZ","PetExtraction");var o=e("JsonData"),s=e("LocalStorage"),n=(e("EnumDefine").ActorType,e("Utils")),a=e("BaseUI");cc.Class({extends:a,properties:{grass1:cc.Node,grass2:cc.Node,grass3:cc.Node,extractionBk:cc.Node,glare:cc.Node,midBk:cc.Node,audioSpin:{type:cc.AudioSource,default:null}},ctor:function(){this._callback=null,this.spinLevel=0,this.spinID=-1},onLoad:function(){this.isSpin=!0,this.registerTouch(),this.scaleShow(this.node,null)},spin:function(e,t){var i=this;this.spinLevel=e,this._callback=t,this.glare.active=!1;var o=cc.moveTo(0,cc.v2(0,0)).easing(cc.easeOut(3)),s=cc.callFunc(function(){i.grassShakes()},this);this.midBk.runAction(cc.sequence(o,s))},start:function(){},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(e){},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd()},e)},touchEnd:function(){if(!this.isSpin){var e=function(){this._callback&&this._callback(this.spinID),this.node.removeFromParent()}.bind(this);this.scaleShow(this.node,e)}},grassShakes:function(){var e=this,t=cc.callFunc(function(){e.grassShake(e.grass1)},this),i=cc.callFunc(function(){e.grassShake(e.grass2)},this),o=cc.callFunc(function(){e.grassShake(e.grass3)},this),s=cc.callFunc(function(){var t=cc.moveBy(.2,cc.v2(.6*-e.grass1.width,0)).easing(cc.easeOut(3));e.grass1.runAction(t),t=cc.moveBy(.2,cc.v2(.6*e.grass1.width,0)).easing(cc.easeOut(3)),e.grass2.runAction(t),t=cc.moveBy(.2,cc.v2(.6*-e.grass1.width,0)).easing(cc.easeOut(3)),e.grass3.runAction(t)},this),n=cc.callFunc(function(){e.spinPet(e.spinLevel)},this),a=cc.callFunc(function(){},this),c=cc.sequence(t,cc.delayTime(.2),i,cc.delayTime(.2),o,cc.delayTime(.2),s,cc.delayTime(.2),n,cc.delayTime(.2),a);this.node.runAction(c)},grassShake:function(e){var t=cc.scaleTo(.2,1.2,1.2).easing(cc.easeBounceInOut()),i=cc.scaleTo(.2,1,1).easing(cc.easeBounceInOut()),o=cc.sequence(t,i),s=cc.jumpBy(.2,cc.v2(0,0),20,1).easing(cc.easeOut(3)),n=cc.jumpBy(.2,cc.v2(0,0),-20,1).easing(cc.easeOut(3)),a=cc.jumpBy(.2,cc.v2(0,0),16,1).easing(cc.easeOut(3)),c=cc.jumpBy(.2,cc.v2(0,0),-16,1).easing(cc.easeOut(3)),r=cc.sequence(s,n,a,c),l=cc.spawn(o,r);e.runAction(l)},spinPet:function(e){var t="A";if(0==e){var i=n.computeSpin([0,20,80]);t=0==i?"S":1==i?"A":"B"}else if(1==e){var s=n.computeSpin([40,60,0]);t=0==s?"S":1==s?"A":"B"}var a=[],c=this;o.instance.loadPetDetailDatas(function(e){for(var i in e)e[i].Star==t&&a.push(e[i]);if(a.length>0){var o=n.randomRangeInt(0,a.length),s=a[o].ID;c.petBorn(s)}})},petBorn:function(e){this.audioSpin.play(),this.writeData(e),this.spinID=e;var t="spine/pet/";t+=n.getPetFileName(e-1);var i=this,o=i.glare;cc.loader.loadRes(t,sp.SkeletonData,function(e,t){e&&cc.error(e),o.active=!0;var s=cc.repeatForever(cc.rotateBy(3,360));o.runAction(s);var a=new cc.Node,c=a.addComponent("sp.Skeleton");c.skeletonData=t,a.parent=i.midBk,a.position=o.position,a.scale=2,(c=a.getComponent("sp.Skeleton")).setAnimation(0,"idle",!0);var r=[cc.v2(-n.randomRange(20,30),n.randomRange(100,200)/8),cc.v2(-n.randomRange(20,30),n.randomRange(100,200)/8),cc.v2(0,-n.randomRange(.4*i.extractionBk.height,.6*i.extractionBk.height)/4)],l=cc.bezierBy(.2,r),h=cc.callFunc(function(){var e=cc.jumpBy(.5,cc.v2(0,0),10,1).easing(cc.easeOut(2)),t=cc.jumpBy(.5,cc.v2(0,0),-10,1).easing(cc.easeOut(2));a.runAction(cc.sequence(e,t))}),u=cc.callFunc(function(){i.isSpin=!1},i);a.runAction(cc.sequence(l,h,cc.delayTime(.4),u))})},writeData:function(e){var t=s.instance.getPetData(e);t?t.num+=1:((t={}).level=1,t.ID=e,t.num=1,t.star="A",t.attack=0),o.instance.loadPetDatas(function(i){for(var o=0;o<i.length;o++){var n=i[o];if(parseInt(n.ID)==e&&parseInt(n.UpgradeNumber)>t.num){t.level=parseInt(n.Level)-2;break}}for(var a=0;a<i.length;a++){var c=i[a];parseInt(c.ID)==t.ID&&parseInt(c.Level)==t.level&&(t.attack=parseInt(c.Attack))}s.instance.setPetData(t)})}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PetItem:[function(e,t,i){"use strict";cc._RF.push(t,"f32bcte80NDwbm3k7FgqcXY","PetItem");var o=e("Utils");e("LocalStorage"),e("JsonData");cc.Class({extends:cc.Component,properties:{pet:sp.Skeleton,petName:cc.Label,Star:cc.Node},onLoad:function(){},start:function(){},init:function(e,t){this.petID=e;var i=!1;t||(i=!0);var s=o.GetPetChinaName(e-1);this.petName.string=s;var n="spine/pet/";n+=o.getPetFileName(e-1);var a=this.pet;this.Star.active=!1;cc.loader.loadRes(n,sp.SkeletonData,function(e,t){e&&cc.error(e),a.skeletonData=t,i?a.node.color=cc.color(0,0,0,255):a.setAnimation(0,"idle",!0)})}}),cc._RF.pop()},{JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PetRPG:[function(e,t,i){"use strict";var o;function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}cc._RF.push(t,"39306XaBfNOxYpDH9wGgnXW","PetRPG");var n=e("RPGManager"),a=e("JsonData"),c=e("EnumDefine").PetShapeLevel,r=e("PoolMng"),l=e("Board"),h=e("PlayFightAudio");cc.v2();cc.Class((s(o={extends:cc.Component,properties:{},ctor:function(){this.skillID=-1,this.petData={},this.celllist=[],this._fireDelay=.25,this._startFire=!1,this.skeleton=null},onLoad:function(){this.nodeScale=2,this.skeleton=this.node.getComponent(sp.Skeleton)},setData:function(e){this.petData=e,this.oldNodeScale=this.node.scale;var t=function(e){this.petData.attack=parseInt(e.Attack)}.bind(this);a.instance.loadPetData(this.petData.ID,this.petData.level,t)},start:function(){},onDisable:function(){},setAntiAliasTexParameters:function(){this.skeleton&&this.skeleton.skeletonData.textures[0].setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR)},IsAttack:function(){return this._startFire}},"start",function(){}),s(o,"pushCell",function(e){this.celllist.push(e)}),s(o,"petskillHurt",function(e,t,i){if(t){var o=t.getComponent("Monster");if(o){o.hurt(e,function(e){i&&i(e)})}}}),s(o,"skillAttack",function(e,t,i){var o=n.instance.getMonster();if(o){var s=this.petData.attack,a=o.parent,c=cc.v2(o.x,o.y);c.y+=.2*o.height,c.x+=t.x,c.y+=t.y;var r="prefab/skill/";r+=e;var l=this;cc.loader.loadRes(r,function(e,t){e&&cc.error(e);var r=cc.instantiate(t);r.zIndex=3,r.parent=a,r.position=c,h.instance.playPetattack2(),n.instance.shake();var u=r.getComponent("PetSkill");if(u){var d=function(e){i&&i()}.bind(l);u.play(function(){l.petskillHurt(s,o,d),r.removeFromParent()})}})}else i&&i()}),s(o,"getShootCnt",function(e){var t=1;switch(Utils.GetPetLevelShape(e)){case c.Level1:t=1;break;case c.Level2:t=2;break;case c.Level3:t=3;break;case c.Level4:t=4}return t}),s(o,"showWhiteBombAttack",function(e,t){var i=cc.v2(-250,0);this.skillAttack("skillA6",i,t)}),s(o,"showGreenBombAttacks",function(e,t){var i=cc.v2(-10,50);this.skillAttack("skillA1",i,t)}),s(o,"showYellowBombAttacks",function(e,t){var i=cc.v2(-10,50);this.skillAttack("skillA2",i,t)}),s(o,"showRedAttacks",function(e,t){var i=cc.v2(-250,0);this.skillAttack("skillA4",i,t)}),s(o,"showZiSeAttacks",function(e,t){var i=cc.v2(-100,30);this.skillAttack("skillA3",i,t)}),s(o,"rushAnimals",function(e){var t=cc.v2();n.instance.getActorCenterPos(t),t.x-=300;var i=n.instance.actorlist[0].parent,o=this.petData.attack;cc.loader.loadRes("prefab/rushAnimals/pig",function(s,n){s&&cc.error(s);var a=cc.instantiate(n);a.parent=i,a.zIndex=10,a.group=i.group,a.position=t,a.getComponent("Pig").rush(o,e)})}),s(o,"shootArrows",function(e,t){this.shootArrow(t)}),s(o,"shootArrow",function(e){var t=n.instance.getMonster();if(t){var i=this,o=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/petBullet/arrow",function(s,n){s&&cc.error(s);var a=cc.instantiate(n),c=o;a.parent=c,a.zIndex=10,a.group="UI";var r=i.node.parent.convertToWorldSpaceAR(i.node.position);r=c.convertToNodeSpaceAR(r),a.position=r;var l=i.petData.attack,h=t.getComponent("Monster").getWorldPos(),u=(h=c.convertToNodeSpaceAR(h)).sub(r),d=Math.atan2(u.y,u.x),p=(cc.misc.radiansToDegrees(d),cc.callFunc(function(){a.parent,cc.v2(a.x,a.y);i.deSpawnBullet(a),t.getComponent("Monster").hurt(l,e)},i)),v=cc.scaleTo(.1,1).easing(cc.easeOut(3)),f=(cc.moveTo(1,h).easing(cc.easeOut(3)),(r.x+h.x)/2),m=(r.y+h.y)/2+150,g=[r,cc.v2(f,m),h],C=cc.cardinalSplineToXX(1,g,0),S=cc.sequence(v,C,p);a.runAction(S)})}else e&&e()}),s(o,"petSkillAction",function(e){var t=cc.scaleTo(.1,1.5*this.nodeScale).easing(cc.easeBounceInOut()),i=cc.scaleTo(.1,this.nodeScale).easing(cc.easeBounceInOut()),o=cc.sequence(t,i),s=cc.jumpBy(.05,cc.v2(0,0),40,1).easing(cc.easeOut(3)),n=cc.jumpBy(.05,cc.v2(0,0),-40,1).easing(cc.easeOut(3)),a=cc.skewTo(.05,0,2),c=cc.skewTo(.05,0,0),r=cc.sequence(a,c),l=cc.sequence(s,n),h=cc.spawn(o,l,r),u=cc.callFunc(function(){e&&e()},this),d=cc.sequence(cc.delayTime(.1),h,u);this.node.runAction(d)}),s(o,"fire",function(){if(!this._startFire){if(n.instance.getMonster()&&0!=this.celllist.length){this.skeleton.timeScale=2;var e=function(){this.fireOver()}.bind(this);return this.shootBulletlist(this.celllist,e),void(this._startFire=!0)}this.fireOver()}}),s(o,"fireOver",function(){this.idle(),this.node.stopActionByTag(10),this._startFire=!1,this.celllist=[],n.instance.fireOver()}),s(o,"idle",function(){this.skeleton.setAnimation(0,"idle",!0),this.skeleton.timeScale=1}),s(o,"shootBulletlist",function(e,t){for(var i=this,o=[],s=function(s){var a=e[s],c=cc.callFunc(function(){var e=function(e){n.instance.getMonster()||t&&t()}.bind(i);i.shootAction(a,e)},i);o.push(c),o.push(cc.delayTime(i._fireDelay))},a=0;a<e.length;a++)s(a);var c=cc.callFunc(function(){t&&t()},this);if(o.push(c),o.length>0){this.node.stopActionByTag(10);var r=cc.sequence(o);r.setTag(10),this.node.runAction(r)}}),s(o,"shootAction",function(e,t){var i=function(e,t){this.shootBullet(e,t)}.bind(this,e,t);this.petSkillAction(i)}),s(o,"shootBullet",function(e,t){var i=this;e.getComponent("Cell").skillID;l.instance.deSpawnCell(e);var o=n.instance.getMonster();if(o){h.instance.playShootbullet(),this.skeleton.setAnimation(0,"attack",!1);var s=cc.callFunc(function(){var e=function(e){var i=this.canvas;e.parent=i,e.zIndex=10,e.group="UI";var s=this.node.parent.convertToWorldSpaceAR(this.node.position);s=i.convertToNodeSpaceAR(s),e.position=s;var n=this.petData.attack;this.shootMonster(e,o,n,t)}.bind(i);i.spawnBullet(e)},this);this.node.runAction(cc.sequence(cc.delayTime(.1),s))}else t&&t(!0)}),s(o,"spawnBullet",function(e){cc.loader.loadRes("prefab/petBullet/AngryBullet",function(t,i){t&&cc.error(t);var o=cc.instantiate(i);e(o)})}),s(o,"shootMonster",function(e,t,i,o){if(t){var s=t.getComponent("Monster");s.isHaveShield()?this.shootToMonsterShield(e,s,o):this.shootToMonsterSkeleton(e,t,i,o)}else this.shootDone(e,o)}),s(o,"shootToMonsterShield",function(e,t,i){var o=this,s=e.position,n=e.parent,a=t.MonsterShield.getShieldData().pos,c=(a=n.convertToNodeSpaceAR(a)).sub(s),r=Math.atan2(c.y,c.x),l=90+-cc.misc.radiansToDegrees(r);e.rotation=l;var h=c.mag()/100*.2,u=cc.callFunc(function(){var t=e.parent,i=cc.v2(e.x,e.y);o.bulletEffect(i,t),o.deSpawnBullet(e)},this),d=cc.scaleTo(.1,.6).easing(cc.easeOut(3)),p=cc.moveTo(h,a).easing(cc.easeOut(3)),v=cc.sequence(d,p,u);e.runAction(v)}),s(o,"shootToMonsterSkeleton",function(e,t,i,o){var s=this,n=e.position,a=e.parent,c=t.parent.convertToWorldSpaceAR(t.position);c.y+=t.height/2;var r=(c=a.convertToNodeSpaceAR(c)).sub(n),l=Math.atan2(r.y,r.x),h=-cc.misc.radiansToDegrees(l);e.rotation=h;var u=r.mag()/300*.1,d=cc.callFunc(function(){e.parent,cc.v2(e.x,e.y);s.deSpawnBullet(e),t.getComponent("Monster").hurt(i,o)},this),p=cc.scaleTo(.1,1).easing(cc.easeOut(3)),v=cc.moveTo(u,c).easing(cc.easeOut(3)),f=cc.sequence(p,v,d);e.runAction(f)}),s(o,"deSpawnBullet",function(e){e.removeFromParent()}),s(o,"bulletEffect",function(e,t){var i=r.instance.getBulletHit();i.scale=1,i.parent=t,i.position=e;var o=cc.scaleTo(.4,0).easing(cc.easeOut(2)),s=cc.callFunc(function(){r.instance.putBulletHit(i)},this),n=cc.sequence(o,s);i.runAction(n)}),s(o,"shootDone",function(e,t){this.deSpawnBullet(e),t&&t(!0)}),s(o,"spawnSkill",function(e,t){}),s(o,"petskillHurt",function(e,t,i){if(t){var o=t.getComponent("Monster");if(o){o.hurt(e,function(e){i&&i(e)})}}}),s(o,"switchSkillAnimation",function(e){this.node.scale=this.oldNodeScale,this.node.skewX=0,this.node.skewY=0;var t=this.node.scale,i=cc.scaleTo(.2,1.2*this.oldNodeScale).easing(cc.easeBounceInOut()),o=cc.scaleTo(.2,t).easing(cc.easeBounceInOut()),s=cc.sequence(i,o),n=cc.jumpBy(.1,cc.v2(0,0),60,1).easing(cc.easeOut(3)),a=cc.jumpBy(.1,cc.v2(0,0),-60,1).easing(cc.easeOut(3)),c=cc.skewTo(.1,0,2),r=cc.skewTo(.1,0,0),l=cc.sequence(c,r),h=cc.sequence(n,a),u=cc.spawn(s,l,h),d=cc.callFunc(function(){e&&e()},this),p=cc.sequence(cc.delayTime(.2),u,d);this.node.runAction(p)}),o)),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",JsonData:"JsonData",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",RPGManager:"RPGManager"}],PetRoleBox:[function(e,t,i){"use strict";cc._RF.push(t,"3b2fd2WAdtEYqDKY8o+MQhY","PetRoleBox");var o=e("Utils"),s=e("EnumDefine").ActorType,n=(e("LocalStorage"),e("JsonData"));cc.Class({extends:cc.Component,properties:{attackLabel:cc.Label,xname:cc.Label,chooseBk:cc.Node,unChooseBk:cc.Node,bk1:cc.Node,PetNode:cc.Node},onLoad:function(){},start:function(){},choose:function(){this.chooseBk.active=!0,this.unChooseBk.active=!1},unChoose:function(){this.chooseBk.active=!1,this.unChooseBk.active=!0},init:function(e,t,i,o,a){if(this.petID=t,this.roleID=e,this.lock=i,this.xname.string=o,a){this.level=a.level;var c=function(e){a.attack=parseInt(e.Attack),this.attackLabel.string=a.attack+""}.bind(this);n.instance.loadPetData(a.ID,a.level,c)}else this.attackLabel.node.active=!1,this.level=1;switch(e){case s.Actor1:this.bk1.color=cc.color(224,98,66,255);break;case s.Actor2:this.bk1.color=cc.color(66,73,231,255);break;case s.Actor3:this.bk1.color=cc.color(231,145,66,255);break;case s.Actor4:this.bk1.color=cc.color(66,231,66,255);break;case s.Actor5:this.bk1.color=cc.color(218,143,228,255)}this.spawnSkill(),this.spawnPet(t)},spawnSkill:function(){var e=this.petID,t=this.level,i="prefab/petSkillCell/"+o.GetPetSkillName(e,t),s=this;cc.loader.loadRes(i,function(e,t){e&&cc.error(e);var i=cc.instantiate(t);i.parent=s.node,i.scale=.5,i.position=cc.v2(-47,0);var o=s.node.getChildByName("lock");o&&(o.zIndex=1,s.lock?o.active=!0:o.active=!1)})},spawnPet:function(e){var t="spine/pet/";t+=o.getPetFileName(e-1);var i=this.PetNode.getComponent(sp.Skeleton);cc.loader.loadRes(t,sp.SkeletonData,function(e,t){e&&cc.error(e),i.skeletonData=t})},unlock:function(){this.lock=!1;var e=this.node.getChildByName("lock");e&&(e.active=!1)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],PetSkillUI:[function(e,t,i){"use strict";cc._RF.push(t,"90b44JyesxEg6LP1wclAMsn","PetSkillUI");var o=e("RPGManager"),s=e("EnumDefine").ActorType,n=e("EnumDefine").CellGroupType,a=e("LocalStorage"),c=e("Utils");e("PlayFightAudio");cc.Class({extends:cc.Component,properties:{Pet1:{default:null,type:sp.Skeleton},Pet2:{default:null,type:sp.Skeleton},Pet3:{default:null,type:sp.Skeleton},Pet4:{default:null,type:sp.Skeleton},Pet5:{default:null,type:sp.Skeleton},actor1SkillNode:cc.Node,actor2SkillNode:cc.Node,actor3SkillNode:cc.Node,actor4SkillNode:cc.Node,actor5SkillNode:cc.Node,pet1SkillNode:cc.Node,pet2SkillNode:cc.Node,pet3SkillNode:cc.Node,pet4SkillNode:cc.Node,pet5SkillNode:cc.Node,tip1:cc.Node,tip2:cc.Node,tip3:cc.Node,tip4:cc.Node,tip5:cc.Node},ctor:function(){this.roleDatas={},this.roleBattlePets={},this.petSkillProcess={},this.actorSkillNodelist=[],this.actorSkilllist=[],this.petSkillNodelist=[],this.petSkilllist=[],this.tiplist=[],this._petsAttackOverCallback=null},onLoad:function(){this.PetSkillX=this.getComponent("PetSkillX"),this.Pet1.node.active=!1,this.Pet2.node.active=!1,this.Pet3.node.active=!1,this.Pet4.node.active=!1,this.Pet5.node.active=!1,this.tip1.active=!1,this.tip2.active=!1,this.tip3.active=!1,this.tip4.active=!1,this.tip5.active=!1;var e={};e[s.Actor1]=this.Pet1.node,e[s.Actor2]=this.Pet2.node,e[s.Actor3]=this.Pet3.node,e[s.Actor4]=this.Pet4.node,e[s.Actor5]=this.Pet5.node,this.petlist=e,this.Pet1.node.addComponent("PetRPG"),this.Pet2.node.addComponent("PetRPG"),this.Pet3.node.addComponent("PetRPG"),this.Pet4.node.addComponent("PetRPG"),this.Pet5.node.addComponent("PetRPG"),this.actorSkill1=this.actor1SkillNode.getComponent("cc.ProgressBar"),this.actorSkill2=this.actor2SkillNode.getComponent("cc.ProgressBar"),this.actorSkill3=this.actor3SkillNode.getComponent("cc.ProgressBar"),this.actorSkill4=this.actor4SkillNode.getComponent("cc.ProgressBar"),this.actorSkill5=this.actor5SkillNode.getComponent("cc.ProgressBar"),this.petSkill1=this.pet1SkillNode.getComponent("cc.ProgressBar"),this.petSkill2=this.pet2SkillNode.getComponent("cc.ProgressBar"),this.petSkill3=this.pet3SkillNode.getComponent("cc.ProgressBar"),this.petSkill4=this.pet4SkillNode.getComponent("cc.ProgressBar"),this.petSkill5=this.pet5SkillNode.getComponent("cc.ProgressBar"),this.actorSkill1.progress=1,this.actorSkill2.progress=1,this.actorSkill3.progress=1,this.actorSkill4.progress=1,this.actorSkill5.progress=1,this.petSkill1.progress=1,this.petSkill2.progress=1,this.petSkill3.progress=1,this.petSkill4.progress=1,this.petSkill5.progress=1,this.actor1SkillNode.active=!1,this.actor2SkillNode.active=!1,this.actor3SkillNode.active=!1,this.actor4SkillNode.active=!1,this.actor5SkillNode.active=!1,this.pet1SkillNode.active=!1,this.pet2SkillNode.active=!1,this.pet3SkillNode.active=!1,this.pet4SkillNode.active=!1,this.pet5SkillNode.active=!1,this.actorSkillNodelist.push(this.actor1SkillNode),this.actorSkillNodelist.push(this.actor2SkillNode),this.actorSkillNodelist.push(this.actor3SkillNode),this.actorSkillNodelist.push(this.actor4SkillNode),this.actorSkillNodelist.push(this.actor5SkillNode),this.actorSkilllist.push(this.actorSkill1),this.actorSkilllist.push(this.actorSkill2),this.actorSkilllist.push(this.actorSkill3),this.actorSkilllist.push(this.actorSkill4),this.actorSkilllist.push(this.actorSkill5),this.petSkillNodelist.push(this.pet1SkillNode),this.petSkillNodelist.push(this.pet2SkillNode),this.petSkillNodelist.push(this.pet3SkillNode),this.petSkillNodelist.push(this.pet4SkillNode),this.petSkillNodelist.push(this.pet5SkillNode),this.petSkilllist.push(this.petSkill1),this.petSkilllist.push(this.petSkill2),this.petSkilllist.push(this.petSkill3),this.petSkilllist.push(this.petSkill4),this.petSkilllist.push(this.petSkill5),this.tiplist.push(this.tip1),this.tiplist.push(this.tip2),this.tiplist.push(this.tip3),this.tiplist.push(this.tip4),this.tiplist.push(this.tip5);for(var t=[],i=[s.Actor1,s.Actor2,s.Actor3,s.Actor4,s.Actor5],o=0;o<i.length;o++){var n=i[o],c=a.instance.getRoleData(n);c&&t.push(c)}for(var r=0;r<t.length;r++){var l=t[r],h=l.roletype;h=parseInt(l.roletype),this.roleDatas[h]=l;var u=this.actorSkillNodelist[h];if(u&&(u.active=!0),a.instance.getPetSkill(h).length>0)this.tiplist[h].active=!0}for(var d=0;d<t.length;d++){var p=t[d],v=p.roletype;v=parseInt(p.roletype);var f=null,m=cc.v2(-5,-16);switch(v){case s.Actor1:f=this.actor1SkillNode;break;case s.Actor2:f=this.actor2SkillNode;break;case s.Actor3:f=this.actor3SkillNode;break;case s.Actor4:f=this.actor4SkillNode;break;case s.Actor5:f=this.actor5SkillNode}this.spawnRoleSkillNode(p.roletype,p.level,f,m)}this.SwitchPetGuideNode=null},showSwipedPet:function(e,t){var i=this.petSkillNodelist[e];i&&(i.active=!0);var s=a.instance.getPetData(t);if(s){var n=c.getPetFileName(t-1),r=this.petlist[e];r.active=!0,this.loadPet(n,r),this.roleBattlePets[e]=s,r.getComponent("PetRPG").setData(s),o.instance.freshRoleAttack(e,s),this.spawnPetSkillNode(s,i)}},getPet:function(e){for(var t in this.roleBattlePets){var i=this.roleBattlePets[t];if(parseInt(i.ID)===e)return this.petlist[t]}return null},spawnPetSkillNode:function(e,t){var i=e.ID,o=e.level,s="prefab/petSkillCell/"+c.GetPetSkillName(i,o);cc.loader.loadRes(s,function(e,i){e&&cc.error(e);var o=cc.instantiate(i);t.getChildByName("bar")&&(o.name="skill",o.scale=.45,o.parent=t,o.position=cc.v2(0,-18.5),o.zIndex=-2)})},spawnRoleSkillNode:function(e,t,i,o){var s="prefab/roleSkillcell/";s+=c.GetRoleSkillName(e,t);cc.loader.loadRes(s,function(e,t){e&&cc.error(e);var o=cc.instantiate(t);i.getChildByName("bar")&&(o.name="skill",o.scale=.45,o.parent=i,o.position=cc.v2(.55,-20.5),o.zIndex=-2)})},loadPet:function(e,t){var i="spine/pet/";i+=e;var o=this;cc.loader.loadRes(i,sp.SkeletonData,function(e,i){e&&cc.error(e);var s=t.getComponent("sp.Skeleton");s.skeletonData=i,s.setAnimation(0,"idle",!0);var n=t.scale;t.scale=0;var a=cc.scaleTo(.3,n).easing(cc.easeIn(3)),c=cc.callFunc(function(){o.petBorn(t)},o);t.runAction(cc.sequence(a,c))})},petBorn:function(e){var t=e.scale,i=cc.scaleTo(.1,1.2*t,.8*t).easing(cc.easeBounceInOut()),o=cc.scaleTo(.1,t,t).easing(cc.easeBounceInOut()),s=cc.sequence(i,o),n=cc.jumpBy(.1,cc.v2(0,0),5,1).easing(cc.easeOut(3)),a=cc.jumpBy(.1,cc.v2(0,0),-5,1).easing(cc.easeOut(3)),c=cc.jumpBy(.1,cc.v2(0,0),3,1).easing(cc.easeOut(3)),r=cc.jumpBy(.1,cc.v2(0,0),-3,1).easing(cc.easeOut(3)),l=cc.sequence(n,a,c,r),h=cc.spawn(s,l);e.runAction(h)},skillProcess:function(e,t,i){if(this.roleDatas[e]){var o=this.actorSkilllist[e],s=o.progress;if(s=(s=(s-=t)>=1?1:s)<=0?0:s,o.progress=s,void 0!==this.roleBattlePets[e]){var n=this.petSkilllist[e],a=n.progress;a=(a=(a-=i)>=1?1:a)<=0?0:a,n.progress=a}}},addSkill:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=8*t/100*1,o=5*t/100*1;this.skillProcess(e,i,o)},decSkill:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=-8*t/100*1,o=-5*t/100*1;this.skillProcess(e,i,o)},hideAllSkill:function(){},tripHeroSkill:function(e){var t=!1;if(void 0!==this.roleDatas[e]){var i=this.actorSkilllist[e];i&&i.progress<=0&&(i.progress=1,t=!0)}return t},petSkillAction:function(e,t){var i=cc.scaleTo(.2,2).easing(cc.easeBounceInOut()),o=cc.scaleTo(.2,1).easing(cc.easeBounceInOut()),s=cc.sequence(i,o),n=cc.jumpBy(.1,cc.v2(0,0),40,1).easing(cc.easeOut(3)),a=cc.jumpBy(.1,cc.v2(0,0),-40,1).easing(cc.easeOut(3)),c=cc.skewTo(.1,0,2),r=cc.skewTo(.1,0,0),l=cc.sequence(c,r),h=cc.sequence(n,a),u=cc.spawn(s,h,l),d=cc.callFunc(function(){t&&t()},this),p=cc.sequence(cc.delayTime(.2),u,d);e.runAction(p)},tripPetSkills:function(e){this._petsAttackOverCallback=e;var t=this.roleBattlePets;if("{}"!=JSON.stringify(t)){for(var i in this.roleBattlePets){var o=parseInt(i),s=this.roleBattlePets[i],n=this.petSkilllist[i];if(n.progress<=0)return this.tripPetSkill(o,s),void(n.progress=1)}e&&e()}else e&&e()},tripPetSkill:function(e,t){var i=t.ID,a=t.level,c=function(){this.tripDone(i)}.bind(this),r=this.petlist[e];if(r){var l=n.UnKnown;switch(e){case s.Actor1:l=n.Cell1;break;case s.Actor2:l=n.Cell2;break;case s.Actor3:l=n.Cell3;break;case s.Actor4:l=n.Cell4;break;case s.Actor5:l=n.Cell5}var h=o.instance.boardNode,u=r.parent.convertToWorldSpaceAR(r.position);u=h.convertToNodeSpaceAR(u);this.PetSkillX.tripSkill(h,u,r,l,i,a,c)}else c&&c()},tripDone:function(){this._petsAttackOverCallback&&(this._petsAttackOverCallback(!0),this._petsAttackOverCallback=null)},start:function(){},IsFireOver:function(){var e=!1;for(var t in this.roleBattlePets){var i=this.petlist[t].getComponent("PetRPG");i&&(e=i.IsAttack())}return!e},fire:function(e){if(void 0!==e&&e){for(var t=0;t<e.length;t++){var i=e[t],o=i.getComponent("Cell").skillID,s=c.SkillIDToPetID(o),n=this.getPet(s);if(n)n.getComponent("PetRPG").pushCell(i)}for(var a in this.roleBattlePets){var r=this.petlist[a].getComponent("PetRPG");r&&r.fire()}}},showRoleSkill:function(e){}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",PlayFightAudio:"PlayFightAudio",RPGManager:"RPGManager",Utils:"Utils"}],PetSkillX:[function(e,t,i){"use strict";cc._RF.push(t,"54b82dDKepGzacXSohPufvP","PetSkillX");e("EnumDefine").ActorType;var o=e("EnumDefine").CellType,s=e("EnumDefine").PetType,n=e("EnumDefine").PetShapeLevel,a=(e("EnumDefine").CellGroupType,e("EnumDefine").PetSingleAttackID),c=e("RPGManager"),r=e("Utils");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},skillAction:function(e,t){var i=cc.callFunc(function(){t&&t()},this),o=cc.scaleTo(.1,2).easing(cc.easeOut(3)),s=cc.scaleTo(.1,1).easing(cc.easeOut(3)),n=cc.sequence(o,s,i);e.runAction(n)},tripSkill:function(e,t,i,a,l,h,u){var d=o.UnKnown,p=r.GetPetLevelShape(h);switch(l){case s.Pet1:switch(p){case n.Level1:d=o.SOne_Attack1;break;case n.Level2:d=o.SOne_Attack2;break;case n.Level3:d=o.SOne_Attack3;break;case n.Level4:d=o.SOne_Attack4}break;case s.Pet2:switch(p){case n.Level1:d=o.SOne_Brush1;break;case n.Level2:d=o.SOne_Brush2;break;case n.Level3:d=o.SOne_Brush3;break;case n.Level4:d=o.SOne_Brush4}break;case s.Pet3:switch(p){case n.Level1:d=o.SBomb1;break;case n.Level2:d=o.SBomb2;break;case n.Level3:d=o.SBomb3;break;case n.Level4:d=o.SBomb4}break;case s.Pet4:switch(p){case n.Level1:d=o.STwo_Attack1;break;case n.Level2:d=o.STwo_Attack2;break;case n.Level3:d=o.STwo_Attack3;break;case n.Level4:d=o.STwo_Attack4}break;case s.Pet5:switch(p){case n.Level1:d=o.STwo_Brush1;break;case n.Level2:d=o.STwo_Brush2;break;case n.Level3:d=o.STwo_Brush3;break;case n.Level4:d=o.STwo_Brush4}break;case s.Pet6:switch(p){case n.Level1:d=o.SBomb1;break;case n.Level2:d=o.SBomb2;break;case n.Level3:d=o.SBomb3;break;case n.Level4:d=o.SBomb4}break;case s.Pet7:switch(p){case n.Level1:d=o.SThree_Attack1;break;case n.Level2:d=o.SThree_Attack2;break;case n.Level3:d=o.SThree_Attack3;break;case n.Level4:d=o.SThree_Attack4}break;case s.Pet8:switch(p){case n.Level1:d=o.SThree_Brush1;break;case n.Level2:d=o.SThree_Brush2;break;case n.Level3:d=o.SThree_Brush3;break;case n.Level4:d=o.SThree_Brush4}break;case s.Pet9:switch(p){case n.Level1:d=o.SBomb1;break;case n.Level2:d=o.SBomb2;break;case n.Level3:d=o.SBomb3;break;case n.Level4:d=o.SBomb4}break;case s.Pet10:switch(p){case n.Level1:d=o.SFour_Attack1;break;case n.Level2:d=o.SFour_Attack2;break;case n.Level3:d=o.SFour_Attack3;break;case n.Level4:d=o.SFour_Attack4}break;case s.Pet11:switch(p){case n.Level1:d=o.SFour_Brush1;break;case n.Level2:d=o.SFour_Brush2;break;case n.Level3:d=o.SFour_Brush3;break;case n.Level4:d=o.SFour_Brush4}break;case s.Pet12:switch(p){case n.Level1:d=o.SBomb1;break;case n.Level2:d=o.SBomb2;break;case n.Level3:d=o.SBomb3;break;case n.Level4:d=o.SBomb4}break;case s.Pet13:switch(p){case n.Level1:d=o.SFive_Attack1;break;case n.Level2:d=o.SFive_Attack2;break;case n.Level3:d=o.SFive_Attack3;break;case n.Level4:d=o.SFive_Attack4}break;case s.Pet14:switch(p){case n.Level1:d=o.SFive_Brush1;break;case n.Level2:d=o.SFive_Brush2;break;case n.Level3:d=o.SFive_Brush3;break;case n.Level4:d=o.SFive_Brush4}break;case s.Pet15:switch(p){case n.Level1:d=o.SBomb1;break;case n.Level2:d=o.SBomb2;break;case n.Level3:d=o.SBomb3;break;case n.Level4:d=o.SBomb4}}switch(d){case o.SBomb1:case o.SBomb2:case o.SBomb3:case o.SBomb4:case o.SOne_Brush1:case o.SOne_Brush2:case o.SOne_Brush3:case o.SOne_Brush4:case o.STwo_Brush1:case o.STwo_Brush2:case o.STwo_Brush3:case o.STwo_Brush4:case o.SThree_Brush1:case o.SThree_Brush2:case o.SThree_Brush3:case o.SThree_Brush4:case o.SFour_Brush1:case o.SFour_Brush2:case o.SFour_Brush3:case o.SFour_Brush4:case o.SFive_Brush1:case o.SFive_Brush2:case o.SFive_Brush3:case o.SFive_Brush4:case o.SFive_Brush4:case o.UniversalBrush:var v=function(){c.instance.ShootSkill.spawnSkill(e,t,"UI",d,a,-1,u)}.bind(this);this.skillAction(i,v);break;case o.SOne_Attack1:case o.STwo_Attack1:case o.SThree_Attack1:case o.SFour_Attack1:case o.SFive_Attack1:var f=function(){i.getComponent("PetRPG").shootArrows(h,u)}.bind(this);this.skillAction(i,f);break;case o.SOne_Attack2:case o.STwo_Attack2:case o.SThree_Attack2:case o.SFour_Attack2:case o.SFive_Attack2:var m=function(){i.getComponent("PetRPG").shootArrows(h,u)}.bind(this);this.skillAction(i,m);break;case o.SOne_Attack3:case o.STwo_Attack3:case o.SThree_Attack3:case o.SFour_Attack3:case o.SFive_Attack3:var g=function(){i.getComponent("PetRPG").shootArrows(h,u)}.bind(this);this.skillAction(i,g);break;case o.SOne_Attack4:var C=function(){i.getComponent("PetRPG").showRedAttacks(h,u)}.bind(this);this.skillAction(i,C);break;case o.STwo_Attack4:var S=function(){i.getComponent("PetRPG").showZiSeAttacks(h,u)}.bind(this);this.skillAction(i,S);break;case o.SThree_Attack4:var b=function(){i.getComponent("PetRPG").showYellowAttacks(h,u)}.bind(this);this.skillAction(i,b);break;case o.SFour_Attack4:var k=function(){i.getComponent("PetRPG").showGreenAttacks(h,u)}.bind(this);this.skillAction(i,k);break;case o.SFive_Attack4:var _=function(){i.getComponent("PetRPG").showWhiteAttacks(h,u)}.bind(this);this.skillAction(i,_)}},spreadMultipleSkills:function(e,t,i,o,s,n){for(var a=this,c=[],r=function(n){var r=e[n],l=cc.callFunc(function(){var e=function(){this.spawnSingleAttackSkill(r,t,i,o,"UI",.5,null)}.bind(a);a.skillAction(s,e)},a);c.push(l),c.push(cc.delayTime(.2))},l=0;l<e.length;l++)r(l);c.push(cc.delayTime(.5));var h=cc.callFunc(function(){n&&n()},this);c.push(h);var u=cc.sequence(c);this.node.runAction(u)},spawnSingleAttackSkill:function(e,t,i,s,n,c,r){if(e){a.UnKnown;var l=e.getComponent("Cell"),h=(l.column,l.row,new cc.Node(""));h.scale=.6;var u=h.addComponent("cc.Sprite");switch(t){case o.STwo_Shoot:a.ID0,this.loadSpriteFrame(u,"flash");break;case o.SThree_Shoot:this.loadSpriteFrame(u,"potion"),a.ID1;break;case o.SFour_Shoot:this.loadSpriteFrame(u,"point"),a.ID2;break;case o.SFive_Shoot:this.loadSpriteFrame(u,"painBall"),a.ID3}h.parent=i,h.position=s,h.group=n;var d=e.position,p=Math.abs(e.width-h.width),v=Math.abs(e.height-h.height);d.x+=p,d.y+=v;var f=cc.v2();d.sub(h.position,f);var m=0;m=c>=0?c:f.mag()/200*.1;var g=cc.moveTo(m,d),C=cc.callFunc(function(){var i=e.getComponent("Cell"),o=i.cellNode;h.parent=o,h.position=cc.v2(o.width/2,o.height/2),i.skillNode=h,i.petSkillID=t,r&&r()},this),S=cc.sequence(g,C);h.runAction(S)}else r&&r()},loadSpriteFrame:function(e,t){cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(i,o){e.spriteFrame=o.getSpriteFrame(t)})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",RPGManager:"RPGManager",Utils:"Utils"}],PetSkill:[function(e,t,i){"use strict";cc._RF.push(t,"a5273WHZINHZqGRuZ4CzXhU","PetSkill"),cc.Class({extends:cc.Component,properties:{animationName:""},onLoad:function(){this.hurtFunc=null},start:function(){},onFinished:function(){this.hurtFunc&&this.hurtFunc()},play:function(e){this.hurtFunc=e;var t=this.node.getComponent(cc.Animation);t.on("finished",this.onFinished,this),t.play(this.animationName)}}),cc._RF.pop()},{}],PetsCard:[function(e,t,i){"use strict";cc._RF.push(t,"166e2FDgChG/axfqlMYhK16","PetsCard");var o=e("LocalStorage"),s=e("EnumDefine").ActorType,n=e("CommonUtil"),a=e("XPoolMng"),c=e("EnumDefine").CardPoolKind;cc.Class({extends:cc.Component,properties:{shootMeteor:cc.Prefab},onLoad:function(){var e=this.node.getComponent("cc.ScrollView");this.content=e.content},start:function(){},initCards:function(e,t,i,s){this.roleID=e,this.petidlist=t,this.AllCards=s,this.Group=s.Group,this.pets={},this.cushion=i;for(var r=function(e,t){var i=this.cushion,o=function(){var e=this.roleID;this.AllCards.showSwipedPet(e,t),this.AllCards.showNextGroup()}.bind(this);this.swipeOut(e,i,o)}.bind(this),l=n.getGroupColor(e),h=0;h<t.length;h++){var u=t[h],d=o.instance.getPetData(u);if(d){var p=a.instance.getCard(c.PetCard);if(p){p.parent=this.content,p.scale=.8,p.position=cc.v2(140*h-207,140);var v=p.getComponent("PetCard");v.registerTouch(),v.init(u,d,r),v.spinBox.active=!1,v.setColor(l),this.pets[p]=u,this.setClickEvent(v)}}}},swipeOut:function(e,t,i){var o=this,s=cc.director.getScene()._children[0],n=e.parent.convertToWorldSpaceAR(e.position);n=s.convertToNodeSpaceAR(n),e.parent=s,e.group=this.Group,e.position=n;var r=e.scale,l=cc.scaleTo(.2,1.2*r).easing(cc.easeIn(3)),h=cc.moveBy(.2,cc.v2(0,400)).easing(cc.easeIn(3)),u=cc.spawn(l,h),d=cc.rotateBy(.1,20),p=e.parent,v=cc.callFunc(function(){var t=cc.v2(e.x,e.y);o.spawnDust(p,t)},this),f=cc.callFunc(function(){var s=cc.v2(e.x,e.y);o.spawnCardMeteor(p,s,t,i)},this),m=cc.callFunc(function(){a.instance.putCard(e,c.PetCard)},this),g=cc.sequence(u,d,cc.fadeOut(.2),v,cc.delayTime(.5),f,m);e.runAction(g)},spawnDust:function(e,t,i){var o=this.roleID,s=a.instance.getCard(c.BornCard);if(s){s.group=this.Group,s.scale=2,s.parent=e,s.position=t,n.setBornCardSySSpriteFrame(s,o);var r=cc.callFunc(function(){i&&i()},this),l=cc.callFunc(function(){a.instance.putCard(s,c.BornCard)},this);this.node.runAction(cc.sequence(cc.delayTime(.1),r,cc.delayTime(2),l))}else i&&i()},spawnCardMeteor:function(e,t,i,o){var a=this.shootMeteor,c=this.roleID,r=cc.instantiate(a);r.group=this.Group,r.scale=2,r.parent=e,r.position=t;var l=r.getComponent(cc.ParticleSystem);switch(c){case s.Actor1:l.startColor=n.ColorGroup1;break;case s.Actor2:l.startColor=n.ColorGroup2;break;case s.Actor3:l.startColor=n.ColorGroup3;break;case s.Actor4:l.startColor=n.ColorGroup4;break;case s.Actor5:l.startColor=n.ColorGroup5}this.flyToCardCushion(r,i,o);var h=cc.callFunc(function(){r.destroy()},this);r.runAction(cc.sequence(cc.delayTime(2),h))},flyToCardCushion:function(e,t,i){var o=t.parent.convertToWorldSpaceAR(t.position);o=e.parent.convertToNodeSpaceAR(o);var s=[e.position,cc.v2(o.x,o.y+150),o],n=cc.cardinalSplineToXX(.6,s,0),a=cc.callFunc(function(){i&&i()},this);e.runAction(cc.sequence(n,a,cc.removeSelf()))},loadPet:function(e){},setClickEvent:function(e){var t=function(){this.AllCards.stopShowGuide()}.bind(this),i=function(){this.AllCards.startShowGuide()}.bind(this),o=function(){this.AllCards.stopShowGuide()}.bind(this);e.touchBeginClick=t,e.touchEndClick=i,e.swipeClick=o}}),cc._RF.pop()},{CommonUtil:"CommonUtil",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",XPoolMng:"XPoolMng"}],Pets:[function(e,t,i){"use strict";cc._RF.push(t,"45b9f+5RnlJZJLkHDTmEHeq","Pets");var o=e("EnumDefine"),s=o.ActorType,n=(o.EnterKind,e("BaseUI")),a=e("LocalStorage");cc.Class({extends:n,properties:{scrollView:{default:null,type:cc.ScrollView}},onLoad:function(){this.content=this.scrollView.content,this.uibase=null},start:function(){},show:function(e,t){var i=this;this.uibase=t,this.roleID=e;var o=[];switch(e){case s.Actor1:o=[1,2,3];break;case s.Actor2:o=[4,5,6];break;case s.Actor3:o=[7,8,9];break;case s.Actor4:o=[10,11,12];break;case s.Actor5:o=[13,14,15]}for(var n=function(t){var s=!0,n=o[t];a.instance.getPetData(n)&&(s=!1);var c=i,r=t;cc.loader.loadRes("prefab/PetUI/PetItem",function(t,i){var o=cc.instantiate(i);o.parent=c.content,o.position=cc.v2(187+r*(.8*o.width+15),60),o.getComponent("PetItem").init(e,n,s,c.uibase)})},c=0;c<o.length;c++)n(c)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage"}],Pet:[function(e,t,i){"use strict";cc._RF.push(t,"e2aa7hpLixFzqzPE3AHlzjW","Pet");var o=e("Utils"),s=e("LocalStorage"),n=e("JsonData");cc.Class({extends:cc.Component,properties:{skillID:0,roleID:0,unlockPrice:0,unlockNode:cc.Node,pet:sp.Skeleton},onLoad:function(){this.uibase=null,this.lock=!0},start:function(){},init:function(e,t,i){if(this.uibase=i,e===this.roleID){for(var s=!0,n=0;n<t.length;n++){var a=t[n];if((a=parseInt(a))===this.skillID){s=!1;break}}if(this.lock=s,s){var c="spine/pet/";c+=o.getPetFileName(this.skillID-1);var r=this.pet;cc.loader.loadRes(c,sp.SkeletonData,function(e,t){e&&cc.error(e),r.skeletonData=t,r.node.color=cc.color(0,0,0,255)})}else{this.unlockNode.active=!1;var l="spine/pet/";l+=o.getPetFileName(this.skillID-1);var h=this.pet;cc.loader.loadRes(l,sp.SkeletonData,function(e,t){e&&cc.error(e),h.skeletonData=t,h.setAnimation(0,"idle",!0)})}}},onBtnUnlockFunc:function(e){if(this.buyRoleDiamond(this.unlockPrice)){this.unlockNode.active=!1,this.pet.node.color=cc.color(255,255,255,255),this.lock=!1;for(var t="",i=s.instance.getPetSkill(this.roleID),o=0;o<i.length;o++)t+=i[o],t+=",";t+=this.skillID+"",s.instance.setPetSkill(this.roleID,t);var a=function(e){var t={};t.ID=this.skillID,t.level=parseInt(e.Level),t.attack=parseInt(e.Attack),s.instance.setPetData(t)}.bind(this);n.instance.loadPetData(this.skillID,1,a)}},onBtnShowFunc:function(e){if(!this.lock){var t=cc.director.getScene()._children[0],i=this;cc.loader.loadRes("prefab/PetInfoUI",function(e,o){var s=cc.instantiate(o);s.scale=1,s.parent=t;var n=i.skillID;s.getComponent("PetInfo").show(n,i.uibase);var a=s.getChildByName("UIBase");a&&(a.active=!1)})}},buyRoleDiamond:function(e){var t=!1;this.uibase&&(this.uibase.getDiamondNum()>=e&&(t=!0,this.uibase.updateDiamond(-e)));return t}}),cc._RF.pop()},{JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],Pig:[function(e,t,i){"use strict";cc._RF.push(t,"a15a2JGLhFCGYwyIL2U/tbR","Pig");var o=e("RPGManager");e("JsonData"),e("EnumDefine").ActorType,e("EnumDefine").CellType,e("EnumDefine").PetShapeLevel;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.dt=0,this.vx=0,this.skeleton=this.node.getComponent(sp.Skeleton)},start:function(){},rush:function(e,t){var i=o.instance.getMonster();if(i){this.skeleton.setAnimation(0,"idle",!0);cc.v2(i.x,i.y)}else t&&t()},update:function(e){this.vx+=20*e,this.node.x+=this.vx}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",RPGManager:"RPGManager"}],PlayAnimation:[function(e,t,i){"use strict";cc._RF.push(t,"6c18eKNqTNCBJSLf6nY61Sc","PlayAnimation"),cc.Class({extends:cc.Component,properties:{animationName:""},onLoad:function(){this.finished=null},start:function(){},onFinished:function(){this.finished?this.finished():this.node.destroy()},play:function(e){this.finished=e;var t=this.node.getComponent(cc.Animation);t.on("finished",this.onFinished,this),t.play(this.animationName)}}),cc._RF.pop()},{}],PlayBkAudios:[function(e,t,i){"use strict";cc._RF.push(t,"1e284EVrddOoYdxoUWupTIt","PlayBkAudios");var o=e("Utils"),s=e("LocalStorage");cc.Class({extends:cc.Component,properties:{audioCrazy:{type:cc.AudioSource,default:null},audioNormal:{type:cc.AudioSource,default:null}},onLoad:function(){var e=s.instance.getSetData();this.setdata=e},play:function(){if(this.setdata.musicOnOff){var e=o.levelID;o.IsBossLevel(e)?this.audioCrazy&&this.audioCrazy.play():this.audioNormal&&this.audioNormal.play()}},pause:function(){if(this.setdata.musicOnOff){var e=o.levelID;o.IsBossLevel(e)?this.audioCrazy&&this.audioCrazy.pause():this.audioNormal&&this.audioNormal.pause()}},stop:function(){if(this.setdata.musicOnOff){var e=o.levelID;o.IsBossLevel(e)?this.audioCrazy&&this.audioCrazy.stop():this.audioNormal&&this.audioNormal.stop()}},resume:function(){if(this.setdata.musicOnOff){var e=o.levelID;o.IsBossLevel(e)?this.audioCrazy&&this.audioCrazy.resume():this.audioNormal&&this.audioNormal.resume()}},onDisable:function(){this.stop()}}),cc._RF.pop()},{LocalStorage:"LocalStorage",Utils:"Utils"}],PlayFightAudio:[function(e,t,i){"use strict";cc._RF.push(t,"4220eYor1JO8pVaVltGX8sN","PlayFightAudio");var o=e("LocalStorage"),s=cc.Class({extends:cc.Component,properties:{bonusTime:{type:cc.AudioClip,default:null},good:{type:cc.AudioClip,default:null},timeUp:{type:cc.AudioClip,default:null},killCell:{type:cc.AudioClip,default:null},petattack:{type:cc.AudioClip,default:null},petattack2:{type:cc.AudioClip,default:null},Wow:{type:cc.AudioClip,default:null},spin:{type:cc.AudioClip,default:null},exploision:{type:cc.AudioClip,default:null},OpenMagicBag:{type:cc.AudioClip,default:null},key:{type:cc.AudioClip,default:null},shootbullet:{type:cc.AudioClip,default:null},Coin:{type:cc.AudioClip,default:null},go:{type:cc.AudioClip,default:null},monsterDie:{type:cc.AudioClip,default:null},monsterAttack:{type:cc.AudioClip,default:null},monsterhit:{type:cc.AudioClip,default:null},ButtonClick:{type:cc.AudioClip,default:null},gamelose:{type:cc.AudioClip,default:null},Eliminate1:{type:cc.AudioClip,default:null},Eliminate2:{type:cc.AudioClip,default:null},Eliminate3:{type:cc.AudioClip,default:null},Eliminate4:{type:cc.AudioClip,default:null},Eliminate5:{type:cc.AudioClip,default:null},Eliminate6:{type:cc.AudioClip,default:null},Eliminate7:{type:cc.AudioClip,default:null},Eliminate8:{type:cc.AudioClip,default:null}},statics:{instance:null},onLoad:function(){s.instance=this,this.SetData=o.instance.getSetData(),this.soundOnOff=this.SetData.soundOnOff},start:function(){},playBonusTime:function(){this.soundOnOff&&cc.audioEngine.play(this.bonusTime,!1,this.volume)},playGood:function(){this.soundOnOff&&cc.audioEngine.play(this.good,!1,this.volume)},playTimeUp:function(){this.soundOnOff&&cc.audioEngine.play(this.timeUp,!1,this.volume)},playPetattack:function(){this.soundOnOff&&cc.audioEngine.play(this.petattack,!1,this.volume)},playPetattack2:function(){this.soundOnOff&&cc.audioEngine.play(this.petattack2,!1,this.volume)},playWow:function(){this.soundOnOff&&cc.audioEngine.play(this.Wow,!1,this.volume)},playKillCell:function(){this.soundOnOff&&cc.audioEngine.play(this.killCell,!1,this.volume)},playExploision:function(){this.soundOnOff&&cc.audioEngine.play(this.exploision,!1,this.volume)},playSpin:function(){this.soundOnOff&&cc.audioEngine.play(this.spin,!1,this.volume)},playOpenMagicBag:function(){this.soundOnOff&&cc.audioEngine.play(this.OpenMagicBag,!1,this.volume)},playKey:function(){this.soundOnOff&&cc.audioEngine.play(this.key,!1,this.volume)},playShootbullet:function(){this.soundOnOff&&cc.audioEngine.play(this.shootbullet,!1,this.volume)},playCoin:function(){this.soundOnOff&&cc.audioEngine.play(this.Coin,!1,this.volume)},playMonsterDie:function(){this.soundOnOff&&cc.audioEngine.play(this.monsterDie,!1,this.volume)},playMonsterAttack:function(){this.soundOnOff&&cc.audioEngine.play(this.monsterAttack,!1,this.volume)},playMonsterhit:function(){this.soundOnOff&&cc.audioEngine.play(this.monsterhit,!1,this.volume)},playButtonClick:function(){this.soundOnOff&&cc.audioEngine.play(this.ButtonClick,!1,this.volume)},playGamelose:function(){this.soundOnOff&&cc.audioEngine.play(this.gamelose,!1,this.volume)},playEliminate1:function(){this.soundOnOff&&cc.audioEngine.play(this.Eliminate1,!1,this.volume)},playEliminate2:function(){this.soundOnOff&&cc.audioEngine.play(this.Eliminate2,!1,this.volume)},playEliminate3:function(){this.soundOnOff&&cc.audioEngine.play(this.Eliminate3,!1,this.volume)},playEliminate4:function(){this.soundOnOff&&cc.audioEngine.play(this.Eliminate4,!1,this.volume)},playEliminate5:function(){this.soundOnOff&&cc.audioEngine.play(this.Eliminate5,!1,this.volume)},playEliminate6:function(){this.soundOnOff&&cc.audioEngine.play(this.Eliminate6,!1,this.volume)},playEliminate7:function(){this.soundOnOff&&cc.audioEngine.play(this.Eliminate7,!1,this.volume)},playEliminate8:function(){this.soundOnOff&&cc.audioEngine.play(this.Eliminate8,!1,this.volume)},playCellConnect:function(e){switch(e){case 1:this.playEliminate1();break;case 2:this.playEliminate2();break;case 3:this.playEliminate3();break;case 4:this.playEliminate4();break;case 5:this.playEliminate5();break;case 6:this.playEliminate6();break;case 7:this.playEliminate7();break;case 8:this.playEliminate8()}}});cc._RF.pop()},{LocalStorage:"LocalStorage"}],PoolMng:[function(e,t,i){"use strict";cc._RF.push(t,"0f752qN9blLJYVlJnMx6qsF","PoolMng");var o=e("CellBloodPool"),s=e("ExplosionPool"),n=e("BulletPool"),a=e("CoinPool"),c=cc.Class({extends:cc.Component,properties:{cellBloodPool:{default:[],type:o},explosionPool:{default:[],type:s},bulletPool:{default:[],type:n},coinPool:{default:[],type:a}},onLoad:function(){c.instance=this,this.PropCellPool=this.node.getComponent("PropCellPool")},statics:{instance:null},init:function(){for(var e=0;e<this.cellBloodPool.length;++e)this.cellBloodPool[e].init();for(var t=0;t<this.bulletPool.length;++t)this.bulletPool[t].init();for(var i=0;i<this.coinPool.length;++i)this.coinPool[i].init();for(var o=0;o<this.explosionPool.length;++o)this.explosionPool[o].init()},requestCell:function(e){return this.PropCellPool.getCell(e)},returnCell:function(e,t){this.PropCellPool.putCell(e,t)},getCellBlood:function(e){var t=this.cellBloodPool[e];return t?t.get():null},putCellBlood:function(e,t){var i=this.cellBloodPool[t];i?i.put(e):e.removeFromParent()},getBullet:function(e){var t=this.bulletPool[e];return t?t.get():null},putBullet:function(e,t){var i=this.bulletPool[t];i?i.put(e):e.removeFromParent()},getline:function(){return this.coinPool[0].getline()},putline:function(e){this.coinPool[0].putline(e)},getslantline:function(){return this.coinPool[0].getslantline()},putslantline:function(e){this.coinPool[0].putslantline(e)},getScoreLabel:function(){return this.coinPool[0].getScoreLabel()},putScoreLabel:function(e){this.coinPool[0].putScoreLabel(e)},getSaleCoin:function(){return this.coinPool[0].getSaleCoin()},putSaleCoin:function(e){this.coinPool[0].putSaleCoin(e)},getBulletHit:function(){return this.coinPool[0].getBulletHit()},putBulletHit:function(e){this.coinPool[0].putBulletHit(e)},getMonsterDieDust:function(){return this.coinPool[0].getMonsterDieDust()},putMonsterDieDust:function(e){this.coinPool[0].putMonsterDieDust(e)},getWoodDust:function(){return this.coinPool[0].getWoodDust()},putWoodDust:function(e){this.coinPool[0].putWoodDust(e)},getExplosion:function(e){var t=null,i=this.explosionPool[e];return i&&(t=i.get()),t},putExplosion:function(e,t){var i=this.explosionPool[t];i?i.put(e):obj.removeFromParent()}});cc._RF.pop()},{BulletPool:"BulletPool",CellBloodPool:"CellBloodPool",CoinPool:"CoinPool",ExplosionPool:"ExplosionPool"}],Portal:[function(e,t,i){"use strict";cc._RF.push(t,"2dd48oWwqFMEqpr6dIClc4D","Portal");var o=e("Utils"),s=(e("RPGManager"),e("PoolMng"),e("EnumDefine").CellType),n=e("EnumDefine").ChestType,a=e("Game"),c=e("Utils").NUMROWS,r=e("Utils").NUMCOLUMNS,l=(e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT,e("PlayFightAudio")),h=e("Board");o.ProduceType,cc.v2(),cc.v2();cc.Class({extends:cc.Component,properties:{},ctor:function(){this._isopenPortal=!1,this._keycelllist=[],this._isallkeydone=[],this._fallingDoneFunc=null,this._isstart=!1,this._index=0},onLoad:function(){this.board=this.node.getComponent("Board"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell")},start:function(){},checkPortal:function(){if(this._isstart&&this._isallkeydone.length>0){for(var e=!1,t=0;t<this._isallkeydone.length;t++){if(!this._isallkeydone[t]){e=!0;break}}if(e)return;this._fallingDoneFunc&&(this._fallingDoneFunc(),this._fallingDoneFunc=null),this._isopenPortal=!1,this._isstart=!1,this._isallkeydone.length=0}},openPortal:function(e){var t=this;this._keycelllist.length=0,this._isallkeydone.length=0,this._fallingDoneFunc=null,this._isstart=!1,this._index=0;var i=[];if(this.ProcessBoardCell.getAllKeys(i),0!==i.length){this._fallingDoneFunc=e;for(var o=0;o<i.length;o++)this._isallkeydone.push(!1),this._isstart=!0;for(var s=[],n=function(e){var o=cc.callFunc(function(){var o=i[e],s=function(){this._isallkeydone[this._index]=!0,this._index+=1,this.checkPortal()}.bind(t);t.processOneCell(o,s)},t);s.push(o),s.push(cc.delayTime(.2))},a=0;a<i.length;a++)n(a);this.node.runAction(cc.sequence(s))}else e&&e()},processOneCell:function(e,t){var i=e.getComponent("Cell"),o=i.column,n=i.row;switch(i.celltype){case s.KeyUp:if(n<c-1){for(var a=n+1,l=0,h=!1;a<c;a++){var u=this.ProcessBoardCell.getCell(o,a);if(u){u.getComponent("Cell").celltype===s.Chest&&(h=!0);break}l+=1}0!==l||h?this.moveKey(e,o,n+l,l,t):t&&t()}break;case s.KeyDown:if(n>0){for(var d=n-1,p=0,v=!1;d>=0;d--){var f=this.ProcessBoardCell.getCell(o,d);if(f){f.getComponent("Cell").celltype===s.Chest&&(v=!0);break}p+=1}0!==p||v?this.moveKey(e,o,n-p,p,t):t&&t()}break;case s.KeyLeft:if(o>0){for(var m=o-1,g=0,C=!1;m>0;m--){var S=this.ProcessBoardCell.getCell(m,n);if(S){S.getComponent("Cell").celltype===s.Chest&&(C=!0);break}g+=1}0!==g||C?this.moveKey(e,o-g,n,g,t):t&&t()}break;case s.KeyRight:if(o<r-1){for(var b=o+1,k=0,_=!1;b<r;b++){var w=this.ProcessBoardCell.getCell(b,n);if(w){w.getComponent("Cell").celltype===s.Chest&&(_=!0);break}k+=1}0!==k||_?this.moveKey(e,o+k,n,k,t):t&&t()}}},moveKey:function(e,t,i,o,n){var a=this;this._isopenPortal=!0;var h=.1*o,u=this.board.SpawnCells.getCellPos(t,i),d=cc.moveTo(h,u),p=e.getComponent("Cell"),v=p.column,f=p.row;this.ProcessBoardCell.setCell(v,f,null),l.instance.playKey();var m=cc.callFunc(function(){switch(p.column=t,p.row=i,a.ProcessBoardCell.setCell(t,i,e),p.celltype){case s.KeyLeft:if(t>0){var o=a.ProcessBoardCell.getCell(t-1,i);if(o)o.getComponent("Cell").celltype===s.Chest?a.openChest(e,o,n):n&&n();else n&&n()}break;case s.KeyRight:if(t<r-1){var l=a.ProcessBoardCell.getCell(t+1,i);if(l)l.getComponent("Cell").celltype===s.Chest?a.openChest(e,l,n):n&&n();else n&&n()}break;case s.KeyUp:if(i<c-1){var h=a.ProcessBoardCell.getCell(t,i+1);if(h)h.getComponent("Cell").celltype===s.Chest?a.openChest(e,h,n):n&&n();else n&&n()}break;case s.KeyDown:if(i>0){var u=a.ProcessBoardCell.getCell(t,i-1);if(u)u.getComponent("Cell").celltype===s.Chest?a.openChest(e,u,n):n&&n();else n&&n()}}},this);e.runAction(cc.sequence(d,m))},openChest:function(e,t,i){var o=this;this._isopenPortal=!0;var c=t.position,r=cc.v2(c.x,c.y);e.zIndex=t.zIndex-1;var l=cc.moveTo(.1,r).easing(cc.easeOut(5)),h=cc.callFunc(function(){},this),u=cc.callFunc(function(){var s=t.parent,c=t.position.x+t.width/2,r=t.position.y+.8*t.height,l=function(){var o=cc.v2(c,r);this.showflashEffect(s,o);var l=t.position;l.y=t.position.y+.5*t.height;var h=t.getComponent("Cell").getDataCell(),u=function(){var o=cc.callFunc(function(){a.instance.removeCell(t),a.instance.removeCell(e),i&&i()},this);this.node.runAction(cc.sequence(cc.delayTime(0),o))}.bind(this);switch(h.ChestType){case n.Prop:this.showProps(s,o,u);break;case n.Diamond:this.showDiamonds(l),u();break;case n.Skill:this.showSkills(),u();break;case n.Coin:this.showCoins(l),u();break;default:u()}}.bind(o);t.getComponent("Cell").openChest(l)},this),d=cc.callFunc(function(){a.instance.updateCell(s.Chest,1)},this),p=(cc.callFunc(function(){a.instance.removeCell(t),a.instance.removeCell(e)},this),cc.callFunc(function(){i&&i()},this),cc.scaleTo(.2,0).easing(cc.easeOut(5))),v=cc.sequence(l,p,h,d,u);e.runAction(v)},showflashEffect:function(e,t){cc.loader.loadRes("prefab/particle/killDustParticle",function(i,o){var s=cc.instantiate(o);s&&(s.scale=1,s.parent=e,s.position=t,s.runAction(cc.sequence(cc.delayTime(2),cc.removeSelf())))})},showCoins:function(e){a.instance.Board;var t,i=this.getCoinNum(),o=this.node;t="prefab/ChestCoin",cc.loader.loadRes(t,function(t,s){t&&cc.error(t);var n=cc.instantiate(s),c=e;c.x+=1*n.width/2,n.position=c,n.scale=0,n.parent=o,n.group="UI",n.getChildByName("num").getComponent(cc.Label).string=i+"",n.scale=0;var r=cc.scaleTo(.5,1).easing(cc.easeOut(3)),l=cc.moveBy(.6,cc.v2(0,50)),h=cc.spawn(r,l),u=cc.moveBy(1,cc.v2(0,100)),d=cc.callFunc(function(){a.instance.updateCoin(i)},this),p=cc.sequence(h,u,d,cc.removeSelf());n.runAction(p)})},showDiamonds:function(e){a.instance.Board;var t,i=this.getDiamondNum(),o=this.node;t="prefab/ChestDiamond",cc.loader.loadRes(t,function(t,s){t&&cc.error(t);var n=cc.instantiate(s),c=e;c.x+=1*n.width/2,n.position=c,n.scale=0,n.parent=o,n.group="UI",n.getChildByName("num").getComponent(cc.Label).string=i+"",n.scale=0;var r=cc.scaleTo(.5,1).easing(cc.easeOut(3)),l=cc.moveBy(.6,cc.v2(0,50)),h=cc.spawn(r,l),u=cc.moveBy(1,cc.v2(0,100)),d=cc.callFunc(function(){a.instance.updateDiamond(i)},this),p=cc.sequence(h,u,d,cc.removeSelf());n.runAction(p)})},showProps:function(e,t,i){var n=[s.DiamondBombProp,s.ClearBombProp,s.DoubleHorinalProp,s.DoubleVerticalProp],a=o.computeSpin([10,2,10,10]),c=n.length-1,r=o.randomRangeInt(0,c);r=n[a];var l=function(e){e.scale=0;var t=cc.scaleTo(.3,1.3).easing(cc.easeOut(3)),o=cc.moveBy(.3,cc.v2(0,20)),s=cc.spawn(t,o),n=cc.moveBy(.5,cc.v2(0,100)),a=cc.callFunc(function(){u.shootProp(e,r,i)},u),c=cc.sequence(s,n,a);e.runAction(c)}.bind(this),h="prefab/cell/DiamondBombProp",u=this;switch(r){case s.ClearBombProp:case s.SameColorProp:h="prefab/cell/DiamondBombProp";break;case s.DoubleHorinalProp:h="prefab/cell/DoubleHorinalProp";break;case s.DoubleVerticalProp:h="prefab/cell/DoubleVerticalProp";break;case s.DiamondBombProp:h="prefab/cell/DiamondBombProp"}cc.loader.loadRes(h,function(i,o){var s=cc.instantiate(o);s.parent=e,s.position=t,l&&l(s)})},getCoinNum:function(){var e=[100,200,300,400,500][o.computeSpin([50,40,30,20,10])];return o.randomRangeInt(0,e)},getDiamondNum:function(){var e=[5,10,15,20,25][o.computeSpin([50,40,30,20,10])];return o.randomRangeInt(0,e)},showSkills:function(e){},bomb:function(e,t){cc.loader.loadRes("prefab/boomEffect",function(i,o){var s=cc.instantiate(o);s.scale=.8,s.parent=e,s.position=t;var n=s.getComponent("PlayAnimation");n&&n.play()})},showBoby:function(e,t){o.showBaby(e,t,null)},shootProp:function(e,t,i){var o=this,s=this.ProcessBoardCell.randomGetCellFromTopToBottom(1);if(s.length>0){var n=s[0],a=n.position,c=Math.abs(n.width-e.width),r=Math.abs(n.height-e.height);a.x+=c,a.y+=r;var l=cc.v2();a.sub(e.position,l);var u=l.mag()/150*.2,d=cc.moveTo(u,a),p=cc.callFunc(function(){var s=n.getComponent("Cell"),a=function(o){this.ProcessBoardCell.setCell(s.column,s.row,o),h.instance.deSpawnCell(n),(s=o.getComponent("Cell")).init(t,1);var a=o.scale;o.scale=0;var c=cc.scaleTo(.2,a).easing(cc.easeOut(3));o.runAction(c),e.destroy(),i&&i()}.bind(o);h.instance.spawnCell(t,s.column,s.row,1,a)},this),v=cc.sequence(d,p);e.runAction(v)}else e.destroy(),i&&i()}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",Game:"Game",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",RPGManager:"RPGManager",Utils:"Utils"}],ProcessBoardCell:[function(e,t,i){"use strict";cc._RF.push(t,"59ac6LvvwtMAqO9A3canoyS","ProcessBoardCell");var o=e("Utils").NUMROWS,s=e("Utils").NUMCOLUMNS,n=e("EnumDefine").CellType,a=(e("Utils"),e("Sort")),c=cc.Class({extends:cc.Component,properties:{},onLoad:function(){c.instance=this,this.cellList=[],this.sideCellList=[],this.skillCirclelist=[]},statics:{instance:null},start:function(){},printCellsNull:function(){for(var e=0;e<o;e++)for(var t=0;t<s;t++){void 0===this.getCell(t,e)&&console.log("column, row",t,e)}var i=this.getCell(0,4);if(i){i.getComponent("Cell");var n=i.position;cc.log("pos",n.x,n.y),i.scale=3}},printCells:function(){for(var e=0;e<this.cellList.length;e++){var t=this.cellList[e];if(t){var i=t.getComponent("Cell"),o=i.row,s=i.column;console.log("row, column, lv",o,s,i.celltype)}}},setCelllistNull:function(e){for(var t=0;t<e.length;t++){var i=e[t];i&&this.setCellNull(i)}},clearAllSideCells:function(){this.sideCellList.length=0},clearAllCells:function(){this.cellList.length=0},getAllSideCells:function(e){for(var t=0;t<o;t++)for(var i=0;i<s;i++){var n=this.getSideCell(i,t);n&&e.push(n)}},getAllCells:function(e){for(var t=0;t<o;t++)for(var i=0;i<s;i++){var n=this.getCell(i,t);n&&e.push(n)}},getSideCell:function(e,t){if(e<0||e>=s||t<0||t>=o)return null;var i=t*o+e;return this.sideCellList[i]},getCell:function(e,t){if(e<0||e>=s||t<0||t>=o)return null;var i=t*o+e;return this.cellList[i]},getSkillCircle:function(e,t){if(e<0||e>=s||t<0||t>=o)return null;var i=t*o+e;return this.skillCirclelist[i]},setSkillCircle:function(e,t,i){if(!(e<0||e>=s||t<0||t>=o)){var n=t*o+e;this.skillCirclelist[n]=i}},showAllCircles:function(e){for(var t=0;t<o;t++)for(var i=0;i<s;i++){var n=this.getSkillCircle(i,t);n&&(n.active=e)}},setCellNull:function(e){if(e){var t=e.getComponent("Cell"),i=t.row,o=t.column;this.setCell(o,i,null)}},setCell:function(e,t,i){var s=t*o+e;this.cellList[s]=i},setSideCell:function(e,t,i){var s=t*o+e;this.sideCellList[s]=i},removeCell:function(e){this.setCellNull(e)},randomRange:function(e,t){return Math.random()*(t-e)+e},randomRangeInt:function(e,t){return Math.floor(this.randomRange(e,t))},getMultiCross:function(e,t,i,o){if(1===i){var s=[];this.getHorinalCells(t,s),s.length>0&&o.push(s);var n=[];this.getVerticalCells(e,n),n.length>0&&o.push(n)}else if(2===i){var a=[];this.getHorinalCells(t,a),a.length>0&&o.push(a);var c=[];this.getVerticalCells(e,c),c.length>0&&o.push(c);var r=[];this.getRightPlaneCells(e,t,r),r.length>0&&o.push(r)}else if(3===i){var l=[];this.getHorinalCells(t,l),l.length>0&&o.push(l);var h=[];this.getVerticalCells(e,h),h.length>0&&o.push(h);var u=[];this.getRightPlaneCells(e,t,u),u.length>0&&o.push(u);var d=[];this.getLeftPlaneCells(e,t,d),d.length>0&&o.push(d)}else if(i>=4){var p=[];this.getHorinalCells(t-1,p),p.length>0&&o.push(p);var v=[];this.getHorinalCells(t+1,v),v.length>0&&o.push(v);var f=[];this.getVerticalCells(e-1,f),f.length>0&&o.push(f);var m=[];this.getVerticalCells(e+1,m),m.length>0&&o.push(m)}},getMultiHorinals:function(e,t,i){for(var s=[[0],[-1,1],[-1,0,1],[-2,-1,1,2]][t-1],n=0;n<s.length;n++){var a=e+s[n];if(a>=0&&a<o){var c=[];this.getHorinalCells(a,c),c.length>0&&i.push(c)}}},getMultiVerticals:function(e,t,i){for(var o=[[0],[-1,1],[-1,0,1],[-2,-1,1,2]][t-1],n=0;n<o.length;n++){var a=e+o[n];if(a>=0&&a<s){var c=[];this.getVerticalCells(a,c),c.length>0&&i.push(c)}}},getMultiRightPlane:function(e,t,i,o){var s=[];switch(i){case 1:s=[{col:0,row:0}];break;case 2:s=[{col:-1,row:0},{col:0,row:0},{col:1,row:0}];break;case 3:s=[{col:-2,row:0},{col:-1,row:0},{col:0,row:0},{col:1,row:0},{col:2,row:0}];break;case 4:s=[{col:-3,row:0},{col:-2,row:0},{col:-1,row:0},{col:-2,row:0},{col:-1,row:0},{col:0,row:0},{col:1,row:0},{col:2,row:0},{col:1,row:0},{col:2,row:0},{col:3,row:0}]}for(var n=0;n<s.length;n++){var a=s[n],c=a.col+e,r=a.row+t,l=[];this.getRightPlaneCells(c,r,l),l.length>0&&o.push(l)}},getMultiLeftPlane:function(e,t,i,o){var s=[];switch(i){case 1:s=[{col:0,row:0}];break;case 2:s=[{col:-1,row:0},{col:0,row:0},{col:1,row:0}];break;case 3:s=[{col:-2,row:0},{col:-1,row:0},{col:0,row:0},{col:1,row:0},{col:2,row:0}];break;case 4:s=[{col:-3,row:0},{col:-2,row:0},{col:-1,row:0},{col:-2,row:0},{col:-1,row:0},{col:0,row:0},{col:1,row:0},{col:2,row:0},{col:1,row:0},{col:2,row:0},{col:3,row:0}]}for(var n=0;n<s.length;n++){var a=s[n],c=a.col+e,r=a.row+t,l=[];this.getLeftPlaneCells(c,r,l),l.length>0&&o.push(l)}},getMultiDiamondShapes:function(e,t,i,n){var a=[];switch(i){case 1:a=[[{col:-1,row:0},{col:1,row:0}],[{col:0,row:1}],[{col:0,row:-1}]];break;case 2:a=[[{col:-1,row:0},{col:-2,row:0},{col:1,row:0},{col:2,row:0}],[{col:-1,row:1},{col:1,row:1}],[{col:-1,row:-1},{col:1,row:-1}],[{col:0,row:-2}],[{col:0,row:2}]];break;case 3:case 4:a=[[{col:-1,row:0},{col:-2,row:0},{col:-3,row:0},{col:1,row:0},{col:2,row:0},{col:3,row:0}],[{col:-1,row:1},{col:-2,row:1},{col:0,row:1},{col:1,row:1},{col:2,row:1}],[{col:-1,row:2},{col:0,row:2},{col:1,row:2}],[{col:0,row:3}],[{col:-1,row:-2},{col:0,row:-2},{col:1,row:-2}],[{col:-1,row:-1},{col:-2,row:-1},{col:0,row:-1},{col:1,row:-1},{col:2,row:-1}],[{col:0,row:-3}]]}for(var c=0;c<a.length;c++){for(var r=a[c],l=[],h=0;h<r.length;h++){var u=r[h],d=u.col+e,p=u.row+t;if(d>=0&&d<s&&p>=0&&p<o){var v=this.getCell(d,p);if(v)v.getComponent("Cell").canRemove()&&l.push(v)}}l.length>0&&n.push(l)}},getBrushArea:function(e,t,i,n){var a=[];switch(i){case 1:a=[[{col:-1,row:1},{col:0,row:1},{col:1,row:1}],[{col:-1,row:0},{col:1,row:0}],[{col:-1,row:-1},{col:0,row:-1},{col:1,row:-1}]];break;case 2:a=[[{col:-2,row:1},{col:-1,row:1},{col:0,row:1},{col:1,row:1},{col:2,row:1}],[{col:-2,row:0},{col:-1,row:0},{col:1,row:0},{col:2,row:0}],[{col:-2,row:-1},{col:-1,row:-1},{col:0,row:-1},{col:1,row:-1},{col:2,row:-1}]];break;case 3:a=[[{col:-1,row:2},{col:1,row:2}],[{col:-2,row:1},{col:-1,row:1},{col:0,row:1},{col:1,row:1},{col:2,row:1}],[{col:-2,row:0},{col:-1,row:0},{col:1,row:0},{col:2,row:0}],[{col:-2,row:-1},{col:-1,row:-1},{col:0,row:-1},{col:1,row:-1},{col:2,row:-1}],[{col:-1,row:-2},{col:1,row:-2}]];break;case 4:a=[[{col:-2,row:2},{col:-1,row:2},{col:0,row:2},{col:1,row:2},{col:2,row:2}],[{col:-2,row:1},{col:-1,row:1},{col:0,row:1},{col:1,row:1},{col:2,row:1}],[{col:-2,row:0},{col:-1,row:0},{col:1,row:0},{col:2,row:0}],[{col:-2,row:-1},{col:-1,row:-1},{col:0,row:-1},{col:1,row:-1},{col:2,row:-1}],[{col:-2,row:-2},{col:-1,row:-2},{col:0,row:-2},{col:1,row:-2},{col:2,row:-2}]]}for(var c=0;c<a.length;c++)for(var r=a[c],l=0;l<r.length;l++){var h=r[l],u=h.col+e,d=h.row+t;if(u>=0&&u<s&&d>=0&&d<o){var p=this.getCell(u,d);if(p)p.getComponent("Cell").canRemove()&&n.push(p)}}},getLeftPlaneCells:function(e,t,i){for(var n=t+1,a=e+1;n<o&&a<s;){var c=this.getCell(a,n);if(c&&c.parent)c.getComponent("Cell").canRemove()&&i.push(c);n+=1,a+=1}for(n=t-1,a=e-1;n>=0&&a>=0;){var r=this.getCell(a,n);if(r&&r.parent)r.getComponent("Cell").canRemove()&&i.push(r);n-=1,a-=1}},getRightPlaneCells:function(e,t,i){for(var n=t+1,a=e-1;n<o&&a>=0;){var c=this.getCell(a,n);if(c&&c.parent)c.getComponent("Cell").canRemove()&&i.push(c);n+=1,a-=1}for(n=t-1,a=e+1;n>=0&&a<s;){var r=this.getCell(a,n);if(r&&r.parent)r.getComponent("Cell").canRemove()&&i.push(r);n-=1,a+=1}},getHorinalCells:function(e,t){for(var i=0;i<s;i++){var o=this.getCell(i,e);if(o&&o.parent)o.getComponent("Cell").canRemove()&&t.push(o)}},getVerticalCells:function(e,t){for(var i=0;i<o;i++){var s=this.getCell(e,i);if(s&&s.parent)s.getComponent("Cell").canRemove()&&t.push(s)}},get34Cells:function(e,t,i,o){for(var s=[t-2,t-1,t,t+1,t+2],n=0;n<s.length;n++){for(var a=s[n],c=[],r=e-2;r<=e+2;r++){var l=this.getCell(r,a);if(l)l.getComponent("Cell").canRemove()&&(c.push(l),i.push(l))}c.length>0&&o.push(c)}},getDiamondCells:function(e,t,i,n){var a=[],c=[],r=[],l=[],h=[];if(t+2<o){var u=this.getCell(e,t+2);if(u)u.getComponent("Cell").canRemove()&&(i.push(u),a.push(u))}if(t+1<o){var d=this.getCell(e,t+1);if(d)d.getComponent("Cell").canRemove()&&(i.push(d),c.push(d))}if(e-1>=0&&t+1<o){var p=this.getCell(e-1,t+1);if(p)p.getComponent("Cell").canRemove()&&(i.push(p),c.push(p))}if(e+1<s&&t+1<o){var v=this.getCell(e+1,t+1);if(v)v.getComponent("Cell").canRemove()&&(i.push(v),c.push(v))}var f=this.getCell(e,t);f&&(f.getComponent("Cell").canRemove()&&(i.push(f),r.push(f)));if(e-1>=0){var m=this.getCell(e-1,t);if(m)m.getComponent("Cell").canRemove()&&(i.push(m),r.push(m))}if(e-2>=0){var g=this.getCell(e-2,t);if(g)g.getComponent("Cell").canRemove()&&(i.push(g),r.push(g))}if(e+1<s){var C=this.getCell(e+1,t);if(C)C.getComponent("Cell").canRemove()&&(i.push(C),r.push(C))}if(e+2<s){var S=this.getCell(e+2,t);if(S)S.getComponent("Cell").canRemove()&&(i.push(S),r.push(S))}if(t-1>=0){var b=this.getCell(e,t-1);if(b)b.getComponent("Cell").canRemove()&&(i.push(b),l.push(b))}if(e-1>=0&&t-1>=0){var k=this.getCell(e-1,t-1);if(k)k.getComponent("Cell").canRemove()&&(i.push(k),l.push(k))}if(e+1<s&&t-1>=0){var _=this.getCell(e+1,t-1);if(_)_.getComponent("Cell").canRemove()&&(i.push(_),l.push(_))}if(t-2>=0){var w=this.getCell(e,t-2);if(w)w.getComponent("Cell").canRemove()&&(i.push(w),h.push(w))}n&&(a.length>0&&n.push(a),c.length>0&&n.push(c),r.length>0&&n.push(r),l.length>0&&n.push(l),h.length>0&&n.push(h))},checkCellConnect:function(e,t){var i=e.row,o=e.column,s=t.row,n=t.column;return i==s&&o==n-1||(i==s&&o==n+1||(n==o&&i==s-1||(n==o&&i==s+1||(i==s+1&&o==n-1||(i==s+1&&o==n+1||(i==s-1&&o==n-1||i==s-1&&o==n+1))))))},getXlist:function(e,t,i,n,a,c){for(var r=e,l=t;e+1<o&&t+1<s;){var h=this.getCell(t+1,e+1);if(h)h.getComponent("Cell").canRemove()&&i.push(h);e+=1,t+=1}for(e=r,t=l;e-1>=0&&t-1>=0;){var u=this.getCell(t-1,e-1);if(u)u.getComponent("Cell").canRemove()&&n.push(u);e-=1,t-=1}for(e=r,t=l;e+1<o&&t-1>=0;){var d=this.getCell(t-1,e+1);if(d)d.getComponent("Cell").canRemove()&&a.push(d);e+=1,t-=1}for(e=r,t=l;e-1>=0&&t+1<s;){var p=this.getCell(t+1,e-1);if(p)p.getComponent("Cell").canRemove()&&c.push(p);e-=1,t+=1}},getXXlist:function(e,t,i,o,s,n,a,c){this.getXlist(e,t,i,o,s,n),this.getHorinalCells(e,a),this.getVerticalCells(t,c)},getClearBomblist:function(){for(var e=[],t=0;t<o;t++)for(var i=0;i<s;i++){var n=this.getCell(i,t);if(n)n.getComponent("Cell").canRemove()&&e.push(n)}return e},getAllKeys:function(e){for(var t=0;t<o;t++)for(var i=0;i<s;i++){var a=this.getCell(i,t);if(a)switch(a.getComponent("Cell").celltype){case n.KeyLeft:case n.KeyRight:case n.KeyUp:case n.KeyDown:e.push(a)}}},getFourConorSideCells:function(e,t,i){if(e-1>=0){var n=this.getSideCell(e-1,t);n&&i.push(n)}if(e+1<s){var a=this.getSideCell(e+1,t);a&&i.push(a)}if(t-1>=0){var c=this.getSideCell(e,t-1);c&&i.push(c)}if(t+1<o){var r=this.getSideCell(e,t+1);r&&i.push(r)}},getFourConorNormalCells:function(e,t,i){for(var o=[-1,0,1],s=[1,0,-1],n=0;n<o.length;n++)for(var a=o[n]+e,c=0;c<s.length;c++){var r=s[c]+t;if(a!==e&&r!==t){var l=this.getCell(a,r);if(l){var h=l.getComponent("Cell");h.normalCell()&&h.IsBlockCoverRemoved()&&i.push(l)}}}},getFourConorCells:function(e,t,i){if(e-1>=0){var n=this.getCell(e-1,t);if(n)n.getComponent("Cell").canRemove()&&i.push(n)}if(e+1<s){var a=this.getCell(e+1,t);if(a)a.getComponent("Cell").canRemove()&&i.push(a)}if(t-1>=0){var c=this.getCell(e,t-1);if(c)c.getComponent("Cell").canRemove()&&i.push(c)}if(t+1<o){var r=this.getCell(e,t+1);if(r)r.getComponent("Cell").canRemove()&&i.push(r)}},getSameCelllist:function(e){for(var t=[],i=0;i<o;i++)for(var n=0;n<s;n++){var a=this.getCell(n,i);if(a){var c=a.getComponent("Cell");c&&c.celltype===e&&t.push(a)}}return t},getSaliveCells:function(e){for(var t=0;t<o;t++)for(var i=0;i<s;i++){var a=this.getCell(i,t);if(a){var c=a.getComponent("Cell");c&&c.celltype===n.Salive&&e.push(a)}}},randomGetNormalCells:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s*o,t=[],i=0;i<o;i++)for(var n=0;n<s;n++){var c=this.getCell(n,i);if(c){var r=c.getComponent("Cell");r&&r.normalCell()&&r.IsBlockCoverRemoved()&&t.push(c)}}a.shuffle(t);for(var l=[],h=0;h<e;h++)l.push(t[h]);return l},randomCellUseCellType:function(e,t){for(var i=[],n=0;n<o;n++)for(var c=0;c<s;c++){var r=this.getCell(c,n);if(r){var l=r.getComponent("Cell");l&&l.celltype===e&&i.push(r)}}a.shuffle(i);for(var h=[],u=0;u<t;u++)h.push(i[u]);return h}});cc._RF.pop()},{EnumDefine:"EnumDefine",Sort:"Sort",Utils:"Utils"}],ProcessGameDone:[function(e,t,i){"use strict";cc._RF.push(t,"242far/MN9Cg6ox5nnui1G4","ProcessGameDone");var o=e("EnumDefine").LevelResult,s=e("Utils"),n=e("LocalStorage"),a=e("PlayFightAudio"),c=e("RPGManager");cc.Class({extends:cc.Component,properties:{GameNode:cc.Node,BoardNode:cc.Node,CameraNode:cc.Node,AchievementNormal:cc.Prefab,AchievementEndless:cc.Prefab},onLoad:function(){this.Game=this.GameNode.getComponent("Game"),this.Board=this.BoardNode.getComponent("Board"),this.stepAward=this.BoardNode.getComponent("StepAward"),this.cameraControl=this.CameraNode.getComponent("CameraControl")},start:function(){},processWin:function(){var e=this.Game.getSteps(),t=s.levelID;if(s.levelResultData.score=100*e,this.Board.setUserInteract(!1),this.Game.stopAudio(),a.instance.playWow(),n.instance.getLevelStepAward(t))this.win();else{var i=function(){this.win()}.bind(this),o=function(){this.stepAward.shootSteps(e,i),n.instance.setLevelStepAward(t,!0)}.bind(this);this.Board.cellsBonustime(o,1)}},win:function(){s.levelResultData.levelResult=o.Win;var e=c.instance.gameDoneDisVal,t=function(){var t=function(){}.bind(this);this.midbkFadeOut(),c.instance.startMove(t,e)}.bind(this);this.Board.cellsReady(t,1)},midbkFadeOut:function(){var e=function(){this.transfromScene()}.bind(this);c.instance.fadeOutMidshotBk(e)},loadEndlessAddStep:function(){var e=function(){var e=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/EndlessAddStep",function(t,i){var o=cc.instantiate(i);o&&(o.parent=e,o.active=!0)})}.bind(this);this.Board.timeUp(e)},loadAddStep:function(){this.loseCnt+=1;var e=function(){if(this.loseCnt>2)this.lose();else{var e=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/AddStep",function(t,i){var o=cc.instantiate(i);o&&(o.parent=e,o.active=!0)})}}.bind(this);this.Board.timeUp(e)},addStepSuccess:function(e){var t=function(){this.Game.playAudio(),this.Game.updateStep(e),this.Board.nexturn()}.bind(this);this.Board.cellsIdle(t,.6)},lose:function(){var e=function(){var e=function(){var e=this;s.levelResultData.levelResult=o.Lose;var t=cc.callFunc(function(){e.showAchievement()},this),i=cc.delayTime(1),n=cc.spawn(cc.delayTime(.2),t),a=cc.callFunc(function(){e.loadLoseAnimation()},this);this.node.runAction(cc.sequence(cc.delayTime(.5),a,i,n,null))}.bind(this);c.instance.fadeOutMidshotBk(e)}.bind(this);this.Board.cellsCrazy(e,1)},endlessLose:function(){var e=function(){var e=function(){var e=this,t=cc.callFunc(function(){e.showAchievementEndless()},this),i=cc.spawn(cc.delayTime(.2),t);this.node.runAction(cc.sequence(cc.delayTime(.2),i,null))}.bind(this);c.instance.fadeOutMidshotBk(e)}.bind(this);this.Board.cellsCrazy(e,1)},transfromScene:function(){var e=this,t=cc.callFunc(function(){e.showAchievement()},this),i=cc.delayTime(2),o=cc.spawn(cc.delayTime(.2),t),s=cc.callFunc(function(){e.loadWinAnimation()},this);this.node.runAction(cc.sequence(cc.delayTime(.5),s,i,o,null))},loadWinAnimation:function(){var e=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/Achievement/Win",function(t,i){var o=cc.instantiate(i);o&&(o.parent=e,o.position=cc.v2(0,0),o.zIndex=2,o.group="UI",o.getComponent("Win").showWin(),o.runAction(cc.sequence(cc.delayTime(2),cc.fadeOut(1),cc.removeSelf())))})},loadLoseAnimation:function(){var e=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/Achievement/Lose",function(t,i){var o=cc.instantiate(i);o&&(o.parent=e,o.position=cc.v2(0,0),o.zIndex=10,o.group="UI",o.getComponent("Win").showLose(),o.runAction(cc.sequence(cc.delayTime(1),cc.fadeOut(.5),cc.removeSelf())))})},showAchievement:function(){var e=cc.instantiate(this.AchievementNormal);e.group="UI",e.zIndex=10;var t=cc.director.getScene()._children[0];e.parent=t,e.position=cc.v2();var i=e.getComponent("Achievement");if(i){var o=function(){this.Game.battleExit()}.bind(this);i.battleExit=o}},showAchievementEndless:function(){var e=cc.instantiate(this.AchievementEndless);e.group="UI";var t=cc.director.getScene()._children[0];e.parent=t,e.position=cc.v2(),e.zIndex=10;var i=e.getComponent("Achievement");if(i){var o=function(){this.Game.battleExit()}.bind(this);i.battleExit=o}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",PlayFightAudio:"PlayFightAudio",RPGManager:"RPGManager",Utils:"Utils"}],ProcessSpinData:[function(e,t,i){"use strict";cc._RF.push(t,"847036VNTtJ6Y6hz8Wu1VNZ","ProcessSpinData");e("JsonData");var o=e("LocalStorage"),s=e("EnumDefine").ActorType,n=e("EnumDefine").PetType,a=e("EnumDefine").PetAttribute,c=e("Utils");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},getSpinChestData:function(e,t,i,o,s){var n={};if(e>0&&(n.coin=e),t>0&&(n.diamond=t),s>0&&(n.key=s),i>0)for(var a=[],c=0;c<o;c++){var r={};r.ID=this.spinPetID(),r.num=i,a.push(r),n.pet=a}return n},getCoinData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i={};return i.coin=e,i.spinDouble=t,i},getDiamondData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i={};return i.diamond=e,i.spinDouble=t,i},getPetData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.UnKnown,o=[],s={};i!==n.UnKnown?s.ID=i:s.ID=this.spinPetID(),s.num=e,o.push(s);var a={};return a.pet=o,a.spinDouble=t,a},getSpinData:function(e){if(e){var t=e.coinNums,i=e.diamondNums,o=e.cardNums,s=e.petNums,n=0,a=0,r=0;t&&(n=c.randomRangeInt(t[0],t[1])),i&&(a=c.randomRangeInt(i[0],i[1])),s&&(r=c.randomRangeInt(s[0],s[1]));var l={},h=[];if(o)for(var u=0;u<r;u++){var d={};d.ID=this.spinPetID();var p=c.randomRangeInt(o[0],o[1]);d.num=p,h.push(d)}return l.pet=h,l.coin=n,l.diamond=a,l.spinDouble=1,l}},spinPetID:function(){var e=this.getPetIdlist(),t=[],i=(a.A,c.computeSpin([50,30,20]));return 0==i?(a.A,t=e[0]):1==i?(a.B,t=e[1]):(a.S,t=e[2]),t[c.randomRangeInt(0,t.length)]},getPetIdlist:function(){for(var e=[],t=[],i=[],a=[],c=[s.Actor1,s.Actor2,s.Actor3,s.Actor4,s.Actor5],r=0;r<c.length;r++){var l=c[r];o.instance.getRoleData(l)&&a.push(l)}for(var h=0;h<a.length;h++){switch(a[h]){case s.Actor1:e.push(n.Pet1),t.push(n.Pet2),i.push(n.Pet3);break;case s.Actor2:e.push(n.Pet4),t.push(n.Pet5),i.push(n.Pet6);break;case s.Actor3:e.push(n.Pet7),t.push(n.Pet8),i.push(n.Pet9);break;case s.Actor4:e.push(n.Pet10),t.push(n.Pet11),i.push(n.Pet12);break;case s.Actor5:e.push(n.Pet13),t.push(n.Pet14),i.push(n.Pet15)}}return[e,t,i]}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],ProcessStory:[function(e,t,i){"use strict";cc._RF.push(t,"c02cedXzgVL2oEbDqpvJCPP","ProcessStory");var o=e("Utils"),s=e("EnumDefine").ExplorationSubStage,n=cc.Class({extends:cc.Component,properties:{topBoxIn:cc.Sprite,topBoxOut:cc.Sprite,bottomBox:cc.Sprite,sun:cc.Sprite,perspective:cc.Sprite,midshotOne_1:cc.Sprite,midshotOne_2:cc.Sprite,midshotOne_3:cc.Sprite,midshotOne_4:cc.Sprite,foreground1:cc.Sprite,foreground2:cc.Sprite,foreground3:cc.Sprite,foreground4:cc.Sprite,ground:cc.Node,midshotOne:cc.Node,clouds:{default:[],type:cc.Sprite},snowFallNode:cc.Node},onLoad:function(){n.instance=this,this.stageFileNamesData=null,this.nodelist=[]},statics:{instance:null},start:function(){},adjust:function(){this.adjustGround(this.foreground1.node),this.adjustGround(this.foreground2.node),this.adjustGround(this.foreground3.node),this.adjustGround(this.foreground4.node),this.adjustMidShot(this.midshotOne_1.node),this.adjustMidShot(this.midshotOne_2.node),this.adjustMidShot(this.midshotOne_3.node),this.adjustMidShot(this.midshotOne_4.node)},updateAlignment:function(e){},show:function(e){this.explorationID=e;var t=o.GetExplorationSubStage(e);this.initExploration(t),this.snowFallNode&&(this.snowFallNode.active=!1),this.adjust()},initExploration:function(e,t){this.nodelist=[],this.subStage=e;var i=this.getExplorationData(e);this.stageFileNamesData=i;var s=i.path,n=this,a=o.StageSpriteAtlas;a?(this.setAtlas(a,i),t&&t()):cc.loader.loadRes(s,cc.SpriteAtlas,function(e,o){n.setAtlas(o,i),t&&t()})},setAtlas:function(e,t){var i=e.getSpriteFrame(t.topout);if(this.topBoxOut&&(this.topBoxOut.spriteFrame=i,this.updateAlignment(this.topBoxOut.node),this.nodelist.push(this.topBoxOut.node)),i=e.getSpriteFrame(t.topin),this.topBoxIn&&(this.topBoxIn.spriteFrame=i,this.updateAlignment(this.topBoxIn.node),this.nodelist.push(this.topBoxIn.node)),i=e.getSpriteFrame(t.bottom),this.bottomBox&&(this.bottomBox.spriteFrame=i,this.updateAlignment(this.bottomBox.node),this.nodelist.push(this.bottomBox.node)),i=e.getSpriteFrame(t.sun),this.sun&&(this.sun.spriteFrame=i,this.nodelist.push(this.sun.node)),i=e.getSpriteFrame(t.perspective),this.perspective&&(this.perspective.spriteFrame=i,this.updateAlignment(this.perspective.node),this.nodelist.push(this.perspective.node)),i=e.getSpriteFrame(t.midshot),this.midshotOne_1){this.midshotOne_1.spriteFrame=i,this.nodelist.push(this.midshotOne_1.node);var o=this.midshotOne_1.node;this.justWinds(o)}if(i=e.getSpriteFrame(t.midshot),this.midshotOne_2){this.midshotOne_2.spriteFrame=i,this.nodelist.push(this.midshotOne_2.node);var s=this.midshotOne_2.node;this.justWinds(s)}if(i=e.getSpriteFrame(t.midshot),this.midshotOne_3){this.midshotOne_3.spriteFrame=i,this.nodelist.push(this.midshotOne_3.node);var n=this.midshotOne_3.node;this.justWinds(n)}if(i=e.getSpriteFrame(t.midshot),this.midshotOne_4){this.midshotOne_4.spriteFrame=i,this.nodelist.push(this.midshotOne_4.node);var a=this.midshotOne_4.node;this.justWinds(a)}i=e.getSpriteFrame(t.foreground),this.foreground1&&(this.foreground1.spriteFrame=i,this.fliter(i),this.nodelist.push(this.foreground1.node)),i=e.getSpriteFrame(t.foreground),this.foreground2&&(this.foreground2.spriteFrame=i,this.fliter(i),this.nodelist.push(this.foreground2.node)),i=e.getSpriteFrame(t.foreground),this.foreground3&&(this.foreground3.spriteFrame=i,this.fliter(i),this.nodelist.push(this.foreground3.node)),i=e.getSpriteFrame(t.foreground),this.foreground4&&(this.foreground4.spriteFrame=i,this.fliter(i),this.nodelist.push(this.foreground4.node));for(var c=this.clouds,r=0;r<c.length;r++){var l=c[r];l&&(i=e.getSpriteFrame(t.clouds[r]),l.spriteFrame=i,this.nodelist.push(l.node))}},adjustGround:function(e){switch(this.subStage){case s.Farm1:case s.Farm2:case s.Farm3:e.height=102,e.y=290;break;case s.Forest1:case s.Forest2:case s.Forest3:e.height=175,e.y=310}},adjustMidShot:function(e){switch(this.subStage){case s.Farm1:e.height=201,e.y=184;break;case s.Farm2:e.height=297,e.y=264;break;case s.Farm3:e.height=201,e.y=184;break;case s.Forest1:case s.Forest2:case s.Forest3:e.height=292,e.y=262}},fadeTo:function(e,t){for(var i=0;i<this.nodelist.length;i++){this.nodelist[i].runAction(cc.fadeTo(.5,e))}var o=cc.callFunc(function(){t&&t()},this);this.node.runAction(cc.sequence(cc.delayTime(.5),o))},justWinds:function(e){var t=e.getChildByName("wind1"),i=e.getChildByName("wind2");if(t&&i)switch(this.subStage){case s.Farm1:t.position=cc.v2(125.58,26.7),i.position=cc.v2(281,27);break;case s.Farm2:t.position=cc.v2(123.7,-7),i.position=cc.v2(282,-9);break;case s.Farm3:t.position=cc.v2(122.6,32.5),i.position=cc.v2(282,27)}},getExplorationData:function(e){var t="",i="",o="",n="",a="",c="",r="",l="",h="",u="",d="",p=[];switch(e){case s.Farm1:t="texture/farm",a="farm_boxtop1",c="farm_boxbottom1",r="farm_boxbottom1",l="farm_foreground1",h="farm_midshot1",u="farm_perspective1",d="farm_sun1",p=["cloud1","cloud2","cloud3"],i="farm_boxone1",o="farm_boxtwo1",n="farm_boxtop3";break;case s.Farm2:t="texture/farm",a="farm_boxtop2",c="farm_boxbottom2",r="farm_boxbottom2",l="farm_foreground2",h="farm_midshot2",u="farm_perspective2",d="farm_sun2",p=["cloud1","cloud2","cloud3"],i="farm_boxone2",o="farm_boxtwo2",this.moveWinds(this.midshotOne_1,0,-35),this.moveWinds(this.midshotOne_2,0,-35),this.moveWinds(this.midshotOne_3,0,-35),this.moveWinds(this.midshotOne_4,0,-35),n="farm_boxtop1";break;case s.Farm3:t="texture/farm",a="farm_boxtop3",c="farm_boxbottom3",r="farm_boxbottom3",l="farm_foreground3",h="farm_midshot3",u="farm_perspective3",d="moon",p=["cloud1","cloud2","cloud3"],i="farm_boxone3",o="farm_boxtwo3",n="farm_boxtop2",this.showSnowFall();break;case s.Forest1:t="texture/forest",a="forest_boxtop1",c="forest_boxbottom1",r="forest_boxbottom1",l="forest_foreground1",h="forest_midshot1",u="forest_perspective1",d="forest_sun",p=["forest_cloud1","forest_cloud1big","forest_cloud1"],this.hideWinds(this.midshotOne_1),this.hideWinds(this.midshotOne_2),this.hideWinds(this.midshotOne_3),this.hideWinds(this.midshotOne_4),i="forest_boxone1",o="forest_boxtwo1",n="forest_boxtop3";break;case s.Forest2:t="texture/forest",a="forest_boxtop2",c="forest_boxbottom2",r="forest_boxbottom2",l="forest_foreground2",h="forest_midshot2",u="forest_perspective2",d="forest_sun",p=["forest_cloud2","forest_cloud2big","forest_cloud2"],this.hideWinds(this.midshotOne_1),this.hideWinds(this.midshotOne_2),this.hideWinds(this.midshotOne_3),this.hideWinds(this.midshotOne_4),i="forest_boxone2",o="forest_boxtwo2",n="forest_boxtop1";break;case s.Forest3:t="texture/forest",a="forest_boxtop3",c="forest_boxbottom3",r="forest_boxbottom3",l="forest_foreground3",h="forest_midshot3",u="forest_perspective3",d="moon",p=["forest_cloud3","forest_cloud3big","forest_cloud3"],this.hideWinds(this.midshotOne_1),this.hideWinds(this.midshotOne_2),this.hideWinds(this.midshotOne_3),this.hideWinds(this.midshotOne_4),i="forest_boxone3",o="forest_boxtwo3",n="forest_boxtop2"}var v={};return v.path=t,v.box1=i,v.box2=o,v.topin=c,v.topout=a,v.bottom=r,v.foreground=l,v.midshot=h,v.perspective=u,v.sun=d,v.clouds=p,v.blockside=n,v},moveWinds:function(e,t,i){for(var o=e.node.children,s=0;s<o.length;s++){var n=o[s];n&&(n.x+=t,n.y+=i)}},hideWinds:function(e){for(var t=e.node.children,i=0;i<t.length;i++){var o=t[i];o&&(o.active=!1)}},fliter:function(e){var t=e.getTexture();t.setFilters(cc.Texture2D.Filter.LINEAR,cc.Texture2D.Filter.LINEAR),t.setWrapMode(cc.Texture2D.WrapMode.GL_REPEAT,cc.Texture2D.WrapMode.GL_REPEAT)},showSnowFall:function(){var e=cc.director.getScene()._children[0],t=cc.instantiate(this.snowFallNode);t&&(t.active=!0,t.parent=e)}});cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],PropCellAttackArea:[function(e,t,i){"use strict";cc._RF.push(t,"a133bIGuZFGb4HXt3AbuIWy","PropCellAttackArea");var o=e("Utils").NUMROWS,s=(e("Utils").NUMCOLUMNS,e("PoolMng"),e("Utils"),e("EnumDefine").CellType),n=e("EnumDefine").CellGroupType;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.Board=this.node.getComponent("Board"),this.SpawnCells=this.node.getComponent("SpawnCells"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this._usedProplist=[],this._propdatalist=[],this.brushCellsData={}},start:function(){},clearCircles:function(){this._usedProplist.length=0},clear:function(){this._usedProplist.length=0,this._propdatalist.length=0},backAllBrushsData:function(){for(var e in this.brushCellsData){var t=this.brushCellsData[e];this.brushCellBack(t)}this.brushCellsData={}},clearBrushData:function(){this.brushCellsData={}},reSetPropCells:function(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.getComponent("Cell");if(o.propNormalCell())for(var s=0;s<this._propdatalist.length;s++){var n=this._propdatalist[s],a=this.ProcessBoardCell.getCell(n.column,n.row),c=a.getComponent("Cell");if(c.normalCell()&&(o.row!==c.row||o.column!==c.column)){var r=o.cellGroup,l=o.celltype;this.spawnNewCell(i,r),this.spawnNewCell(a,l)}}}this._propdatalist.length=0},addOnePropData:function(e,t,i){for(var o=-1,s=0;s<this._propdatalist.length;s++){var n=this._propdatalist[s];if(n.column===e&&n.row===t&&n.celltype===i){o=s;break}}if(-1===o){var a={};a.column=e,a.row=t,a.celltype=i,this._propdatalist.push(a)}},moveBacklink:function(e,t,i){var o=t.getComponent("Cell"),s=i.getComponent("Cell");if(o.celltype===s.celltype)return null;if(s.IsBrushCell()||o.IsBrushCell())return null;if(s.normalCell()||o.propNormalCell())return null;var n=e.indexOf(t),a=o.celltype,c=s.celltype;return i=this.spawnNewCell(i,a),t=this.spawnNewCell(t,c),s=i.getComponent("Cell"),o=t.getComponent("Cell"),s.unTouch(),o.touch(),e[n]=t,i},moveForWardlink:function(e,t,i){var o=t.getComponent("Cell"),s=i.getComponent("Cell");if(!o.IsBrushCell()&&(s.propNormalCell()?this.addOnePropData(s.column,s.row,s.celltype):0===this._propdatalist.length&&o.propNormalCell()&&this.addOnePropData(o.column,o.row,o.celltype),o.celltype!==s.celltype&&!o.normalCell()&&!s.propNormalCell())){var n=s.celltype,a=o.celltype,c=e.indexOf(t),r=e.indexOf(i);t=this.spawnNewCell(t,n),i=this.spawnNewCell(i,a),c>=0&&(e[c]=t),r>=0&&(e[r]=i),o=t.getComponent("Cell"),s=i.getComponent("Cell"),o.touch(),s.touch()}},spawnNewCell:function(e,t){var i=e.getComponent("Cell"),o=e.parent,s=cc.v2(e.x,e.y),n=i.column,a=i.row,c=e.zIndex;this.Board.deSpawnCell(e);var r=this.Board.spawnOneCell(t,n,a);if(r){r.parent=o,r.position=s,r.zIndex=c;(i=r.getComponent("Cell")).init(t,1),this.ProcessBoardCell.setCell(n,a,r)}return r},showPropsArea:function(e){for(var t=this.collectProplist(e),i=0;i<t.length;i++){var o=t[i];if(!(this._usedProplist.indexOf(o)>=0)){this._usedProplist.push(o);var s=o.getComponent("Cell");this.showOneCircle(o),this.showArea(s)}}},collectProplist:function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];o.getComponent("Cell").IsProp()&&-1==t.indexOf(o)&&t.push(o)}return t},showSidePropAreas:function(e){for(var t=0;t<e.length;t++){var i=e[t];if(!(this._usedProplist.indexOf(i)>=0)){this._usedProplist.push(i);var o=i.getComponent("Cell");this.showOneCircle(i),this.showArea(o)}}},showArea:function(e){var t=e.celltype,i=e.column,o=e.row;switch(t){case s.One_Horinal1:this.showMultiHorinalsArea(o,1);break;case s.One_Horinal2:this.showMultiHorinalsArea(o,2);break;case s.One_Horinal3:this.showMultiHorinalsArea(o,3);break;case s.One_Horinal4:this.showMultiHorinalsArea(o,4);break;case s.Two_Vertical1:this.showMultiVerticalsArea(i,1);break;case s.Two_Vertical2:this.showMultiVerticalsArea(i,2);break;case s.Two_Vertical3:this.showMultiVerticalsArea(i,3);break;case s.Two_Vertical4:this.showMultiVerticalsArea(i,4);break;case s.Three_LeftPlant1:this.showMultiLeftPlansArea(i,o,1);break;case s.Three_LeftPlant2:this.showMultiLeftPlansArea(i,o,2);break;case s.Three_LeftPlant3:this.showMultiLeftPlansArea(i,o,3);break;case s.Three_LeftPlant4:this.showMultiLeftPlansArea(i,o,4);break;case s.Four_RightPlant1:this.showMultiRightPlansArea(i,o,1);break;case s.Four_RightPlant2:this.showMultiRightPlansArea(i,o,2);break;case s.Four_RightPlant3:this.showMultiRightPlansArea(i,o,3);break;case s.Four_RightPlant4:this.showMultiRightPlansArea(i,o,4);break;case s.Five_Cross1:this.showMultiCrossArea(i,o,1);break;case s.Five_Cross2:this.showMultiCrossArea(i,o,2);break;case s.Five_Cross3:this.showMultiCrossArea(i,o,3);break;case s.Five_Cross4:this.showMultiCrossArea(i,o,4);break;case s.SBomb1:this.showMultiDiamondsArea(i,o,1);break;case s.SBomb2:this.showMultiDiamondsArea(i,o,2);break;case s.SBomb3:this.showMultiDiamondsArea(i,o,3);break;case s.SBomb4:this.showMultiDiamondsArea(i,o,4);break;case s.ClearBombProp:this.showClearBombArea()}},showMultiCrossArea:function(e,t,i){var o=[];this.ProcessBoardCell.getMultiCross(e,t,i,o);for(var s=0;s<o.length;s++){var n=o[s];this.showCircles(n),this.showPropsArea(n)}},showMultiHorinalsArea:function(e,t){var i=[];this.ProcessBoardCell.getMultiHorinals(e,t,i);for(var o=0;o<i.length;o++){var s=i[o];this.showCircles(s),this.showPropsArea(s)}},showMultiVerticalsArea:function(e,t){var i=[];this.ProcessBoardCell.getMultiVerticals(e,t,i);for(var o=0;o<i.length;o++){var s=i[o];this.showCircles(s),this.showPropsArea(s)}},showMultiLeftPlansArea:function(e,t,i){var o=[];this.ProcessBoardCell.getMultiLeftPlane(e,t,i,o);for(var s=0;s<o.length;s++){var n=o[s];this.showCircles(n),this.showPropsArea(n)}},showMultiRightPlansArea:function(e,t,i){var o=[];this.ProcessBoardCell.getMultiRightPlane(e,t,i,o);for(var s=0;s<o.length;s++){var n=o[s];this.showCircles(n),this.showPropsArea(n)}},showMultiDiamondsArea:function(e,t,i){var o=[];this.ProcessBoardCell.getMultiDiamondShapes(e,t,i,o);for(var s=0;s<o.length;s++){var n=o[s];this.showCircles(n),this.showPropsArea(n)}},showClearBombArea:function(){var e;e=this.ProcessBoardCell.getClearBomblist(),this.showCircles(e),this.showPropsArea(e)},showCircleArea:function(e,t){var i=[];this.ProcessBoardCell.getDiamondCells(e,t,i),this.showCircles(i),this.showPropsArea(i)},showCircles:function(e){for(var t=0;t<e.length;t++){var i=e[t];this.showOneCircle(i)}},showOneCircle:function(e){if(e){var t=e.getComponent("Cell"),i=this.ProcessBoardCell.getSkillCircle(t.column,t.row);if(i){i.active=!0;var o=cc.rotateBy(3,360);i.runAction(cc.repeatForever(o))}}},brushCells:function(e){for(var t=0;t<e.length;t++){var i=e[t],s=i.getComponent("Cell");if(s.IsBrushCell()){var n=s.row*o+s.column,a=this.brushCellsData[n];if(!a){var c=e[0].getComponent("Cell").cellGroup;a=this.brushSideCells(i,c),this.brushCellsData[n]=a}}}for(var r in this.brushCellsData){for(var l=parseInt(r),h=Math.floor(l/o),u=l%o,d=!1,p=0;p<e.length;p++){var v=e[p].getComponent("Cell");if(v.row===h&&v.column===u){d=!0;break}}if(!d){var f=this.brushCellsData[r];f&&(this.brushCellBack(f),this.brushCellsData[r]=null)}}},brushSideCells:function(e,t){var i=[],o=[],a=e.getComponent("Cell"),c=1,r=a.row,l=a.column;switch(a.celltype){case s.SOne_Brush1:case s.STwo_Brush1:case s.SThree_Brush1:case s.SFour_Brush1:c=1;break;case s.SOne_Brush2:case s.STwo_Brush2:case s.SThree_Brush2:case s.SFour_Brush2:c=2;break;case s.SOne_Brush3:case s.STwo_Brush3:case s.SThree_Brush3:case s.SFour_Brush3:c=3;break;case s.SOne_Brush4:case s.STwo_Brush4:case s.SThree_Brush4:case s.SFour_Brush4:c=4;break;case s.UniversalBrush:c=2}var h=s.Cell1;switch(t){case n.Cell1:h=s.Cell1;break;case n.Cell2:h=s.Cell2;break;case n.Cell3:h=s.Cell3;break;case n.Cell4:h=s.Cell4;break;case n.Cell5:h=s.Cell5}var u=[];this.ProcessBoardCell.getBrushArea(l,r,c,u);for(var d=0;d<u.length;d++){var p=u[d],v=p.getComponent("Cell");if(v.normalCell()&&v.cellGroup!==t){var f=v.celltype,m=this.spawnNewCell(p,h);m&&(i.push(m),o.push(f))}}return this.changeCellZIndex(i,3),{outlist:i,oldtypelist:o}},brushCellBack:function(e){if(e){var t=e.outlist,i=e.oldtypelist;if(t&&i)for(var o=0;o<t.length;o++){var s=t[o],n=i[o];this.spawnNewCell(s,n)}}},changeCellZIndex:function(e,t){if(e)for(var i=0;i<e.length;i++){e[i].zIndex=t}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",PoolMng:"PoolMng",Utils:"Utils"}],PropCellPool:[function(e,t,i){"use strict";cc._RF.push(t,"b914ed0ralJ3ZB2fML1isof","PropCellPool");var o=e("EnumDefine").CellType;cc.Class({extends:cc.Component,properties:{cell1:cc.Prefab,cell1_size:0,cell2:cc.Prefab,cell2_size:0,cell3:cc.Prefab,cell3_size:0,cell4:cc.Prefab,cell4_size:0,cell5:cc.Prefab,cell5_size:0,One1:cc.Prefab,One1_size:0,One2:cc.Prefab,One2_size:0,One3:cc.Prefab,One3_size:0,One4:cc.Prefab,One4_size:0,One5:cc.Prefab,One5_size:0,Two1:cc.Prefab,Two1_size:0,Two2:cc.Prefab,Two2_size:0,Two3:cc.Prefab,Two3_size:0,Two4:cc.Prefab,Two4_size:0,Two5:cc.Prefab,Two5_size:0,Three1:cc.Prefab,Three1_size:0,Three2:cc.Prefab,Three2_size:0,Three3:cc.Prefab,Three3_size:0,Three4:cc.Prefab,Three4_size:0,Three5:cc.Prefab,Three5_size:0,Four1:cc.Prefab,Four1_size:0,Four2:cc.Prefab,Four2_size:0,Four3:cc.Prefab,Four3_size:0,Four4:cc.Prefab,Four4_size:0,Four5:cc.Prefab,Four5_size:0,Five1:cc.Prefab,Five1_size:0,Five2:cc.Prefab,Five2_size:0,Five3:cc.Prefab,Five3_size:0,Five4:cc.Prefab,Five4_size:0,Five5:cc.Prefab,Five5_size:0,BlockDiamond:cc.Prefab,BlockDiamond_size:0,DropBottomBox:cc.Prefab,DropBottomBox_size:0,ClearBombProp:cc.Prefab,ClearBombProp_size:0,Chest:cc.Prefab,Chest_size:0,SpriteCell:cc.Prefab,SpriteCell_size:0,Salive:cc.Prefab,Salive_size:0,UniversalBrush:cc.Prefab,UniversalBrush_size:0,SOne_Brush1:cc.Prefab,SOne_Brush1_size:0,SOne_Brush2:cc.Prefab,SOne_Brush2_size:0,SOne_Brush3:cc.Prefab,SOne_Brush3_size:0,SOne_Brush4:cc.Prefab,SOne_Brush4_size:0,STwo_Brush1:cc.Prefab,STwo_Brush1_size:0,STwo_Brush2:cc.Prefab,STwo_Brush2_size:0,STwo_Brush3:cc.Prefab,STwo_Brush3_size:0,STwo_Brush4:cc.Prefab,STwo_Brush4_size:0,SThree_Brush1:cc.Prefab,SThree_Brush1_size:0,SThree_Brush2:cc.Prefab,SThree_Brush2_size:0,SThree_Brush3:cc.Prefab,SThree_Brush3_size:0,SThree_Brush4:cc.Prefab,SThree_Brush4_size:0,SFour_Brush1:cc.Prefab,SFour_Brush1_size:0,SFour_Brush2:cc.Prefab,SFour_Brush2_size:0,SFour_Brush3:cc.Prefab,SFour_Brush3_size:0,SFour_Brush4:cc.Prefab,SFour_Brush4_size:0,SFive_Brush1:cc.Prefab,SFive_Brush1_size:0,SFive_Brush2:cc.Prefab,SFive_Brush2_size:0,SFive_Brush3:cc.Prefab,SFive_Brush3_size:0,SFive_Brush4:cc.Prefab,SFive_Brush4_size:0,SBomb1:cc.Prefab,SBomb1_size:0,SBomb2:cc.Prefab,SBomb2_size:0,SBomb3:cc.Prefab,SBomb3_size:0,SBomb4:cc.Prefab,SBomb4_size:0},onLoad:function(){this.init()},init:function(){this._PoolChest=new cc.NodePool("Cell");for(var e=0;e<this.Chest_size;e++){var t=cc.instantiate(this.Chest);this._PoolChest.put(t)}this._PoolSpriteCell=new cc.NodePool("Cell");for(var i=0;i<this.SpriteCell_size;i++){var o=cc.instantiate(this.SpriteCell);this._PoolSpriteCell.put(o)}this._PoolUniversalCell=new cc.NodePool("Cell");for(var s=0;s<this.UniversalBrush_size;s++){var n=cc.instantiate(this.UniversalBrush);this._PoolUniversalCell.put(n)}this._PoolSalive=new cc.NodePool("Cell");for(var a=0;a<this.Salive_size;a++){var c=cc.instantiate(this.Salive);this._PoolSalive.put(c)}this._PoolBlockDiamond=new cc.NodePool("Cell");for(var r=0;r<this.BlockDiamond_size;r++){var l=cc.instantiate(this.BlockDiamond);this._PoolBlockDiamond.put(l)}this._PoolDropBottomBox=new cc.NodePool("Cell");for(var h=0;h<this.DropBottomBox_size;h++){var u=cc.instantiate(this.DropBottomBox);this._PoolDropBottomBox.put(u)}this._PoolClearBombProp=new cc.NodePool("Cell");for(var d=0;d<this.ClearBombProp_size;d++){var p=cc.instantiate(this.ClearBombProp);this._PoolClearBombProp.put(p)}this._PoolCell1=new cc.NodePool("Cell");for(var v=0;v<this.cell1_size;v++){var f=cc.instantiate(this.cell1);this._PoolCell1.put(f)}this._PoolCell2=new cc.NodePool("Cell");for(var m=0;m<this.cell2_size;m++){var g=cc.instantiate(this.cell2);this._PoolCell2.put(g)}this._PoolCell3=new cc.NodePool("Cell");for(var C=0;C<this.cell3_size;C++){var S=cc.instantiate(this.cell3);this._PoolCell3.put(S)}this._PoolCell4=new cc.NodePool("Cell");for(var b=0;b<this.cell4_size;b++){var k=cc.instantiate(this.cell4);this._PoolCell4.put(k)}this._PoolCell5=new cc.NodePool("Cell");for(var _=0;_<this.cell5_size;_++){var w=cc.instantiate(this.cell5);this._PoolCell5.put(w)}this.One1Pool=new cc.NodePool("Cell");for(var B=0;B<this.One_Horinal_size;B++){var D=cc.instantiate(this.One1);this.One1Pool.put(D)}this.One2Pool=new cc.NodePool("Cell");for(var y=0;y<this.One2_size;y++){var N=cc.instantiate(this.One2);this.One2Pool.put(N)}this.One3Pool=new cc.NodePool("Cell");for(var P=0;P<this.One3_size;P++){var T=cc.instantiate(this.One3);this.One3Pool.put(T)}this.One4Pool=new cc.NodePool("Cell");for(var A=0;A<this.One4_size;A++){var R=cc.instantiate(this.One4);this.One4Pool.put(R)}this.One5Pool=new cc.NodePool("Cell");for(var I=0;I<this.One5_size;I++){var F=cc.instantiate(this.One5);this.One5Pool.put(F)}this.Two1Pool=new cc.NodePool("Cell");for(var L=0;L<this.Two1_size;L++){var U=cc.instantiate(this.Two1);this.Two1Pool.put(U)}this.Two2Pool=new cc.NodePool("Cell");for(var x=0;x<this.Two2_size;x++){var E=cc.instantiate(this.Two2);this.Two2Pool.put(E)}this.Two3Pool=new cc.NodePool("Cell");for(var O=0;O<this.Two3_size;O++){var M=cc.instantiate(this.Two3);this.Two3Pool.put(M)}this.Two4Pool=new cc.NodePool("Cell");for(var G=0;G<this.Two4_size;G++){var W=cc.instantiate(this.Two4);this.Two4Pool.put(W)}this.Two5Pool=new cc.NodePool("Cell");for(var z=0;z<this.Two5_size;z++){var H=cc.instantiate(this.Two5);this.Two5Pool.put(H)}this.Three1Pool=new cc.NodePool("Cell");for(var V=0;V<this.Three1_size;V++){var q=cc.instantiate(this.Three1);this.Three1Pool.put(q)}this.Three2Pool=new cc.NodePool("Cell");for(var K=0;K<this.Three2_size;K++){var J=cc.instantiate(this.Three2);this.Three2Pool.put(J)}this.Three3Pool=new cc.NodePool("Cell");for(var j=0;j<this.Three3_size;j++){var Z=cc.instantiate(this.Three3);this.Three3Pool.put(Z)}this.Three4Pool=new cc.NodePool("Cell");for(var X=0;X<this.Three4_size;X++){var Y=cc.instantiate(this.Three4);this.Three4Pool.put(Y)}this.Three5Pool=new cc.NodePool("Cell");for(var Q=0;Q<this.Three5_size;Q++){var $=cc.instantiate(this.Three5);this.Three5Pool.put($)}this.Four1Pool=new cc.NodePool("Cell");for(var ee=0;ee<this.Four1_size;ee++){var te=cc.instantiate(this.Four1);this.Four1Pool.put(te)}this.Four2Pool=new cc.NodePool("Cell");for(var ie=0;ie<this.Four2_size;ie++){var oe=cc.instantiate(this.Four2);this.Four2Pool.put(oe)}this.Four3Pool=new cc.NodePool("Cell");for(var se=0;se<this.Four3_size;se++){var ne=cc.instantiate(this.Four3);this.Four3Pool.put(ne)}this.Four4Pool=new cc.NodePool("Cell");for(var ae=0;ae<this.Four4_size;ae++){var ce=cc.instantiate(this.Four4);this.Four4Pool.put(ce)}this.Four5Pool=new cc.NodePool("Cell");for(var re=0;re<this.Four5_size;re++){var le=cc.instantiate(this.Four5);this.Four5Pool.put(le)}this.Five1Pool=new cc.NodePool("Cell");for(var he=0;he<this.Five1_size;he++){var ue=cc.instantiate(this.Five1);this.Five1Pool.put(ue)}this.Five2Pool=new cc.NodePool("Cell");for(var de=0;de<this.Five2_size;de++){var pe=cc.instantiate(this.Five2);this.Five2Pool.put(pe)}this.Five3Pool=new cc.NodePool("Cell");for(var ve=0;ve<this.Five3_size;ve++){var fe=cc.instantiate(this.Five3);this.Five3Pool.put(fe)}this.Five4Pool=new cc.NodePool("Cell");for(var me=0;me<this.Five4_size;me++){var ge=cc.instantiate(this.Five4);this.Five4Pool.put(ge)}this.Five5Pool=new cc.NodePool("Cell");for(var Ce=0;Ce<this.Five5_size;Ce++){var Se=cc.instantiate(this.Five5);this.Five5Pool.put(Se)}this.initBrushPool()},initBrushPool:function(){this.SOne_Brush1Pool=new cc.NodePool("Cell");for(var e=0;e<this.SOne_Brush1_size;e++){var t=cc.instantiate(this.SOne_Brush1);this.SOne_Brush1Pool.put(t)}this.SOne_Brush2Pool=new cc.NodePool("Cell");for(var i=0;i<this.SOne_Brush2_size;i++){var o=cc.instantiate(this.SOne_Brush2);this.SOne_Brush2Pool.put(o)}this.SOne_Brush3Pool=new cc.NodePool("Cell");for(var s=0;s<this.SOne_Brush3_size;s++){var n=cc.instantiate(this.SOne_Brush3);this.SOne_Brush3Pool.put(n)}this.SOne_Brush4Pool=new cc.NodePool("Cell");for(var a=0;a<this.SOne_Brush4_size;a++){var c=cc.instantiate(this.SOne_Brush4);this.SOne_Brush4Pool.put(c)}this.STwo_Brush1Pool=new cc.NodePool("Cell");for(var r=0;r<this.STwo_Brush1_size;r++){var l=cc.instantiate(this.STwo_Brush1);this.STwo_Brush1Pool.put(l)}this.STwo_Brush2Pool=new cc.NodePool("Cell");for(var h=0;h<this.STwo_Brush2_size;h++){var u=cc.instantiate(this.STwo_Brush2);this.STwo_Brush2Pool.put(u)}this.STwo_Brush3Pool=new cc.NodePool("Cell");for(var d=0;d<this.STwo_Brush3_size;d++){var p=cc.instantiate(this.STwo_Brush3);this.STwo_Brush3Pool.put(p)}this.STwo_Brush4Pool=new cc.NodePool("Cell");for(var v=0;v<this.STwo_Brush4_size;v++){var f=cc.instantiate(this.STwo_Brush4);this.STwo_Brush4Pool.put(f)}this.SThree_Brush1Pool=new cc.NodePool("Cell");for(var m=0;m<this.SThree_Brush1_size;m++){var g=cc.instantiate(this.SThree_Brush1);this.SThree_Brush1Pool.put(g)}this.SThree_Brush2Pool=new cc.NodePool("Cell");for(var C=0;C<this.SThree_Brush2_size;C++){var S=cc.instantiate(this.SThree_Brush2);this.SThree_Brush2Pool.put(S)}this.SThree_Brush3Pool=new cc.NodePool("Cell");for(var b=0;b<this.STwo_Brush3_size;b++){var k=cc.instantiate(this.SThree_Brush3);this.SThree_Brush3Pool.put(k)}this.SThree_Brush4Pool=new cc.NodePool("Cell");for(var _=0;_<this.SThree_Brush4_size;_++){var w=cc.instantiate(this.SThree_Brush4);this.SThree_Brush4Pool.put(w)}this.SFour_Brush1Pool=new cc.NodePool("Cell");for(var B=0;B<this.SFour_Brush1_size;B++){var D=cc.instantiate(this.SFour_Brush1);this.SFour_Brush1Pool.put(D)}this.SFour_Brush2Pool=new cc.NodePool("Cell");for(var y=0;y<this.SFour_Brush2_size;y++){var N=cc.instantiate(this.SFour_Brush2);this.SFour_Brush2Pool.put(N)}this.SFour_Brush3Pool=new cc.NodePool("Cell");for(var P=0;P<this.SFour_Brush3_size;P++){var T=cc.instantiate(this.SFour_Brush3);this.SFour_Brush3Pool.put(T)}this.SFour_Brush4Pool=new cc.NodePool("Cell");for(var A=0;A<this.SFour_Brush4_size;A++){var R=cc.instantiate(this.SFour_Brush4);this.SFour_Brush4Pool.put(R)}this.SFive_Brush1Pool=new cc.NodePool("Cell");for(var I=0;I<this.SFive_Brush1_size;I++){var F=cc.instantiate(this.SFive_Brush1);this.SFive_Brush1Pool.put(F)}this.SFive_Brush2Pool=new cc.NodePool("Cell");for(var L=0;L<this.SFive_Brush2_size;L++){var U=cc.instantiate(this.SFive_Brush2);this.SFive_Brush2Pool.put(U)}this.SFive_Brush3Pool=new cc.NodePool("Cell");for(var x=0;x<this.SFive_Brush3_size;x++){var E=cc.instantiate(this.SFive_Brush3);this.SFive_Brush3Pool.put(E)}this.SFive_Brush4Pool=new cc.NodePool("Cell");for(var O=0;O<this.SFive_Brush4_size;O++){var M=cc.instantiate(this.SFive_Brush4);this.SFive_Brush4Pool.put(M)}this.SBomb1_Pool=new cc.NodePool("Cell");for(var G=0;G<this.SBomb1_size;G++){var W=cc.instantiate(this.SBomb1);this.SBomb1_Pool.put(W)}this.SBomb2_Pool=new cc.NodePool("Cell");for(var z=0;z<this.SBomb2_size;z++){var H=cc.instantiate(this.SBomb2);this.SBomb2_Pool.put(H)}this.SBomb3_Pool=new cc.NodePool("Cell");for(var V=0;V<this.SBomb3_size;V++){var q=cc.instantiate(this.SBomb3);this.SBomb3_Pool.put(q)}this.SBomb4_Pool=new cc.NodePool("Cell");for(var K=0;K<this.SBomb4_size;K++){var J=cc.instantiate(this.SBomb4);this.SBomb4_Pool.put(J)}},getCell:function(e){var t=null;switch(e){case o.Chest:(t=this._PoolChest.get())||(t=cc.instantiate(this.Chest));break;case o.Weeds:case o.Fence:case o.BlockDiamond:case o.KeyUp:case o.KeyDown:case o.KeyLeft:case o.KeyRight:case o.Stakes:(t=this._PoolSpriteCell.get())||(t=cc.instantiate(this.SpriteCell));break;case o.UniversalBrush:(t=this._PoolUniversalCell.get())||(t=cc.instantiate(this.UniversalBrush));break;case o.Salive:(t=this._PoolSalive.get())||(t=cc.instantiate(this.Salive));break;case o.BlockDiamond:(t=this._PoolBlockDiamond.get())||(t=cc.instantiate(this.BlockDiamond));break;case o.DropBottomBox:(t=this._PoolDropBottomBox.get())||(t=cc.instantiate(this.DropBottomBox));break;case o.ClearBombProp:(t=this._PoolClearBombProp.get())||(t=cc.instantiate(this.ClearBombProp));break;case o.Cell1:(t=this._PoolCell1.get())||(t=cc.instantiate(this.cell1));break;case o.Cell2:(t=this._PoolCell2.get())||(t=cc.instantiate(this.cell2));break;case o.Cell3:(t=this._PoolCell3.get())||(t=cc.instantiate(this.cell3));break;case o.Cell4:(t=this._PoolCell4.get())||(t=cc.instantiate(this.cell4));break;case o.Cell5:(t=this._PoolCell5.get())||(t=cc.instantiate(this.cell5));break;case o.One_Horinal1:(t=this.One1Pool.get())||(t=cc.instantiate(this.One1));break;case o.One_Horinal2:(t=this.One2Pool.get())||(t=cc.instantiate(this.One2));break;case o.One_Horinal3:(t=this.One3Pool.get())||(t=cc.instantiate(this.One3));break;case o.One_Horinal4:(t=this.One4Pool.get())||(t=cc.instantiate(this.One4));break;case o.One_Horinal5:(t=this.One5Pool.get())||(t=cc.instantiate(this.One5));break;case o.Two_Vertical1:(t=this.Two1Pool.get())||(t=cc.instantiate(this.Two1));break;case o.Two_Vertical2:(t=this.Two2Pool.get())||(t=cc.instantiate(this.Two2));break;case o.Two_Vertical3:(t=this.Two3Pool.get())||(t=cc.instantiate(this.Two3));break;case o.Two_Vertical4:(t=this.Two4Pool.get())||(t=cc.instantiate(this.Two4));break;case o.Two_Vertical5:(t=this.Two5Pool.get())||(t=cc.instantiate(this.Two5));break;case o.Three_LeftPlant1:(t=this.Three1Pool.get())||(t=cc.instantiate(this.Three1));break;case o.Three_LeftPlant2:(t=this.Three2Pool.get())||(t=cc.instantiate(this.Three2));break;case o.Three_LeftPlant3:(t=this.Three3Pool.get())||(t=cc.instantiate(this.Three3));break;case o.Three_LeftPlant4:(t=this.Three4Pool.get())||(t=cc.instantiate(this.Three4));break;case o.Three_LeftPlant5:(t=this.Three5Pool.get())||(t=cc.instantiate(this.Three5));break;case o.Four_RightPlant1:(t=this.Four1Pool.get())||(t=cc.instantiate(this.Four1));break;case o.Four_RightPlant2:(t=this.Four2Pool.get())||(t=cc.instantiate(this.Four2));break;case o.Four_RightPlant3:(t=this.Four3Pool.get())||(t=cc.instantiate(this.Four3));break;case o.Four_RightPlant4:(t=this.Four4Pool.get())||(t=cc.instantiate(this.Four4));break;case o.Four_RightPlant5:(t=this.Four5Pool.get())||(t=cc.instantiate(this.Four5));break;case o.Five_Cross1:(t=this.Five1Pool.get())||(t=cc.instantiate(this.Five1));break;case o.Five_Cross2:(t=this.Five2Pool.get())||(t=cc.instantiate(this.Five2));break;case o.Five_Cross3:(t=this.Five3Pool.get())||(t=cc.instantiate(this.Five3));break;case o.Five_Cross4:(t=this.Five4Pool.get())||(t=cc.instantiate(this.Five4));break;case o.Five_Cross5:(t=this.Five5Pool.get())||(t=cc.instantiate(this.Five5));break;case o.SOne_Brush1:(t=this.SOne_Brush1Pool.get())||(t=cc.instantiate(this.SOne_Brush1));break;case o.SOne_Brush2:(t=this.SOne_Brush2Pool.get())||(t=cc.instantiate(this.SOne_Brush2));break;case o.SOne_Brush3:(t=this.SOne_Brush3Pool.get())||(t=cc.instantiate(this.SOne_Brush3));break;case o.SOne_Brush4:(t=this.SOne_Brush4Pool.get())||(t=cc.instantiate(this.SOne_Brush4));break;case o.STwo_Brush1:(t=this.STwo_Brush1Pool.get())||(t=cc.instantiate(this.STwo_Brush1));break;case o.STwo_Brush2:(t=this.STwo_Brush2Pool.get())||(t=cc.instantiate(this.STwo_Brush2));break;case o.STwo_Brush3:(t=this.STwo_Brush3Pool.get())||(t=cc.instantiate(this.STwo_Brush3));break;case o.STwo_Brush4:(t=this.STwo_Brush4Pool.get())||(t=cc.instantiate(this.STwo_Brush4));break;case o.SThree_Brush1:(t=this.SThree_Brush1Pool.get())||(t=cc.instantiate(this.SThree_Brush1));break;case o.SThree_Brush2:(t=this.SThree_Brush2Pool.get())||(t=cc.instantiate(this.SThree_Brush2));break;case o.SThree_Brush3:(t=this.SThree_Brush3Pool.get())||(t=cc.instantiate(this.SThree_Brush3));break;case o.SThree_Brush4:(t=this.SThree_Brush4Pool.get())||(t=cc.instantiate(this.SThree_Brush4));break;case o.SFour_Brush1:(t=this.SFour_Brush1Pool.get())||(t=cc.instantiate(this.SFour_Brush1));break;case o.SFour_Brush2:(t=this.SFour_Brush2Pool.get())||(t=cc.instantiate(this.SFour_Brush2));break;case o.SFour_Brush3:(t=this.SFour_Brush3Pool.get())||(t=cc.instantiate(this.SFour_Brush3));break;case o.SFour_Brush4:(t=this.SFour_Brush4Pool.get())||(t=cc.instantiate(this.SFour_Brush4));break;case o.SFive_Brush1:(t=this.SFive_Brush1Pool.get())||(t=cc.instantiate(this.SFive_Brush1));break;case o.SFive_Brush2:(t=this.SFive_Brush2Pool.get())||(t=cc.instantiate(this.SFive_Brush2));break;case o.SFive_Brush3:(t=this.SFive_Brush3Pool.get())||(t=cc.instantiate(this.SFive_Brush3));break;case o.SFive_Brush4:(t=this.SFive_Brush4Pool.get())||(t=cc.instantiate(this.SFive_Brush4));break;case o.SBomb1:(t=this.SBomb1_Pool.get())||(t=cc.instantiate(this.SBomb1));break;case o.SBomb2:(t=this.SBomb2_Pool.get())||(t=cc.instantiate(this.SBomb2));break;case o.SBomb3:(t=this.SBomb3_Pool.get())||(t=cc.instantiate(this.SBomb3));break;case o.SBomb4:(t=this.SBomb4_Pool.get())||(t=cc.instantiate(this.SBomb4))}return t},putCell:function(e,t){switch(t){case o.Chest:this._PoolChest.put(e);break;case o.SpriteCell:this._PoolSpriteCell.put(e);break;case o.UniversalBrush:this._PoolUniversalCell.put(e);break;case o.Salive:this._PoolSalive.put(e);break;case o.BlockDiamond:this._PoolBlockDiamond.put(e);break;case o.DropBottomBox:this._PoolDropBottomBox.put(e);break;case o.ClearBombProp:this._PoolClearBombProp.put(e);break;case o.Cell1:this._PoolCell1.put(e);break;case o.Cell2:this._PoolCell2.put(e);break;case o.Cell3:this._PoolCell3.put(e);break;case o.Cell4:this._PoolCell4.put(e);break;case o.Cell5:this._PoolCell5.put(e);break;case o.One_Horinal1:this.One1Pool.put(e);break;case o.One_Horinal2:this.One2Pool.put(e);break;case o.One_Horinal3:this.One3Pool.put(e);break;case o.One_Horinal4:this.One4Pool.put(e);break;case o.One_Horinal5:this.One5Pool.put(e);break;case o.Two_Vertical1:this.Two1Pool.put(e);break;case o.Two_Vertical2:this.Two2Pool.put(e);break;case o.Two_Vertical3:this.Two3Pool.put(e);break;case o.Two_Vertical4:this.Two4Pool.put(e);break;case o.Two_Vertical5:this.Two5Pool.put(e);break;case o.Three_LeftPlant1:this.Three1Pool.put(e);break;case o.Three_LeftPlant2:this.Three2Pool.put(e);break;case o.Three_LeftPlant3:this.Three3Pool.put(e);break;case o.Three_LeftPlant4:this.Three4Pool.put(e);break;case o.Three_LeftPlant5:this.Three5Pool.put(e);break;case o.Four_RightPlant1:this.Four1Pool.put(e);break;case o.Four_RightPlant2:this.Four2Pool.put(e);break;case o.Four_RightPlant3:this.Four3Pool.put(e);break;case o.Four_RightPlant4:this.Four4Pool.put(e);break;case o.Four_RightPlant5:this.Four5Pool.put(e);break;case o.Five_Cross1:this.Five1Pool.put(e);break;case o.Five_Cross2:this.Five2Pool.put(e);break;case o.Five_Cross3:this.Five3Pool.put(e);break;case o.Five_Cross4:this.Five4Pool.put(e);break;case o.Five_Cross5:this.Five5Pool.put(e);break;case o.SOne_Brush1:this.SOne_Brush1Pool.put(e);break;case o.SOne_Brush2:this.SOne_Brush2Pool.put(e);break;case o.SOne_Brush3:this.SOne_Brush3Pool.put(e);break;case o.SOne_Brush4:this.SOne_Brush4Pool.put(e);break;case o.STwo_Brush1:this.STwo_Brush1Pool.put(e);break;case o.STwo_Brush2:this.STwo_Brush2Pool.put(e);break;case o.STwo_Brush3:this.STwo_Brush3Pool.put(e);break;case o.STwo_Brush4:this.STwo_Brush4Pool.put(e);break;case o.SThree_Brush1:this.SThree_Brush1Pool.put(e);break;case o.SThree_Brush2:this.SThree_Brush2Pool.put(e);break;case o.SThree_Brush3:this.SThree_Brush3Pool.put(e);break;case o.SThree_Brush4:this.SThree_Brush4Pool.put(e);break;case o.SFour_Brush1:this.SFour_Brush1Pool.put(e);break;case o.SFour_Brush2:this.SFour_Brush2Pool.put(e);break;case o.SFour_Brush3:this.SFour_Brush3Pool.put(e);break;case o.SFour_Brush4:this.SFour_Brush4Pool.put(e);break;case o.SFive_Brush1:this.SFour_Brush1Pool.put(e);break;case o.SFive_Brush2:this.SFour_Brush2Pool.put(e);break;case o.SFive_Brush3:this.SFour_Brush3Pool.put(e);break;case o.SFive_Brush4:this.SFour_Brush4Pool.put(e);break;case o.SBomb1:this.SBomb1_Pool.put(e);break;case o.SBomb2:this.SBomb2_Pool.put(e);break;case o.SBomb3:this.SBomb3_Pool.put(e);break;case o.SBomb4:this.SBomb4_Pool.put(e);break;default:e.removeFromParent()}}});cc._RF.pop()},{EnumDefine:"EnumDefine"}],PropHVSkill:[function(e,t,i){"use strict";cc._RF.push(t,"0f2012Tn3xCcKOi4yiPu6v0","PropHVSkill");e("EnumDefine").Direction,e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT;var o=e("EnumDefine").RemoveCellEffect,s=e("PoolMng"),n=(e("Utils"),e("PlayFightAudio"));cc.Class({extends:cc.Component,properties:{boomlineRed:{default:null,type:cc.SpriteFrame},boomlineBlue:{default:null,type:cc.SpriteFrame},boomlineRedSharp:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.Board=this.node.getComponent("Board"),this.RemoveCells=this.node.getComponent("RemoveCells"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.propcnt=0},removelistlist:function(e,t){for(var i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.ExplosionSmall,n=e.position,a=0;a<t.length;a++){var c=t[a],r=c.indexOf(e);r>=0&&c.splice(r,1),this.setRemovelistRemoveEffectType(c,o.ExplosionSmall)}this.removePropCell(e),this.spawnExplosion(n,s);var l=cc.callFunc(function(){i.propcnt-=1},this),h=cc.callFunc(function(){0==i.propcnt&&i.Board.removeCellsDone()},this),u=[];u.push(l),this.RemoveCells.removelistlist(t,u,h),u.length>=2?this.node.runAction(cc.sequence(u)):(u.push(null),this.node.runAction(cc.sequence(u)))},MultHorinalsRemove:function(e,t){this.propcnt+=1;var i=[],o=e.getComponent("Cell"),s=o.row;o.column;this.ProcessBoardCell.getMultiHorinals(s,t,i),this.removelistlist(e,i)},MultVerticalsRemove:function(e,t){this.propcnt+=1;var i=[],o=e.getComponent("Cell"),s=(o.row,o.column);this.ProcessBoardCell.getMultiVerticals(s,t,i),this.removelistlist(e,i)},MultLeftPlansRemove:function(e,t){this.propcnt+=1;var i=[],o=e.getComponent("Cell"),s=o.row,n=o.column;this.ProcessBoardCell.getMultiLeftPlane(n,s,t,i),this.removelistlist(e,i)},MultRightPlansRemove:function(e,t){this.propcnt+=1;var i=[],o=e.getComponent("Cell"),s=o.row,n=o.column;this.ProcessBoardCell.getMultiRightPlane(n,s,t,i),this.removelistlist(e,i)},MultCrossRemove:function(e,t){this.propcnt+=1;var i=[],o=e.getComponent("Cell"),s=o.row,n=o.column;this.ProcessBoardCell.getMultiCross(n,s,t,i),this.removelistlist(e,i)},MultDiamondsShapesRemove:function(e,t){this.propcnt+=1;var i=[],o=e.getComponent("Cell"),s=o.row,n=o.column;this.ProcessBoardCell.getMultiDiamondShapes(n,s,t,i),this.removelistlist(e,i)},ClearBomb:function(e){var t=this;if(e){this.propcnt+=1;var i=e.position,s=e.getComponent("Cell"),n=s.column,a=s.row,c=[],r=(c=this.ProcessBoardCell.getClearBomblist()).indexOf(e);r>=0&&c.splice(r,1),this.removePropCell(e),this.spawnExplosion(i,o.ExplosionBig),this.setRemovelistRemoveEffectType(c,o.ExplosionSmall);var l=cc.callFunc(function(){t.propcnt-=1},this),h=cc.callFunc(function(){0==t.propcnt&&t.Board.removeCellsDone()},this),u=[];u.push(l),this.RemoveCells.removeClearBomb(n,a,c,u,h),u.length>=2?this.node.runAction(cc.sequence(u)):(u.push(null),this.node.runAction(cc.sequence(u)))}},setRemovelistRemoveEffectType:function(e,t){for(var i=0;i<e.length;i++){var o=e[i];if(o)o.getComponent("Cell").setRemoveCellEffect(t)}},start:function(){},spawnAnygryBomb:function(e,t){var i=this;cc.loader.loadRes("prefab/angryBombEffect",function(o,s){var n=cc.instantiate(s);n.parent=i.Board.node,n.position=e,n.rotation=t;var a=n.getComponent("PlayAnimation");if(a){a.play(function(){n.destroy()})}})},spawnExplosion:function(e,t){var i=this.node;switch(e.x+=44.5,e.y+=37,t){case o.ExplosionSmall:var a=s.instance.getExplosion(0);if(a){a.parent=i,a.position=e,a.zIndex=10;a.getComponent("ExplosionSmall").explosion(function(){s.instance.putExplosion(a,0)}),n.instance.playExploision()}break;case o.ExplosionBig:var c=s.instance.getExplosion(1);if(c){c.parent=i,c.position=e,c.zIndex=10;c.getComponent("ExplosionBig").explosion(function(){s.instance.putExplosion(c,1)})}}},shootBoomline:function(e,t,i,o,s,n){var a=new cc.Node("");a.addComponent(cc.Sprite).spriteFrame=s,a.parent=t.parent,a.position=i,a.anchorX=.5,a.anchorY=0;var c=t.position;c.x+=t.width/2,c.y+=t.height/2;var r=i.sub(c),l=r.mag(),h=Math.atan2(r.y,r.x),u=-cc.misc.radiansToDegrees(h)-90;a.rotation=u;var d=e.getChildByName("cellNode").getChildByName("painBall");d&&(d.rotation=u);a.scale=0;var p=a.height,v=0;if(l<p)v=1-1*Math.abs(l-p)/p;else if(l===p)v=0;else if(l>p){v=1+1*Math.abs(l-p)/p}var f=v;f<.5&&(f=.5);var m=cc.callFunc(function(){t.getComponent("Cell").scaleAction()},this),g=cc.callFunc(function(){n&&n()},this),C=cc.scaleTo(o,f,0+v).easing(cc.easeOut(5)),S=cc.sequence(C,m,cc.delayTime(o),g,cc.removeSelf());a.runAction(S)},FlashSkill:function(e){},SameColorSkill:function(e){var t=this;if(e){for(var i=[],o=0;o<this.Board.sameColors.length;o++)for(var s=this.Board.sameColors[o],n=this.ProcessBoardCell.getSameCelllist(s),a=0;a<n.length;a++)i.push(n[a]);e.getComponent("Cell");var c=i.indexOf(e);c>=0&&i.splice(c,1),this.propcnt+=1;for(var r=[],l=function(o){var s=i[o],n=cc.callFunc(function(){t.propShootline(e,s,.1)},t);r.push(n),r.push(cc.delayTime(.1))},h=0;h<i.length;h++)l(h);r.push(cc.delayTime(.2));var u=cc.callFunc(function(){cc.v2(e.x,e.y);t.removePropCell(e)},this),d=cc.callFunc(function(){t.propcnt-=1,0==t.propcnt&&t.Board.removeCellsDone()},this);r.push(u),r.push(cc.delayTime(.1)),r.push(d),this.node.runAction(cc.sequence(r))}},propShootline:function(e,t,i){var o=this,s=function(){this.RemoveCells.removeOneCell(t,!1)}.bind(this),n=cc.callFunc(function(){var n=e.x+e.width/2,a=e.y+e.height/2,c=cc.v2(n,a);o.shootBoomline(e,t,c,i/2,o.boomlineBlue,s)},this);e.scale=.8;var a=cc.scaleTo(i/2,.96,.96).easing(cc.easeOut(3)),c=cc.scaleTo(i/2,.8,.8).easing(cc.easeOut(3)),r=cc.sequence(a,c,n);r.setTag(10),e.runAction(r)},removePropCell:function(e){e.getComponent("Cell").propNormalCell()?this.RemoveCells.removeOneCell(e):this.Board.removeCell(e)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",PlayFightAudio:"PlayFightAudio",PoolMng:"PoolMng",Utils:"Utils"}],RPGManager:[function(e,t,i){"use strict";cc._RF.push(t,"745a1x3XOVHZbz9dU7Lx5w3","RPGManager");e("JsonData");var o=e("EnumDefine").LevelResult,s=(e("EnumDefine").CellType,e("EnumDefine").ActorType,e("EnumDefine").LevelMode),n=e("Utils"),a=(e("LocalStorage"),e("PlayFightAudio")),c=e("CameraManager"),r=cc.v2(),l=cc.v2(),h=cc.Class({extends:cc.Component,properties:{boardNode:cc.Node,UI:cc.Node,gameNode:cc.Node,cameraNode:cc.Node,rpgNode:cc.Node,midOneNode:cc.Node,shakeDuration:{default:0},audioWin:{type:cc.AudioSource,default:null},audioLose:{type:cc.AudioSource,default:null},midshotColorBk:cc.Node,TaskNode:cc.Node},statics:{instance:null},ctor:function(){this.actorlist=[],this.actorcomlist=[],this.waveMonsterlist=[],this._moveDt=0,this._moveDelay=.01,this._moveSpeed=10,this._moveDis=0,this._disVal=900,this.normalDisVal=900,this.gameDoneDisVal=1800,this._spawnedOnWave=!1,this.RPGAttack=!1,this.killRewardVal=null},onLoad:function(){h.instance=this,this.spawnMonster=this.node.getComponent("SpawnMonster"),this.spawnActor=this.node.getComponent("SpawnActor"),this.Game=this.gameNode.getComponent("Game"),this.cameraControl=this.cameraNode.getComponent("CameraControl"),this.anim=this.node.getComponent("cc.Animation"),this.Board=this.boardNode.getComponent("Board"),this.ProcessGameDone=this.node.getComponent("ProcessGameDone"),this.PetSkillUI=this.UI.getComponent("PetSkillUI"),this.ShootSkill=this.node.getComponent("ShootSkill"),this.SpawnChest=this.node.getComponent("SpawnChest"),this.Endless=this.TaskNode.getComponent("Endless"),this._monsterJsonData=null,this.loseCnt=0,this.stopMoveCallback=null,this.midshotColorBk.active=!1,this.midshotColorBk.opacity=0,this.waveIndex=0},start:function(){},freshMonsters:function(e){if(null!==n.LevelEditorLevelGoles){var t=n.LevelEditorLevelGoles;this.loadDataFromEditor(t);var i=cc.v2();this.getActorCenterPos(i),this.spawnOneWaveMonster(i,e)}},createRPG:function(){var e=this;cc.loader.loadRes("json/Monster",function(t,i){var o=i.json;if(e._monsterJsonData=o,null!==n.LevelEditorLevelGoles){var a=n.LevelEditorLevelGoles;e.GoleData=a,e.loadDataFromEditor(a),e.spawnActor.spawnActors();var c=cc.v2();switch(e.getActorCenterPos(c),e.spawnOneWaveMonster(c,0),n.levelMode){case s.Endless:var r=e.waveIndex;e.initTaskEvents(r)}}})},loadDataFromEditor:function(e){this.waveMonsterlist=[];var t=e.WaveDatas;if(null!==t)for(var i=0;i<t.length;i++){for(var o=t[i],s=0;s<o.length;s++)for(var n=o[s],a=0;a<this._monsterJsonData.length;a++){var c=this._monsterJsonData[a];if(c.MonsterName===n.MonsterName){n.JsonData=c;break}}o.length>0&&this.waveMonsterlist.push(o)}},getWorldPos:function(e){var t=e.parent.convertToWorldSpaceAR(e.getPosition());return c.instance.battleCameraNode.getComponent("cc.Camera").getWorldToCameraPoint(t,r),r},initTaskEvents:function(e){if(this.GoleData){var t=this.GoleData.TaskEvents;t&&this.Endless.initTaskEvents(t,e)}},spawnOneWaveMonster:function(e,t){if(0!==this.waveMonsterlist.length){var i=this.waveMonsterlist.shift();this.spawnMonster.spawnOneWave(i,e,t)}},spawnMonsterChest:function(e,t){this.SpawnChest.spawnOneChest(e,t)},freshRoleAttack:function(e,t){for(var i=this.actorlist,o=0;o<i.length;o++){var s=i[o].getComponent("Actor");s.roletype===e&&s.freshAttack(t)}},getActorCenterPos:function(e){if(0!==this.actorlist.length){for(var t=this.actorlist,i=0,o=0,s=0;s<t.length;s++){var n=t[s];i+=n.x,o+=n.y}return i/=t.length,o/=t.length,e.x=i,void(e.y=o)}this.spawnActor.getActorCenterPos(e)},addActor:function(e){this.actorlist.push(e);var t=e.getComponent("Actor");this.actorcomlist.push(t)},getActor:function(e){for(var t=this.actorlist,i=0;i<t.length;i++){var o=t[i];if(this.actorcomlist[i].roletype===e)return o}return null},getDamage:function(e){var t=this.actorlist;return this.spawnActor.getDamage(e,t)},allWaveDone:function(){var e=!1;return 0===this.waveMonsterlist.length&&(e=this.oneWaveDone()),e},oneWaveDone:function(){return this.spawnMonster.oneWaveDone()},getMonster:function(){return this.spawnMonster.getMonster()},removeMonster:function(e,t){switch(n.KillMonsterCnt+=1,this.killRewardVal=t,this.spawnMonster.removeMonster(e,t),n.levelMode){case s.Endless:this.Endless.accountKillMonster(1)}},drawlineHurtMonster:function(e){this.spawnMonster.drawlineHurtMonster(e)},fire:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],o=i.getComponent("Cell"),s=this.actorlist,n=0;n<s.length;n++){var a=this.actorcomlist[n],c=a.roletype;if(o.cellGroup===c){a.pushCell(i),e.splice(t--,1);break}}this.RPGAttack=!0;for(var r=this.actorcomlist,l=0;l<r.length;l++){r[l].fire()}},fireOver:function(){if(this.PetSkillUI.hideAllSkill(),this.RPGAttack){for(var e=!0,t=0;t<this.actorcomlist.length;t++){if(this.actorcomlist[t].IsAttack()){e=!1;break}}var i=this.PetSkillUI.IsFireOver();if(e&&i){var o=this.getMonster();if(o)o.getComponent("Monster").showBlood(!1);this.RPGAttack=!1;var s=function(){this.boardCellsSkill()}.bind(this);this.Board.cellsAttackDone(s)}}},boardCellsSkill:function(){var e=function(){var e=function(){this.tripPetsSkill()}.bind(this);if(this.killRewardVal){if(this.killRewardVal.reward){var t=this.killRewardVal.duration,i=cc.callFunc(function(){e()},this);this.node.runAction(cc.sequence(cc.delayTime(t),i))}else e();this.killRewardVal=null}else e()}.bind(this);this.Board.triggerSkill(e)},tripPetsSkill:function(){var e=function(e){e&&this.Game.updatePetSkil(),this.tripHeroesSkill()}.bind(this),t=this.Game.checkResult();switch(this.gameResult=t,t){case o.Win:case o.Lose:e();break;case o.Fighting:this.allWaveDone()||this.oneWaveDone()?e():this.PetSkillUI.tripPetSkills(e)}},tripHeroesSkill:function(){for(var e=this,t=.1,i=0,o=0;o<this.actorcomlist.length;o++){var s=this.actorcomlist[o],n=s.roletype;this.PetSkillUI.tripHeroSkill(n)&&(t=.2,i=s.tripSkill(t),this.Game.updateRoleSkill())}var a=cc.callFunc(function(){e.allFireDone()},this);this.node.runAction(cc.sequence(cc.delayTime(t+i+.1),a))},allFireDone:function(){var e=n.levelMode;switch(this.Game.showCombo("",!1),this.Game.checkResult()){case o.Win:switch(e){case s.Normal:this.ProcessGameDone.processWin(),this.Game.fightUI.showWave(!1);break;case s.Endless:this.Endless.endlessDone()}break;case o.Lose:switch(e){case s.Normal:this.stopBkMusic(),this.ProcessGameDone.loadAddStep(),this.Board.setUserInteract(!1),this.Game.stopAudio(),a.instance.playGamelose(),this.Game.fightUI.showWave(!1);break;case s.Endless:this.stopBkMusic(),this.ProcessGameDone.loadEndlessAddStep(),this.Board.setUserInteract(!1),this.Game.stopAudio(),a.instance.playGamelose(),this.Game.fightUI.showWave(!1)}break;case o.Fighting:switch(e){case s.Normal:this.nextTurnNormal();break;case s.Endless:this.nextTurnEndless()}}},nextTurnNormal:function(){if(this.allWaveDone())this.Board.showGuide(),this.Board.nexturn();else if(this.oneWaveDone()){var e=function(){this.Game.fightUI.showNextWave(),this.Board.nexturn()}.bind(this),t=cc.v2();h.instance.getActorCenterPos(t),this.spawnOneWaveMonster(t,this._disVal),this.startMove(e),this.Board.nexturn()}else{this.Board.showGuide();var i=function(){this.Board.nexturn()}.bind(this);this.updateOneRound(i)}},nextTurnEndless:function(){if(this.allWaveDone())this.Board.showGuide(),this.Board.nexturn();else if(this.oneWaveDone()){var e=function(){var e=function(e){var t=cc.v2();h.instance.getActorCenterPos(t),this.spawnOneWaveMonster(t,this._disVal);var i=function(){this.Endless.checkEvent(this.waveIndex),this.Game.TaskUI.showNextWave(),this.Board.nexturn()}.bind(this),o=this.waveIndex;this.startMove(i),this.Endless.checkTransitScene(o)}.bind(this);this.waveIndex+=1;var t=this.waveIndex;this.Endless.oneWaveDone(t,e)}.bind(this);this.Endless.updateRound(e,!0)}else{this.Board.showGuide();var t=function(){var e=function(){this.Board.nexturn()}.bind(this);this.Endless.updateRound(e)}.bind(this);this.updateOneRound(t)}},fadeOutMidshotBk:function(e){var t=this;this.midshotColorBk.active=!0,this.midshotColorBk.x=this.midOneNode.x;var i=cc.callFunc(function(){e&&e(),t.moveFunc&&t.unschedule(t.moveFunc)},this);this.midshotColorBk.runAction(cc.sequence(cc.fadeTo(3,200),i)),this.moveFunc=function(){this.midshotColorBk.x=this.midOneNode.x}.bind(this),this.schedule(this.moveFunc,0)},updateOneRound:function(e){this.getMonster().getComponent("MonsterSkill").updateOneRound(e)},stopBkMusic:function(){},startMove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:900;if(e&&(this.stopMoveCallback=e),this.scheduleMove(t),this._moveDt=0,this.cameraControl.zoomOut(),this.midOneNode){var i=this.midOneNode.getComponent("MoveCameraShot");i.setMove(!0),i.zoomOut()}},stopMove:function(){if(this.unschedule(this.RoleMoveCallBack),this.RoleMoveCallBack=null,this.cameraControl.zoomIn(),this.midOneNode){var e=this.midOneNode.getComponent("MoveCameraShot");e.setMove(!1),e.zoomIn()}this.stopMoveCallback&&this.stopMoveCallback(),this.stopMoveCallback=null},scheduleMove:function(e){this._disVal=e,this.RoleMoveCallBack=function(e){if(this._moveDt+=e,this._moveDt>=this._moveDelay){this._moveDt=0;for(var t=0;t<this.actorlist.length;t++){this.actorlist[t].x+=this._moveSpeed}this._moveDis+=this._moveSpeed}this._moveDis>=this._disVal&&(this.moveDt=0,this._moveDis=0,this.stopMove())},this.schedule(this.RoleMoveCallBack,0)},shake:function(){this.anim.play("shake"),this.scheduleOnce(this.stopShake.bind(this),this.shakeDuration),this.node.position=cc.v2(0,0)},stopShake:function(){this.anim.stop()},getOverviewTargetsMidpoint:function(e,t){for(var i=99999,o=99999,s=-99999,n=-99999,a=0;a<this.actorlist.length;++a){var c=this.actorlist[a];s=c.x>s?c.x:s,i=c.x<i?c.x:i,n=c.y>n?c.y:n,o=c.y<o?c.y:o}l.x=0,l.y=0,this.getActorCenterPos(l),l.x+=370,s=l.x>s?l.x:s,i=l.x<i?l.x:i,n=l.y>n?l.y:n,o=l.y<o?l.y:o,s+=e,i-=e,n+=e,o-=e;var r=Math.abs(s-i),h=Math.abs(n-o);return cc.v2(i+r/2,o+h/2)},getTargetMidPoint:function(){return l.x=0,l.y=0,this.getActorCenterPos(l),l.x+=150,l}});cc._RF.pop()},{CameraManager:"CameraManager",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",PlayFightAudio:"PlayFightAudio",Utils:"Utils"}],RPG:[function(e,t,i){"use strict";cc._RF.push(t,"aa2b1sWbvBNR5HG9MRhsVcZ","RPG"),cc.Class({extends:cc.Component,properties:{gameNode:cc.Node},onLoad:function(){this.spawnMonster=this.node.getComponent("SpawnMonster"),this.spawnActor=this.node.getComponent("SpawnActor"),this.spawnActor.spawnActors(),this.Game=this.gameNode.getComponent("Game")},start:function(){}}),cc._RF.pop()},{}],ReWardStar:[function(e,t,i){"use strict";cc._RF.push(t,"44e04SjO+tFB5buFs0qX0Dd","ReWardStar");var o=e("BaseUI"),s=e("Utils");e("LocalStorage"),e("EnumDefine").LevelResult,e("EnumDefine").DayKind;cc.Class({extends:o,properties:{scrollView:{default:null,type:cc.ScrollView},RewardStarItem:cc.Node,starnumNode:cc.Node},onLoad:function(){this.content=this.scrollView.content,this.starnums=s.StarNums,this.vals={0:[50,10,1],1:[1e3,10,3],2:[2e3,20,3],3:[3e3,30,4],4:[4e3,40,5],5:[5e3,50,6],6:[6e3,60,7],7:[7e3,70,8],8:[8e3,80,9]}},start:function(){},init:function(e,t,i,o){this.uibase=t,this.StageUI=i,this.mask=o,this.curStarNum=e,this.starnumNode.getComponent(cc.Label).string=e+"";for(var s=0;s<this.starnums.length;s++){var n=this.starnums[s],a=s,c=cc.instantiate(this.RewardStarItem);c.active=!0,c.parent=this.content;var r=c.getComponent("RewardStarItem"),l=this.vals[s],h=l[0],u=l[1],d=l[2];r.init(a,this.curStarNum,n,h,u,d,o,t,i),c.position=cc.v2(238,1898-(c.height+15)*s)}this.scaleShow(this.node,null)},closeBtn:function(){var e=function(){this.node.active=!1,this.node.scale=1}.bind(this);this.scaleClose(this.node,e)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils"}],RemoveCells:[function(e,t,i){"use strict";cc._RF.push(t,"3db16SFTfZJYaYidNaqgAFL","RemoveCells");var o=e("EnumDefine").CellType,s=(e("EnumDefine").Direction,e("Game")),n=e("Utils").NUMROWS;e("Utils").NUMCOLUMNS;cc.Class({extends:cc.Component,properties:{},ctor:function(){this._unUsedproplist=[],this._usedProplist=[]},onLoad:function(){this.Board=this.node.getComponent("Board"),this.DropCell=this.node.getComponent("DropCell"),this.CellAttack=this.node.getComponent("CellAttack"),this.PropHVSkill=this.node.getComponent("PropHVSkill"),this.processBoardCell=this.node.getComponent("ProcessBoardCell")},start:function(){},reset:function(){this._usedProplist.length=0,this._unUsedproplist.length=0},pushProplist:function(e){e.length>0&&this._unUsedproplist.push(e)},runCelllist:function(e,t){for(var i=this,o=[],s=function(s){var n=e[s],a=cc.callFunc(function(){i.removeOneCell(n)},i);o.push(a),o.push(cc.delayTime(t))},n=0;n<e.length;n++)s(n);o.length>0&&this.node.runAction(cc.sequence(o))},removelistlist:function(e,t,i){for(var o=this,n=[],a=0,c=0;c<e.length;c++){var r=e[c],l=[];this.collectProplist(r,l),n.push(l),a+=l.length}for(var h=0,u=0;u<n.length;u++){var d=n[u];h=h<.15*d.length?.15*d.length:h}var p=cc.callFunc(function(){for(var e=0;e<n.length;e++){var t=n[e];o.runCelllist(t,.15)}},this);if(t.push(p),t.push(cc.delayTime(h)),s.instance.updateRemoveCells(a),this._unUsedproplist.length>0){var v=cc.callFunc(function(){o.processProplist()},this);t.push(v)}else{t.push(cc.delayTime(.2)),t.push(i)}},removeXXCross:function(e,t,i,o,n,a,c,r){var l=this,h=[],u=[],d=[],p=[],v=[],f=[];this.collectProplist(e,h),this.collectProplist(t,u),this.collectProplist(i,d),this.collectProplist(o,p),this.collectProplist(n,v),this.collectProplist(a,f);var m=0;m=(m=(m=(m=(m=(m=m<.15*h.length?.15*h.length:m)<.15*u.length?.15*u.length:m)<.15*d.length?.15*d.length:m)<.15*p.length?.15*p.length:m)<.15*v.length?.15*v.length:m)<.15*f.length?.15*f.length:m;var g=cc.callFunc(function(){l.runCelllist(h,.15),l.runCelllist(u,.15),l.runCelllist(d,.15),l.runCelllist(p,.15),l.runCelllist(v,.15),l.runCelllist(f,.15)},this);c.push(g),c.push(cc.delayTime(m));var C=h.length+u.length+d.length+p.length+v.length+f.length;if(s.instance.updateRemoveCells(C),this._unUsedproplist.length>0){var S=cc.callFunc(function(){l.processProplist()},this);c.push(S)}else{c.push(cc.delayTime(.2)),c.push(r)}},removeXCross:function(e,t,i,o,n,a){var c=this,r=[],l=[],h=[],u=[];this.collectProplist(e,r),this.collectProplist(t,l),this.collectProplist(i,h),this.collectProplist(o,u);var d=0;d=(d=(d=(d=d<.15*r.length?.15*r.length:d)<.15*l.length?.15*l.length:d)<.15*h.length?.15*h.length:d)<.15*u.length?.15*u.length:d;var p=cc.callFunc(function(){c.runCelllist(r,.15),c.runCelllist(l,.15),c.runCelllist(h,.15),c.runCelllist(u,.15)},this);n.push(p),n.push(cc.delayTime(d));var v=r.length+l.length+h.length+u.length;if(s.instance.updateRemoveCells(v),this._unUsedproplist.length>0){var f=cc.callFunc(function(){c.processProplist()},this);n.push(f)}else{n.push(cc.delayTime(.2)),n.push(a)}},removeCross:function(e,t,i,o){var n=this,a=[],c=[];this.collectProplist(e,a),this.collectProplist(t,c);var r=0;r=(r=r<.15*a.length?.15*a.length:r)<.15*c.length?.15*c.length:r;var l=cc.callFunc(function(){n.runCelllist(a,.15),n.runCelllist(c,.15)},this);i.push(l),i.push(cc.delayTime(r));var h=a.length+c.length;if(s.instance.updateRemoveCells(h),this._unUsedproplist.length>0){var u=cc.callFunc(function(){n.processProplist()},this);i.push(u)}else{i.push(cc.delayTime(.2)),i.push(o)}},removeHV:function(e,t,i,o,n,a){var c=this,r=[],l=[],h=[];this.collectProplist(i,r);for(var u=0;u<r.length;u++){var d=r[u],p=d.getComponent("Cell");0===a?p.column<e?l.push(d):h.push(d):p.row<t?l.push(d):h.push(d)}for(var v=Math.min(l.length,h.length),f=0,m=function(){var e=l[f],t=h[f],i=cc.callFunc(function(){c.removeOneCell(e),c.removeOneCell(t)},c);o.push(i),o.push(cc.delayTime(.2))};f<v;f++)m();for(var g=function(){var e=l[f],t=cc.callFunc(function(){c.removeOneCell(e)},c);o.push(t),o.push(cc.delayTime(.2))};f<l.length;f++)g();for(var C=function(){var e=h[f],t=cc.callFunc(function(){c.removeOneCell(e)},c);o.push(t),o.push(cc.delayTime(.2))};f<h.length;f++)C();var S=r.length;if(s.instance.updateRemoveCells(S),this._unUsedproplist.length>0){var b=cc.callFunc(function(){c.processProplist()},this);o.push(b)}else{o.push(cc.delayTime(.2)),o.push(n)}},removeClearBomb:function(e,t,i,o,a){var c=this,r=[],l=[],h=[];this.collectProplist(i,r);for(var u=t;u<n;u++){for(var d=[],p=0;p<r.length;p++){var v=r[p];v.getComponent("Cell").row===u&&d.push(v)}d.length>0&&l.push(d)}for(var f=t-1;f>=0;f--){for(var m=[],g=0;g<r.length;g++){var C=r[g];C.getComponent("Cell").row===f&&m.push(C)}m.length>0&&h.push(m)}for(var S=Math.min(l.length,h.length),b=0,k=function(){var e=l[b],t=h[b],i=cc.callFunc(function(){for(var i=0;i<e.length;i++){var o=e[i];c.removeOneCell(o)}for(var s=0;s<t.length;s++){var n=t[s];c.removeOneCell(n)}},c);o.push(i),o.push(cc.delayTime(.15))};b<S;b++)k();for(var _=function(){var e=h[b],t=cc.callFunc(function(){for(var t=0;t<e.length;t++){var i=e[t];c.removeOneCell(i)}},c);o.push(t),o.push(cc.delayTime(.2))};b<h.length;b++)_();for(var w=function(){var e=l[b],t=cc.callFunc(function(){for(var t=0;t<e.length;t++){var i=e[t];c.removeOneCell(i)}},c);o.push(t),o.push(cc.delayTime(.2))};b<l.length;b++)w();var B=r.length;if(s.instance.updateRemoveCells(B),this._unUsedproplist.length>0){var D=cc.callFunc(function(){c.processProplist()},this);o.push(D)}else{o.push(cc.delayTime(.2)),o.push(a)}},removeCells:function(e,t,i){var o=this,n=[];this.collectProplist(e,n);for(var a=0;a<n.length;a++){var c=n[a],r=cc.callFunc(this.removeOneCell.bind(this,c));t.push(r),t.push(cc.delayTime(.05))}var l=n.length;if(s.instance.updateRemoveCells(l),this._unUsedproplist.length>0){var h=cc.callFunc(function(){o.processProplist()},this);t.push(h)}else{t.push(cc.delayTime(.2)),t.push(i)}},processProplist:function(){if(this._unUsedproplist.length>0){var e=this._unUsedproplist.shift();this._usedProplist.push(e);for(var t=0;t<e.length;t++){var i=e[t],n=i.getComponent("Cell").celltype;switch(s.instance.updateCell(n,1),n){case o.One_Horinal1:this.PropHVSkill.MultHorinalsRemove(i,1);break;case o.One_Horinal2:this.PropHVSkill.MultHorinalsRemove(i,2);break;case o.One_Horinal3:this.PropHVSkill.MultHorinalsRemove(i,3);break;case o.One_Horinal4:this.PropHVSkill.MultHorinalsRemove(i,4);break;case o.One_Horinal5:this.PropHVSkill.MultHorinalsRemove(i,5);break;case o.Two_Vertical1:this.PropHVSkill.MultVerticalsRemove(i,1);break;case o.Two_Vertical2:this.PropHVSkill.MultVerticalsRemove(i,2);break;case o.Two_Vertical3:this.PropHVSkill.MultVerticalsRemove(i,3);break;case o.Two_Vertical4:this.PropHVSkill.MultVerticalsRemove(i,4);break;case o.Two_Vertical5:this.PropHVSkill.MultVerticalsRemove(i,5);break;case o.Three_LeftPlant1:this.PropHVSkill.MultLeftPlansRemove(i,1);break;case o.Three_LeftPlant2:this.PropHVSkill.MultLeftPlansRemove(i,2);break;case o.Three_LeftPlant3:this.PropHVSkill.MultLeftPlansRemove(i,3);break;case o.Three_LeftPlant4:this.PropHVSkill.MultLeftPlansRemove(i,4);break;case o.Three_LeftPlant5:this.PropHVSkill.MultLeftPlansRemove(i,5);break;case o.Four_RightPlant1:this.PropHVSkill.MultRightPlansRemove(i,1);break;case o.Four_RightPlant2:this.PropHVSkill.MultRightPlansRemove(i,2);break;case o.Four_RightPlant3:this.PropHVSkill.MultRightPlansRemove(i,3);break;case o.Four_RightPlant4:this.PropHVSkill.MultRightPlansRemove(i,4);break;case o.Four_RightPlant5:this.PropHVSkill.MultRightPlansRemove(i,5);break;case o.Five_Cross1:this.PropHVSkill.MultCrossRemove(i,1);break;case o.Five_Cross2:this.PropHVSkill.MultCrossRemove(i,2);break;case o.Five_Cross3:this.PropHVSkill.MultCrossRemove(i,3);break;case o.Five_Cross4:this.PropHVSkill.MultCrossRemove(i,4);break;case o.Five_Cross5:this.PropHVSkill.MultCrossRemove(i,5);break;case o.SBomb1:this.PropHVSkill.MultDiamondsShapesRemove(i,1);break;case o.SBomb2:this.PropHVSkill.MultDiamondsShapesRemove(i,2);break;case o.SBomb3:this.PropHVSkill.MultDiamondsShapesRemove(i,3);break;case o.SBomb4:this.PropHVSkill.MultDiamondsShapesRemove(i,4);break;case o.ClearBombProp:this.PropHVSkill.ClearBomb(i);break;case o.SFive_SameColor:this.PropHVSkill.SameColorSkill(i)}}}},removeOneCell:function(e){this.CellAttack.hurt(e)},collectProplist:function(e,t){for(var i=[],o=0;o<e.length;o++){var s=e[o],n=s.getComponent("Cell");n.IsProp()&&!n.IsBrushCell()?-1==i.indexOf(s)&&i.push(s):n.canRemove()&&-1==t.indexOf(s)&&t.push(s)}if(i.length>0){for(var a=[],c=0;c<i.length;c++){var r,l,h=i[c];r=this.checkIsInlist(h,this._unUsedproplist),l=this.checkIsInlist(h,this._usedProplist),r||l||a.push(h)}a.length>0&&this._unUsedproplist.push(a)}},checkIsInlist:function(e,t){for(var i=!1,o=0;o<t.length;o++){if(t[o].indexOf(e)>=0){i=!0;break}}return i}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",Utils:"Utils"}],RewardStarItem:[function(e,t,i){"use strict";cc._RF.push(t,"a3ccbDazrdJy7lZKuePyAwk","RewardStarItem");var o=e("Utils"),s=e("EnumDefine"),n=(s.LevelResult,e("LocalStorage")),a=e("EnumDefine").ActorType,c=(e("BaseUI"),o.ProduceType),r=(s.EnterKind,e("EnumDefine").StarKind,e("OpenSdk"));cc.Class({extends:cc.Component,properties:{starnum:cc.Label,one:cc.Button,two:cc.Button,coin:cc.Node,diamond:cc.Node,key:cc.Node,role:cc.Node,star:cc.Sprite},onLoad:function(){},start:function(){},init:function(e,t,i,o,s,a,c,r,l){this.rewardId=e,this.uibase=r,this.StageUI=l,this.Mask=c,this.needStarNum=i,this.curStarNum=t,this.coinnum=o,this.diamondnum=s,this.keynum=a;var h=n.instance.getStarDone(e);this.doneData=h;var u=this.starnum.getComponent(cc.Label);u.string=i+"";var d=this.coin.getChildByName("num");(u=d.getComponent(cc.Label)).string=o+"",(u=(d=this.diamond.getChildByName("num")).getComponent(cc.Label)).string=s+"",(u=(d=this.key.getChildByName("num")).getComponent(cc.Label)).string=a+"";var p=this.doneData.one,v=this.doneData.two;v="true"===v,(p="true"===p)?(this.one.interactable=!1,this.one.enableAutoGrayEffect=!0):this.curStarNum>=this.needStarNum?this.one.interactable=!0:(this.one.interactable=!1,this.one.enableAutoGrayEffect=!0),v?(this.two.interactable=!1,this.two.enableAutoGrayEffect=!0):(this.curStarNum,this.needStarNum,this.two.interactable=!1,this.two.enableAutoGrayEffect=!0),0===e?(this.role.active=!0,this.key.active=!1):(this.role.active=!1,this.key.active=!0),this.curStarNum<this.needStarNum&&this.star&&this.star.setState(cc.Sprite.State.GRAY),this.oneDone=p,this.twoDone=v},haveDoneOne:function(){this.doneData.one="true",this.one.interactable=!1,this.one.enableAutoGrayEffect=!0,n.instance.setStarDone(this.rewardId,this.doneData)},haveDoneTwo:function(){this.doneData.two="true",this.two.interactable=!1,this.two.enableAutoGrayEffect=!0,n.instance.setStarDone(this.rewardId,this.doneData)},oneBtn:function(){var e=function(){var e=function(){this.produceCoin(2*this.coinnum),this.produceDiamond(2*this.diamondnum),0===this.rewardId?this.reWardOneRole():this.produceKey(2*this.keynum),this.haveDoneOne()}.bind(this);r.instance.showVideo(e,null)}.bind(this),t=function(){this.twoDone||(this.two.interactable=!0,this.two.enableAutoGrayEffect=!1),this.produceCoin(this.coinnum),this.produceDiamond(this.diamondnum),0===this.rewardId?this.reWardOneRole():this.produceKey(this.keynum),this.haveDoneOne()}.bind(this);this.loadDoubleRequest(e,t)},twoBtn:function(){this.produceCoin(2*this.coinnum),this.produceDiamond(2*this.diamondnum),0===this.rewardId?this.reWardOneRole():this.produceKey(2*this.keynum),this.haveDoneTwo()},loadDoubleRequest:function(e,t){var i=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/UI/DoubleRequest",function(o,s){var n=cc.instantiate(s);n.parent=i,n.pos=cc.v2(0,0),n.zIndex=10;var a=n.getComponent("DoubleRequest");a&&a.show(e,t)})},produceKey:function(e){this.StageUI.addFreeKey(e)},reWardOneRole:function(){var e=this.role,t=cc.director.getScene()._children[0],i=t,o=a.Actor4;if(!n.instance.getRoleData(o)){var s=e.parent.convertToWorldSpaceAR(e.position);s=i.convertToNodeSpaceAR(s);var c=function(){var e={};e.roletype=o,e.lock=!1,e.level=1,n.instance.setRoleData(e),this.StageUI.addRoleNum()}.bind(this),r=this;cc.loader.loadRes("prefab/map/RoleReWard",function(e,i){var o=cc.instantiate(i);o.parent=t,o.pos=s,o.group="UI";var n=o.getChildByName("glare"),a=cc.repeatForever(cc.rotateBy(3,360));n.runAction(a),o.scale=0;var l=cc.scaleTo(1,1).easing(cc.easeOut(3)),h=cc.moveBy(1,cc.v2(0,20)),u=cc.spawn(l,h),d=cc.callFunc(function(){c()},r),p=cc.sequence(u,d,cc.delayTime(.5),cc.removeSelf());o.runAction(p)})}},produceDiamond:function(e){if(!(e<=0)){var t=cc.director.getScene()._children[0],i=this.uibase,s=(i.coinlabel,i.diamondlabel),n=this.diamond,a=n.parent.convertToWorldSpaceAR(n.position);a=t.convertToNodeSpaceAR(a);var r=s.node.parent.convertToWorldSpaceAR(s.node.position);r=t.convertToNodeSpaceAR(r);var l=e/10;l=Math.floor(l);var h=function(){i.updateDiamond(l),i.playCoin()}.bind(this);o.produceRandomNodeLineMove(c.Diamond,10,a,r,t,h)}},produceCoin:function(e){if(!(e<=0)){var t=cc.director.getScene()._children[0],i=this.uibase,s=i.coinlabel,n=(i.diamondlabel,this.coin),a=n.parent.convertToWorldSpaceAR(n.position);a=t.convertToNodeSpaceAR(a);var r=s.node.parent.convertToWorldSpaceAR(s.node.position);r=t.convertToNodeSpaceAR(r);var l=parseInt(e/10),h=parseInt(e%10),u=function(){i.updateCoin(l),i.playCoin()}.bind(this),d=l;0!=h&&(d=h);var p=function(){i.updateCoin(d),i.playCoin()}.bind(this);o.produceRandomNodeLineMove(c.ButtonCoin,10,a,r,t,u,p)}}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",OpenSdk:"OpenSdk",Utils:"Utils"}],Rocket:[function(e,t,i){"use strict";cc._RF.push(t,"01040G+qUdPDo9pOhbsl5dS","Rocket");var o=e("EnumDefine").Direction,s=(e("Utils"),e("Utils").NUMROWS),n=e("Utils").NUMCOLUMNS,a=e("Utils").TITLE_WIDTH,c=e("Utils").TITLE_HEIGHT;cc.Class({extends:cc.Component,properties:{},start:function(){},runlist:function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];cc.callFunc(function(){},this);t.push(o.position)}var s=.05*e.length,n=cc.cardinalSplineTo(s,t,0),a=cc.sequence(n,cc.removeSelf());this.node.runAction(a)},run:function(e){var t=0,i=(this.node.position,cc.v2());e==o.kHorinal?(i.x=a*n,i.y=0,t=.05*n):(i.x=0,i.y=c*s,t=.05*s);var r=cc.moveBy(t,i),l=cc.sequence(r,cc.removeSelf());this.node.runAction(l)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],RoleAndPets:[function(e,t,i){"use strict";cc._RF.push(t,"6fc3cXofbhDOLHyVjw7rA7B","RoleAndPets");var o=e("JsonData"),s=e("LocalStorage"),n=e("EnumDefine").ActorType,a=(e("EnumDefine").EnterKind,e("Utils")),c=e("AchieveManager"),r=e("ActorNews"),l=e("CommonUtil");cc.Class({extends:cc.Component,properties:{roleName:cc.Label,level:cc.Label,role:cc.Node,lockRole:cc.Node,glare:cc.Node,extractionStar:cc.Node,showRoleBtn:cc.Button,unlockNode:cc.Node,passLevelLock:cc.Node,levelNode:cc.Node,TipNode:cc.Node,UIBaseNode:cc.Node,PetCardPrefab:cc.Prefab,petsScrollView:{default:null,type:cc.ScrollView}},onLoad:function(){this.lock=!0;var e=20,t=cc.rotateBy(e,360),i=cc.repeatForever(t);this.glare.runAction(i),e=30,t=cc.rotateBy(e,360),i=cc.repeatForever(t),this.extractionStar.runAction(i),this.UIBaseNode&&(this.uibase=this.UIBaseNode.getComponent("UIBase")),this.petItemlist=[],this.TipNode.active=!1,this.petsScrollView&&(this.petCardContent=this.petsScrollView.content),this.petlist=[],this.passLevelLock.active=!1,this.unlockNode.active=!1,this.lockRole.active=!1,this.showedRoleInfo=!1},start:function(){},unlockRole:function(e,t){this.lock=!1,this.levelNode.active=!0,this.extractionStar.active=!0,this.initRole(e,t),this.unlockNode.active=!1,this.showRoleBtn.interactable=!0,this.showTip()},init:function(e){this.canUnlock=!0,this.roletype=e;var t=s.instance.getRoleData(e);if(t)this.roleData=t,this.unlockRole(e,t.level);else{this.lock=!0;this.extractionStar.active=!1,this.levelNode.active=!1,this.initRole(e,1),this.unlockNode.active=!0,this.showRoleBtn.interactable=!1;var i=this.unlockNode.getChildByName("num").getComponent("cc.Label");o.instance.getBuyRoleData(e+1,function(e){e&&(i.string=e.BuyPrice+"")})}this.roleName.string=a.getRoleName(e);var c=s.instance.getLastestLevelID(),r=[1,20,15,10,25];switch(a.UseTest&&(r=[-1,-1,-1,-1,-1]),e){case n.Actor1:var l=this.glare.getComponent(cc.Sprite);this.SetUISpriteFrame(l,"redglare");break;case n.Actor2:var h=this.glare.getComponent(cc.Sprite);this.SetUISpriteFrame(h,"blueglare");var u=this.lockRole.getComponent("cc.Sprite");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame("mike");u.spriteFrame=i});break;case n.Actor3:var d=this.glare.getComponent(cc.Sprite);this.SetUISpriteFrame(d,"yellowglare");var p=this.lockRole.getComponent("cc.Sprite");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame("ricky");p.spriteFrame=i});break;case n.Actor4:var v=this.glare.getComponent(cc.Sprite);this.SetUISpriteFrame(v,"greenglare");var f=this.lockRole.getComponent("cc.Sprite");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame("tutu");f.spriteFrame=i});break;case n.Actor5:var m=this.glare.getComponent(cc.Sprite);this.SetUISpriteFrame(m,"whiteglare");var g=this.lockRole.getComponent("cc.Sprite");cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame("kaokao");g.spriteFrame=i})}var C=r[e];if(c>=C)this.canUnlock=!0,this.unlockNode.active=!0,this.passLevelLock.active=!1;else{this.canUnlock=!1,this.unlockNode.active=!1,this.passLevelLock.active=!0;var S=this.passLevelLock.getChildByName("level");if(S)S.getComponent("cc.Label").string=C+""}this.lock||(this.unlockNode.active=!1,this.passLevelLock.active=!1),this.initPets(e),this.showTip()},SetUISpriteFrame:function(e,t,i){cc.loader.loadRes("texture/Effect",cc.SpriteAtlas,function(o,s){var n=s.getSpriteFrame(t);e.spriteFrame=n,i&&i()})},initRole:function(e,t){var i=this.role;this.rolelevel=t,this.level.string=t+"";var o="spine/actor/"+a.getActorSpineName(e,t),s=i.getComponent("sp.Skeleton"),n=this;cc.loader.loadRes(o,sp.SkeletonData,function(e,t){e&&cc.error(e),s.skeletonData=t,n.lock?(n.lockRole.active=!0,i.active=!1,n.glare.active=!1):(s.setAnimation(0,"idle",!0),n.lockRole.active=!1,n.glare.active=!0)})},onBtnUnlockRole:function(e){if(this.canUnlock){var t=this.roletype,i=this;o.instance.getBuyRoleData(t+1,function(e){if(e){var n=parseInt(e.BuyPrice);if(i.buyRoleDiamond(n)){o.instance.loadRoleUpgradeData(t+1,1,function(e){var o={};o.roletype=t,o.level=parseInt(e.level),o.attack=parseInt(e.attack),i.roleData=o,s.instance.setRoleData(i.roleData),i.unlockRole(t,e.level),c.instance.checkUnlockRole(t)})}}})}},buyRoleDiamond:function(e){var t=!1;this.uibase&&(this.uibase.getDiamondNum()>=e&&(t=!0,this.uibase.updateDiamond(-e)));return t},showPetTouchGuide:function(){var e=this.petlist[0].getComponent("PetCard");e&&e.clickShow()},initPets:function(e){var t=[];switch(e){case n.Actor1:t=[1,2,3];break;case n.Actor2:t=[4,5,6];break;case n.Actor3:t=[7,8,9];break;case n.Actor4:t=[10,11,12];break;case n.Actor5:t=[13,14,15]}this.petlist=[];var i=this.petCardContent;if(i)for(var o=l.getGroupColor(e),a=0;a<t.length;a++){var c=t[a],r=s.instance.getPetData(c),h=cc.instantiate(this.PetCardPrefab);if(h){h.parent=i,h.position=cc.v2(150*a-171,140);var u=h.getComponent("PetCard");u.init(c,r),u.setColor(o),this.petlist.push(h)}}},showTip:function(){var e=this.roletype,t=this.uibase,i=function(e){this.TipNode.active=!!e}.bind(this);r.instance.roleLevelUp(e,t,i)},fresh:function(){this.showTip();var e=this.roletype,t=s.instance.getRoleData(e);t&&t.level>this.roleData.level&&(this.roleData=t,this.initRole(e,t.level))},freshPet:function(e){for(var t=0;t<this.petlist.length;t++){var i=this.petlist[t].getComponent("PetCard");i&&i.petData&&i.petData.ID===e.ID&&i.fresh(e)}},showRoleInfo:function(){if(!this.showedRoleInfo){this.showedRoleInfo=!0;var e=cc.director.getScene()._children[0],t=function(){this.fresh(),this.showedRoleInfo=!1}.bind(this),i=this;cc.loader.loadRes("prefab/ActorUI/RoleCardInfo",function(o,s){var n=cc.instantiate(s);n.scale=1,n.parent=e,n.position=cc.v2();var a=n.getComponent("RoleCardInfo");a.replaceUIBaseNode(i.UIBaseNode);var c=parseInt(i.roletype);a.show(c,t)})}}}),cc._RF.pop()},{AchieveManager:"AchieveManager",ActorNews:"ActorNews",CommonUtil:"CommonUtil",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],RoleCardInfo:[function(e,t,i){"use strict";cc._RF.push(t,"69206NCXhFDI5/q42qXM4wy","RoleCardInfo");var o=e("EnumDefine").EnterKind,s=e("BaseUI");cc.Class({extends:s,properties:{NormalContentNode:cc.Node,UpGradeContentNode:cc.Node},ctor:function(){this.enter=o.UnKnown},onLoad:function(){this.NormalContentNode.active=!0,this.UpGradeContentNode.active=!1;var e=this.NormalContentNode.getComponent("NormalRoleContent");this.func=e},replaceUIBaseNode:function(e){this.func.replaceUIBaseNode(e)},visibleBaseUI:function(){this.func.visibleBaseUI()},setRoleAndPets:function(e){this.RoleAndPets=e},show:function(e,t){this.NormalContentNode.getComponent("NormalRoleContent").show(e,t)},freshPet:function(e){var t=cc.director.getScene()._children[0].getChildByName("ActorUI").getComponent("ActorUI");t&&t.freshPet(e)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine"}],RoleGrass:[function(e,t,i){"use strict";cc._RF.push(t,"00a8erYX/xFaKMs058dMDVw","RoleGrass"),cc.Class({extends:cc.Component,properties:{grass1:cc.Node,grass2:cc.Node,grass3:cc.Node,grassRole:cc.Node},onLoad:function(){},start:function(){},init:function(e){this.roleID=e},clickShow:function(){},grassesMoveBack:function(e){var t=this.grass1.width*this.grass1.scale,i=this.grass2.width*this.grass2.scale,o=this.grass3.width*this.grass3.scale,s=cc.moveBy(.5,cc.v2(t/2,0)).easing(cc.easeOut(3));this.grass1.runAction(s),s=cc.moveBy(.5,cc.v2(-i/2,0)).easing(cc.easeOut(3)),this.grass2.runAction(s),s=cc.moveBy(.5,cc.v2(o/2,0)).easing(cc.easeOut(3)),this.grass3.runAction(s)},shakeGrasses:function(e){var t=this,i=cc.callFunc(function(){t.grassShake(t.grass1)},this),o=cc.callFunc(function(){t.grassShake(t.grass2)},this),s=cc.callFunc(function(){t.grassShake(t.grass3)},this),n=cc.callFunc(function(){var e=t.grass1.width*t.grass1.scale,i=t.grass2.width*t.grass2.scale,o=t.grass3.width*t.grass3.scale,s=cc.moveBy(.2,cc.v2(-e/2,0)).easing(cc.easeOut(3));t.grass1.runAction(s),s=cc.moveBy(.2,cc.v2(i/2,0)).easing(cc.easeOut(3)),t.grass2.runAction(s),s=cc.moveBy(.2,cc.v2(-o/2,0)).easing(cc.easeOut(3)),t.grass3.runAction(s)},this),a=cc.callFunc(function(){e&&e()},this),c=cc.sequence(i,cc.delayTime(.1),o,cc.delayTime(.1),s,cc.delayTime(.2),n,cc.delayTime(.2),a);this.node.runAction(c)},grassShake:function(e){if(e){var t=e.scale,i=cc.scaleTo(.1,1.2*t).easing(cc.easeBounceInOut()),o=cc.scaleTo(.1,t).easing(cc.easeBounceInOut()),s=cc.sequence(i,o),n=cc.jumpBy(.1,cc.v2(0,0),20,1).easing(cc.easeOut(3)),a=cc.jumpBy(.1,cc.v2(0,0),-20,1).easing(cc.easeOut(3)),c=cc.jumpBy(.1,cc.v2(0,0),16,1).easing(cc.easeOut(3)),r=cc.jumpBy(.1,cc.v2(0,0),-16,1).easing(cc.easeOut(3)),l=cc.sequence(n,a,c,r),h=cc.spawn(s,l);e.runAction(h)}}}),cc._RF.pop()},{}],RoleMove:[function(e,t,i){"use strict";cc._RF.push(t,"afff3C+RUhMg47hRzWHIhoF","RoleMove");e("RPGManager");var o=e("Game"),s=cc.v2(0,0);cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._movedt=0,this._moveDelay=.01,this._moveUnitVal=15,this.canMove=!1,this.prevPos=cc.v2(),this.walkDis=0},start:function(){},setMove:function(e){this.canMove=e},move:function(e){s.x=this.node.position.x,s.y=this.node.position.y,s.x+=this._moveUnitVal,this.prevPos=this.node.position,this.node.position=this.node.position.lerp(s,.2),this.walkDis+=this.node.position.x-this.prevPos.x,this.walkDis>=100&&(this.walkDis=0,o.instance.updateBossRoad(1e-4))},update:function(e){this.canMove&&this.move(e)}}),cc._RF.pop()},{Game:"Game",RPGManager:"RPGManager"}],RolePetItem:[function(e,t,i){"use strict";cc._RF.push(t,"c34e0A5fSNP1Iokbd8opVRX","RolePetItem");var o=e("Utils");e("LocalStorage"),e("JsonData");cc.Class({extends:cc.Component,properties:{petSkeleton:sp.Skeleton,gou:cc.Node,choose:cc.Node},onLoad:function(){this.gou.active=!1,this.choose.active=!1},chooseBtn:function(e){},touch:function(){},unTouch:function(){},show:function(e){this.lock||this.petID},init:function(e,t,i,s){this.petID=t,this.roleID=e,this.lock=i,this.RolePage=s;var n="spine/pet/";n+=o.getPetFileName(this.petID-1);var a=this.petSkeleton,c=this;cc.loader.loadRes(n,sp.SkeletonData,function(e,t){e&&cc.error(e),a.skeletonData=t,c.lock?a.node.color=cc.color(0,0,0,255):a.setAnimation(0,"idle",!0)})}}),cc._RF.pop()},{JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],RolePetSkills:[function(e,t,i){"use strict";cc._RF.push(t,"6765eZlVl5PyqIYquZHpBIa","RolePetSkills");e("EnumDefine").Direction,e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT,e("EnumDefine").RemoveCellEffect,e("PoolMng");cc.Class({extends:cc.Component,properties:{},start:function(){},sameColorSkill:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine",PoolMng:"PoolMng",Utils:"Utils"}],RolePetUI:[function(e,t,i){"use strict";cc._RF.push(t,"f9fd44LCftIrqhIbPR1f7+F","RolePetUI");var o=e("EnumDefine"),s=o.ActorType,n=(o.EnterKind,e("BaseUI")),a=e("LocalStorage");cc.Class({extends:n,properties:{midbk:cc.Node,scrollView:{default:null,type:cc.ScrollView},petItem:cc.Prefab},onLoad:function(){var e=this.midbk;this.scaleShow(e,null),this.content=this.scrollView.content,this.uibase=null,this.closeFunc=null},start:function(){},show:function(e,t){this.uibase=t,this.roleID=e;var i=[];switch(e){case s.Actor1:i=[1,2,3];break;case s.Actor2:i=[4,5,6];break;case s.Actor3:i=[7,8,9];break;case s.Actor4:i=[10,11,12];break;case s.Actor5:i=[13,14,15]}for(var o=0;o<i.length;o++){var n=i[o],c=!0;a.instance.getPetData(n)&&(c=!1);var r=cc.instantiate(this.petItem);r.parent=this.content,r.position=cc.v2(187+o*(.9*r.width+15),70);var l=r.getComponent("PetItem");l&&l.init(e,n,c,this.uibase)}},onBtnCloseActorUI:function(){var e=function(){this.closeFunc&&this.closeFunc(),this.node.removeFromParent()}.bind(this),t=this.midbk;this.scaleClose(t,e)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage"}],RoleSkillUI:[function(e,t,i){"use strict";cc._RF.push(t,"e4e7efjFjJJ3qQBIZaSAmyB","RoleSkillUI");e("EnumDefine");var o=e("BaseUI"),s=e("JsonData");cc.Class({extends:o,properties:{skillbk:cc.Node,decription:cc.Label},onLoad:function(){this.scaleShow(this.node,null)},start:function(){},show:function(e){var t=function(e){var t="prefab/skillcell/"+e.prefabName,i=this;cc.loader.loadRes(t,function(e,t){e&&cc.error(e);var o=cc.instantiate(t);o.parent=i.skillbk,o.x=-39,o.y=-40,o.getChildByName("cellNode").x=39}),this.decription.string=e.describe_CN}.bind(this);s.instance.loadJsonSkillData(e,t)},closeBtnFunc:function(e){var t=function(){this.node.removeFromParent()}.bind(this);this.scaleClose(this.node,t)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData"}],Salive:[function(e,t,i){"use strict";cc._RF.push(t,"d5d92kSscZIqqA/U3jDOGOc","Salive");var o=e("Board"),s=e("EnumDefine").SaliveKind,n=e("EnumDefine").CellType,a=(e("Utils"),e("ProcessBoardCell")),c=e("Sort"),r=e("EnumDefine").RemoveCellEffect;cc.Class({extends:cc.Component,properties:{nodes:{default:[],type:cc.Node}},onLoad:function(){this.shootSkillDuration=.25,this.shootSkillCount=1,this.shootDelay=.1,this.round=0,this.oneRoundNum=3,this.triggerSkill=!1,this.cellcom=this.node.getComponent("Cell")},start:function(){},init:function(e){this.lv=e,this.oldlv=e;for(var t=0;t<e;t++){var i=this.nodes[t];if(i){i.active=!0;var o=i.getComponent(cc.Animation).play();o.wrapMode=cc.WrapMode.Loop,o.speed=.05}}for(var s=e;s<this.nodes.length;s++){var n=this.nodes[s];n&&(n.active=!1)}},spawnNormalDust:function(e,t){cc.loader.loadRes("prefab/particle/saliveDustParticle",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.parent=e,s.position=t,s.zIndex=10,s.runAction(cc.sequence(cc.delayTime(2),cc.removeSelf()))})},spawnInvasionDust:function(e,t){cc.loader.loadRes("prefab/particle/InVasionSaliveDustParticle",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.parent=e,s.position=t,s.zIndex=10,s.runAction(cc.sequence(cc.delayTime(2),cc.removeSelf()))})},hurt:function(){if(this.lv>0){var e=this.lv-1,t=this.nodes[e];if(t){var i=t.parent,n=t.position;t.active=!1,i=o.instance.node,n=this.node.parent.convertToWorldSpaceAR(this.node.position),(n=i.convertToNodeSpaceAR(n)).x+=this.node.width/2,n.y+=this.node.height/2;var a=function(){this.skill===s.Invasion?this.spawnInvasionDust(i,n):this.spawnNormalDust(i,n)}.bind(this);if(this.lv<=1){if(this.cellcom)this.cellcom.getRemoveCellEffect()===r.ExplosionSmall?this.cellcom.smallExplosion(i,n):a()}else a()}this.lv-=1}},IsAllRemoved:function(){return this.lv<=0},updateRoundSkill:function(){switch(this.skill){case s.Invasion:this.round+=1,this.round>=this.oneRoundNum&&(this.triggerSkill=!0)}},IsHaveSkill:function(){return this.triggerSkill},skillDuration:function(){var e=.1;switch(this.skill){case s.Move:break;case s.Invasion:e=(this.shootSkillDuration+this.shootDelay)*this.shootSkillCount}return e},invokeSkill:function(){if(this.triggerSkill)switch(this.triggerSkill=0,this.round=0,this.skill){case s.Move:break;case s.Invasion:this.invasion()}},move:function(){},invasion:function(){var e=this,t=this.shootSkillCount,i=[],o=this.shootSkillDuration,s=this.node.getComponent("Cell"),n=s.column,r=s.row,l=[];a.instance.getFourConorNormalCells(n,r,l),c.shuffle(l);for(var h=0;h<l.length;h++)h<t&&function(){var t=l[h],s=cc.callFunc(function(){e.spawnInvasionSalive(t,e.skill,e.oldlv,o)},e);i.push(s),i.push(cc.delayTime(e.shootDelay))}();i.length>0&&(1===i.length&&i.push(null),this.node.runAction(cc.sequence(i)))},spawnInvasionSalive:function(e,t,i,s){var a=e.getComponent("Cell"),c=a.column,r=a.row,l=o.instance.SpawnCells.createSalive(n.Salive,t,i,c,r),h=l.getComponent("Salive");h&&(h.skill=t),l.parent=this.node.parent;var u=this.node.position;l.x=u.x,l.y=u.y,this.shootWeapon(e,l,i,s)},shootWeapon:function(e,t,i,s){var n=this,c=e.position,r=Math.abs(e.width-t.width),l=Math.abs(e.height-t.height);c.x+=r,c.y+=l;var h=cc.v2(),u=t.position;c.sub(u,h);var d=cc.moveTo(s,c).easing(cc.easeIn(3)),p=cc.callFunc(function(){var s=e.getComponent("Cell"),c=s.column,r=s.row,l=e.parent,h=cc.v2(e.x,e.y),u=e.group;t.parent=l,t.position=h,t.group=u,(s=t.getComponent("Cell")).init(s.celltype,i),a.instance.setCell(c,r,t),n.XXSaliveDust(n.skill,l,h),o.instance.deSpawnCell(e)},this),v=t.scale;t.scale=0;var f=cc.scaleTo(.2*s,v).easing(cc.easeOut(3)),m=cc.spawn(f,d),g=cc.sequence(m,p);t.runAction(g)},XXSaliveDust:function(e,t,i){var o=this;cc.loader.loadRes("prefab/monsterSkill/saliveDust",function(e,s){e&&cc.error(e);var n=cc.instantiate(s);n.active=!0,n.parent=t,n.position=i,n.group=o.node.group,n.zIndex=10})}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",ProcessBoardCell:"ProcessBoardCell",Sort:"Sort",Utils:"Utils"}],Set:[function(e,t,i){"use strict";cc._RF.push(t,"97dfcLTxp9OSoVFKbCcNtjq","Set");e("JsonData");var o=e("LocalStorage");e("EnumDefine").ActorType,e("Utils");cc.Class({extends:cc.Component,properties:{music:cc.Node,sound:cc.Node,musicNormalSpriteFrame:cc.SpriteFrame,musicDisaleSpriteFrame:cc.SpriteFrame,soundNormalSpriteFrame:cc.SpriteFrame,soundDisableSpriteFrame:cc.SpriteFrame},onLoad:function(){this.SetData=o.instance.getSetData()},show:function(e,t){this.AudioControl=t;var i=cc.moveTo(.2,cc.v2(0,133)).easing(cc.easeBounceInOut());this.sound.runAction(i),i=cc.moveTo(.2,cc.v2(0,50)).easing(cc.easeBounceInOut()),this.music.runAction(cc.sequence(cc.delayTime(.05),i));var o=this.SetData.musicOnOff,s=this.SetData.soundOnOff;this.processMusic(o),this.processSound(s);var n=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(cc.delayTime(.25),n))},hide:function(e){var t=cc.moveTo(.2,cc.v2(0,-37)).easing(cc.easeBounceInOut());this.sound.runAction(cc.sequence(cc.delayTime(.05),t)),t=cc.moveTo(.2,cc.v2(0,-50)).easing(cc.easeBounceInOut()),this.music.runAction(cc.sequence(cc.delayTime(.01),t));var i=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(cc.delayTime(.25),i,cc.removeSelf()))},processMusic:function(e){var t=this.music.getComponent("cc.Sprite");t.spriteFrame=e?this.musicNormalSpriteFrame:this.musicDisaleSpriteFrame},processSound:function(e){var t=this.sound.getComponent("cc.Sprite");t.spriteFrame=e?this.soundNormalSpriteFrame:this.soundDisableSpriteFrame},musciBtn:function(e){var t=this.SetData.musicOnOff;t=!t,this.SetData.musicOnOff=t,o.instance.setSetData(this.SetData),this.AudioControl.setdata=this.SetData,this.processMusic(t),t?this.AudioControl.playMain():this.AudioControl.stopMain()},soundBtn:function(e){var t=this.SetData.soundOnOff;t=!t,this.SetData.soundOnOff=t,o.instance.setSetData(this.SetData),this.AudioControl.setdata=this.SetData,this.processSound(t)},onDisale:function(){},start:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],ShootBullet:[function(e,t,i){"use strict";cc._RF.push(t,"601f2yxYvJM1rUlo+ezwRQh","ShootBullet");e("EnumDefine").HurtFont;var o=e("PoolMng"),s=e("Board"),n=cc.v2();cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._fireDelay=.15},start:function(){},shootBulletlist:function(e,t,i,o){for(var s=this,n=[],a=function(a){var c=t[a],r=cc.callFunc(function(){var t=function(e){RPGManager.instance.getMonster()||o&&o()}.bind(s);s.shootBullet(e,c,i,t)},s);n.push(r),n.push(cc.delayTime(s._fireDelay))},c=0;c<t.length;c++)a(c);var r=cc.callFunc(function(){o&&o()},this);if(n.push(r),n.length>0){this.node.stopActionByTag(10);var l=cc.sequence(n);l.setTag(10),this.node.runAction(l)}},shootBullet:function(e,t,i,o){var s=this,n=t.getComponent("Cell"),a=RPGManager.instance.getMonster();if(a){var c=a.getComponent("Monster"),r=this.roleData.attack,l=0;n===c.getAttackAddtionCellType()&&(l=parseInt(1*r)),PlayFightAudio.instance.playShootbullet(),this.node.getComponent("sp.Skeleton").setAnimation(0,"attack",!1);var h=cc.callFunc(function(){var c,h=s.getBoneName(e),u=cc.v2(),d=s.findBone(h);u.x=d[0],u.y=d[1],c=d[2],u.x+=s.node.x,u.y+=s.node.y,t.zIndex=10,t.group=s.node.group,t.parent=s.node.parent,t.x=u.x,t.y=u.y,t.rotation=c;var p=cc.misc.degreesToRadians(c),v=Math.sin(p)*t.width*.5,f=Math.cos(p)*t.height*.5;t.x+=v,t.y+=f;var m=r+l;m+=m*AttackScale,s.shootMonster(t,n,i,a,m,o)},this);this.node.runAction(cc.sequence(cc.delayTime(.1),h))}else o&&o(!0)},shootMonster:function(e,t,i,o,s,n){if(o){var a=o.getComponent("Monster");a.isHaveShield()?this.shootToMonsterShield(e,t,o,a):this.shootToMonsterSkeleton(e,t,i,o,a,s,n)}else this.shootDone(!0)},shootToMonsterShield:function(e,t,i,o){var s=this,a=o.MonsterShield.getShieldData().pos,c=e.position;a.sub(c,n);var r=n.mag()/200*.1,l=cc.moveTo(r,a).easing(cc.easeOut(3)),h=cc.callFunc(function(){var i=e.parent,n=cc.v2(e.x,e.y);if(s.bulletEffect(n,i),o.attackShield(t,1))s.deSpawnBullet(e);else{var a=cc.moveBy(.2,cc.v2(0,-50)),c=cc.callFunc(function(){s.deSpawnBullet(e)},s);s.node.runAction(cc.sequence(a,c))}},this),u=cc.sequence(l,h);this.node.runAction(u)},shootToMonsterSkeleton:function(e,t,i,o,s,a,c){var r=this,l=o.position;l.y+=o.height/2;var h=e.position;l.sub(h,n);var u=n.mag()/200*.1,d=cc.moveTo(u,l).easing(cc.easeOut(3)),p=cc.callFunc(function(){var o=e.parent,n=cc.v2(e.x,e.y);if(r.bulletEffect(n,o),t===s.getDefenceCellType()){var l=cc.moveBy(.2,cc.v2(0,-50)),h=cc.callFunc(function(){r.deSpawnBullet(e)},r);e.runAction(cc.sequence(l,h))}else s.hurt(a,c,i),r.deSpawnBullet(e)},this),v=cc.sequence(d,p);e.runAction(v)},deSpawnBullet:function(e){s.instance.deSpawnCell(e)},getBoneName:function(e){switch(e){case ActorType.Actor1:case ActorType.Actor2:return"pipe";case ActorType.Actor3:case ActorType.Actor4:return"head";case ActorType.Actor5:return"gun04"}},bulletEffect:function(e,t){var i=o.instance.getBulletHit();i.scale=1,i.parent=t,i.position=e,i.group=t.group;var s=cc.scaleTo(.4,0).easing(cc.easeOut(2)),n=cc.callFunc(function(){o.instance.putBulletHit(i)},this),a=cc.sequence(s,n);i.runAction(a)}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",PoolMng:"PoolMng"}],ShootSaliveTip:[function(e,t,i){"use strict";cc._RF.push(t,"f5bbfGAhLJKYLyMphi5/JT0","ShootSaliveTip"),cc.Class({extends:cc.Component,properties:{node1:cc.Node,node2:cc.Node,node3:cc.Node,Salive:cc.Node,Spider:cc.Node,shootNumLabel:cc.Label},onLoad:function(){var e=this;this.Salive.active=!1,this.Spider.active=!1,this.scale1=this.node1.scale,this.scale2=this.node2.scale,this.scale3=this.node3.scale,this.node1.scale=0,this.node2.scale=0,this.node3.scale=0;var t=cc.callFunc(function(){e.scaleNode(e.node1,e.scale1,.4)},this),i=cc.callFunc(function(){e.scaleNode(e.node2,e.scale2,.4)},this),o=cc.callFunc(function(){e.scaleNode(e.node3,e.scale3,.4)},this),s=cc.callFunc(function(){var t=e.scale3,i=cc.scaleTo(.3,1.1*t).easing(cc.easeOut(3)),o=cc.scaleTo(.3,1*t).easing(cc.easeOut(3)),s=cc.sequence(i,o),n=cc.repeatForever(s);e.node3.runAction(n)},this),n=cc.sequence(t,cc.delayTime(.4),i,cc.delayTime(.4),o,cc.delayTime(.4),s);this.node.runAction(n)},setRound:function(e){this.shootNumLabel.string=e+""},showSpider:function(e){this.Spider.active=!0,this.Salive.active=!1,this.Spider.getComponent("BlockCover").init(e)},showSlaive:function(e){this.Spider.active=!1,this.Salive.active=!0,this.Salive.getComponent("Salive").init(e)},scaleNode:function(e,t,i){var o=cc.scaleTo(i,t).easing(cc.easeOut(4));e.runAction(o)},start:function(){}}),cc._RF.pop()},{}],ShootSkill:[function(e,t,i){"use strict";cc._RF.push(t,"67e11l4UrZKS5OgXLviwb3k","ShootSkill");e("EnumDefine").CellType;var o=e("Board"),s=(e("Utils"),e("ProcessBoardCell"));e("LocalStorage");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},spawnSkill:function(e,t,i,n,a,c,r){var l=n,h=s.instance.randomGetNormalCells(1);if(h.length>0){var u=h[0],d=u.getComponent("Cell"),p=d.column,v=d.row,f=o.instance.spawnOneCell(l,p,v);if(f){f.parent=e,f.position=t,f.group=i;var m=u.position,g=Math.abs(u.width-f.width),C=Math.abs(u.height-f.height);m.x+=g,m.y+=C;var S=cc.v2();m.sub(f.position,S);var b=0;b=c>=0?c:S.mag()/300*.1;var k=cc.moveTo(b,m),_=cc.callFunc(function(){var e=u.getComponent("Cell"),t=e.column,i=e.row,n=u.parent,a=cc.v2(u.x,u.y),c=u.group;f.parent=n,f.position=a,f.group=c,(e=f.getComponent("Cell")).init(l,1),s.instance.setCell(t,i,f),r&&r(),o.instance.deSpawnCell(u)},this),w=cc.sequence(k,_);f.runAction(w)}}else r&&r()}}),cc._RF.pop()},{Board:"Board",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",ProcessBoardCell:"ProcessBoardCell",Utils:"Utils"}],ShowFloatWord:[function(e,t,i){"use strict";cc._RF.push(t,"8b994jN6fBCPIXM+hcNY/40","ShowFloatWord");var o=cc.Class({extends:cc.Component,properties:{},onLoad:function(){o.instance=this},statics:{instance:null},start:function(){},showlines:function(e){var t=null;e>=10&&e<=14?t="good job":e>=15&&e<=19?t="Fantastic!":e>=20&&(t="Fruit Buster!"),null!==t&&this.loadLineWord(t)},loadLineWord:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(i,o){var s=o.getSpriteFrame(e),n=new cc.Node("");n.parent=t,n.y-=300,n.group="UI",n.addComponent("cc.Sprite").spriteFrame=s,n.scale=0;var a=cc.scaleTo(.3,1.2).easing(cc.easeOut(3)),c=cc.moveBy(.3,cc.v2(0,50)),r=cc.spawn(a,c),l=cc.moveBy(1,cc.v2(0,200)),h=cc.sequence(r,l,cc.removeSelf());n.runAction(h)})}});cc._RF.pop()},{}],ShowTip:[function(e,t,i){"use strict";cc._RF.push(t,"df08bGkXL1NmIFoqPp9ECWJ","ShowTip");e("Utils");var o=e("BaseUI");cc.Class({extends:o,properties:{midbk:cc.Node,titlelabel:cc.Label},onLoad:function(){},start:function(){},show:function(e){this.titlelabel.string=e;var t=function(){}.bind(this);this.scaleShow(this.midbk,t)},onBtn:function(){var e=function(){this.node.active=!1,this.midbk.scalel=1}.bind(this);this.scaleClose(this.midbk,e)}}),cc._RF.pop()},{BaseUI:"BaseUI",Utils:"Utils"}],SideCell:[function(e,t,i){"use strict";cc._RF.push(t,"8f6dbqpSntDvKqYs1pHvcDL","SideCell");e("JsonData"),e("EnumDefine").CellType,e("EnumDefine").CellBlockType,e("ProcessBoardCell"),e("Utils");var o=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.row=0,this.column=0,this.blockBuffer=null},init:function(e){var t=this;cc.loader.loadRes("prefab/cell/blockSide",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.parent=t.node,s.position=cc.v2(),t.blockBuffer=s.getComponent("BlockSide"),t.blockBuffer.init(e)})},IsBlock:function(){return this.sideTNum()>0||this.sideBNum()>0},sideLNum:function(){return this.blockBuffer?this.blockBuffer._data.sideLNum:0},sideRNum:function(){return this.blockBuffer?this.blockBuffer._data.sideRNum:0},sideTNum:function(){return this.blockBuffer?this.blockBuffer._data.sideTNum:0},sideBNum:function(){return this.blockBuffer?this.blockBuffer._data.sideBNum:0},hurt:function(e){this.blockBuffer&&(this.blockBuffer.hurt(e),this.blockBuffer.IsSideAllRemoved()&&(this.blockBuffer.node.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf())),this.blockBuffer=null))}});t.exports=o,cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",ProcessBoardCell:"ProcessBoardCell",Utils:"Utils"}],SidePropSkill:[function(e,t,i){"use strict";cc._RF.push(t,"72174qhFiVHM4py+ELbQI0i","SidePropSkill");e("EnumDefine").Direction,e("Utils").TITLE_WIDTH,e("Utils").TITLE_HEIGHT;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.board=this.node.getComponent("Board"),this.removeCells=this.node.getComponent("RemoveCells"),this.processBoardCell=this.node.getComponent("ProcessBoardCell"),this.propcnt=0},start:function(){},flashSkill:function(e){if(e){var t=this.processBoardCell.randomGetNormalCells(15),i=t.indexOf(e);i>=0&&t.splice(i,1),this.propcnt+=1,this.board.removeCell(e),this.run(t)}},run:function(e){var t=this,i=cc.callFunc(function(){t.propcnt-=1},this),o=cc.callFunc(function(){0==t.propcnt&&t.board.removeCellsDone()},this),s=[];this.RemoveCells.removeCells(e,s,o,i,.05),s.length>=2?this.node.runAction(cc.sequence(s)):(s.push(null),this.node.runAction(cc.sequence(s)))}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils"}],Singleton:[function(e,t,i){"use strict";cc._RF.push(t,"97bbbACL+hIUI2CEtuxI3ba","Singleton");var o=cc.Class({extends:cc.Component,properties:{monsterIcon:{default:null,type:cc.SpriteFrame}},statics:{instance:null},onLoad:function(){o.instance=this}});cc._RF.pop()},{}],Sort:[function(e,t,i){"use strict";cc._RF.push(t,"f6f34bptcxL/o8fpoGPaK9y","Sort"),t.exports={shuffle:function(e){for(var t=e.length,i=0;i<t-1;i++){var o=parseInt(Math.random()*(t-i)),s=e[o];e[o]=e[t-i-1],e[t-i-1]=s}return e}},cc._RF.pop()},{}],SpawnActor:[function(e,t,i){"use strict";cc._RF.push(t,"d6620CjXSJKOpLbednh75DK","SpawnActor");var o=e("RPGManager"),s=(e("Game"),e("Utils")),n=e("LocalStorage"),a=e("EnumDefine").CellType,c=e("EnumDefine").ActorType;cc.Class({extends:cc.Component,properties:{actor1NodePos:cc.Node,actor2NodePos:cc.Node,actor3NodePos:cc.Node,actor4NodePos:cc.Node,actor5NodePos:cc.Node},ctor:function(){this.actorCenterPos=cc.v2(),this.actorPoslist=[],this.roleDatas=[]},onLoad:function(){this.actor1NodePos.active=!1,this.actor2NodePos.active=!1,this.actor3NodePos.active=!1,this.actor4NodePos.active=!1,this.actor5NodePos.active=!1,this.actorPoslist.push(this.actor1NodePos.getPosition()),this.actorPoslist.push(this.actor2NodePos.getPosition()),this.actorPoslist.push(this.actor3NodePos.getPosition()),this.actorPoslist.push(this.actor4NodePos.getPosition()),this.actorPoslist.push(this.actor5NodePos.getPosition()),this.loadRoleDatas()},loadRoleDatas:function(){this.roleDatas=[];for(var e=[0,1,2,3,4],t=0;t<e.length;t++){var i=e[t],o=n.instance.getRoleData(i);o&&this.roleDatas.push(o)}},spawnActors:function(){0===this.roleDatas.length&&this.loadRoleDatas();for(var e=[2,0,3,1,4],t=this.roleDatas,i=0;i<t.length;i++){var o=t[i],s=e[o.roletype];this.spawnActor(o,s)}},spawnActor:function(e,t){var i="spine/actor/",n=s.getActorSpineName(e.roletype,e.level);i+=n;var a=this;cc.loader.loadRes(i,sp.SkeletonData,function(i,s){i&&cc.error(i);var c=new cc.Node;c.zIndex=t,c.setAnchorPoint(.5,0);c.scale=.7,c.parent=a.node;var r=c.addComponent("sp.Skeleton");r.skeletonData=s,r.setAnimation(0,"idle",!0),c.addComponent("Actor"),c.addComponent("ActorSkill"),c.addComponent("ActorShoot");var l=parseInt(e.roletype),h=a.actorPoslist[l];c.setPosition(h);var u=c.getComponent("Actor");u.skeletonName=n,u.setData(e),u.setAntiAliasTexParameters(),o.instance.addActor(c)})},getActorCenterPos:function(e){0===this.roleDatas.length&&this.loadRoleDatas();for(var t=0,i=0,o=this.roleDatas,s=0;s<o.length;s++){var n=o[s],a=parseInt(n.roletype),c=this.actorPoslist[a];t+=c.x,i+=c.y}t/=o.length,i/=o.length,e.x=t,e.y=i},getDamage:function(e,t){for(var i=10,o=0;o<t.length;o++){var s=t[o].getComponent("Actor");switch(s.roletype){case c.Actor1:if(e===a.Cell1)return i=s.getAttack(e);break;case c.Actor2:if(e===a.Cell2)return i=s.getAttack(e);break;case c.Actor3:if(e===a.Cell3)return i=s.getAttack(e);break;case c.Actor4:if(e===a.Cell4)return i=s.getAttack(e);break;case c.Actor5:if(e===a.Cell5)return i=s.getAttack(e)}}return i}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],SpawnCells:[function(e,t,i){"use strict";cc._RF.push(t,"141a0b625xHs78TURiV9AXz","SpawnCells");var o=e("Utils").NUMROWS,s=e("Utils").NUMCOLUMNS,n=e("EnumDefine").CellType,a=e("EnumDefine").SaliveKind,c=(e("JsonData"),e("PoolMng")),r=e("Utils");cc.Class({extends:cc.Component,properties:{skillCircleSprite:{default:null,type:cc.SpriteFrame},solidCellWeed:cc.Prefab,blockCover:cc.Prefab,salive:cc.Prefab,invasionSalive:cc.Prefab},onLoad:function(){this.ParseCellTitles=this.node.getComponent("ParseCellTitles"),this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell"),this.Board=this.node.getComponent("Board")},start:function(){},createBoardCell:function(e,t){this.createSkillCircles(),this.createCells(t)},createSkillCircles:function(){for(var e=0;e<o;e++)for(var t=0;t<s;t++){var i=new cc.Node(""),n=i.addComponent("cc.Sprite");n.spriteFrame=this.skillCircleSprite,i.parent=this.node,n.sizeMode=cc.Sprite.SizeMode.CUSTOM,n.type=cc.Sprite.Type.SLICED;var a=this.node.width/s,c=this.node.height/o;i.setContentSize(a+1,c+1);var r=a/2+t*a-this.node.width/2,l=-this.node.height/2+c/2+e*c;i.setPosition(r,l),i.zIndex=1,i.active=!1,this.ProcessBoardCell.setSkillCircle(t,e,i)}},createSideCell:function(e,t,i,n){var a=e.sideLNum,c=e.sideRNum,r=e.sideTNum,l=e.sideBNum,h=null;if(a>0||c>0||r>0||l>0){(h=new cc.Node("")).parent=this.node,h.zIndex=4,h.scale=n;var u=this.node.width/s,d=this.node.height/o;h.setContentSize(u,d);var p=u/2+t*u-this.node.width/2,v=-this.node.height/2+d/2+i*d;h.setPosition(p,v),h.zIndex=10;var f=h.addComponent("SideCell");f.row=i,f.column=t,f.init(e)}return h},createCells:function(e){if(null!==r.LevelEditorBoardData){var t=r.LevelEditorBoardData.listCell,i=r.LevelEditorBoardData.listSideCell,o=r.LevelEditorBoardData.listCover;this.parselevelFromCreatorEditor(t,i,o);var s=cc.callFunc(function(){e&&e()},this),n=cc.sequence(cc.delayTime(1),s);this.node.runAction(n)}},parselevelFromCreatorEditor:function(e,t,i){for(var n=0;n<o;n++)for(var a=0;a<s;a++)this.spawnCell(a,n,e,i);for(var c=0;c<o;c++)for(var r=0;r<s;r++){for(var l=null,h=0;h<t.length;h++){var u=t[h];if(u&&u.column===r&&u.row===c){l=u;break}}if(l){var d=this.createSideCell(l,r,c,.782);d&&this.ProcessBoardCell.setSideCell(r,c,d)}}},spawnCell:function(e,t,i,o){for(var s=this.spinCellType(),n=null,a=1,c=null,r=0;r<i.length;r++){var l=i[r];if(t===l.row&&e===l.column){s=l.ID,a=l.lv,c=l;break}}for(var h=0;h<o.length;h++){var u=o[h];if(u.row===t&&u.column===e){n=u;break}}var d=function(i,o){if(i){var a=i.getComponent("Cell");this.ProcessBoardCell.setCell(e,t,i),a.init(s,o),a.setDataCell(c),n&&a.addBlockCover(n),a.moveDown(.5)}}.bind(this);this.createOneCell(s,e,t,a,d)},spinCellType:function(){var e=r.LevelEditorLevelGoles.CellsSpinVal,t=[],i=[];for(var o in e){var s=e[o];t.push(s),i.push(o)}for(var n=[],a=0,c=0;c<t.length;c++)isNaN(t[c])?n.push(c):a+=t[c];if(n.length>0)for(var l=(100-a)/n.length,h=0;h<n.length;h++){t[n[h]]=Math.floor(l)}var u=i[r.computeSpin(t)];return parseInt(u)},getCellPos:function(e,t){var i=this.node.width/s,n=this.node.height/o,a=e*i-this.node.width/2,c=t*n-this.node.height/2;return a=Math.floor(a),c=Math.floor(c),cc.v2(a,c)},createOneCell:function(e,t,i,o,s){switch(e){case n.One_Horinal1:case n.One_Horinal2:case n.One_Horinal3:case n.One_Horinal4:case n.One_Horinal5:case n.SOne_Brush:case n.SOne_Bomb:case n.Two_Vertical1:case n.Two_Vertical2:case n.Two_Vertical3:case n.Two_Vertical4:case n.Two_Vertical5:case n.STwo_Brush:case n.STwo_Bomb:case n.Three_LeftPlant1:case n.Three_LeftPlant2:case n.Three_LeftPlant3:case n.Three_LeftPlant4:case n.Three_LeftPlant5:case n.SThree_Brush:case n.SThree_Bomb:case n.Four_RightPlant1:case n.Four_RightPlant2:case n.Four_RightPlant3:case n.Four_RightPlant4:case n.Four_RightPlant5:case n.SFour_Brush:case n.SFour_Bomb:case n.Five_Cross1:case n.Five_Cross2:case n.Five_Cross3:case n.Five_Cross4:case n.Five_Cross5:case n.SFive_Brush:case n.SFive_Bomb:case n.Cell1:case n.Cell2:case n.Cell3:case n.Cell4:case n.Cell5:case n.DropBottomBox:case n.Chest:case n.SpinKey:case n.ClearBombProp:var a=this.getCellPos(t,i),c=this.node,r=this.spawnOneCell(e,t,i,c,a);r&&(r.parent=this.node,r.position=a,s(r,o));break;case n.RXCellType:var l=this.spinCellType(),h=this.getCellPos(t,i),u=this.node,d=this.spawnOneCell(l,t,i,u,h);d&&(d.parent=this.node,d.position=h,s(d,o));break;case n.Stakes:var p="";switch(o){case 1:p="wood1";break;case 2:p="wood2";break;case 3:p="wood3"}var v=function(e){var n=this.getCellPos(t,i);e&&(e.parent=this.node,e.position=n,s(e,o))}.bind(this);this.spawnXSprite(e,p,t,i,v);break;case n.Weeds:var f="";switch(o){case 1:f="weed1";break;case 2:case 3:f="weed2"}var m=function(e){var n=this.getCellPos(t,i);e&&(e.parent=this.node,e.position=n,s(e,o))}.bind(this);this.spawnXSprite(e,f,t,i,m);break;case n.Fence:var g="";switch(o){case 1:g="fence1";break;case 2:g="fence2";break;case 3:g="fence3"}var C=function(e){var n=this.getCellPos(t,i);e&&(e.parent=this.node,e.position=n,s(e,o))}.bind(this);this.spawnXSprite(e,g,t,i,C);break;case n.BlockDiamond:var S=function(e){var n=this.getCellPos(t,i);e&&(e.parent=this.node,e.position=n,s(e,o))}.bind(this);this.spawnXSprite(e,"blockdiamond",t,i,S);break;case n.KeyUp:var b=function(e){var n=this.getCellPos(t,i);e&&(e.parent=this.node,e.position=n,s(e,o))}.bind(this);this.spawnXSprite(e,"keyup",t,i,b);break;case n.KeyDown:var k=function(e){var n=this.getCellPos(t,i);e&&(e.parent=this.node,e.position=n,s(e,o))}.bind(this);this.spawnXSprite(e,"keydown",t,i,k);break;case n.KeyLeft:var _=function(e){var n=this.getCellPos(t,i);e&&(e.parent=this.node,e.position=n,s(e,o))}.bind(this);this.spawnXSprite(e,"keyleft",t,i,_);break;case n.KeyRight:var w=function(e){var n=this.getCellPos(t,i);e&&(e.parent=this.node,e.position=n,s(e,o))}.bind(this);this.spawnXSprite(e,"keyright",t,i,w);break;case n.SolidCell:var B=this.createPrefab(e,t,i,this.solidCellWeed),D=this.getCellPos(t,i),y=this.node;B.parent=y,B.position=D,s(B,o)}},spawnXSprite:function(e,t,i,o,s){var n=this.spawnOneCell(e,i,o);if(n){var a=n.getChildByName("cellNode").getComponent(cc.Sprite);cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,i){var o=i.getSpriteFrame(t);a.spriteFrame=o,s&&s(n)})}else s&&s(null)},spawnStakes:function(e,t,i,o){var s="";switch(e){case 1:s="wood1";break;case 2:s="wood2";break;case 3:s="wood3"}var a=n.Stakes,c=this.spawnOneCell(a,t,i);if(c){var r=c.getChildByName("cellNode").getComponent(cc.Sprite);cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame(s);r.spriteFrame=i,o&&o(c)})}else o&&o()},spawnSpriteCell:function(e,t,i,o,s){switch(e){case n.Stakes:this.spawnStakes(o,t,i,s)}},randomSpawnCell:function(e,t){var i=this.spinCellType(),o=c.instance.requestCell(i);if(o){o.getComponent("Cell")||o.addComponent("Cell"),o.parent=this.node,o.anchorX=.5,o.anchorY=0,o.scale=.782;var s=o.getComponent("Cell"),n=o.getChildByName("cellNode");s.cellNode=n,s.row=t,s.column=e,s.celltype=i,s.cellscale=o.scale,s.idle(!1);s.init(i,1),this.ProcessBoardCell.setCell(e,t,o)}return o},spawnOneCell:function(e,t,i){var o=c.instance.requestCell(e);if(o){o.getComponent("Cell")||o.addComponent("Cell"),o.anchorX=.5,o.anchorY=0,o.scale=.782;var s=o.getComponent("Cell"),n=o.getChildByName("cellNode");s.cellNode=n,s.row=i,s.column=t,s.celltype=e,s.idle(!1),s.setAntiAliasTexParameters(),s.cellscale=o.scale,o.group="board"}return o},createSpriteCell:function(e,t,i,n){var a=new cc.Node(""),c=this.createSprite(n);a.addChild(c);var r=a.addComponent("Cell");r.row=t,r.column=e,r.celltype=i,r.cellNode=c,a.width=c.width,a.height=c.height,a.parent=this.node,r.cellscale=a.scale;var l=this.getCellPos(e,t),h=this.node.width/s,u=this.node.height/o;return l.x+=h/2,l.y+=u/2,a.position=l,a},createSprite:function(e){var t=new cc.Node(""),i=t.addComponent(cc.Sprite);i.spriteFrame=e,i.sizeMode=cc.Sprite.SizeMode.CUSTOM,i.type=cc.Sprite.Type.SLICED;var n=this.node.width/s,a=this.node.height/o;return t.setContentSize(n,a),t},createPrefab:function(e,t,i,o){var s=cc.instantiate(o);if(s){s.getComponent("Cell")||s.addComponent("Cell"),s.anchorX=.5,s.anchorY=0,s.scale=.782,s.zIndex=4;var n=s.getComponent("Cell"),a=s.getChildByName("cellNode");n.cellNode=a,n.row=i,n.column=t,n.celltype=e,n.cellscale=s.scale}return s},createBlockCover:function(){var e=cc.instantiate(this.blockCover);return e&&(e.anchorX=.5,e.anchorY=0,e.zIndex=4),e},createSalive:function(e,t,i,o,s){var n=this.salive;switch(t){case a.Normal:case a.Move:n=this.salive;break;case a.Invasion:n=this.invasionSalive}var c=cc.instantiate(n);if(c){c.getComponent("Cell")||c.addComponent("Cell"),c.anchorX=.5,c.anchorY=0,c.scale=.782,c.zIndex=4;var r=c.getComponent("Cell"),l=c.getChildByName("cellNode");r.cellNode=l,r.row=s,r.column=o,r.celltype=e,r.cellscale=c.scale;var h=c.getComponent("Salive");h&&h.init(i)}return c},clearAllCells:function(e){var t=this,i=(this.node.width,this.node.height);this.ProcessBoardCell.getAllCells([]);for(var n=[],a=function(e){var o=cc.callFunc(function(){for(var o=0,n=function(s){var n=t.ProcessBoardCell.getCell(s,e),a=cc.moveBy(.5,cc.v2(0,-i)),c=cc.callFunc(function(){t.Board.removeCell(n)},t);n.runAction(cc.sequence(cc.delayTime(.02*o),a,c)),o++},a=0;a<s;a++)n(a)},t);n.push(o),n.push(cc.delayTime(.2))},c=0;c<o;c++)a(c);n.push(cc.delayTime(1));var r=cc.callFunc(function(){t.ProcessBoardCell.clearAllCells(),e&&e()},this);n.push(r),this.node.runAction(cc.sequence(n))},clearAllSideCells:function(){var e=[];this.ProcessBoardCell.getAllSideCells(e);for(var t=0;t<e.length;t++){e[t].destory()}this.ProcessBoardCell.clearAllSideCells()}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",PoolMng:"PoolMng",Utils:"Utils"}],SpawnChest:[function(e,t,i){"use strict";cc._RF.push(t,"e9c12YJH6dMQLckAuPdKK7i","SpawnChest"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},spawnOneChest:function(e,t){}}),cc._RF.pop()},{}],SpawnMonster:[function(e,t,i){"use strict";cc._RF.push(t,"afcdawfyI9Ck6iVqq1Ij18m","SpawnMonster");var o=e("RPGManager");e("Utils");cc.Class({extends:cc.Component,properties:{monster1NodePos:cc.Node,monster2NodePos:cc.Node,monster3NodePos:cc.Node,monster4NodePos:cc.Node},onLoad:function(){this.monster1NodePos.active=!1,this.monster2NodePos.active=!1,this.monster3NodePos.active=!1,this.monster4NodePos.active=!1;var e=cc.v2(0,0);this.node.getComponent("SpawnActor").getActorCenterPos(e);var t=this.monster1NodePos.position,i=Math.abs(t.x-e.x);this._disx=i;var o=[cc.v2(97,322),cc.v2(162,298),cc.v2(214,274),cc.v2(275,256),cc.v2(332,252)];this.adJustPos(o),this.DValPoslist=o,this.scalelist=[1,.9,.8,.7,.6,.5,.5,.5],this.rowscalelist=[1,.4,.4,.4,.4,.4,.4,.4],this.monsterRows={}},adJustPos:function(e){for(var t=cc.v2(e[0].x,e[0].y),i=0;i<e.length;i++){var o=e[i];o.x-=t.x,o.y-=t.y}},start:function(){},spawnOneWave:function(e,t,i){i&&void 0!==i||(i=0);var o=cc.v2();for(var s in o.x=t.x,o.y=t.y,o.x+=i,this.monsterRows)delete this.monsterRows[s];this.monsterRows={};for(var n=[],a=0;a<e.length;a+=3){for(var c=[],r=0;r<3;r++){var l=a+r;if(l<e.length){var h=e[l];c.push(h)}}c.length>0&&n.push(c)}for(var u=0;u<n.length;u++)for(var d=n[u],p=this.rowscalelist[u],v=0;v<d.length;v++){var f=d[v],m=this.DValPoslist[v],g=m.x+o.x+this._disx+230*u,C=m.y+o.y,S=this.scalelist[v],b=cc.v2(g,C),k=v;this.spawnMonster(f,b,k,u,S,p)}},spawnMonster:function(e,t,i,o,s,n){var a=this,c="prefab/monster/"+e.JsonData.AnimeRes;cc.loader.loadRes(c,function(c,r){var l=cc.instantiate(r);l.setAnchorPoint(.5,0),l.scale=s*n,l.addComponent("Monster"),l.addComponent("MonsterSkill"),l.addComponent("MonsterShield"),l.parent=a.node;var h=l.getComponent("Monster");l.group="default",h.rowScale=n,h.colScale=s,h.init(e),h.idle(),l.setPosition(t),l.zIndex=i,a.addMonster(l,i,o)})},addMonster:function(e,t,i){var o=this.getMonsterlist(i);if(!o){var s={monsterlist:[],poslist:[]};this.monsterRows[i]=s,o=this.getMonsterlist(i)}o.splice(t,0,e),this.getMonsterPoslist(i).splice(t,0,e.position)},getMonsterlist:function(e){var t=this.monsterRows[e];return t?t.monsterlist:null},getMonsterPoslist:function(e){var t=this.monsterRows[e];return t?t.poslist:null},oneWaveDone:function(){var e=!0;for(var t in this.monsterRows){if(this.getMonsterlist(t).length>0){e=!1;break}}return e},getMonster:function(){for(var e in this.monsterRows){var t=this.getMonsterlist(e);if(t.length>0)return t[0]}return null},removeMonster:function(e,t){var i=!1,s=null,n=0;for(var a in this.monsterRows){for(var c=this.getMonsterlist(a),r=0;r<c.length;r++)if(c[r]===e){c.splice(r,1),s=c,n=a;break}0===c.length&&(delete this.monsterRows[a],i=!0)}if(this.oneWaveDone())o.instance.Game.updateWave(1);else if(i){var l=function(){var e=o.instance.actorlist,t=parseInt(n)+1,i=this.getMonsterlist(t);this.killOneRowMonster(e,i)}.bind(this),h=.1;t&&(h=h<t.duration?t.duration:h);var u=cc.callFunc(function(){l()},this);this.node.runAction(cc.sequence(cc.delayTime(h),u))}else{var d=this.getMonsterPoslist(n);this.killOneMonster(s,d,this.scalelist)}},killOneRowMonster:function(e,t){for(var i=0;i<e.length;i++){var o=e[i],s=cc.moveBy(.5,cc.v2(230,0)).easing(cc.easeOut(1.5));o.runAction(s)}if(t){var n=cc.callFunc(function(){for(var e=0;e<t.length;e++){var i=t[e],o=i.getComponent("Monster").colScale,s=cc.scaleTo(.5,o).easing(cc.easeOut(3));i.runAction(cc.sequence(s,null))}},this),a=cc.sequence(cc.delayTime(.4),n);this.node.runAction(a)}},killOneMonster:function(e,t,i){for(var o=this,s=0,n=[],a=function(a){var c=e[a],r=t[s],l=i[a],h=cc.callFunc(function(){var e=cc.moveTo(.4,r).easing(cc.easeOut(3)),t=cc.scaleTo(.4,l).easing(cc.easeOut(3)),i=cc.spawn(e,t);c.runAction(cc.sequence(i,null))},o);n.push(h),n.push(cc.delayTime(.1))},c=0;c<e.length;c++,s++)a(c);n.length>0&&this.node.runAction(cc.sequence(n))},monsterTripSkill:function(){var e=this.getMonster();if(e){var t=e.getComponent("MonsterSkill");t&&t.triggerSkillX()}},drawlineHurtMonster:function(e){if(0===e.length)return 0;var t=this.getMonster();if(t){for(var i=t.getComponent("Monster"),s=0,n=0;n<e.length;n++){var a=e[n].getComponent("Cell");if(a.normalCell()||a.propNormalCell()){var c=a.celltype;if(a.propNormalCell()&&(c=a.cellGroup),i.canAttack(c))s+=o.instance.getDamage(c)}}s>0&&i.drawlineHurt(s)}}}),cc._RF.pop()},{RPGManager:"RPGManager",Utils:"Utils"}],Spider:[function(e,t,i){"use strict";cc._RF.push(t,"cb166L0O5NPzaWpyCFCu4rb","Spider"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],SpinCD:[function(e,t,i){"use strict";cc._RF.push(t,"fa1c2SUUJVBurWc75lu6qQD","SpinCD");var o=e("EnumDefine"),s=e("Utils"),n=o.SpinType,a=s.ProduceType,c=(cc.v2(0,-300),cc.v2(0,50)),r=e("XPoolMng"),l=o.CardPoolKind;cc.Class({extends:cc.Component,properties:{audioSpin:{type:cc.AudioSource,default:null}},ctor:function(){this._callback=null,this.isSpin=!1},onLoad:function(){this.cardlist=[],this.SpinCards=this.node.getComponent("SpinCards")},start:function(){},setUIBase:function(e){this.uibase=e},showCards:function(e,t,i,o,s,n,a){if(t<=0)a&&a();else{var c=this;cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(h,u){var d=r.instance.getCard(l.BornCard);d.group=n,d.scale=2.5,d.parent=o,d.position=s,d.zIndex=10;var p=d.getComponent(cc.ParticleSystem);p&&p.resetSystem(),p.spriteFrame=null,cc.loader.loadRes("sprite/point",cc.SpriteFrame,function(e,t){p.spriteFrame=t});var v=cc.callFunc(function(){r.instance.putCard(d,l.BornCard)},c),f=cc.callFunc(function(){c.spawnCards(e,t,i,o,s,n,a)},c);c.node.runAction(cc.sequence(cc.delayTime(.3),f,cc.delayTime(2),v))})}},spawnCards:function(e,t,i,o,s,a,h){var u=r.instance.getCard(l.CDCard);u.parent=o,u.group=a,u.position=s,u.scale=0;u.zIndex=10,this.cardlist.push(u);var d=function(){var i=this,o=cc.scaleTo(.2,1.2).easing(cc.easeOut(3)),s=cc.scaleTo(.08,1.44).easing(cc.easeBounceInOut()),r=cc.scaleTo(.08,1.2).easing(cc.easeBounceInOut()),l=cc.sequence(o,s,r,null),d=cc.moveTo(.5,cc.v2(c.x,c.y)).easing(cc.easeOut(3)),p=cc.spawn(l,d),v=u.getChildByName("reward"),f=v.parent.convertToWorldSpaceAR(v.position);f.y+=100;var m=cc.callFunc(function(){switch(e){case n.Coin:i.rewardCoin(t,f,a);break;case n.Diamond:i.rewardDiamond(t,f,a)}},this),g=cc.sequence(p,m);u.runAction(g);var C=cc.callFunc(function(){i.spinDone(h)},this);this.node.runAction(cc.sequence(cc.delayTime(.8),C)),this.audioSpin.play()}.bind(this);u.getComponent("CDCard").show(e,t,i,d)},spinDone:function(e){var t=this.cardlist,i=l.CDCard;this.SpinCards.clearCardlist(t,i,.2,.5,e)},rewardCoin:function(e,t,i){var o=this.uibase;if(o){var n=cc.director.getScene()._children[0],c=t=n.convertToNodeSpaceAR(t),r=o.coinlabel,l=r.node.parent.convertToWorldSpaceAR(r.node.position);l=n.convertToNodeSpaceAR(l),s.ProduceReWard(this.uibase,e,a.ButtonCoin,c,l,n,null,i)}},rewardDiamond:function(e,t,i){var o=this.uibase;if(o){var n=cc.director.getScene()._children[0],c=t=n.convertToNodeSpaceAR(t),r=o.diamondlabel,l=r.node.parent.convertToWorldSpaceAR(r.node.position);l=n.convertToNodeSpaceAR(l),s.ProduceReWard(o,e,a.Diamond,c,l,n,null,i)}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Utils:"Utils",XPoolMng:"XPoolMng"}],SpinCards:[function(e,t,i){"use strict";cc._RF.push(t,"90075hnZv1KmLtTndIac7J1","SpinCards");var o=e("EnumDefine").SpinType,s=e("XPoolMng"),n=e("EnumDefine").CardPoolKind,a=cc.v2(0,-300);cc.v2(0,100);cc.Class({extends:cc.Component,properties:{ColorBk:cc.Node},onLoad:function(){this.boxgroup="default",this.spinPet=this.node.getComponent("SpinPet"),this.spinCD=this.node.getComponent("SpinCD"),this.callback=null,this.isSpin=!1,this.StayTime=2},start:function(){},setUIBase:function(e){this.uibase=e},showDone:function(){if(this.ColorBk.active&&!this.isSpin&&(this.isSpin=!1,this.callback&&(this.callback(),this.callback=null),this.ColorBk.active=!1,this.arrowDust)){var e=this.arrowDust;s.instance.putCard(e,n.FireSmoke)}},spinDone:function(){var e=this,t=cc.callFunc(function(){e.showDone()},this),i=cc.callFunc(function(){e.isSpin=!1},this);this.spinGuide&&this.spinGuide(),this.node.runAction(cc.sequence(cc.delayTime(this.StayTime),i,t))},show:function(e,t,i,o,s,n){this.isSpin=!0,this.shootArrowCallback=n,this.callback=s,this.spinCD.setUIBase(this.uibase);var a=function(){this.spinDone()}.bind(this);this.shootArrows(e,t,i,o,a)},shootArrows:function(e,t,i,o,s){var n=this;this.boxgroup=o;var c=cc.director.getScene()._children[0];t=c.convertToNodeSpaceAR(t);this.shootArrow(.5,cc.v2(t.x-40,t.y)),this.shootArrow(.5,cc.v2(t.x,t.y)),this.shootArrow(.5,cc.v2(t.x+40,t.y));var r=cc.callFunc(function(){var e=c,t=cc.v2(a.x,a.y+150),r=function(){var n=this,a=cc.callFunc(function(){n.showCards(i,e,cc.v2(t.x,t.y+200),o,s)},this);this.node.runAction(cc.sequence(cc.delayTime(1),a))}.bind(n);n.shootArrowCallback&&n.shootArrowCallback(),n.ColorBk.active=!0,n.spawnArrowsDust(e,a,r)},this);this.node.runAction(cc.sequence(cc.delayTime(.5),r))},shootArrow:function(e,t){var i=this,o=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/particle/meteor",function(s,n){s&&cc.error(s);var c=cc.instantiate(n);c.active=!0,c.group=i.boxgroup,c.scale=1.2;var r=o;c.parent=r,c.zIndex=10;var l=t;c.position=l;var h=a,u=cc.callFunc(function(){c.destroy()},i),d=(l.x+h.x)/2,p=(l.y+h.y)/2+150,v=[l,cc.v2(d,p),h],f=cc.cardinalSplineToXX(e,v,0),m=cc.sequence(f,cc.fadeOut(.1),u);c.runAction(m)})},spawnArrowsDust:function(e,t,i){var o=s.instance.getCard(n.FireSmoke);o.group=this.boxgroup,o.active=!0,o.scale=1.5,o.parent=e,o.position=t,o.zIndex=10,this.arrowDust=o;var a=o.getComponent(cc.ParticleSystem);a&&a.resetSystem(),i&&i()},showCards:function(e,t,i,s,n){this.boxgroup=s;var a=null;e.pet&&(a=e.pet);var c=0;e.coin&&(c=parseInt(e.coin));var r=0;e.diamond&&(r=parseInt(e.diamond));var l=parseInt(e.spinDouble);a&&a.length>0?this.StayTime=2:this.StayTime=.5;var h=function(){var e=function(){a&&a.length>0?this.spinPetCards(a,t,i,s,n):n&&n()}.bind(this);this.spinCD.showCards(o.Diamond,r,l,t,i,s,e)}.bind(this);this.spinCD.showCards(o.Coin,c,l,t,i,s,h)},spinPetCards:function(e,t,i,o,s){for(var n=this,a=[],c=function(s){var c=e[s],r=c.ID,l=c.num,h=cc.callFunc(function(){n.spinPet.showCards(r,l,t,i,o,null)},n);a.push(h),s<e.length-1?a.push(cc.delayTime(.3+.2*(l-1)+1+1)):a.push(cc.delayTime(.5))},r=0;r<e.length;r++)c(r);var l=cc.callFunc(function(){s&&s()},this);a.push(l),a.push(null),this.node.runAction(cc.sequence(a))},clearCardlist:function(e,t,i,o,n){for(var a=this,c=function(o){var n=e[o],c=cc.scaleTo(i,0).easing(cc.easeOut(5)),r=cc.callFunc(function(){s.instance.putCard(n,t)},a);n.runAction(cc.sequence(c,r))},r=0;r<e.length;r++)c(r);e.length=0;var l=cc.callFunc(function(){n&&n()},this);this.node.runAction(cc.sequence(cc.delayTime(o),l))}}),cc._RF.pop()},{EnumDefine:"EnumDefine",XPoolMng:"XPoolMng"}],SpinChest:[function(e,t,i){"use strict";cc._RF.push(t,"7776eLUnDRCb4Ekhw0+YKub","SpinChest");var o=e("EnumDefine"),s=(e("EnumDefine").ActorType,e("Utils")),n=s.ProduceType,a=o.PetType,c=e("LocalStorage"),r=(o.SpinType,e("Words")),l=e("XPoolMng"),h=e("EnumDefine").CardPoolKind;cc.Class({extends:cc.Component,properties:{cameraBox:cc.Node,keyTemplate:cc.Node,UIBaseNode:cc.Node,paynode:cc.Node,freenode:cc.Node,bk1:cc.Node,freelabel:cc.Label,liveKey:cc.Node,mask:cc.Node,box:cc.Node,boxTemplate:cc.Node,rewardCoinSprite:cc.SpriteFrame,rewardDiamondSprite:cc.SpriteFrame,BlevelPetSprite:cc.SpriteFrame,AlevelPetSprite:cc.SpriteFrame,keySprite:cc.SpriteFrame,doubleSpinX:cc.SpriteFrame,GuideNode1:cc.Node,TouchGuideNode:cc.Node,GuideNode2:cc.Node,CloseTouch:cc.Node,DadNode:cc.Node,SpinBk:cc.Node},ctor:function(){this.closeFunc=null,this.groupUI="Bullet"},onLoad:function(){this.registerTouch(),this.camera=this.cameraBox.getComponent(cc.Camera),this.initZoomRatio=this.camera.zoomRatio,this.ratioZoomIn=this.camera.zoomRatio+.05,this.ratioZoomOut=this.camera.zoomRatio,this._zoomIn=!1,this._zoomOut=!1,this._zoomCallback=null,this._zoomStep=.1,this._move=!1,this._needSpinDiamond=50,this.BoxChestCount=3,this.rewardPetID=a.UnKnown,this.UIBaseNode&&(this.uibase=this.UIBaseNode.getComponent("UIBase"));var e=c.instance.getFreeSpinVal();this.show(e),this.mask.active=!1,this.CloseTouch.active=!1,this.openChestCnt=0,this.openedlist={},this.GuideNode1.active=!1,this.GuideNode2.active=!1,this.TouchGuideNode.active=!1,this.GuideNode2.zIndex=20,this.blockSpin=!1,this.SpinCards=this.node.getComponent("SpinCards"),this.processSpinData=this.node.getComponent("ProcessSpinData"),this.SpinCards.setUIBase(this.uibase),this.SpinBk.active=!1,this.spinPetDatalist=[],this.init()},showSpinDouble:function(){},onDisable:function(){c.instance.setFreeSpinVal(this.freenum)},start:function(){this.zoomIn()},replaceUIBase:function(e){this.UIBaseNode&&this.UIBaseNode.removeFromParent(),this.UIBaseNode=e,this.uibase=this.UIBaseNode.getComponent("UIBase"),this.UIBaseNode.zIndex=10,this.SpinCards.setUIBase(this.uibase)},scalePayNode:function(){this.paynode.stopAllActions(),this.paynode.scale=1;var e=cc.scaleTo(.25,1.1,1.1).easing(cc.easeOut(3)),t=cc.scaleTo(.25,1,1).easing(cc.easeOut(3)),i=cc.sequence(e,t);this.paynode.runAction(i)},freeKeyAnimation:function(){this.liveKey.scale=0;var e=cc.scaleTo(.4,1.1,1.1).easing(cc.easeOut(3)),t=cc.scaleTo(.4,1,1).easing(cc.easeOut(3)),i=cc.sequence(e,t);this.liveKey.runAction(i)},show:function(e){if(this.freenum=e,this.freenum>0)this.paynode.active=!1,this.freenode.active=!0,this.freelabel.string=this.freenum+"";else{this.paynode.active=!0;var t=cc.scaleTo(.25,1.1,1.1).easing(cc.easeOut(3)),i=cc.scaleTo(.25,1,1).easing(cc.easeOut(3)),o=cc.sequence(t,i),s=cc.repeatForever(o);this.bk1.scale=1,this.bk1.stopAllActions(),this.bk1.runAction(s),this.freenode.active=!1}},updateFreeNum:function(e){this.freenum+=e,this.show(this.freenum)},onBtnDiamondClicked:function(e){if(this.uibase.getDiamondNum()>this._needSpinDiamond)return this.uibase.updateDiamond(-this._needSpinDiamond),this.updateFreeNum(1),void this.freeKeyAnimation()},init:function(){var e=this;cc.loader.loadRes("json/SpinChest",function(t,i){for(var o=i.json,s=[],n=[],a=0;a<o.length;a++){var c=o[a],r=parseInt(c.odd);s.push(r),n.push(c)}e.oddlist=s,e.datalist=n}),this.showGuide1()},getSpinData:function(){var e,t,i=this.oddlist,o=this.computeSpin(i),n=0,c=0,r=this.datalist[o];e=this.randomSpinNum(r.coinNum),t=this.randomSpinNum(r.diamondNum),n=this.randomSpinNum(r.petNum),c=this.randomSpinNum(r.petDoubleNum),s.UseTest&&(n=3,c=2);var l=this.processSpinData.getSpinChestData(e,t,n,c,0);if(!this.guideDone){var h=[];n=2;var u={};u.ID=a.Pet1,u.num=n,h.push(u);var d={};d.ID=a.Pet2,d.num=n,h.push(d),l.pet=h,r.coin=500,r.diamond=10}var p=null;l.pet&&(p=l.pet);for(var v=0;v<p.length;v++){var f=p[v],m=f.ID,g=f.num,C={};C.ID=m,C.cardNum=g,this.spinPetDatalist.push(C)}return l},randomSpinNum:function(e){var t=0,i=e.split(",");if(1==i.length)t=parseInt(i[0]);else if(i.length>=2){var o=parseInt(i[0]),n=parseInt(i[1]);t=s.randomRangeInt(o,n)}return t},computeSpin:function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e[i];return s.computeSpin(t)},showGuide1:function(){var e=c.instance.getSpinChestGuideDone();if(this.guideDone=e,!e){this.GuideNode1.active=!0;var t=this.GuideNode1.getComponent("JustWordGuide"),i=function(){this.showTouchGuide()}.bind(this),o=r.SpinChest_GetPet1;t.show(o,i)}this.guideDone=e},showTouchGuide:function(){var e=function(){var e=this.box.children[0];this.rewardPetID=a.Pet1,this.touchSpin(e,4),this.GuideNode1.active=!1}.bind(this),t=this.TouchGuideNode;t.active=!0,t.getComponent("TouchGuide").show("",e)},showGuide2:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.guideDone)e&&e();else{var t=this.GuideNode2;t.active=!0,t.zIndex=10;var i=t.getComponent("JustWordGuide"),o=r.SpinChest_GetPet2;i.show(o,e),this.guideDone=!0,c.instance.setSpinChestGuideDone(!0)}},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t)},e),e.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.touchMove(t)},e),e.node.on(cc.Node.EventType.TOUCH_END,function(t){e.touchEnd(t)},e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.touchEnd(t)},e)},touchBegin:function(e){},touchMove:function(e){},touchEnd:function(e){if(this.guideDone&&!this.blockSpin)for(var t=e.getTouches()[0].getLocation(),i=this.box.children,o=0;o<i.length;o++){var s=i[o],n=s.parent.convertToNodeSpaceAR(t);if(s.getBoundingBox().contains(n))return this.freenum<=0?void this.scalePayNode():(this.rewardPetID=a.UnKnown,this.CloseTouch.active=!0,void this.touchSpin(s))}},onBtnTouchClick:function(e){this.SpinBk.active&&this.SpinCards.showDone()},touchSpin:function(e){var t=this;if(this.openedlist[e.name])this.CloseTouch.active=!1;else{this.openedlist[e.name]=!0;var i=cc.callFunc(function(){var i=t.getSpinData();t.openChest(e,i)},this),o=(cc.callFunc(function(){var t=e.getChildByName("BigLock");if(t){var o=cc.moveBy(.5,cc.v2(0,-50));t.runAction(cc.sequence(o,i,cc.removeSelf()))}}),cc.instantiate(this.keyTemplate));o.zIndex=100,o.scale=1,o.active=!0,o.parent=this.node,o.position=this.freenode.position;var s=cc.moveTo(.5,cc.v2(e.x-e.width/2,e.y+.2*e.height)).easing(cc.easeOut(3));o.runAction(cc.sequence(s,i,cc.removeSelf())),this.updateFreeNum(-1)}},openChest:function(e,t){var i=e.getComponent(cc.Animation);if(i){i.play("openChestX");var o=function(){this.playReWardAudio(),this.showOpenChestEffect(e,cc.v2(0,0)),this.openReward(e,t)}.bind(this);i.on("finished",this.shitcallback,this),this.openchestAnimationFinishedCallback=o;var s=cc.callFunc(function(){},this);e.runAction(cc.sequence(cc.delayTime(1),s))}},shitcallback:function(){this.openchestAnimationFinishedCallback&&this.openchestAnimationFinishedCallback()},showOpenChestEffect:function(e,t){var i=l.instance.getCard(h.OpenChest);if(i){i.parent=e,i.position=t,i.group=this.groupUI,i.scale=3;var o=i.getComponent(cc.ParticleSystem);o&&o.resetSystem();var s=cc.callFunc(function(){l.instance.putCard(i,h.OpenChest)},this);i.runAction(cc.sequence(cc.delayTime(2),s))}},playReWardAudio:function(){this.audioReWard&&this.audioReWard.play()},zoomIn:function(e){if(this.camera){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=.001)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomIn=!0}else e&&e()},zoomOut:function(e){if(this.camera){if(this.resetZoom(),Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=.001)return this.camera.zoomRatio=this.ratioZoomOut,void(e&&e());this._zoomCallback=e,this._zoomOut=!0}else e&&e()},zoomUpdate:function(e){if(this._zoomIn&&this.camera){if(Math.abs(this.camera.zoomRatio-this.ratioZoomIn)<=.001)return this.camera.zoomRatio=this.ratioZoomIn,this._zoomIn=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomIn,this._zoomStep)}if(this._zoomOut&&this.camera){if(Math.abs(this.camera.zoomRatio-this.ratioZoomOut)<=.001)return this.camera.zoomRatio=this.ratioZoomOut,this._zoomOut=!1,void(this._zoomCallback&&(this._zoomCallback(),this._zoomCallback=null));this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.ratioZoomOut,this._zoomStep)}},resetZoom:function(){this._zoomIn=!1,this._zoomOut=!1},update:function(e){this.zoomUpdate(e)},loadSpinData:function(e){cc.loader.loadRes("json/Spin",function(t,i){var o=i.json;e&&e(o[0])})},openReward:function(e,t){cc.director.getScene()._children[0];var i=e.parent.convertToWorldSpaceAR(e.position);i.y+=.5*e.height;var o=function(){this.CloseTouch.active=!1,this.openChestCnt+=1,this.openChestCnt>=this.BoxChestCount&&this.spawnNewBox(),this.showGuide2()}.bind(this),s=this.groupUI;this.SpinCards.show(e,i,t,s,o)},keyReward:function(e,t,i){var o=e.parent,a=cc.v2(e.x,e.y),c=this.freenode.getChildByName("key"),r=c.scale,l=c.parent.convertToWorldSpaceAR(c.position);l=o.convertToNodeSpaceAR(l);var h=function(){c.stopAllActions(),c.scale=r;var e=cc.scaleTo(.25,1.3*r).easing(cc.easeOut(3)),i=cc.scaleTo(.25,r).easing(cc.easeOut(3)),o=cc.sequence(e,i);c.runAction(o),this.updateFreeNum(t)}.bind(this),u=s.produceRandomNodeLineMove(n.SpinKey,1,a,l,o,h,null,this.groupUI),d=cc.callFunc(function(){i&&i()},this);this.node.runAction(cc.sequence(cc.delayTime(u),d)),e.removeFromParent()},spawnNewBox:function(){var e=this;this.CloseTouch.active=!0,this.mask.active=!0;var t=cc.v2(this.box.x,this.box.y),i=cc.moveBy(.5,cc.v2(650,0)),o=cc.callFunc(function(){var i=cc.instantiate(e.boxTemplate);i.active=!0,i.parent=e.box.parent,i.position=cc.v2(-650,0);var o=cc.moveTo(.5,t),s=cc.callFunc(function(){e.box.destroy(),e.box=i,e.mask.active=!1,e.CloseTouch.active=!1,e.openChestCnt=0,e.openedlist={}},e);i.runAction(cc.sequence(o,s))},this);this.box.runAction(cc.sequence(i,o))},onBtnClose:function(e){if(this.closeFunc){var t=this.spinPetDatalist;this.closeFunc(t)}this.DadNode.removeFromParent()}}),cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",Utils:"Utils",Words:"Words",XPoolMng:"XPoolMng"}],SpinPetExtraction:[function(e,t,i){"use strict";cc._RF.push(t,"a87092rCRlLEaduJXHEludW","SpinPetExtraction");var o=e("JsonData"),s=e("LocalStorage"),n=e("EnumDefine").ActorType,a=e("EnumDefine").PetType,c=e("EnumDefine").PetAttribute,r=e("Utils"),l=e("BaseUI"),h=e("AchieveManager");cc.Class({extends:l,properties:{glare:cc.Node,extractionBk:cc.Node,midBk:cc.Node,Mask:cc.Node,audioSpin:{type:cc.AudioSource,default:null}},ctor:function(){this._callback=null,this.spinLevel=0,this.spinID=-1},onLoad:function(){this.isSpin=!0,this.scaleShow(this.node,null)},spin:function(e,t,i,o){var s=this,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.UnKnown,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(this.spinNum=i,this.needSpinPetID=n,this.spinGuide2=c,this.grassNode=e,this.grassNode.parent=this.extractionBk,this.grass1=this.grassNode.getChildByName("grass1"),this.grass2=this.grassNode.getChildByName("grass2"),this.grass3=this.grassNode.getChildByName("grass3"),this.glare.active=!1,this.grassNode.getChildByName("glare").destroy(),this.grass1&&this.grass2&&this.grass3&&this.grassNode){this.spinLevel=t,this._callback=o;var r=cc.callFunc(function(){s.grassShakes()},this);this.midBk.runAction(cc.sequence(r,null))}},start:function(){},onBtnTouch:function(){if(!this.isSpin){var e=function(){this._callback&&this._callback(this.spinID),this.node.removeFromParent(),this.grassNode.removeFromParent()}.bind(this);this.scaleShow(this.node,e)}},grassShakes:function(){var e=this,t=cc.callFunc(function(){e.grassShake(e.grass1)},this),i=cc.callFunc(function(){e.grassShake(e.grass2)},this),o=cc.callFunc(function(){e.grassShake(e.grass3)},this),s=cc.callFunc(function(){var t=cc.moveBy(.2,cc.v2(.6*-e.grass1.width,0)).easing(cc.easeOut(3));e.grass1.runAction(t),t=cc.moveBy(.2,cc.v2(.6*e.grass1.width,0)).easing(cc.easeOut(3)),e.grass2.runAction(t),t=cc.moveBy(.2,cc.v2(.6*-e.grass1.width,0)).easing(cc.easeOut(3)),e.grass3.runAction(t)},this),n=cc.callFunc(function(){e.spinPet(e.spinLevel)},this),a=cc.callFunc(function(){},this),c=cc.sequence(t,cc.delayTime(.1),i,cc.delayTime(.1),o,cc.delayTime(.1),s,cc.delayTime(.2),n,cc.delayTime(.2),a);this.node.runAction(c)},grassShake:function(e){if(e){var t=cc.scaleTo(.1,1.2,1.2).easing(cc.easeBounceInOut()),i=cc.scaleTo(.1,1,1).easing(cc.easeBounceInOut()),o=cc.sequence(t,i),s=cc.jumpBy(.1,cc.v2(0,0),20,1).easing(cc.easeOut(3)),n=cc.jumpBy(.1,cc.v2(0,0),-20,1).easing(cc.easeOut(3)),a=cc.jumpBy(.1,cc.v2(0,0),16,1).easing(cc.easeOut(3)),c=cc.jumpBy(.1,cc.v2(0,0),-16,1).easing(cc.easeOut(3)),r=cc.sequence(s,n,a,c),l=cc.spawn(o,r);e.runAction(l)}},spinPet:function(e){if(this.needSpinPetID!==a.UnKnown)return this.petBorn(this.needSpinPetID),void(this.needSpinPetID=a.UnKnown);var t=c.A;if(0==e){var i=r.computeSpin([50,30,20]);t=0==i?c.A:1==i?c.B:c.S}else if(1==e){var s=r.computeSpin([30,40,30]);t=0==s?c.A:1==s?c.B:c.S}var n=[],l=this;o.instance.loadPetDetailDatas(function(e){for(var i in e)e[i].Star==t&&n.push(e[i]);if(n.length>0){var o=r.randomRangeInt(0,n.length),s=n[o].ID;l.petBorn(s,t)}})},petBorn:function(e,t){var i=this.spinNum;this.audioSpin.play(),this.writeData(e,t,i),this.spinID=e;var o="spine/pet/";o+=r.getPetFileName(e-1);var s=this,n=s.glare;cc.loader.loadRes(o,sp.SkeletonData,function(e,t){e&&cc.error(e),n.active=!0;var i=cc.repeatForever(cc.rotateBy(3,360));n.runAction(i);var o=new cc.Node;o.zIndex=10;var a=o.addComponent("sp.Skeleton");a.skeletonData=t,o.parent=s.node,o.position=n.position,o.scale=2,(a=o.getComponent("sp.Skeleton")).setAnimation(0,"idle",!0);var c=[cc.v2(-r.randomRange(20,30),r.randomRange(100,200)/8),cc.v2(-r.randomRange(20,30),r.randomRange(100,200)/8),cc.v2(0,-r.randomRange(s.extractionBk.height/2*.4,s.extractionBk.height/2*.6)/4)],l=cc.bezierBy(.2,c),h=cc.callFunc(function(){var e=cc.jumpBy(.5,cc.v2(0,0),10,1).easing(cc.easeOut(2)),t=cc.jumpBy(.5,cc.v2(0,0),-10,1).easing(cc.easeOut(2));o.runAction(cc.sequence(e,t))}),u=cc.callFunc(function(){s.isSpin=!1},s);if(s.spinGuide2){var d=cc.callFunc(function(){s.spinGuide2()},s);o.runAction(cc.sequence(l,h,cc.delayTime(.2),d,cc.delayTime(1),u))}else o.runAction(cc.sequence(l,h,cc.delayTime(1),u))})},writeData:function(e,t,i){var n=s.instance.getPetData(e);n?n.num+=i:((n={}).level=1,n.star=t,n.ID=e,n.num=i,h.instance.checkCollectPet(e));var a=this;o.instance.loadPetDatas(function(t){for(var i=0;i<t.length;i++){var o=t[i];if(parseInt(o.ID)==e&&parseInt(o.UpgradeNumber)>n.num){n.level=parseInt(o.Level)-2;break}}for(var c=0;c<t.length;c++){var r=t[c];parseInt(r.ID)==n.ID&&parseInt(r.Level)==n.level&&(n.attack=parseInt(r.Attack))}s.instance.setPetData(n),a.writeRolePetSkill(n.ID)})},writeRolePetSkill:function(e){var t=n.UnKnown;switch(e){case 1:case 2:case 3:t=n.Actor1;break;case 4:case 5:case 6:t=n.Actor2;break;case 7:case 8:case 9:t=n.Actor3;break;case 10:case 11:case 12:t=n.Actor4;break;case 13:case 14:case 15:t=n.Actor5}for(var i="",o=s.instance.getPetSkill(t),a=0;a<o.length;a++)i+=o[a],i+=",";i+=e+"",s.instance.setPetSkill(t,i)}}),cc._RF.pop()},{AchieveManager:"AchieveManager",BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],SpinPet:[function(e,t,i){"use strict";cc._RF.push(t,"078ceg+rUtMBbiV+cLSvzaI","SpinPet");var o=e("JsonData"),s=e("LocalStorage"),n=(e("EnumDefine").ActorType,e("EnumDefine").PetType,e("EnumDefine").PetAttribute,e("Utils"),e("CommonUtil")),a=(e("BaseUI"),e("AchieveManager")),c=(cc.v2(0,-300),cc.v2(0,100)),r=e("XPoolMng"),l=e("EnumDefine").CardPoolKind;cc.Class({extends:cc.Component,properties:{petCard:cc.Prefab,audioSpin:{type:cc.AudioSource,default:null}},onLoad:function(){this.cardlist=[],this.SpinCards=this.node.getComponent("SpinCards")},start:function(){},showCards:function(e,t,i,o,s,a){var c=this,h=r.instance.getCard(l.BornCard);h.group=s,h.scale=2,h.parent=i,h.position=o,h.getComponent(cc.ParticleSystem).resetSystem();var u=n.getPetGroupID(e);n.setBornCardSySSpriteFrame(h,u);var d=cc.callFunc(function(){r.instance.putCard(h,l.BornCard)},this),p=cc.callFunc(function(){c.spawnCards(e,t,i,o,s,a)},this);this.node.runAction(cc.sequence(cc.delayTime(.3),p,cc.delayTime(2),d))},spawnCards:function(e,t,i,o,s,a){var h=r.instance.getCard(l.PetCard);h.parent=i,h.group=s,h.position=o,h.scale=0;h.zIndex=10,this.cardlist.push(h);var u=cc.scaleTo(.2,1.2).easing(cc.easeOut(3)),d=cc.scaleTo(.08,1.44).easing(cc.easeBounceInOut()),p=cc.scaleTo(.08,1.2).easing(cc.easeBounceInOut()),v=cc.sequence(u,d,p,null),f=cc.moveTo(.5,cc.v2(c.x,c.y)).easing(cc.easeOut(3)),m=cc.spawn(v,f),g=cc.sequence(m,null);h.runAction(g);var C=function(o,c){var r=this,l=h.getComponent("PetCard");l.showCards(o,t,c),l.showBar(!0),l.blockClick=!0;var u=n.getPetGroupID(e),d=n.getGroupColor(u);if(l.setColor(d),t>1)this.showTheRestCards(o,t-1,i,s,a);else{var p=cc.callFunc(function(){r.spinDone(a)},this);this.node.runAction(cc.sequence(cc.delayTime(1.5),p))}}.bind(this);this.writeData(e,"A",t,C),this.audioSpin.play()},showTheRestCards:function(e,t,i,o,s){var a=this,h=10,u=[];u.push(cc.delayTime(.3));for(var d=function(t){var s=h-1;h-=1;var d=cc.v2(c.x,c.y-300),p=cc.v2(c.x+10*(t+1),c.y),v=cc.callFunc(function(){a.audioSpin.play();var t=r.instance.getCard(l.PetCard);a.cardlist.push(t),t.parent=i,t.group=o,t.position=d,t.scale=0,t.zIndex=s;var c=cc.scaleTo(.2,1.2).easing(cc.easeBounceInOut()),h=cc.moveTo(.2,p),u=cc.spawn(c,h),v=cc.sequence(u,null);t.runAction(v);var f=t.getComponent("PetCard");if(f){f.showBar(!1),f.showNewFlag(!1),f.blockClick=!0,f.spinBox.active=!1;var m=n.getPetGroupID(e.ID),g=n.getGroupColor(m);f.setColor(g)}},a);u.push(v),u.push(cc.delayTime(.1))},p=0;p<t;p++)d(p);var v=cc.callFunc(function(){a.spinDone(s)},this);u.push(cc.delayTime(1.5)),u.push(v),u.length>0&&this.node.runAction(cc.sequence(u))},spinDone:function(e){var t=this.cardlist,i=l.PetCard;this.SpinCards.clearCardlist(t,i,.2,1,e)},writeData:function(e,t,i,n){var c=!0,r=s.instance.getPetData(e);r?(r.cardNum+=i,c=!1):((r={}).level=1,r.star=t,r.ID=e,r.cardNum=i,a.instance.checkCollectPet(e));var l=this;o.instance.loadPetDatas(function(t){for(var i=0;i<t.length;i++){var o=t[i];if(parseInt(o.ID)===e&&parseInt(o.UpgradeNumber)>r.num){r.level=parseInt(o.Level)-2;break}}for(var a=0;a<t.length;a++){var h=t[a];parseInt(h.ID)==r.ID&&parseInt(h.Level)==r.level&&(r.attack=parseInt(h.Attack))}s.instance.setPetData(r),l.writeRolePetSkill(r.ID),n&&n(r,c)})},writeRolePetSkill:function(e){for(var t=n.getPetGroupID(e),i="",o=s.instance.getPetSkill(t),a=0;a<o.length;a++)i+=o[a],i+=",";i+=e+"",s.instance.setPetSkill(t,i)}}),cc._RF.pop()},{AchieveManager:"AchieveManager",BaseUI:"BaseUI",CommonUtil:"CommonUtil",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils",XPoolMng:"XPoolMng"}],SpinPoolPng:[function(e,t,i){"use strict";cc._RF.push(t,"9c7a789pdxO2KWJqb4Dgula","SpinPoolPng");var o=e("CardPool"),s=e("CDPool"),n=cc.Class({extends:cc.Component,properties:{cardPool:{default:[],type:o},cdPool:{default:[],type:s}},onLoad:function(){n.instance=this,this.init()},statics:{instance:null},init:function(){for(var e=0;e<this.cardPool.length;++e)this.cardPool[e].init();for(var t=0;t<this.cdPool.length;++t)this.cdPool[t].init()},getCard:function(e){var t=null,i=this.cardPool[e];return i&&(t=i.get()),t},putCard:function(e,t){var i=this.cardPool[t];i?i.put(e):obj.destory()},getCD:function(e){var t=null,i=this.cdPool[e];return i&&(t=i.get()),t},putCD:function(e,t){var i=this.cdPool[t];i?i.put(e):obj.destory()}});cc._RF.pop()},{CDPool:"CDPool",CardPool:"CardPool"}],SpinReward:[function(e,t,i){"use strict";cc._RF.push(t,"66d08g0H5pNIr7W+KSc6/R3","SpinReward");e("EnumDefine").SpinType;cc.Class({extends:cc.Component,properties:{spinSp:cc.Node,numlabel:cc.Label},onLoad:function(){},show:function(e,t,i){var o=this,s=this.node.scale;this.node.scale=0,this.spinSp.spriteFrame=t,this.spinSp.node.scale=i,this.numlabel.string=e+"",this.glare.active=!0;var n=cc.callFunc(function(){var e=cc.repeatForever(cc.rotateBy(3,360));o.glare.runAction(e)},this),a=cc.scaleTo(.3,s,s).easing(cc.easeOut(3));this.node.runAction(cc.sequence(a,n))},start:function(){}}),cc._RF.pop()},{EnumDefine:"EnumDefine"}],Spin:[function(e,t,i){"use strict";cc._RF.push(t,"fcbccsFuk5ATI5f575V9MTz","Spin");var o=e("EnumDefine"),s=e("Utils"),n=e("LocalStorage"),a=e("BaseUI"),c=o.SpinType,r=e("OpenSdk");cc.Class({extends:a,properties:{lotterys:{default:[],type:cc.Node},midbk:cc.Node,turnNode:cc.Node,UIBaseNode:cc.Node,CloseTouch:cc.Node,linkbox:cc.Node,secondLabel:cc.Label,minuteLabel:cc.Label,UseTurnBoard:cc.Node,BlockTurnBoard:cc.Node,centerTurrent:cc.Node,StageUINode:cc.Node,FloatSp:cc.Prefab,KeySpriteFrame:cc.SpriteFrame},onLoad:function(){var e=function(e){this.init(e)}.bind(this);this.loadSpinData(e),this.mAllPrizeNum=8,this.mDegree=360/this.mAllPrizeNum,this.spinData=null,this.nums=[],this.registerTouch(),this.uibase=this.UIBaseNode.getComponent("UIBase"),this.spinData=null,this.scaleShow(this.midbk),this.CloseTouch.active=!1,this.linkbox.active=!1,this.BlockTurnBoard.active=!1,this.UseTurnBoard.active=!0,this.StageUI=this.StageUINode.getComponent("StageUI"),this.hour=0,this.second=0,this.minute=0,this.spincnt=n.instance.getSpinCnt(),this.spincnt>=s.SPINCNT&&this.readPassTime(),this.centerTurrentTip()},centerTurrentTip:function(){var e=cc.scaleTo(.5,1.1,1.1).easing(cc.easeOut(3)),t=cc.scaleTo(.5,1,1).easing(cc.easeOut(3)),i=cc.sequence(e,t),o=cc.repeatForever(i);this.centerTurrent.scale=1,this.centerTurrent.stopAllActions(),this.centerTurrent.runAction(o)},stopCenterTurrentTip:function(){this.centerTurrent.scale=1,this.centerTurrent.stopAllActions()},onDisable:function(){},turnBtnFunc:function(e){var t=function(){this.stopCenterTurrentTip(),this.spincnt+=1,this.CloseTouch.active=!0,this.turn()}.bind(this);r.instance.showVideo(t,null)},registerTouch:function(){this.node.on(cc.Node.EventType.TOUCH_END,function(e){},this)},init:function(e){this.spinData=e;var t=[500,1e3,2e3,10,20,30,1,2];this.nums=t,this.spinOdds=[30,15,5,25,15,5,3e5,2],this.spinTypes=[c.Coin,c.Coin,c.Coin,c.Diamond,c.Diamond,c.Diamond,c.PetB,c.PetA];for(var i=0;i<this.lotterys.length;i++){this.lotterys[i].getChildByName("num").getComponent("cc.Label").string=t[i]}},turn:function(){var e=this,t=this.computeSpin(),i=t*this.mDegree+this.mDegree/2+1440;this.turnNode.stopAllActions(),this.turnNode.rotation=0;var o=cc.rotateBy(1,i).easing(cc.easeOut(5)),s=cc.callFunc(function(){e.tunrEnd(t)},this),n=cc.sequence(o,s);this.turnNode.runAction(n)},tunrEnd:function(e){var t=this.nums[e],i=this.getSpinType(e),o=this.lotterys[e].getChildByName("sp"),s=cc.director.getScene()._children[0],n=o.parent.convertToWorldSpaceAR(o.position);n=s.convertToNodeSpaceAR(n);var a=function(){this.openLinkBox()}.bind(this);switch(i){case c.Coin:this.uibase.produceCoin(t,n,s,a);break;case c.Diamond:this.uibase.produceDiamond(t,n,s,a);break;case c.PetA:this.rewardKey(1,a);break;case c.PetB:this.rewardKey(2,a)}},computeSpin:function(){for(var e=[],t=0;t<this.spinOdds.length;t++)e[t]=this.spinOdds[t];return s.computeSpin(e)},getSpinType:function(e){return e<0||e>=this.spinTypes.length?c.UnKnown:this.spinTypes[e]},start:function(){},loadSpinData:function(e){cc.loader.loadRes("json/Spin",function(t,i){var o=i.json;e&&e(o[0])})},closeBtnFunc:function(e){var t=function(){n.instance.setSpinCnt(this.spincnt),this.StageUI&&this.StageUI.freshSpin(),this.node.removeFromParent()}.bind(this);this.scaleClose(this.midbk,t)},rewardKey:function(e,t){var i=n.instance.getFreeSpinVal();i+=e,n.instance.setFreeSpinVal(i);var o=cc.director.getScene()._children[0],s=cc.v2(),a=cc.instantiate(this.FloatSp);a.parent=o,a.position=s,a.group="default",a.scale=0;var c=cc.scaleTo(.3,1.5).easing(cc.easeOut(3)),r=cc.moveBy(.5,cc.v2(0,50)),l=cc.spawn(c,r),h=cc.moveBy(.5,cc.v2(0,100)),u=cc.callFunc(function(){t&&t()},this),d=cc.sequence(l,h,cc.delayTime(1),u,cc.removeSelf());a.runAction(d),a.getComponent("FloatSp").set(this.KeySpriteFrame,e)},readPassTime:function(){var e=n.instance.getSpinDataTime();if(e){var t=new Date,i=t.getHours(),o=t.getMinutes(),a=t.getSeconds(),c=parseInt(e.hour),r=parseInt(e.minute),l=parseInt(e.second),h=60*i*60+60*o+a,u=60*c*60+60*r+l;Math.abs(h-u)<60*s.SPINTIME&&(this.minute=Math.abs(60*i+o-(60*c+r)),this.minute=Math.abs(s.SPINTIME-this.minute-1),this.second=Math.abs(60-Math.abs(60*r+l-60*o-a)),this.setTimelabel(this.minute,this.second),this.linkbox.active=!0,this.countDownTime(),this.BlockTurnBoard.active=!0,this.BlockTurnBoard.position=cc.v2(0,0),this.UseTurnBoard.active=!1,this.UseTurnBoard.position=cc.v2(600,0))}},showBlockBoard:function(){var e=this,t=cc.moveTo(.7,cc.v2(-600,0)).easing(cc.easeOut(3)),i=cc.callFunc(function(){e.BlockTurnBoard.active=!0;var t=cc.moveTo(.7,cc.v2(0,0)).easing(cc.easeOut(3));e.BlockTurnBoard.runAction(t)},this),o=cc.callFunc(function(){e.UseTurnBoard.active=!1,e.UseTurnBoard.position=cc.v2(600,0)},this),s=cc.sequence(cc.delayTime(.35),i),n=cc.spawn(t,s);this.UseTurnBoard.runAction(cc.sequence(n,o))},showUseBoard:function(){var e=this,t=cc.moveTo(.7,cc.v2(-600,0)).easing(cc.easeOut(3)),i=cc.callFunc(function(){e.UseTurnBoard.active=!0;var t=cc.moveTo(.7,cc.v2(0,0)).easing(cc.easeOut(3));e.UseTurnBoard.runAction(t)},this),o=cc.callFunc(function(){e.BlockTurnBoard.active=!1,e.BlockTurnBoard.position=cc.v2(600,0)},this),s=cc.sequence(cc.delayTime(.35),i),n=cc.spawn(t,s);this.BlockTurnBoard.runAction(cc.sequence(n,o))},openLinkBox:function(){if(this.CloseTouch.active=!1,this.spincnt<s.SPINCNT)this.centerTurrentTip();else{this.linkbox.active=!0;var e=new Date,t=e.getHours(),i=e.getMinutes(),o=e.getSeconds(),a={};a.hour=t,a.minute=i,a.second=o,n.instance.setSpinDataTime(a),this.linkbox.active=!0,this.minute=s.SPINTIME-1,this.second=60,this.setTimelabel(this.minute,this.second),this.countDownTime(),this.showBlockBoard()}},closeLinkBox:function(){this.linkbox.active=!1,this.CloseTouch.active=!1,this.passCall&&(this.unschedule(this.passCall),this.passCall=null,this.spincnt=0),this.showUseBoard()},countDownTime:function(){this.passCall=function(){this.second-=1,this.second<=0&&(this.second=60,this.minute-=1,this.minute<0&&this.closeLinkBox()),this.setTimelabel(this.minute,this.second)},this.schedule(this.passCall,1)},setTimelabel:function(e,t){this.minuteLabel.string=e<10?"0"+this.minute:this.minute+"",this.secondLabel.string=t<10?"0"+this.second:this.second+""}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",OpenSdk:"OpenSdk",Utils:"Utils"}],StageButton:[function(e,t,i){"use strict";cc._RF.push(t,"bfedbqfx9BKEqYu3U7zVr/8","StageButton");var o=e("Utils");cc.Class({extends:cc.Component,properties:{stageID:0,explorationID:0,stageNode:cc.Node,spNode:cc.Node,tap:cc.Node,title:cc.Label},onLoad:function(){this.MapStage=this.stageNode.getComponent("MapStage")},start:function(){},init:function(e,t){if(this.title.string=e,this.lock=t,t){this.tap.active=!1;var i=this.spNode.getComponent("cc.Button");i&&(i.interactable=o.UseTest)}t?(this.tap.active=!1,this.spNode.height=55,this.spNode.getComponent(cc.Button).interactable=o.UseTest):(this.tap.active=!0,this.spNode.heigth=110,this.spNode.getComponent(cc.Button).interactable=!0)},onBtnClicked:function(){var e=o.GetExplorationSubStage(this.explorationID),t=o.GetExplorattionPath(e),i=this;cc.loader.loadRes(t,cc.SpriteAtlas,function(e,t){o.StageSpriteAtlas=t;var s={};s.explorationID=i.explorationID,o.levelResultData=s,i.MapStage.spawnExploration(i.stageID,i.explorationID)})},unlock:function(){if(this.lock){this.lock=!1;var e=function(){var e=this.spNode.getComponent("cc.Button");e&&(e.interactable=!0),this.tap.active=!0}.bind(this);this.showSp(e)}},showSp:function(e){var t=this.spNode;t.height=110,t.scaleY=.5;var i=cc.scaleTo(.1,1),o=cc.scaleTo(.05,1.4).easing(cc.easeBounceInOut()),s=cc.scaleTo(.05,1).easing(cc.easeBounceInOut()),n=cc.scaleTo(.05,1.3).easing(cc.easeBounceInOut()),a=cc.scaleTo(.05,1).easing(cc.easeBounceInOut()),c=cc.callFunc(function(){e&&e()},this),r=cc.sequence(i,o,s,n,a,c);t.runAction(r)}}),cc._RF.pop()},{Utils:"Utils"}],StageUI:[function(e,t,i){"use strict";cc._RF.push(t,"b5976WxhFhPdIcHhY5B3Iyw","StageUI");var o=e("EnumDefine"),s=o.EnterKind,n=o.LevelMode,a=e("Utils"),c=e("Words"),r=(a.ProduceType,e("LocalStorage")),l=e("AchieveManager"),h=e("ActorNews"),u=e("EndlessLoadlevelEditor"),d=e("OpenSdk");cc.Class({extends:cc.Component,properties:{starlabel:cc.Label,UIBase:cc.Node,maskNode:cc.Node,SpinBtn:cc.Node,StarBtn:cc.Node,RoleBtn:cc.Node,AchieveBtn:cc.Node,SpinChestBtn:cc.Node,ReWardStars:cc.Node,Achieve:cc.Node,SpinNode:cc.Node,SpinChestPrefab:cc.Prefab,audioStar:{type:cc.AudioSource,default:null},JustWordGuide:cc.Node,RoleTouchGuide:cc.Node,ShowTipNode:cc.Node,endlessLockNode:cc.Node,endlessUnlockNode:cc.Node},onLoad:function(){this.JustWordGuide.active=!1,this.RoleTouchGuide.active=!1,this.ShowTipNode.active=!1,this.EndlessOpenlevel=19,this.maxlevel=50,this.stageStarCnt=0;for(var e=0,t=1;t<=this.maxlevel;t++){var i=r.instance.getLevelStars(t);e+=parseInt(i)}this.starcnt=e,this.starlabel.string=e+"",this.uibase=this.UIBase.getComponent("UIBase"),this.maskNode.active=!1},onEnable:function(){d.instance.showBanner()},onDisable:function(){d.instance.hideBanner()},start:function(){this.SpinBtn.active=!1,this.RoleBtn.active=!1,this.StarBtn.active=!1,this.SpinChestBtn.active=!1,this.AchieveBtn.active=!1,this.ReWardStars.active=!1,this.Achieve.active=!1,this.SpinNode.active=!1,this.freshAllUI(),a.UseTest&&(this.RoleBtn.active=!0,this.SpinBtn.active=!0,this.StarBtn.active=!0,this.SpinChestBtn.active=!0,this.AchieveBtn.active=!0)},freshAllUI:function(e){var t=r.instance.getLastestLevelID();this.lastestlevelID=t,this.freshRole(e),this.freshSpinChestBox(e),this.freshAchieve(e),this.freshReWardStar(e),this.freshSpin(e),t<=this.EndlessOpenlevel?(this.endlessUnlockNode.active=!1,this.endlessLockNode.active=!0):(this.endlessUnlockNode.active=!0,this.endlessLockNode.active=!1)},showGuide:function(){return r.instance.getOpenRoleGuideDone()?!r.instance.getPetUIGuideDone()&&this.showPetCardGuide():(this.openRoleGuide(),!0)},openRoleGuide:function(){var e=function(){var e=function(){this.onBtnRoleClicked()}.bind(this);this.showRoleTouchGuide(e),r.instance.setOpenRoleGuideDone(!0)}.bind(this),t=c.MapUI_Role1;this.showJustWordGuide(t,e)},showRoleTouchGuide:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=function(){var t=function(){e&&e()}.bind(this);this.scaleShow(this.RoleBtn,t)}.bind(this),o=this.RoleTouchGuide;o.active=!0,o.getComponent("TouchGuide").show("",i,t)},showPetCardGuide:function(){if(!r.instance.getPetUIGuideDone()){var e=r.instance.getPetData(1);if(e)if(e.cardNum>=2){var t=function(){r.instance.setPetUIGuideDone(!0);var e=function(){this.onBtnShowPetCardTouchGuide()}.bind(this);this.showRoleTouchGuide(e)}.bind(this),i=c.ActorUI_2;return this.showJustWordGuide(i,t),!0}}return!1},onBtnShowPetCardTouchGuide:function(){cc.director.loadScene("ActorUI",function(){var e=cc.director.getScene()._children[0],t=e.getComponent("CanvasInit");t&&t.setEnterCode(s.Map);var i=e.getChildByName("ActorUI");if(i){var o=i.getComponent("ActorUI");o&&o.showTouchPetCardGuide()}}.bind(this))},showJustWordGuide:function(e,t){var i=this.JustWordGuide;i.active=!0;var o=i.getComponent("JustWordGuide");o&&o.show(e,t)},scaleShow:function(e,t){var i=e.scale,o=cc.scaleTo(.1,1.2*i).easing(cc.easeBounceInOut()),s=cc.scaleTo(.1,1*i).easing(cc.easeBounceInOut()),n=cc.callFunc(function(){t&&t()},this),a=cc.sequence(o,s,n,null);e.runAction(a)},init:function(e){for(var t=this.pageView.getPages(),i=0;i<t.length;i++){var o=t[i].getComponent("PageLevelNodes");o&&o.init(e)}},addStar:function(e){this.starcnt+=e,this.starlabel.string=this.starcnt+"",this.freshReWardStar()},addRoleNum:function(){},addFreeKey:function(e){},onOpenStar:function(){var e=this.ReWardStars;e.active=!0,e.zIndex=10;var t=e.getComponent("ReWardStar");t&&t.init(this.starcnt,this.uibase,this)},onOpenAchieve:function(){var e=this.Achieve;e.active=!0;var t=e.getComponent("Achieve");t&&t.show(this)},onOpenSpin:function(){var e=cc.director.getScene()._children[0],t=cc.instantiate(this.SpinNode);t.active=!0,t.parent=e},onBtnBackClicked:function(){cc.director.loadScene("Main")},onBtnRoleClicked:function(){cc.director.loadScene("ActorUI",function(){var e=cc.director.getScene()._children[0].getComponent("CanvasInit");e&&e.setEnterCode(s.Map)}.bind(this))},onOpenSpinChest:function(){var e=cc.director.getScene()._children[0],t=cc.instantiate(this.SpinChestPrefab);t.active=!0,t.parent=e;var i=t.getChildByName("game");if(i){var o=i.getComponent("SpinChest");o&&o.replaceUIBase(this.UIBase)}},enterEndlessScene:function(e){var t=a.GetExplorationSubStage(e),i=a.GetExplorattionPath(t);cc.loader.loadRes(i,cc.SpriteAtlas,function(e,t){a.StageSpriteAtlas=t,cc.audioEngine.pause(a.mainSceneAudioID);var i=a.mainSceneAudioID;cc.audioEngine.stop(i),a.mainSceneAudioID=-1,a.passLevelStars=-1,a.FreeSpinVal=0,a.KillMonsterCnt=0,a.KillClearBombCnt=0,cc.director.loadScene("scene/Farm")})},onEndlessBtn:function(e){var t=this.lastestlevelID;if(!a.UseTest&&t<=this.EndlessOpenlevel){this.ShowTipNode.active=!0;var i=this.ShowTipNode.getComponent("ShowTip");i&&i.show("\u5b8c\u621020\u5173,\u89e3\u9501\u65e0\u5c3d")}else{var o={levelID:1,stageID:1,explorationID:1};a.levelResultData=o,a.levelMode=n.Endless;var s=function(){this.enterEndlessScene(o.explorationID)}.bind(this);u.instance.loadLevels(o.levelID,s)}},collectStars:function(e){this.addStar(e);for(var t=0,i=1;i<=this.maxlevel;i++){var o=r.instance.getLevelStars(i);t+=parseInt(o)}l.instance.checkCollectStar(t)},starAudio:function(){this.audioStar&&this.audioStar.play()},scaleNodeAction:function(e){var t=e.scale,i=cc.scaleTo(.3,1.2*t,1.2*t).easing(cc.easeOut(3)),o=cc.scaleTo(.3,1*t,1*t).easing(cc.easeOut(3)),s=cc.sequence(i,o);e.runAction(s)},freshRole:function(e){this.lastestlevelID>=1&&(this.RoleBtn.active=!0,e&&this.scaleNodeAction(this.RoleBtn));var t=function(e){var t=this.RoleBtn.getChildByName("tip");e?(t.active=!0,this.toBacktoScale(t)):t.active=!1}.bind(this),i=this.uibase;h.instance.allRolesLevelUp(i,t)},freshSpinChestBox:function(e){this.lastestlevelID>=5&&(this.SpinChestBtn.active=!0,e&&this.scaleNodeAction(this.SpinChestBtn));var t=this.SpinChestBtn.getChildByName("tip");0===r.instance.getFreeSpinVal()?t.active=!1:(t.active=!0,this.toBacktoScale(t))},freshAchieve:function(e){this.lastestlevelID>=15&&(this.AchieveBtn.active=!0,e&&this.scaleNodeAction(this.AchieveBtn));var t=this.AchieveBtn.getChildByName("tip");l.instance.getActiveItemCnt()>0?(t.active=!0,this.toBacktoScale(t)):t.active=!1},freshReWardStar:function(e){this.lastestlevelID>=10&&(this.StarBtn.active=!0,e&&this.scaleNodeAction(this.StarBtn));for(var t=0,i=[30,45,60,75,90,105,120,135,150],o=0;o<i.length;o++){var s=i[o],n=o;if(this.starcnt>=s){var a=r.instance.getStarDone(n);"false"!==a.one&&"false"!==a.two||(t+=1)}}var c=this.StarBtn.getChildByName("tip");t>0?(c.active=!0,this.toBacktoScale(c)):c.active=!1},freshSpin:function(e){this.lastestlevelID>=5&&(this.SpinBtn.active=!0,e&&this.scaleNodeAction(this.SpinBtn));var t=0,i=r.instance.getSpinCnt();if(i<=a.SPINCNT&&(t=a.SPINCNT-i),i>=a.SPINCNT){t=2;var o=r.instance.getSpinDataTime();if(o){var s=new Date,n=60*s.getHours()*60+60*s.getMinutes()+s.getSeconds(),c=60*parseInt(o.hour)*60+60*parseInt(o.minute)+parseInt(o.second);Math.abs(n-c)<60*a.SPINTIME&&(t=0)}}var l=this.SpinBtn.getChildByName("tip");0===t&&(this.SpinBtn.getChildByName("spinBoard").stopAllActions(),l&&(l.active=!1));t>0&&(this.turnSpin(),l&&(l.active=!0,this.toBacktoScale(l)))},turnSpin:function(){var e=this.SpinBtn.getChildByName("spinBoard");e&&(this.shitfunc=function(){var t=-(45*a.randomRange(0,8)+22.5)-1440;e.stopAllActions(),e.rotation=0;var i=cc.rotateBy(1,t).easing(cc.easeOut(5)),o=cc.callFunc(function(){},this),s=cc.sequence(i,o);e.runAction(s)},this.schedule(this.shitfunc,1.6))},toBacktoScale:function(e){var t=e.scale,i=cc.scaleTo(1,1.1*t).easing(cc.easeOut(3)),o=cc.scaleTo(1,t).easing(cc.easeOut(3)),s=cc.sequence(i,o),n=cc.repeatForever(s);e.stopAllActions(),e.runAction(n)}}),cc._RF.pop()},{AchieveManager:"AchieveManager",ActorNews:"ActorNews",EndlessLoadlevelEditor:"EndlessLoadlevelEditor",EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",OpenSdk:"OpenSdk",Utils:"Utils",Words:"Words"}],StepAward:[function(e,t,i){"use strict";cc._RF.push(t,"d769dHY58xIUZIYLvw2/UuN","StepAward");var o=e("PoolMng"),s=e("Game");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.processBoardCell=this.node.getComponent("ProcessBoardCell"),this.board=this.node.getComponent("Board"),this.dropCell=this.node.getComponent("DropCell")},start:function(){},stepDone:function(){var e=function(){this.donecallback&&this.donecallback()}.bind(this);this.dropCell.animateFalling(e)},shootSteps:function(e,t){var i=this;this.donecallback=t;var o=[],n=this.randomCells(e);if(n&&n.length>0)for(var a=function(e){var t=n[e];if(t&&t.parent){var a=cc.callFunc(function(){s.instance.updateStep(-1),i.shootStep(t,.4)},i);o.push(a),o.push(cc.delayTime(.2))}},c=0;c<n.length;c++)a(c);var r=cc.callFunc(function(){i.stepDone()},this);o.push(cc.delayTime(.8)),o.push(r),this.node.runAction(cc.sequence(o))},shootStep:function(e,t){if(e&&e.parent){var i=this,n=s.instance.getFightUI().steplabel,a=cc.director.getScene()._children[0],c=n.node.parent.convertToWorldSpaceAR(n.node.position);c=a.convertToNodeSpaceAR(c);var r=e.parent.convertToWorldSpaceAR(e.position);(r=a.convertToNodeSpaceAR(r)).x+=e.width/2,r.y+=e.height/2;var l=o.instance;cc.loader.loadRes("prefab/step",function(o,s){o&&cc.error(o);var n=cc.instantiate(s);n.scale=1,n.parent=a,n.position=c,n.group="UI";var h=r.sub(c),u=Math.atan2(h.y,h.x),d=-cc.misc.radiansToDegrees(u)+90;n.rotation=d;var p=cc.moveTo(t,r),v=cc.callFunc(function(){i.spawnCoin(r,10);var t=cc.v2();t.x=e.x+e.width/2,t.y=e.y+e.height/2;var o=e.getComponent("Cell").celltype,s=e.parent;i.showflashEffect(o,s,t),i.processBoardCell.setCellNull(e),l.returnCell(e)},i);n.runAction(cc.sequence(p,v,cc.removeSelf()))})}},showflashEffect:function(e,t,i){this.board.cellRemoveEffect(e,t,i)},spawnCoin:function(e,t){var i=cc.director.getScene()._children[0],o=s.instance.getFightUI();cc.loader.loadRes("prefab/SaleCoin",function(s,n){s&&cc.error(s);var a=cc.instantiate(n);a.parent=i,a.position=e,a.group="UI",a.scale=0,a.getChildByName("label").getComponent(cc.Label).string=t+"";var c=cc.scaleTo(.3,1.5).easing(cc.easeOut(3)),r=cc.moveBy(.3,cc.v2(0,30)),l=cc.spawn(c,r),h=cc.moveBy(.6,cc.v2(0,50)),u=cc.callFunc(function(){o.updateCoin(t)},this),d=cc.sequence(l,h,u,cc.removeSelf());a.runAction(d)})},randomCells:function(e){return this.processBoardCell.randomGetNormalCells(e)}}),cc._RF.pop()},{Game:"Game",PoolMng:"PoolMng"}],StepUI:[function(e,t,i){"use strict";cc._RF.push(t,"efb8aEpyOhHKKKSotWv0q3t","StepUI");var o=e("RPGManager"),s=e("Game"),n=e("Utils"),a=e("LocalStorage"),c=e("BaseUI"),r=(e("EnumDefine").CellType,e("EnumDefine").LevelEditorID),l=e("OpenSdk");cc.Class({extends:c,properties:{targetNode:cc.Node,wordBk:cc.Node,goleCell:cc.Node,goleMonster:cc.Node,goleDropBox:cc.Node,goleSp:cc.Node,cell1SkeletonData:sp.SkeletonData,cell2SkeletonData:sp.SkeletonData,cell3SkeletonData:sp.SkeletonData,cell4SkeletonData:sp.SkeletonData,cell5SkeletonData:sp.SkeletonData},onLoad:function(){var e=function(){var e=cc.scaleTo(.2,1).easing(cc.easeOut(3));this.wordBk.runAction(e)}.bind(this);this.scaleShow(this.node,e),this.uibaseData=a.instance.getUIBase(),this.showGoleNodes(),this.wordBk.scale=0},start:function(){},onBtnCloseClicked:function(e){var t=function(){o.instance.ProcessGameDone.lose(),this.node.removeFromParent()}.bind(this);this.close(t)},onBtnAddStepClicked:function(e){if(this.uibaseData.diamond>=10){this.uibaseData.diamond-=10;var t=function(){o.instance.ProcessGameDone.addStepSuccess(5),this.node.removeFromParent()}.bind(this);this.close(t)}else;},onBtnLookAdsClicked:function(e){var t=function(){var e=function(){o.instance.ProcessGameDone.addStepSuccess(5),this.node.removeFromParent()}.bind(this);this.close(e)}.bind(this);l.instance.showVideo(t,null)},close:function(e){var t=this.node.scale,i=cc.scaleTo(.06,1.1*t,1.1*t).easing(cc.easeBounceInOut()),o=cc.scaleTo(.06,0).easing(cc.easeBounceInOut()),s=cc.callFunc(function(){e&&e()},this),n=cc.sequence(i,o,s);this.node.runAction(n)},onDisable:function(){n.writeUIBaseData(this.uibaseData)},showGoleNodes:function(){var e=this.getGoleNodelist();if(!(e.length<=0))for(var t=e.length,i=e[0],o=(this.targetNode.width-(t*i.width+10*(t-1)))/2,s=this.targetNode,n=0;n<e.length;n++){var a=e[n];a.parent=s,a.group="default",a.scale=.9,a.active=!0,a.x=o+a.width/2+n*(a.width+10),a.x-=this.targetNode.width/2,a.y=-31}},getGoleNodelist:function(){var e=this,t=[],i=s.instance.getGoleData();if(i){var o=i.datalist,n=i.wavenum;if(n>0){var a=cc.instantiate(this.goleMonster);a.active=!0,a.getChildByName("num").getComponent("cc.Label").string=n+"",t.push(a)}for(var c=0;c<o.length;c++){var l=o[c],h=l.celltype,u=l.num;switch(h=parseInt(h)){case r.Cell1:var d=this.cell1SkeletonData,p=cc.instantiate(this.goleCell);p.active=!0,p.getChildByName("target").getComponent("sp.Skeleton").skeletonData=d,p.getChildByName("num").getComponent("cc.Label").string=u+"",t.push(p);break;case r.Cell2:var v=this.cell2SkeletonData,f=cc.instantiate(this.goleCell);f.active=!0,f.getChildByName("target").getComponent("sp.Skeleton").skeletonData=v,f.getChildByName("num").getComponent("cc.Label").string=u+"",t.push(f);break;case r.Cell3:var m=this.cell3SkeletonData,g=cc.instantiate(this.goleCell);g.active=!0,g.getChildByName("target").getComponent("sp.Skeleton").skeletonData=m,g.getChildByName("num").getComponent("cc.Label").string=u+"",t.push(g);break;case r.Cell4:var C=this.cell4SkeletonData,S=cc.instantiate(this.goleCell);S.active=!0,S.getChildByName("target").getComponent("sp.Skeleton").skeletonData=C,S.getChildByName("num").getComponent("cc.Label").string=u+"",t.push(S);break;case r.Cell5:var b=this.cell5SkeletonData,k=cc.instantiate(this.goleCell);k.active=!0,k.getChildByName("target").getComponent("sp.Skeleton").skeletonData=b,k.getChildByName("num").getComponent("cc.Label").string=u+"",t.push(k);break;case r.DropBox:(function(){var i=cc.instantiate(e.goleDropBox);i.active=!0;var o=i.getChildByName("target");cc.loader.loadRes("spine/baby/lockbaby",sp.SkeletonData,function(e,t){e&&cc.error(e),o.getComponent("sp.Skeleton").skeletonData=t}),i.getChildByName("num").getComponent("cc.Label").string=u+"",t.push(i)})();break;case r.ClearBomb:var _=this.spawnSp("bomb",this.goleSp,u);t.push(_);break;case r.Chest:var w=this.spawnSp("chest1",this.goleSp,u);t.push(w);break;case r.Block:var B=this.spawnSp("wood1",this.goleSp,u);t.push(B)}}}return t},spawnSp:function(e,t,i){var o=cc.instantiate(t);o.active=!0;var s=o.getChildByName("target").getComponent("cc.Sprite");return cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(t,i){var o=i.getSpriteFrame(e);s.spriteFrame=o;var n=o.getOriginalSize();s.node.width=n.width,s.node.height=n.height}),o.getChildByName("num").getComponent("cc.Label").string=i+"",o}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",Game:"Game",LocalStorage:"LocalStorage",OpenSdk:"OpenSdk",RPGManager:"RPGManager",Utils:"Utils"}],StoryUI:[function(e,t,i){"use strict";cc._RF.push(t,"61e6cc1kStDTai8aXniseLo","StoryUI");e("Game");cc.Class({extends:cc.Component,properties:{bossRoad:cc.Node},ctor:function(){},onLoad:function(){},start:function(){}}),cc._RF.pop()},{Game:"Game"}],SwipeDustCard:[function(e,t,i){"use strict";cc._RF.push(t,"6a8dbHEEN9Gv47cV7zJbhGP","SwipeDustCard"),cc.Class({extends:cc.Component,properties:{sys1:cc.ParticleSystem,sys2:cc.ParticleSystem},onLoad:function(){},start:function(){},show:function(e){var t=this,i=cc.callFunc(function(){t.sys1.resetSystem()},this),o=cc.callFunc(function(){t.sys2.resetSystem()},this),s=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(i,cc.delayTime(.4),o,cc.delayTime(.5),s,cc.removeSelf()))}}),cc._RF.pop()},{}],SwitchRoleSkill:[function(e,t,i){"use strict";cc._RF.push(t,"b3664WiWQdNdriwHGNzyuLt","SwitchRoleSkill");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=(e("EnumDefine").ActorType,e("Utils")),n=e("RPGManager"),a=e("LocalStorage");e("Game");cc.Class({extends:cc.Component,properties:{closeBtn:cc.Button,roleBoxPrefab:cc.Prefab,UINode:cc.Node},onLoad:function(){this.PetSkillUI=this.UINode.getComponent("PetSkillUI"),this.sideDis=15,this.midDis=(this.node.width-2*this.sideDis-550)/2,this.registerTouch(),this.canTouch=!0;var e={};this.roleDatas=[];for(var t=[0,1,2,3,4],i=0;i<t.length;i++){var o=t[i],s=a.instance.getRoleData(o);s&&this.roleDatas.push(s)}for(var n=0;n<this.roleDatas.length;n++){var c=this.roleDatas[n],r=this.spawnRoleBox(c,n);r.active=!1,e[c.roletype]=r}this.roleBoxes=e},spawnRoleBox:function(e,t){var i=cc.instantiate(this.roleBoxPrefab);i.parent=this.node,i.position=cc.v2(this.sideDis+i.width/2+t*(i.width+this.midDis/2),0*(-i.height-5)),i.x-=this.node.width/2,i.y+=.42*this.node.height;var o=i.getComponent("BattleRoleBox"),n=s.getRoleName(e.roletype);return o.init(e,n),i},start:function(){},registerTouch:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.touchBegin(t)},e)},touchBegin:function(e){if(this.canTouch){var t=e.getTouches()[0].getLocation();for(var i in this.roleBoxes){var o=this.roleBoxes[i];if(this.hitNode(t,o))return void this.showRoleInfo(o)}}},hitNode:function(e,t){var i=t.parent.convertToNodeSpaceAR(e);return!!t.getBoundingBox().contains(i)},openSkills:function(e){for(var t in this.roleBoxes){this.roleBoxes[t].active=!0}this.PetSkillUI.showRoleSkill(e)},showRoleInfo:function(e){var t=e.getComponent("BattleRoleBox").roleID,i=cc.director.getScene()._children[0],o="default";"Farm"===cc.director.getScene().name&&(o="UI");var s=function(){this.fresh(t)}.bind(this);cc.loader.loadRes("prefab/ActorUI/RoleCardInfo",function(e,n){var a=cc.instantiate(n);a.active=!0,a.group="UI",a.scale=1,a.parent=i,a.group=o,a.parent=i,a.position=cc.v2(0,0),a.getComponent("RoleCardInfo").show(t,s)})},onBtnOpenFunc:function(){this.node.active=!0,this.openSkills(!0),this.switchBtn.node.active=!1,this.closeBtn.node.active=!0},onBtnContinueFunc:function(){this.openSkills(!1),this.switchBtn.node.active=!0,this.closeBtn.node.active=!1,this.node.active=!1},fresh:function(e){var t=a.instance.getRoleData(e);this.freshSkills(t);for(var i=n.instance.actorlist,c=function(o){var n=i[o],a=n.getComponent("Actor");if(e===a.roletype&&a.roleData.level<t.level){a.setData(t);var c="spine/actor/",r=s.getActorSpineName(e,t.level);if(a.skeletonName===r)return{v:void 0};c+=r,cc.loader.loadRes(c,sp.SkeletonData,function(e,t){e&&cc.error(e);var i=n.getComponent("sp.Skeleton");i.skeletonData=t,i.setAnimation(0,"idle",!0),a.skeletonName=r,a.roleSkeleton=i,a.setAntiAliasTexParameters()})}},r=0;r<i.length;r++){var l=c(r);if("object"===(void 0===l?"undefined":o(l)))return l.v}},freshSkills:function(e){var t=e.roletype;this.roleBoxes[t].getComponent("BattleRoleBox").fresh(e)}}),cc._RF.pop()},{EnumDefine:"EnumDefine",Game:"Game",LocalStorage:"LocalStorage",RPGManager:"RPGManager",Utils:"Utils"}],TaskEndPop:[function(e,t,i){"use strict";cc._RF.push(t,"d19b9srV55KMq3Ux8DuPogC","TaskEndPop");e("Utils");var o=e("BaseUI"),s=(e("EnumDefine").CellType,e("EndlessUtil").TaskID,e("EndlessUtil").PunishKind),n=e("EndlessUtil").ReWardKind;cc.Class({extends:o,properties:{xtitle:cc.Label,midbk:cc.Node,goleSp:cc.Node,xWord:cc.Node,xbk:cc.Node,brushNode:cc.Node,bigBombNode:cc.Node,smallBombNode:cc.Node},onLoad:function(){this.goleSp.active=!1,this.xWord.active=!1,this.rewardNodelist=[],this.punishNodelist=[],this.brushNode.active=!1,this.bigBombNode.active=!1,this.smallBombNode.active=!1},start:function(){},onBtnOk:function(){var e=function(){this.midbk.scale=1,this.node.active=!1,this.callback&&this.callback()}.bind(this);this.scaleClose(this.midbk,e)},reset:function(){this.removeNodelist(this.punishNodelist),this.removeNodelist(this.rewardNodelist)},removeNodelist:function(e){for(var t=0;t<e.length;t++){var i=e[t];i&&i.removeFromParent()}e.length=0},showPunish:function(e,t){this.callback=t,this.scaleShow(this.midbk),this.xtitle.string="\u60e9\u7f5a";for(var i=0;i<this.rewardNodelist.length;i++){var o=this.rewardNodelist[i];o&&(o.active=!1)}if(this.punishNodelist.length<=0){var s=this.spawnPunish(e);this.punishNodelist.push(s)}for(var n=0;n<this.punishNodelist.length;n++){var a=this.punishNodelist[n];a&&(a.active=!0)}},showReward:function(e,t){this.callback=t,this.scaleShow(this.midbk),this.xtitle.string="\u5956\u52b1";for(var i=0;i<this.punishNodelist.length;i++){var o=this.punishNodelist[i];o&&(o.active=!1)}if(this.rewardNodelist.length<=0){var s=this.spawnReWard(e);this.rewardNodelist.push(s)}for(var n=0;n<this.rewardNodelist.length;n++){var a=this.rewardNodelist[n];a&&(a.active=!0)}},spawnPunish:function(e,t){var i=e.Type,o=e.val,n=e.name;o=parseInt(o);var a=null,c=this.xbk;switch(i){case s.Block:(a=this.spawnSp("wood1",o)).parent=c,a.position=cc.v2();break;case s.Salive:(a=this.spawnSp("Saliva",o)).parent=c,a.position=cc.v2();break;case s.Step:case s.WeakenAttack:(a=this.spawnXWord(o,n)).parent=c,a.position=cc.v2()}return a},spawnReWard:function(e){var t=null,i=this.xbk,o=e.Type,s=e.val,a=e.name;switch(s=parseInt(s),o){case n.BigBomb:(t=cc.instantiate(this.bigBombNode)).active=!0,t.parent=this.xbk,t.position=this.bigBombNode.position;break;case n.SmallBomb:(t=cc.instantiate(this.smallBombNode)).active=!0,t.parent=this.xbk,t.position=this.smallBombNode.position;break;case n.UniversalBrush:(t=cc.instantiate(this.brushNode)).active=!0,t.parent=this.xbk,t.position=this.brushNode.position;break;case n.Key:(t=this.spawnSp("key",s)).width=46,t.height=70;var c=t.getChildByName("sp");c&&(c.scale=.5),t.parent=i,t.position=cc.v2();break;case n.StrengthenAttack:case n.Step:(t=this.spawnXWord(s,a)).parent=i,t.position=cc.v2()}return t},spawnXWord:function(e,t){var i=cc.instantiate(this.xWord);return i.active=!0,i.getChildByName("name").getComponent(cc.Label).string=t+""+e,i},spawnSp:function(e,t){var i=cc.instantiate(this.goleSp);i.active=!0;var o=i.getChildByName("target").getComponent("cc.Sprite");return cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(t,i){var s=i.getSpriteFrame(e);o.spriteFrame=s}),i.getChildByName("num").getComponent("cc.Label").string=t+"",i}}),cc._RF.pop()},{BaseUI:"BaseUI",EndlessUtil:"EndlessUtil",EnumDefine:"EnumDefine",Utils:"Utils"}],TaskPop:[function(e,t,i){"use strict";cc._RF.push(t,"52bf0rKotBOwo25jUHFiCgv","TaskPop");var o=e("Utils"),s=e("BaseUI"),n=e("EnumDefine").CellType,a=e("EndlessUtil").TaskID;cc.Class({extends:s,properties:{goleMonster:cc.Node,goleCell:cc.Node,goleSp:cc.Node,xWord:cc.Node,taskBk:cc.Node,steplabel:cc.Label,cell1SkeletonData:sp.SkeletonData,cell2SkeletonData:sp.SkeletonData,cell3SkeletonData:sp.SkeletonData,cell4SkeletonData:sp.SkeletonData,cell5SkeletonData:sp.SkeletonData,TaskEndPopWindow:cc.Node,TaskBar:cc.ProgressBar,Tap:cc.Node},onLoad:function(){this.goleMonster.active=!1,this.goleCell.active=!1,this.goleSp.active=!1,this.xWord.active=!1,this.TaskEndPopWindow.active=!1,this.nodelist=[],this.TaskBar.progress=0},start:function(){},onBtnPunish:function(){this.TaskEndPopWindow.active=!0;var e=this.TaskEndPopWindow.getComponent("TaskEndPop");e&&e.showPunish(this.punishData)},onBtnReWard:function(){this.TaskEndPopWindow.active=!0;var e=this.TaskEndPopWindow.getComponent("TaskEndPop");e&&e.showReward(this.rewardData)},show:function(e,t,i,o){var s=this;this.callback=o,this.taskData=e,this.punishData=t,this.rewardData=i,this.removeNodelist(),this.TaskBar.progress=0;var n=this.showTask(e);this.nodelist.push(n),this.Tap.active=!0;var a=cc.v2(-256,443),c=cc.v2(0,403);this.node.position=c,this.node.scale=0;var r=cc.scaleTo(.2,.8).easing(cc.easeBounceInOut()),l=cc.moveTo(.3,a),h=cc.callFunc(function(){var e=cc.scaleTo(.2,0).easing(cc.easeOut(4)),t=cc.callFunc(function(){s.Tap.active=!1},s);s.node.runAction(cc.sequence(e,t))},this),u=cc.scaleTo(.2,.5).easing(cc.easeOut(4)),d=cc.sequence(r,cc.delayTime(1),l,h,cc.delayTime(.2),u,null);this.node.runAction(d)},reset:function(){this.removeNodelist(this.nodelist)},removeNodelist:function(){for(var e=0;e<this.nodelist.length;e++){var t=this.nodelist[e];t&&t.removeFromParent()}this.nodelist.length=0},close:function(){this.node.active=!1,this.updateProgress&&(this.unschedule(this.updateProgress),this.updateProgress=null)},updateTask:function(e,t){this.stepNum-=1,this.steplabel.string=this.stepNum+"";var i=this.taskData.Type,o=this.taskData.val,s=(this.taskData.step,1*e[i]/o),n=this.TaskBar.progress;n<1&&n<s?(this.updateProgress=function(){((n+=.01)>=s||n>=1)&&(t&&t(),this.TaskBar.progress=1,this.unschedule(this.updateProgress),this.updateProgress=null),this.TaskBar.progress=n},this.schedule(this.updateProgress,0)):t&&t()},showTask:function(e){var t=null,i=e.Type,o=e.val,s=e.step,c=e.name;switch(o=parseInt(o),s=parseInt(s),this.steplabel.string=s+"",this.stepNum=s,i){case a.Cell1:(t=this.spawncell(n.Cell1,o)).parent=this.taskBk,t.position=cc.v2(0,0);break;case a.Cell2:(t=this.spawncell(n.Cell2,o)).parent=this.taskBk,t.position=cc.v2();break;case a.Cell3:(t=this.spawncell(n.Cell3,o)).parent=this.taskBk,t.position=cc.v2();break;case a.Cell4:(t=this.spawncell(n.Cell4,o)).parent=this.taskBk,t.position=cc.v2();break;case a.Cell5:(t=this.spawncell(n.Cell5,o)).parent=this.taskBk,t.position=cc.v2();break;case a.KillMonster:(t=this.spawnMonsterGole(o)).parent=this.taskBk,t.position=cc.v2();break;case a.HurtMonster:case a.TriggerRoleSkill:case a.TriggerPetSkill:(t=this.spawnXWord(o,c)).parent=this.taskBk,t.position=cc.v2()}return t},spawnXWord:function(e,t){var i=cc.instantiate(this.xWord);return i.active=!0,i.getChildByName("name").getComponent(cc.Label).string=t+""+e,i},spawnMonsterGole:function(e){var t=cc.instantiate(this.goleMonster);return t.active=!0,t.getChildByName("num").getComponent("cc.Label").string=e+"",t},spawncell:function(e,t){var i=cc.instantiate(this.goleCell);i.active=!0;o.getCellName(e);var s=i.getChildByName("target"),a=null;switch(e){case n.Cell1:a=this.cell1SkeletonData;break;case n.Cell2:a=this.cell2SkeletonData;break;case n.Cell3:a=this.cell3SkeletonData;break;case n.Cell4:a=this.cell4SkeletonData;break;case n.Cell5:a=this.cell5SkeletonData}return s.getComponent("sp.Skeleton").skeletonData=a,i.getChildByName("num").getComponent("cc.Label").string=t+"",i},spawnSp:function(e,t){var i=cc.instantiate(this.goleSp);i.active=!0;var o=i.getChildByName("target").getComponent("cc.Sprite");return cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(t,i){var s=i.getSpriteFrame(e);o.spriteFrame=s}),i.getChildByName("num").getComponent("cc.Label").string=t+"",i}}),cc._RF.pop()},{BaseUI:"BaseUI",EndlessUtil:"EndlessUtil",EnumDefine:"EnumDefine",Utils:"Utils"}],TaskRoad:[function(e,t,i){"use strict";cc._RF.push(t,"21f7c9P9l9M/5SeziOXdjIF","TaskRoad");e("LocalStorage");cc.Class({extends:cc.Component,properties:{role:cc.Node,roadBar:cc.ProgressBar,ts:cc.Node},onLoad:function(){this.roadBar.node.active=!1,this.rolePos=cc.v2(this.role.x,this.role.y),this.role.active=!1,this.reset(),this.turns=10},start:function(){},showRoadBar:function(){this.roadBar.node.active=!0},showEvents:function(e){for(var t=this.ts.children,i=0;i<e.length;i++){var o=t[e[i]];o&&(o.active=!0)}},oneWaveDone:function(e){if(this.cur>=this.turns)return e&&e(!0),void this.reset();var t=0;this.updateProgress=function(){t+=.01,this.roadBar.progress+=.01,this.roadBar.progress>=.1*this.cur&&(this.roadBar.progress=.1*this.cur),t>=.1&&(t=.1,this.unschedule(this.updateProgress),this.updateProgress=null,e&&e(!1))},this.schedule(this.updateProgress,.02),this.cur+=1},reset:function(){if(this.cur=0,this.roadBar.progress=0,this.role.position=cc.v2(this.rolePos.x,this.rolePos.y),this.ts)for(var e=this.ts.children,t=0;t<e.length;t++){e[t].active=!1}}}),cc._RF.pop()},{LocalStorage:"LocalStorage"}],TaskUI:[function(e,t,i){"use strict";cc._RF.push(t,"e9e625b4TVMn5MLwkzXr12a","TaskUI");var o=e("Utils"),s=e("EnumDefine").CellType,n=e("EnumDefine").LevelEditorID,a=e("EnumDefine").LevelResult,c=e("EndlessUtil").TaskID;cc.Class({extends:cc.Component,properties:{coin:{default:null,type:cc.SpriteFrame},coinlabel:{default:null,type:cc.Label},steplabel:{default:null,type:cc.Label},curWavelabel:{default:null,type:cc.Label},stepbk:cc.Node,leftbk:cc.Node,combo:cc.Node,TaskOpenWindow:cc.Node,TaskEndWindow:cc.Node,ChestPopWindow:cc.Node},ctor:function(){this.StageType=0,this.startTimeUpdate=!1},onLoad:function(){this.coinlabel.string="0",this.coinVal=0,this.diamondVal=0,this.scoreVal=0,this.playSteps=0,this.combo.active=!1,this.goleNodelist=[],this.TaskOpenWindow.active=!1,this.TaskEndWindow.active=!1,this.ChestPopWindow.active=!1,this.curWave=1,this.eventStep=0,this.haveTask=!1,this.initTaskData()},start:function(){},initTaskData:function(){var e={};e[c.Cell1]=0,e[c.Cell2]=0,e[c.Cell3]=0,e[c.Cell4]=0,e[c.Cell5]=0,e[c.KillMonster]=0,e[c.HurtMonster]=0,e[c.TriggerRoleSkill]=0,e[c.TriggerPetSkill]=0,this.TaskData=e},updateTaskData:function(e,t){if(this.TaskData){var i=this.TaskData[e];i&&void 0!==i?i+=t:i=t,this.TaskData[e]=i}},showGole:function(){if(null!==o.LevelEditorLevelGoles){var e=o.LevelEditorLevelGoles;this.showGoleData(e)}},showGoleData:function(e){var t=e.WaveNum,i=e.GoleCells[n.Step];this.waveNum=t,this.playSteps=i,this.steplabel.string=this.playSteps+"",this.curWavelabel.string=this.curWave+""},closeCombo:function(){var e=this;this.combo.stopAllActions();var t=cc.scaleTo(.5,0).easing(cc.easeOut(5)),i=cc.callFunc(function(){e.combo.active=!1},this);this.combo.runAction(cc.sequence(t,i))},scaleShowCombo:function(){this.combo.active=!0,this.combo.scale=0,this.combo.stopAllActions();var e=cc.scaleTo(.5,1).easing(cc.easeOut(5)),t=cc.callFunc(function(){},this);this.combo.runAction(cc.sequence(e,t))},showCombo:function(e){if(this.combo){var t=[1.1,1.3,1.5],i=[5,10,15];if(e<i[0])return this.comboVal=1,void this.closeCombo();var o=1;o=e>=i[0]&&e<i[1]?t[0]:e>=i[1]&&e<i[2]?t[1]:t[2],this.comboVal=o,this.scaleShowCombo();var s=this.combo.getChildByName("num");if(s)s.getComponent("cc.Label").string=o+""}},getSteps:function(){return this.playSteps},checkResult:function(){return this.playSteps<=0?a.Lose:a.Fighting},updateStep:function(e){this.playSteps+=e,this.playSteps<0&&(this.playSteps=0),this.steplabel.string=this.playSteps+""},updateWave:function(e){var t=c.KillMonster;this.updateTaskData(t,e)},showNextWave:function(){this.curWave+=1,this.curWavelabel.string=this.curWave+""},updateRoleSkill:function(){var e=c.TriggerRoleSkill;this.updateTaskData(e,1)},updatePetSkil:function(){var e=c.TriggerPetSkill;this.updateTaskData(e,1)},updateHurtMonster:function(e){var t=c.HurtMonster;this.updateTaskData(t,e)},updateCell:function(e,t){e=parseInt(e);var i=c.UnKnown;switch(e){case s.Cell1:i=c.Cell1,this.updateTaskData(i,t);break;case s.Cell2:i=c.Cell2,this.updateTaskData(i,t);break;case s.Cell3:i=c.Cell3,this.updateTaskData(i,t);break;case s.Cell4:i=c.Cell4,this.updateTaskData(i,t);break;case s.Cell5:i=c.Cell5,this.updateTaskData(i,t);break;case s.ClearBombProp:case s.Chest:case s.DropBottomBox:break;case s.Weeds:case s.Fence:case s.Stakes:}},updateCoin:function(e){this.coinVal+=e,this.coinlabel.string=this.coinVal+"",o.levelResultData.coinNum=this.coinVal},updateDiamond:function(e){this.diamondVal+=e,o.levelResultData.diamondNum=this.diamondVal},onBtnPauseClicked:function(e){var t=cc.director.getScene()._children[0];cc.loader.loadRes("prefab/PauseUI",function(e,i){var o=cc.instantiate(i);o&&(o.parent=t,o.active=!0)});var i=o.fightSceneAudioID;cc.audioEngine.pause(i)},setTaskData:function(e,t,i){this.taskData=e,this.punishData=t,this.rewardData=i},updateTaskPop:function(e){if(this.TaskOpenWindow.active){var t=this.TaskOpenWindow.getComponent("TaskPop"),i=this.TaskData;t.updateTask(i,e)}},closeAllPop:function(){var e=this.TaskOpenWindow.getComponent("TaskPop");e&&e.close()},showTaskPop:function(){this.TaskOpenWindow.active=!0;var e=this.TaskOpenWindow.getComponent("TaskPop");e&&e.show(this.taskData,this.punishData,this.rewardData)},showRewardTaskPop:function(e,t){this.TaskEndWindow.active=!0;var i=this.TaskEndWindow.getComponent("TaskEndPop");i&&i.showReward(e,t)},showPunishTaskPop:function(e,t){this.TaskEndWindow.active=!0;var i=this.TaskEndWindow.getComponent("TaskEndPop");i&&i.showPunish(e,t)},showChestPop:function(e,t){this.ChestPopWindow.active=!0;var i=this.ChestPopWindow.getComponent("ChestPop");i&&i.show(e,t)},reset:function(){var e=this.TaskEndWindow.getComponent("TaskEndPop");e&&e.reset(),(e=this.TaskOpenWindow.getComponent("TaskPop"))&&e.reset()}}),cc._RF.pop()},{EndlessUtil:"EndlessUtil",EnumDefine:"EnumDefine",Utils:"Utils"}],Tip:[function(e,t,i){"use strict";cc._RF.push(t,"2951cmhlmNIJplnAhkxfp34","Tip"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this.node.scale,t=cc.scaleTo(.4,1.1*e).easing(cc.easeIn(3)),i=cc.scaleTo(.4,e).easing(cc.easeIn(3)),o=cc.sequence(t,i),s=cc.repeatForever(o);this.node.runAction(s)}}),cc._RF.pop()},{}],TouchGuide:[function(e,t,i){"use strict";cc._RF.push(t,"dac03u9Q8xPaZBsAp/uWYFC","TouchGuide"),cc.Class({extends:cc.Component,properties:{hand:cc.Node,touchNode:cc.Node,wordLabel:cc.Label},onLoad:function(){this.guideDone=!1},start:function(){if(this.hand){var e=this.hand.getComponent(cc.Animation).play();e.wrapMode=cc.WrapMode.Loop,e.speed=.1;var t=this.hand,i=t.scale;t.scale=0;var o=cc.scaleTo(.5,i).easing(cc.easeOut(5));t.runAction(o)}},show:function(e,t){var i=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.needRemove=o,this.wordLabel&&(this.wordLabel.string=e),this.callback=t;var s=cc.callFunc(function(){i.guideDone=!0},this);this.node.runAction(cc.sequence(cc.delayTime(.1),s))},onBtnTouch:function(){this.guideDone&&(this.callback&&this.callback(),this.needRemove?this.node.removeFromParent():this.node.active=!1)}}),cc._RF.pop()},{}],TouchNode:[function(e,t,i){"use strict";cc._RF.push(t,"c0bbbqdYG9D460q/McXgmk1","TouchNode"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},setFunc:function(e){this.toucn=e},registerTouch:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.touchBegin(e)},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){this.touchMove(e)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.touchEnd(e)},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){this.touchEnd(e)},this)},touchBegin:function(e){this.touch.touchBegin(e)},touchMove:function(e){this.touch.touchMove(e)},touchEnd:function(e){this.touch.touchEnd(e)}}),cc._RF.pop()},{}],Touch:[function(e,t,i){"use strict";cc._RF.push(t,"3afdaY8phZGcr5b9yS1VzIK","Touch"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.registerTouch()},start:function(){},setFunc:function(e){this.func=e},registerTouch:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.touchBegin(e)},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){this.touchMove(e)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.touchEnd(e)},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){this.touchEnd(e)},this)},touchBegin:function(e){this.func&&this.func.touchBegin(e)},touchMove:function(e){this.func&&this.func.touchMove(e)},touchEnd:function(e){this.func&&this.func.touchEnd(e)}}),cc._RF.pop()},{}],TriggerCellsSkill:[function(e,t,i){"use strict";cc._RF.push(t,"0a852O6PnVM8qyY05fqI3ih","TriggerCellsSkill");var o=e("Utils"),s=e("Sort");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.ProcessBoardCell=this.node.getComponent("ProcessBoardCell")},start:function(){},triggerSkill:function(e){this.saliveCellSkill(e)},saliveCellSkill:function(e){var t=this,i=[];this.ProcessBoardCell.getSaliveCells(i);for(var n=[],a=0;a<i.length;a++){var c=i[a],r=c.getComponent("Salive");r&&r.updateRoundSkill(),r&&r.IsHaveSkill()&&n.push(c)}var l=.2;n.length>0&&(l+=n[0].getComponent("Salive").skillDuration());if(n.length>0){s.shuffle(n);for(var h=[],u=o.randomRange(1,n.length),d=0;d<u;d++)h.push(n[d]);for(var p=[],v=function(e){var i=h[e],o=cc.callFunc(function(){i.getComponent("Salive").invokeSkill()},t);p.push(o),p.push(cc.delayTime(.2))},f=0;f<h.length;f++)v(f);p.push(cc.delayTime(l));var m=cc.callFunc(function(){e&&e()});p.push(m),this.node.runAction(cc.sequence(p))}else e&&e()}}),cc._RF.pop()},{Sort:"Sort",Utils:"Utils"}],UIBase:[function(e,t,i){"use strict";cc._RF.push(t,"acca85jGZVAdIP8QFiMAiFN","UIBase");var o=e("Utils"),s=e("LocalStorage"),n=o.ProduceType;cc.Class({extends:cc.Component,properties:{coinlabel:{default:null,type:cc.Label},diamondlabel:{default:null,type:cc.Label},lifelabel:{default:null,type:cc.Label},audioCoin:{type:cc.AudioSource,default:null},timeNode:cc.Node},ctor:function(){this._coinNum=0,this._diamondNum=0,this._lifeNum=0},onLoad:function(){var e=s.instance.getUIBase();e&&(this.coinlabel.string=e.coin+"",this.diamondlabel.string=e.diamond+"",this.lifelabel.string=e.life+"",this._coinNum=parseInt(e.coin),this._diamondNum=parseInt(e.diamond),this._lifeNum=parseInt(e.life)),this.LifeTime=this.node.getComponent("LifeTime");var t=this.timeNode.getChildByName("minute"),i=this.timeNode.getChildByName("second");this.minuteLabel=t.getComponent(cc.Label),this.secondLabel=i.getComponent(cc.Label),this.LifeTime.setBase(this);var n=this.node.getChildByName("diamond");if(n){var a=n.getChildByName("add");a&&(a.active=o.UseTest)}},start:function(){this.showTime()},onDisable:function(){},IsLifeNumFull:function(){return this._lifeNum>=20},setTimelabel:function(e,t){(this.minuteLabel.string=e<10?"0"+e:e+"",this.secondLabel.string=t<10?"0"+t:t+"",this.LifeUINode)&&this.LifeUINode.getComponent("LifeUI").setTimelabel(e,t)},closeTime:function(){(this.timeNode.active=!1,this.LifeUINode&&this.LifeUINode.active)&&this.LifeUINode.getComponent("LifeUI").closeTime()},showTime:function(){this.IsLifeNumFull()?this.closeTime():(this.timeNode.active=!0,this.LifeTime.showTime(),this.LifeUINode&&this.LifeUINode.active&&this.LifeUINode.getComponent("LifeUI").showTime())},onDestroy:function(){},playCoin:function(){this.audioCoin&&this.audioCoin.play()},getDiamondNum:function(){return this._diamondNum},getCoinNum:function(){return this._coinNum},getLifeNum:function(){return this._lifeNum},updateCoin:function(e){this._coinNum+=e,this.coinlabel.string=this._coinNum+"",this.writeData()},updateDiamond:function(e){this._diamondNum+=e,this.diamondlabel.string=this._diamondNum+"",this.writeData()},updateLife:function(e){(this._lifeNum+=e,this._lifeNum<=0&&(this._lifeNum=0),this._lifeNum>=20&&(this._lifeNum=20),this.lifelabel.string=this._lifeNum+"",this.writeData(),this.LifeUINode&&this.LifeUINode.active)&&this.LifeUINode.getComponent("LifeUI").updateLife(this._lifeNum);this._lifeNum<20?this.LifeTime.showTime():(this.closeTime(),this.LifeUINode&&this.LifeUINode.active&&this.LifeUINode.getComponent("LifeUI").closeTime())},writeData:function(){var e={};e.coin=this._coinNum,e.diamond=this._diamondNum,e.life=this._lifeNum,s.instance.setUIBase(e)},buyDiamond:function(e){var t=!1;return this.getDiamondNum()>=e&&(t=!0,this.updateDiamond(-e)),t},buyCoin:function(e){var t=!1;return this.getCoinNum()>=e&&(t=!0,this.updateCoin(-e)),t},onBtnLifeClicked:function(){var e=this,t=(cc.director.getScene(),e.node);cc.loader.loadRes("prefab/UI/LifeUI",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.active=!0,s.group=e.node.group,s.parent=t,s.position=cc.v2(),s.zIndex=10,e.scaleShow(s);var n=s.getComponent("LifeUI");n.setUIBase(e),n.show(e._lifeNum),e.LifeUINode=s;var a=function(){e.LifeUINode=null}.bind(e);n.closeFunc=a})},onBtnAddDiamondClicked:function(){var e=this,t=e.node;cc.loader.loadRes("prefab/UI/DiamondUI",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.active=!0,s.group=e.node.group,s.parent=t,s.position=cc.v2(),s.zIndex=10,e.scaleShow(s),s.getComponent("DiamondUI").setUIBase(e)})},onBtnAddCoinClicked:function(){var e=this,t=e.node;cc.loader.loadRes("prefab/UI/CoinUI",function(i,o){i&&cc.error(i);var s=cc.instantiate(o);s.active=!0,s.group=e.node.group,s.parent=t,s.position=cc.v2(),s.zIndex=10,e.scaleShow(s),s.getComponent("CoinUI").setUIBase(e)})},scaleShow:function(e,t){var i=this.node.scale,o=cc.scaleTo(.08,1.08*i,1.08*i).easing(cc.easeBounceInOut()),s=cc.scaleTo(.08,1*i,1*i).easing(cc.easeBounceInOut()),n=cc.scaleTo(.08,1.05*i,1.05*i).easing(cc.easeBounceInOut()),a=cc.scaleTo(.08,1*i,1*i).easing(cc.easeBounceInOut()),c=cc.callFunc(function(){t&&t()},this),r=cc.sequence(o,s,n,a,c,null);e.runAction(r)},produceDiamond:function(e,t,i,s){if(!(e<=0)){var a=this.diamondlabel,c=a.node.parent.convertToWorldSpaceAR(a.node.position);c=i.convertToNodeSpaceAR(c);var r=e>=10?10:e,l=parseInt(e/r),h=parseInt(e%r),u=function(){this.updateDiamond(l),this.playCoin()}.bind(this),d=l;0!=h&&(d=h);var p=function(){this.updateDiamond(d),this.playCoin(),s&&s()}.bind(this),v=this.node.group;"Farm"===cc.director.getScene().name&&(v="UI"),o.produceRandomNodeLineMove(n.Diamond,r,t,c,i,u,p,v)}},produceCoin:function(e,t,i,s){if(!(e<=0)){var a=this.coinlabel,c=a.node.parent.convertToWorldSpaceAR(a.node.position);c=i.convertToNodeSpaceAR(c);var r=e>=10?10:e,l=parseInt(e/r),h=parseInt(e%r),u=function(){this.updateCoin(l),this.playCoin()}.bind(this),d=l;0!=h&&(d=h);var p=function(){this.updateCoin(d),this.playCoin(),s&&s()}.bind(this),v=this.node.group;"Farm"===cc.director.getScene().name&&(v="UI"),o.produceRandomNodeLineMove(n.ButtonCoin,r,t,c,i,u,p,v)}}}),cc._RF.pop()},{LocalStorage:"LocalStorage",Utils:"Utils"}],UISoundAudio:[function(e,t,i){"use strict";cc._RF.push(t,"b02a26BbqBKwI/GqkU6zk4V","UISoundAudio"),cc.Class({extends:cc.Component,properties:{levelup:{type:cc.AudioClip,default:null},Coin:{type:cc.AudioClip,default:null},petlevelup:{type:cc.AudioClip,default:null},ButtonClick:{type:cc.AudioClip,default:null}},start:function(){}}),cc._RF.pop()},{}],UpGradeContent:[function(e,t,i){"use strict";cc._RF.push(t,"94a2epmSg9DD6W795eYV+1u","UpGradeContent");var o=e("JsonData"),s=e("LocalStorage"),n=(e("EnumDefine").PetType,e("EnumDefine").EnterKind,e("EnumDefine").PetShapeLevel,e("Utils"));e("BaseUI");cc.Class({extends:cc.Component,properties:{titleNode:cc.Node,levelNode:cc.Node,attackNode:cc.Node,greatNode:cc.Node,NormalContent:cc.Node,glare:cc.Node,pet:cc.Node,camera:cc.Camera,smoke:cc.ParticleSystem,explode:cc.ParticleSystem},onLoad:function(){this.duration=.2,this.NormalContent.active=!1,this.node.active=!0,this.setActive(!1),this.CameraZoom=this.camera.node.getComponent("CameraZoom")},start:function(){},setActive:function(e){this.titleNode.active=e,this.levelNode.active=e,this.attackNode.active=e,this.greatNode.active=e,this.pet.active=e,this.glare.active=e,this.smoke.node.active=e,this.explode.node.active=e},show:function(e,t,i,n){this.closeCallback=n;var a=function(o){var n=function(){var n=parseInt(o.Attack),a=parseInt(o.UpgradeNumber),c={};c.ID=e,c.level=t,c.attack=n,c.cardNum=i,c.UpgradeNumber=a,c.star="",s.instance.setPetData(c),this.petData=c,this.showAll(e,t,n)}.bind(this);this.zoomIn(n)}.bind(this);o.instance.loadPetData(e,t,a)},zoomIn:function(e){this.CameraZoom.zoomIn(e)},zoomOut:function(e){this.CameraZoom.zoomOut(e)},showAll:function(e,t,i){var o=this,s=[],n=cc.callFunc(function(){o.showRole(e,t)},this),a=cc.callFunc(function(){o.showTitle()},this),c=cc.callFunc(function(){o.showlevelNode(t)},this),r=cc.callFunc(function(){o.showAttackNode(i)},this),l=cc.callFunc(function(){o.showGreateNode()},this),h=this.duration;s.push(n),s.push(cc.delayTime(.2)),s.push(a),s.push(cc.delayTime(h)),s.push(c),s.push(cc.delayTime(h)),s.push(r),s.push(cc.delayTime(h)),s.push(l),this.node.runAction(cc.sequence(s))},showRole:function(e,t){this.pet.active=!0,this.glare.active=!0;var i=this.glare;i.active=!0;var o=cc.repeatForever(cc.rotateBy(3,360));i.runAction(o);var s="spine/pet/";s+=n.getPetFileName(e-1);var a=this;cc.loader.loadRes(s,sp.SkeletonData,function(e,t){e&&cc.error(e);var i=a.pet.addComponent("sp.Skeleton");i.skeletonData=t,i.setAnimation(0,"idle",!0),a.showSys()})},showSys:function(){var e=this;this.explode.node.active=!0,this.explode.resetSystem();var t=cc.callFunc(function(){e.smoke.node.active=!0,e.smoke.resetSystem()},this);this.node.runAction(cc.sequence(cc.delayTime(1),t))},showTitle:function(){this.titleNode.active=!0;var e=this.titleNode;e.active=!0;var t=this.duration;this.scaleNode(e,t)},showlevelNode:function(e){var t=this.levelNode;t.active=!0;var i=this.duration;this.scaleNode(t,i);var o=t.getChildByName("level");o&&(o.getComponent("cc.Label").string=e+"")},showAttackNode:function(e){this.attackNode.active=!0;var t=this.attackNode;t.active=!0;var i=this.duration;this.scaleNode(t,i);var o=t.getChildByName("attack");o&&(o.getComponent("cc.Label").string=e+"")},showGreateNode:function(){this.greatNode.active=!0;var e=this.greatNode;e.active=!0;var t=this.duration;this.scaleNode(e,t)},scaleNode:function(e,t,i){var o=e.scale,s=cc.scaleTo(t,1.2*o).easing(cc.easeOut(4)),n=cc.scaleTo(t,o).easing(cc.easeOut(4)),a=cc.callFunc(function(){i&&i()},this),c=cc.sequence(s,n,a);e.runAction(c)},onGrreatBtn:function(){var e=function(){if(this.NormalContent.active=!0,this.closeCallback){var e=this.petData;this.closeCallback(e),this.closeCallback=null}this.setActive(!1),this.node.active=!1}.bind(this);this.zoomOut(e)}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],UpGradeRoleContent:[function(e,t,i){"use strict";cc._RF.push(t,"b51ffIBVKFEzLTgfe1CIVhR","UpGradeRoleContent");e("JsonData"),e("LocalStorage"),e("EnumDefine").PetType,e("EnumDefine").EnterKind,e("EnumDefine").PetShapeLevel;var o=e("Utils");e("BaseUI");cc.Class({extends:cc.Component,properties:{titleNode:cc.Node,levelNode:cc.Node,attackNode:cc.Node,greatNode:cc.Node,NormalContent:cc.Node,glare:cc.Node,role:cc.Node,camera:cc.Camera,smoke:cc.ParticleSystem,explode:cc.ParticleSystem},onLoad:function(){this.duration=.2,this.NormalContent.active=!1,this.node.active=!0,this.setActive(!1),this.CameraZoom=this.camera.node.getComponent("CameraZoom")},start:function(){},setActive:function(e){this.titleNode.active=e,this.levelNode.active=e,this.attackNode.active=e,this.greatNode.active=e,this.role.active=e,this.glare.active=e,this.smoke.node.active=e,this.explode.node.active=e},show:function(e,t){this.closeCallback=t;var i=function(){this.showAll(e)}.bind(this);this.zoomIn(i);var s=e.roletype,n=e.level,a=o.getActorSpineName(s,n);this.loadRole(this.role,a)},zoomIn:function(e){this.CameraZoom.zoomIn(e)},zoomOut:function(e){this.CameraZoom.zoomOut(e)},showAll:function(e){var t=this,i=[],o=e.roletype,s=e.level,n=e.attack,a=cc.callFunc(function(){t.showRole(o,s)},this),c=cc.callFunc(function(){t.showTitle()},this),r=cc.callFunc(function(){t.showlevelNode(s)},this),l=cc.callFunc(function(){t.showAttackNode(n)},this),h=cc.callFunc(function(){t.showGreateNode()},this),u=this.duration;i.push(a),i.push(cc.delayTime(1)),i.push(c),i.push(cc.delayTime(u)),i.push(r),i.push(cc.delayTime(u)),i.push(l),i.push(cc.delayTime(u)),i.push(h),this.node.runAction(cc.sequence(i))},showRole:function(e,t){this.role.active=!0,this.glare.active=!0;var i=this.glare;i.active=!0;var o=cc.repeatForever(cc.rotateBy(3,360));i.runAction(o);var s=this.role,n=s.scale,a=cc.scaleTo(.5,1.3*n).easing(cc.easeOut(3)),c=cc.jumpBy(.5,cc.v2(0,0),60,1).easing(cc.easeOut(3)),r=cc.jumpBy(.5,cc.v2(0,0),0,1).easing(cc.easeOut(3)),l=cc.sequence(c,r),h=cc.spawn(a,l);s.runAction(h);var u=cc.callFunc(function(){},this),d=cc.callFunc(function(){var e=cc.scaleTo(.3,n).easing(cc.easeIn(5));s.runAction(e)},this);this.role.runAction(cc.sequence(cc.delayTime(.5),u,cc.delayTime(.5),d))},showSys:function(){var e=this;this.explode.node.active=!0,this.explode.resetSystem();var t=cc.callFunc(function(){e.smoke.node.active=!0,e.smoke.resetSystem()},this);this.node.runAction(cc.sequence(cc.delayTime(1),t))},showTitle:function(){this.titleNode.active=!0;var e=this.titleNode;e.active=!0;var t=this.duration;this.scaleNode(e,t)},showlevelNode:function(e){var t=this.levelNode;t.active=!0;var i=this.duration;this.scaleNode(t,i);var o=t.getChildByName("level");o&&(o.getComponent("cc.Label").string=e+"")},showAttackNode:function(e){this.attackNode.active=!0;var t=this.attackNode;t.active=!0;var i=this.duration;this.scaleNode(t,i);var o=t.getChildByName("attack");o&&(o.getComponent("cc.Label").string=e+"")},showGreateNode:function(){this.greatNode.active=!0;var e=this.greatNode;e.active=!0;var t=this.duration;this.scaleNode(e,t)},scaleNode:function(e,t,i){var o=e.scale,s=cc.scaleTo(t,1.2*o).easing(cc.easeOut(4)),n=cc.scaleTo(t,o).easing(cc.easeOut(4)),a=cc.callFunc(function(){i&&i()},this),c=cc.sequence(s,n,a);e.runAction(c)},onGrreatBtn:function(){var e=function(){this.NormalContent.active=!0,this.closeCallback&&(this.closeCallback(),this.closeCallback=null),this.setActive(!1),this.node.active=!1}.bind(this);this.zoomOut(e)},loadRole:function(e,t){var i="spine/actor/"+t,o=e.getComponent("sp.Skeleton"),s=this;cc.loader.loadRes(i,sp.SkeletonData,function(e,t){e&&cc.error(e),o.skeletonData=t,o.setAnimation(0,"idle",!0),s.showSys()})}}),cc._RF.pop()},{BaseUI:"BaseUI",EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],Utils:[function(e,t,i){"use strict";cc._RF.push(t,"6e36794TgdII6mwO8NKhw60","Utils");var o=72,s=72,n=e("PoolMng"),a=(Math.random,e("EnumDefine")),c=e("EnumDefine").RoleShapeLevel,r=e("EnumDefine").PetShapeLevel,l=a.ActorType,h=a.CellType,u=a.PetType,d=a.CellsRelativeDir,p=(e("EnumDefine").CellGroupType,a.LevelResult,a.LevelMode),v=e("LocalStorage"),f=a.DayKind,m=e("EnumDefine").ExplorationSubStage,g=e("XPoolMng"),C=e("EnumDefine").CDPoolKind,S=cc.Enum({ButtonCoin:0,SaleCoin:1,Diamond:2,Star:3,SpinKey:4,DoubleSpin:5,UnKnown:-1}),b={};b[l.Actor1]=["One_Horinal1","One_Horinal2","One_Horinal3","One_Horinal4"],b[l.Actor2]=["Two_Vertical1","Two_Vertical2","Two_Vertical3","Two_Vertical4"],b[l.Actor3]=["Three_LeftPlan1","Three_LeftPlan2","Three_LeftPlan3","Three_LeftPlan4"],b[l.Actor4]=["Four_RightPlan1","Four_RightPlan2","Four_RightPlan3","Four_RightPlan4"],b[l.Actor5]=["Five_Cross1","Five_Cross2","Five_Cross3","Five_Cross4"];var k={};k[u.Pet1]=["SOne_SingleShoot1","SOne_SingleShoot2","SOne_SingleShoot3","SOne_SingleShoot4"],k[u.Pet2]=["SOne_Brush1","SOne_Brush2","SOne_Brush3","SOne_Brush4"],k[u.Pet3]=["SPrismBomb1","SPrismBomb2","SPrismBomb3","SPrismBomb4"],k[u.Pet4]=["STwo_SingleShoot1","STwo_SingleShoot2","STwo_SingleShoot3","STwo_SingleShoot4"],k[u.Pet5]=["STwo_Brush1","STwo_Brush2","STwo_Brush3","STwo_Brush4"],k[u.Pet6]=["SPrismBomb1","SPrismBomb2","SPrismBomb3","SPrismBomb4"],k[u.Pet7]=["SThree_SingleShoot1","SThree_SingleShoot2","SThree_SingleShoot3","SThree_SingleShoot4"],k[u.Pet8]=["SThree_Brush1","SThree_Brush2","SThree_Brush3","SThree_Brush4"],k[u.Pet9]=["SPrismBomb1","SPrismBomb2","SPrismBomb3","SPrismBomb4"],k[u.Pet10]=["SFour_SingleShoot1","SFour_SingleShoot2","SFour_SingleShoot3","SFour_SingleShoot4"],k[u.Pet11]=["SFour_Brush1","SFour_Brush2","SFour_Brush3","SFour_Brush4"],k[u.Pet12]=["SPrismBomb1","SPrismBomb2","SPrismBomb3","SPrismBomb4"],k[u.Pet13]=["SFive_SingleShoot1","SFive_SingleShoot2","SFive_SingleShoot3","SFive_SingleShoot4"],k[u.Pet14]=["SFive_Brush1","SFive_Brush2","SFive_Brush3","SFive_Brush4"],k[u.Pet15]=["SPrismBomb1","SPrismBomb2","SPrismBomb3","SPrismBomb4"];function _(e,t){return Math.random()*(t-e)+e}function w(e,t){return Math.floor(_(e,t))}function B(e,t,i){if(1===t)e.push(i);else for(var o=0;o<t;o++){var s=_(i.x-50,i.x+50),n=_(i.y-50,i.y+50);e.push(cc.v2(s,n))}}function D(e,t,i,o,s,n){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"UI";if(!(t<=0)){var r=0,l=[],h=[];B(l,t,i);for(var u=0;u<t;u++){var d=l[u],p=o.sub(d).mag()/100*.2;r=r<p?p:r}for(var v=function(i){var r=1,u=C.UnKnown;switch(e){case S.ButtonCoin:case S.ScaleCoin:r=2,u=C.ButtonCoin;break;case S.Diamond:r=2,u=C.ButtonDiamond;break;case S.SpinKey:r=.8,u=C.SpinKey;break;case S.DoubleSpin:r=.8,u=C.SpinDouble}var d=i,p=g.instance.getCD(u);if(p){var v=l[i];p.position=v,h.push(p),p.scale=0,p.zIndex=300,p.parent=s,p.group=c;var f=o.sub(p.position).mag()/150*.2;(function(){var e=p.position,s=cc.v2();s.x=(e.x+o.x)/2,s.y=(e.y+o.y)/2;var c=[e,s,o],l=cc.bezierTo(f,c),h=cc.scaleTo(.1,r).easing(cc.easeOut(3)),v=cc.callFunc(function(){null!==a&&d>=t-1?a&&a():n&&n(),g.instance.putCD(p,u)}),m=cc.sequence(cc.delayTime(.02*i),h,l,v);p.runAction(m)})()}},f=0;f<t;f++)v(f);return r+.02*t+.1+.5}}function y(e){return e<r.Level2&&e>=r.Level1?r.Level1:e>=r.Level2&&e<r.Level3?r.Level2:e>=r.Level3&&e<r.Level4?r.Level3:e>=r.Level4?r.Level4:void 0}function N(e){return e<c.Level2&&e>=c.Level1?c.Level1:e>=c.Level2&&e<c.Level3?c.Level2:e>=c.Level3&&e<c.Level4?c.Level3:e>=c.Level4?c.Level4:void 0}t.exports={NUMROWS:8,NUMCOLUMNS:8,TITLE_WIDTH:o,TITLE_HEIGHT:s,pointForColumn:function(e,t){var i=e*o,n=t*s;return cc.v2(i,n)},randomRangeInt:w,randomRange:_,produceRandomNodeLineMove:D,ProduceType:S,getActorSpineName:function(e,t){var i=[];switch(e){case l.Actor1:i=["kaokao","kaokao_2","kaokao_3","kaokao_4"];break;case l.Actor2:i=["mika","mika_2","mika_3","mika_4"];break;case l.Actor3:i=["ricky","ricky_2","ricky_3","ricky_4"];break;case l.Actor4:i=["tutu","tutu_2","tutu_3","tutu_4"];break;case l.Actor5:i=["actor1","actor2","actor2","actor4"]}if(i.length>0){if(t<c.Level2&&t>=c.Level1)return i[0];if(t>=c.Level2&&t<c.Level3)return i[1];if(t>=c.Level3&&t<c.Level4)return i[2];if(t>=c.Level4)return i[3]}},getPetFileName:function(e){return["cattle","chicken","dog","duck","frog","hippo","horse","monkey","mouse","orangutan","owl","panda","pig","rabbit","sheep","tiger"][e]},getGhostPetFileName:function(e){return["cattle_ghost","chicken_ghost","dog_ghost","duck_ghost","frog_ghost","hippo_ghost","horse_ghost","monkey_ghost","mouse_ghost","orangutan_ghost","owl_ghost","panda_ghost","pig_ghost","rabbit_ghost","sheep_ghost","tiger_ghost"][e]},computeSpin:function(e){for(var t=e.length,i=0,o=0;o<t;o++)i+=e[o],e[o]=i;for(var s=_(0,i),n=0;n<t-1;n++)if(s>=e[n]&&s<e[n+1])return n+1;return 0},getStageName:function(e){switch(e){case 10001:name="Farm1";break;case 10002:name="Farm2";break;case 10003:name="Farm3";break;case 20001:name="Forest1";break;case 20002:name="Forest2";break;case 20003:name="Forest3";break;case 30001:name="Snow1";break;case 30002:name="Snow2";break;case 30003:name="Snow3";break;case 40001:name="Volcano1";break;case 40002:name="Volcano2";break;case 40003:name="Volcano3"}return name},getCellName:function(e){switch(e){case h.Cell1:return"tomatoes";case h.Cell2:return"eggplant";case h.Cell3:return"orange";case h.Cell4:return"apple";case h.Cell5:return"radish"}},getRoleName:function(e){switch(e){case l.Actor1:return"\u7c73\u5494";case l.Actor2:return"\u9760\u9760";case l.Actor3:return"\u745e\u5947";case l.Actor4:return"\u7a81\u7a81";case l.Actor5:return"\u718a\u732b";default:return""}},writeUIBaseData:function(e){v.instance.setUIBase(e)},showBaby:function(e,t,i){var o=["baby01","baby02","baby03","baby04","baby05","baby06"],s="spine/baby/";s+=o[w(0,o.length)],cc.loader.loadRes(s,sp.SkeletonData,function(o,s){o&&cc.error(o);var n=new cc.Node;n.setAnchorPoint(.5,0),n.parent=e,n.position=t;var a=n.addComponent("sp.Skeleton");a.skeletonData=s,a.setAnimation(0,"idle",!0),n.scale=0;var c=cc.scaleTo(.3,1).easing(cc.easeOut(3)),r=cc.moveBy(.3,cc.v2(0,50)),l=cc.spawn(c,r),h=cc.moveBy(.6,cc.v2(0,200)),u=cc.callFunc(function(){i&&i()},this),d=cc.sequence(l,h,u,cc.removeSelf());n.runAction(d)})},showDiamond:function(e,t,i,o){cc.loader.loadRes("prefab/blockDiamond",function(s,n){s&&cc.error(s);var a=cc.instantiate(n),c=a.getChildByName("num");c&&(c.getComponent("cc.Label").string=i+""),a.parent=e,a.position=t,a.scale=0;var r=cc.scaleTo(.3,1).easing(cc.easeOut(3)),l=cc.moveBy(.3,cc.v2(0,50)),h=cc.spawn(r,l),u=cc.moveBy(1.2,cc.v2(0,100)),d=cc.callFunc(function(){o&&o()},this),p=cc.sequence(h,u,d,cc.removeSelf());a.runAction(p)})},ReadyGo:function(e){var t=cc.director.getScene()._children[0],i=cc.callFunc(function(){cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,i){var o=i.getSpriteFrame("ready"),s=new cc.Node("");s.group="UI",s.addComponent("cc.Sprite").spriteFrame=o,s.scale=0;var n=cc.scaleTo(.1,1.2).easing(cc.easeOut(3)),a=cc.scaleTo(.1,1.1).easing(cc.easeOut(3)),c=cc.sequence(n,a,cc.fadeOut(.5),cc.removeSelf());s.runAction(c),s.parent=t,s.position=cc.v2(0,0)})},this),o=cc.callFunc(function(){cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(e,i){var o=i.getSpriteFrame("go"),s=new cc.Node("");s.group="UI",s.addComponent("cc.Sprite").spriteFrame=o,s.scale=0;var n=cc.scaleTo(.1,1.2).easing(cc.easeOut(3)),a=cc.scaleTo(.1,1.1).easing(cc.easeOut(3)),c=cc.sequence(n,a,cc.fadeOut(.5),cc.removeSelf());s.runAction(c),s.parent=t,s.position=cc.v2(0,0)})},this),s=cc.callFunc(function(){e&&e()},this),n=cc.sequence(i,cc.delayTime(.7),o,cc.delayTime(1.2),s);t.runAction(n)},cellDirWithCell:function(e,t){if(!e||!t)return d.UnKnown;var i=e.getComponent("Cell"),o=t.getComponent("Cell"),s=i.column,n=i.row,a=o.column,c=o.row;if(s===a){if(n===c+1)return d.Top;if(n===c-1)return d.Bottom}if(n===c){if(s===a+1)return d.Right;if(s===a-1)return d.Left}return s===a-1&&n===c+1?d.LeftUpper:s===a+1&&n===c+1?d.RightUpper:s===a-1&&n===c-1?d.LeftLower:s===a+1&&n===c-1?d.RightLower:d.UnKnown},SetUISpriteFrame:function(e,t,i){cc.loader.loadRes("texture/UI",cc.SpriteAtlas,function(o,s){var n=s.getSpriteFrame(t);e.spriteFrame=n,i&&i()})},GetPetChinaName:function(e){var t=["\u827e\u739b","\u6bd4\u6bd4","\u6bd4\u5229","\u6ce2\u6ce2","\u591a\u5566","\u76d6\u5c14","\u6770\u514b","\u4e54\u4f0a","\u514b\u5c14","\u7f57\u7f57","\u6cab\u6cab","\u83ab\u7eb3","\u4f69\u8482","\u6ce2\u5229","\u745e\u5854","\u5706\u5706"];return e>=0&&e<t.length?t[e]:""},GetRolePetIDlist:function(e){switch(e){case l.Actor1:return[u.Pet1,u.Pet2,u.Pet3];case l.Actor2:return[u.Pet4,u.Pet5,u.Pet6];case l.Actor3:return[u.Pet7,u.Pet8,u.Pet9];case l.Actor4:return[u.Pet10,u.Pet11,u.Pet12];case l.Actor5:return[u.Pet13,u.Pet14,u.Pet15]}return[]},levelData:null,levelID:-1,levelMode:p.Normal,passLevelStars:0,levelResultData:{},fightSceneAudioID:-1,mainSceneAudioID:-1,DayReWardRoleID:1,FreeSpinVal:0,PropFlashCnt:0,LevelEditorBoardData:null,LevelEditorLevelGoles:null,UISpriteAtlas:null,StageSpriteAtlas:null,GetExplorattionPath:function(e){var t="";switch(e){case m.Farm1:case m.Farm2:case m.Farm3:t="texture/farm";break;case m.Forest1:case m.Forest2:case m.Forest3:t="texture/forest";break;case m.Snow1:case m.Snow2:case m.Snow3:t="texture/snow";break;case m.Volcano1:case m.Volcano2:case m.Volcano3:t="texture/volcano"}return t},SkillIDToPetID:function(e){return e-100},GetDayKind:function(e){var t=f.Day;switch(e){case 1:case 2:t=f.Day;break;case 3:t=f.Noon;break;case 4:case 5:t=f.Night;break;case 6:case 7:t=f.Day;break;case 8:t=f.Noon;break;case 9:case 10:t=f.Night}return t},GetActorUIBkFileName:function(e){var t=["png/autumnBk","png/winnerlevelUI","png/desertlevelUI","png/springlevelUI","png/autumnBk"];switch(e){case l.Actor1:return t[0];case l.Actor2:return t[1];case l.Actor3:return t[2];case l.Actor4:return t[3];case l.Actor5:return t[4]}return t[0]},GetActorUIRoad:function(e){var t=["png/autumnlevelBtn","png/winnerlevelBtn","png/Desert_story_level","png/Spring_story_level","png/autumnlevelBtn"];switch(e){case l.Actor1:return t[0];case l.Actor2:return t[1];case l.Actor3:return t[2];case l.Actor4:return t[3];case l.Actor5:return t[4]}return t[0]},CanShowSwitchPet:function(e,t){return!!(t||e>=6)},SpawnShitBomb:function(e,t){var i=n.instance.getBombEffect();if(i){i.parent=e,i.position=t;var o=i.getChildByName("boom");if(o){var s=o.getComponent("PlayAnimation");s&&s.play(function(){var e=i.getChildByName("sys1"),t=i.getChildByName("sys2");e&&e.getComponent(cc.ParticleSystem).resetSystem(),t&&t.getComponent(cc.ParticleSystem).resetSystem(),n.instance.putBombEffect(i)})}}},ProduceReWard:function(e,t,i,o,s,n,a){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"default",r=10;t<r&&(r=t);var l=Math.floor(t/r),h=(Math.floor(t%r),function(){switch(i){case S.ButtonCoin:case S.ScaleCoin:e.updateCoin(l),e.playCoin();break;case S.Diamond:e.updateDiamond(l),e.playCoin()}}.bind(this)),u=function(){switch(i){case S.ButtonCoin:case S.ScaleCoin:e.updateCoin(l),e.playCoin();break;case S.Diamond:e.updateDiamond(l),e.playCoin()}a&&a()}.bind(this);D(i,r,o,s,n,h,u,c)},GetPetLevelShape:y,GetRoleLevelShape:N,GetRoleSkillName:function(e,t){var i=0;switch(N(t)){case c.Level1:i=0;break;case c.Level2:i=1;break;case c.Level3:i=2;break;case c.Level4:i=3}return b[e][i]},GetPetSkillName:function(e,t){var i=0;switch(y(t)){case r.Level1:i=0;break;case r.Level2:i=1;break;case r.Level3:i=2;break;case r.Level4:i=3}return cc.log("petID, level, shape",e,t,i),k[e][i]},IsBoss:function(e){return["BOSS1","BOSS2","BOSS3","BOSS4","BOSS5","BOSS6","BOSS7","BOSS8","BOSS9","BOSS10","BOSS11","BOSS12","BOSS13","BOSS14","BOSS15","BOSS16"].indexOf(e)>=0},IsBossLevel:function(e){var t=e%5;return t=Math.floor(t),e>0&&0===t},KillMonsterCnt:0,KillClearBombCnt:0,SPINTIME:4,SPINCNT:2,ScaleShow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=e.scale,s=cc.scaleTo(i,1.2*o).easing(cc.easeBounceInOut()),n=cc.scaleTo(i,1*o).easing(cc.easeBounceInOut()),a=cc.callFunc(function(){t&&t()},this),c=cc.sequence(s,n,a,null);e.runAction(c)},BounceInOutShow:function(e,t){var i=this.node.scale,o=cc.scaleTo(.08,1.08*i,1.08*i).easing(cc.easeBounceInOut()),s=cc.scaleTo(.08,1*i,1*i).easing(cc.easeBounceInOut()),n=cc.scaleTo(.08,1.05*i,1.05*i).easing(cc.easeBounceInOut()),a=cc.scaleTo(.08,1*i,1*i).easing(cc.easeBounceInOut()),c=cc.callFunc(function(){t&&t()},this),r=cc.sequence(o,s,n,a,c,null);e.runAction(r)},BounceInOutClose:function(e,t){var i=e.scale,o=cc.scaleTo(.08,1.1*i).easing(cc.easeBounceInOut()),s=cc.scaleTo(.08,0).easing(cc.easeBounceInOut()),n=cc.callFunc(function(){t&&t()},this),a=cc.sequence(o,s,n);e.runAction(a)},UseTest:!1,StarNums:[30,45,60,75,90,105,120,135,150],GetExplorationSubStage:function(e){switch(e){case 1:case 2:return m.Farm1;case 3:return m.Farm2;case 4:case 5:return m.Farm3;case 6:case 7:return m.Forest1;case 8:return m.Forest2;case 9:case 10:return m.Forest3;default:return m.Farm1}}},cc._RF.pop()},{EnumDefine:"EnumDefine",LocalStorage:"LocalStorage",PoolMng:"PoolMng",XPoolMng:"XPoolMng"}],Win:[function(e,t,i){"use strict";cc._RF.push(t,"dde8awDcs1Cs6/Rwo1asviQ","Win"),cc.Class({extends:cc.Component,properties:{shine:cc.Node,tip:cc.Node,left:cc.Node,right:cc.Node,isWin:0},ctor:function(){this.show=!1},onLoad:function(){},showLose:function(){var e=cc.moveBy(.5,cc.v2(0,820)).easing(cc.easeBounceInOut());this.tip.runAction(cc.sequence(e,null)),e=cc.moveBy(.5,cc.v2(0,820)).easing(cc.easeBounceInOut()),this.shine.runAction(cc.sequence(e,null));var t=cc.repeatForever(cc.rotateBy(5,360));this.shine.runAction(t);var i=cc.sequence(cc.delayTime(1),cc.removeSelf());this.node.runAction(i)},showWin:function(){var e=this,t=this.left.getComponent("sp.Skeleton");t.setAnimation(0,"idle",!1),t.timeScale=1.8,(t=this.right.getComponent("sp.Skeleton")).setAnimation(0,"idle",!1),t.timeScale=1.8;var i=cc.callFunc(function(){e.showTip()},this);this.node.runAction(cc.sequence(cc.delayTime(.2),i));var o=this;t.setCompleteListener(function(e,t){o.left.active=!1,o.right.active=!1});var s=cc.sequence(cc.delayTime(1.8),cc.removeSelf());this.node.runAction(s)},showTip:function(){var e=cc.moveBy(.5,cc.v2(0,820)).easing(cc.easeOut(3));this.tip.runAction(cc.sequence(e,null)),e=cc.moveBy(.5,cc.v2(0,820)).easing(cc.easeOut(3)),this.shine.runAction(cc.sequence(e,null));var t=cc.repeatForever(cc.rotateBy(5,360));this.shine.runAction(t)},start:function(){}}),cc._RF.pop()},{}],Words:[function(e,t,i){"use strict";cc._RF.push(t,"3416cKRWpFOEYPyVRT0+H+A","Words");var o="\u5e72\u5f97\u597d\uff01\u5347\u7ea7\u5ba0\u7269\u9700\u8981\u6d88\u8017\u91d1\u5e01\u548c\u5361\u724c,\u4f46\u662f\u4f1a\u8ba9\u4ed6\u4eec\u66f4\u5f3a\u5927!",s=["\u827e\u739b","\u6bd4\u6bd4","\u6bd4\u5229","\u6ce2\u6ce2","\u591a\u5566","\u76d6\u5c14","\u6770\u514b","\u4e54\u4f0a","\u514b\u5c14","\u7f57\u7f57","\u6cab\u6cab","\u83ab\u7eb3","\u4f69\u8482","\u6ce2\u5229","\u745e\u5854","\u5706\u5706"],n=["\u5ba0\u7269\u754c\u7b2c\u4e00\u8bdd\u75e8\uff0c\u66fe\u5bf9\u7740\u67d0\u6751\u6c11\u4f83\u4f83\u800c\u8c08\u957f\u8fbe\u4e00\u5c0f\u65f6\uff0c\u7136\u540e\u53d1\u73b0\u4ed6\u5176\u5b9e\u4ec0\u4e48\u4e5f\u542c\u4e0d\u89c1","\u539f\u672c\u662f\u66ae\u677e\u5c71\u4e2d\u7684\u91ce\u517d\uff0c\u540e\u88ab\u6751\u6c11\u9a6f\u5316\uff0c\u4e0e\u6751\u6c11\u4e00\u540c\u5fa1\u654c","\u7c73\u5361\u6700\u4fe1\u8d56\u7684\u4f19\u4f34\uff0c\u5bf9\u4e3b\u4eba\u65e0\u6bd4\u5fe0\u8bda\uff0c\u582a\u79f0\u6700\u4f73\u62cd\u6863","\u6e29\u6587\u5c14\u96c5\u7684\u201c\u5927\u5bb6\u95fa\u79c0\u201d\uff0c\u4f46\u662f\u5979\u52a8\u8d77\u624b\u6765\u5c31\u5f88\u96be\u505c\u4e0b\u4e86","\u56e0\u51fa\u751f\u4e8e\u4e5d\u6708\u4e5d\u65e5\uff0c\u6751\u6c11\u4e3a\u4e86\u7948\u6c42\u5e73\u5b89\u5c31\u53eb\u5b83\u4e5d\u4e5d\uff0c\u5173\u952e\u662f\u5f88\u597d\u8bb0","\u52c7\u731b\u65e0\u754f\u7684\u6597\u58eb\uff0c\u6bcf\u6b21\u90fd\u8ffd\u968f\u4e3b\u4eba\u9760\u9760\u51b2\u950b\u5728\u6700\u524d\u7ebf\uff0c\u54e6\u5bf9\u4e86\uff0c\u5b83\u5bb3\u6015\u6d17\u6fa1","\u5979\u957f\u8fd9\u4e48\u5927\u6700\u60f3\u95ee\u7684\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\uff0c\u5230\u5e95\u662f\u8c01\u7ed9\u5979\u53d6\u4e86\u8fd9\u4e48\u957f\u7684\u540d\u5b57","\u7f57\u5fb7\u8ba4\u4e3a\u5b83\u6ca1\u6709\u4ec0\u4e48\u597d\u8bf4\u7684\uff0c\u6c89\u9ed8\uff0c\u6c89\u9ed8\u800c\u575a\u5b9a\u662f\u4ed6\u6700\u5927\u7684\u4f18\u70b9","\u4e0e\u745e\u5947\u4e00\u8d77\u957f\u5927\u7684\u4f19\u4f34\uff0c\u4e8c\u8005\u6027\u60c5\u4e5f\u6781\u4e3a\u76f8\u4f3c\uff0c\u5747\u5341\u5206\u8e0f\u5b9e\u53ef\u9760","\u55ef\uff0c\u5965\u6258\u5c31\u662f\u4e4c\u745e\u65af\u6700\u559c\u6b22\u6349\u5f04\u7684\u201c\u4ed6\u4eba\u201d\u4e86\uff0c\u77a7\uff0c\u5b83\u521a\u521a\u624d\u54ed\u8fc7","\u5927\u9ad8\u4e2a\u5b50\uff0c\u636e\u8bf4\u5b83\u6253\u7834\u4e86\u540c\u7c7b\u4e2d\u6709\u53f2\u4ee5\u6765\u4fdd\u6301\u51e0\u767e\u5e74\u7684\u6700\u9ad8\u8eab\u9ad8\u8bb0\u5f55","\u6027\u683c\u6709\u70b9\u9ad8\u51b7\uff0c\u800c\u4e14\u636e\u8bf4\u5979\u5176\u5b9e\u4e0d\u662f\u5f88\u559c\u6b22\u88ab\u522b\u4eba\u53eb\u8fd9\u4e2a\u540d\u5b57","\u6587\u827a\u9752\u5e74\uff0c\u68a6\u60f3\u662f\u505a\u4e00\u4e2a\u8bd7\u4eba\uff08\uff1f\uff09\uff0c\u6700\u559c\u6b22\u7684\u5c31\u662f\u5728\u6751\u540e\u6cb3\u8fb9\u770b\u98ce\u666f","\u201c\u770b\u4ec0\u4e48\u770b\uff1f\u770b\u6211\u7684\u540d\u5b57\u5c31\u77e5\u9053\u6211\u957f\u5f97\u53c8\u5c0f\u53c8\u9ed1\u4e86\uff01\u8fd8\u95ee\uff1f\u54ac\u4f60\u54e6\uff01\u201d","\u53e4\u7075\u7cbe\u602a\u7684\u5c0f\u8c03\u76ae\uff0c\u5341\u5206\u559c\u6b22\u6349\u5f04\u4ed6\u4eba","\u7ea2\u8272\u7c73\u5361\uff1a\u8c41\u8fbe\u5f00\u6717\u7684\u4e50\u5929\u6d3e\uff0c\u662f\u6574\u4e2a\u82f1\u96c4\u961f\u4f0d\u7684\u7cbe\u795e\u9886\u8896\uff0c\u4e5f\u662f\u6700\u6d3b\u8dc3\u7684\u89d2\u8272"];t.exports={ActorUI_1:"\u6b22\u8fce\u6765\u5230\u82f1\u96c4\u548c\u5ba0\u7269\u5bb6\u56ed,\u5148\u770b\u770b\u82f1\u96c4",ActorUI_2:"\u6f02\u4eae!\u4f60\u83b7\u5f97\u4e00\u4e9b\u732a\u732a\u5361\u724c!\u8ba9\u6211\u4eec\u6765\u5347\u7ea7\u4ed6.",MapUI_Role1:"\u6211\u4eec\u53bb\u770b\u770b\u89d2\u8272",SpinChest_GetPet1:"\u94a5\u5319\u53ef\u4ee5\u6253\u5f00\u5b9d\u7bb1,\u91cc\u9762\u53ef\u4ee5\u62bd\u5230\u91d1\u5e01\u94bb\u77f3\u548c\u5ba0\u7269\u5361\u724c",SpinChest_GetPet2:"\u606d\u559c\u83b7\u5f97\u4e00\u4e2aB\u7ea7\u5ba0\u7269!\u5ba0\u7269\u4f1a\u589e\u52a0\u82f1\u96c4\u7684\u653b\u51fb\u529b,\u62bd\u53d6\u5bf9\u5ba0\u7269\u8d8a\u591a,\u5ba0\u7269\u7684\u653b\u51fb\u529b\u8d8a\u5f3a.",Drawline_S1:"\u7528\u6280\u80fd\u6765\u5f15\u7206\u70b8\u5f39",Drawline_A1:"\u8fde\u7ebf\u7ea2\u8272\u6c34\u679c\u53ef\u4ee5\u7d2f\u79ef\u82f1\u96c4\u548c\u5ba0\u7269\u80fd\u91cf",Drawline_A2:"\u7eff\u6bdb\u602a\u7269\u6765\u5566!\u8fde\u63a5\u76f8\u540c\u7684\u65b9\u5757\u653b\u51fb\u5b83\uff01",Drawline_A3:"\u7eff\u8272\u7684\u65b9\u5757\u9020\u6210\u5566\u4e00\u4e9b\u4f24\u5bb3,\u4f46\u662f\u5982\u679c\u9009\u62e9\u7ea2\u8272\u7684\u65b9\u5757,\u4f24\u5bb3\u503c\u4f1a\u5927\u7684\u591a\u3002",Drawline_A4:"\u8fde\u7ebf\u6c34\u679c\u53ef\u4ee5\u653b\u51fb\u602a\u7269",Drawline_A5:"\u901a\u8fc7\u6d88\u9664\u6389\u94a5\u5319\u548c\u7bb1\u5b50\u4e4b\u95f4\u7684\u6240\u6709\u65b9\u5757,\u7136\u540e\u94a5\u5319\u53ef\u4ee5\u6253\u5f00\u7bb1\u5b50\u83b7\u7684\u5956\u52b1\uff01",Drawline_A6:"\u8fde\u7ebf\u7c98\u6db2\u8fb9\u4e0a\u7684\u6c34\u679c\u53ef\u4ee5\u6d88\u9664\u7c98\u6db2\u548c\u6728\u6869",Drawline_A7:"\u8fd9\u662f\u4e00\u4e2a\u5e26\u9632\u5fa1\u7f69\u7684\u602a\u7269,\u53ea\u6709 \u7ea2\u8272\u624d\u53ef\u4ee5\u653b\u51fb\u9632\u5fa1\u7f69",Drawline_A8:"\u606d\u559c\u4f60\u6765\u5230boss\u5173\u5361,\u51fb\u8d25boss\u53ef\u4ee5\u83b7\u5f97\u5f00\u5b9d\u7bb1\u5230\u94a5\u5319\u5956\u52b1!",Pets_RoleDescription:n,SpinCards_1:"\u6f02\u4eae!\u4f60\u5b8c\u6210\u4e86\u4e00\u4e2a\u5173\u5361\uff0c\u83b7\u5f97\u4e00\u4e2a\u5b9d\u7bb1,\u8ba9\u6211\u4eec\u6253\u5f00\u5b83\u3002",CartoonFarm_1:"\u79cb\u5929\u5230\u4e86,\u6210\u719f\u7684\u519c\u4f5c\u7269\u4f1a\u5438\u5f15\u66f4\u591a\u602a\u7269,\u591a\u52a0\u5c0f\u5fc3",CartoonFarm_2:"\u66f4\u591a\u602a\u7269\u6b63\u5728\u6210\u7fa4\u7ed3\u961f\u7684\u8d76\u6765",CartoonFarm_3:"\u52c7\u58eb\u4eec\u96c6\u7ed3\u8d77\u6765!",CartoonForest_1:"\u5598\u6025\u7684\u6cb3\u6c34\u963b\u6321\u5566\u602a\u7269\u5bf9\u811a\u6b65,\u4f46\u4e5f\u7ed9\u82f1\u96c4\u4eec\u7684\u884c\u8fdb\u589e\u52a0\u5566\u963b\u529b",CartoonForest_2:"\u524d\u65b9\u5c31\u662f\u82f1\u96c4\u4eec\u5c45\u4f4f\u7684\u6751\u5e84,\u62ff\u8d77\u6b66\u5668,\u628a\u602a\u7269\u8d76\u51fa\u82f1\u96c4\u7684\u5bb6\u56ed\u3002",CartoonForest_3:"",ExplorationTitles:["\u5e03\u565c\u6751\u5e84","\u5e03\u565c\u6751\u5e84","\u84dd\u9f99\u54e8\u7ad9","\u84dd\u9f99\u54e8\u7ad9","\u84dd\u9f99\u54e8\u7ad9","\u91ce\u732a\u4e1b\u6797","\u91ce\u732a\u4e1b\u6797","\u7ea2\u6bdb\u87f9\u6cb3\u6ee9","\u665a\u4e0a\u68ee\u6797","\u72ec\u773c\u6d1e\u7a9f"],Endless_1:"\u8fd9\u662f\u65e0\u5c3d\u6a21\u5f0f,\u91cc\u9762\u4f1a\u51fa\u73b0\u968f\u673a\u4e8b\u4ef6,\u4e8b\u60c5\u4f1a\u4ea7\u751f\u4efb\u52a1,\u5956\u52b1\u548c\u60e9\u7f5a, \u5b8c\u6210\u4efb\u52a1\u4f1a\u83b7\u5f97\u5956\u52b1, \u5931\u8d25\u4f1a\u83b7\u5f97\u60e9\u7f5a!",getPetName:function(e){return s[e-1]},getUpGradePet:function(){return o}},cc._RF.pop()},{}],XPoolMng:[function(e,t,i){"use strict";cc._RF.push(t,"ab628deyRdEaKzyEzVZI3WB","XPoolMng");var o=e("CardPool"),s=e("CDPool"),n=cc.Class({extends:cc.Component,properties:{cardPool:{default:[],type:o},cdPool:{default:[],type:s}},onLoad:function(){n.instance=this,this.init()},statics:{instance:null},init:function(){for(var e=0;e<this.cardPool.length;++e)this.cardPool[e].init();for(var t=0;t<this.cdPool.length;++t)this.cdPool[t].init()},getCard:function(e){var t=null,i=this.cardPool[e];return i&&(t=i.get()),t},putCard:function(e,t){var i=this.cardPool[t];i?i.put(e):obj.destory()},getCD:function(e){var t=null,i=this.cdPool[e];return i&&(t=i.get()),t},putCD:function(e,t){var i=this.cdPool[t];i?i.put(e):obj.destory()}});cc._RF.pop()},{CDPool:"CDPool",CardPool:"CardPool"}],en:[function(e,t,i){"use strict";cc._RF.push(t,"920c5VLzJxKjYCAoIUwUHym","en"),t.exports={example_case_tips_content:"The example case not support the current platform",example_case_nonsupport_native_desktop_tips:"The example case nonsupport the Mac platform and Windows platform",example_case_nonsupport_runtime_tips:"The example case does not support the runtime platform",example_case_nonsupport_mobile_tips:"The example case nonsupport mobile platforms",example_case_nonsupport_web_canvas_tips:"The example case nonsupport Canvas mode",example_case_support_webGl_tips:"The example case only supports WebGL mode",example_case_support_mobile_tips:"The example case only supports mobile platforms",example_case_support_mobile_android_tips:"The example case only supports Android mobile platform",example_case_support_native_chrome_tips:"The example case only supports Chrome browser (Native)",example_case_support_native_desktop_tips:"The example case only supports the Mac platform and Windows platform",example_case_nonsupport_preview_tips:"The example case nonsupport Preview",example_case_nonsupport_qqplay_tips:"The example case nonsupport QQplay",example_case_nonsupport_Wechatgame_tips:"The example case nonsupport Wechatgame","cases/01_graphics/01_sprite/AtlasSprite.fire.7":"This is Spirte Single.","cases/01_graphics/01_sprite/AtlasSprite.fire.11":"This is Spirte From Atlas.","cases/01_graphics/01_sprite/FilledSprite.fire.9":"Fill Type: HORIZONTAL","cases/01_graphics/01_sprite/FilledSprite.fire.15":"Fill Type: VERTICAL","cases/01_graphics/01_sprite/FilledSprite.fire.23":"FILL Type: RADIAL","cases/01_graphics/01_sprite/SimpleSprite.fire.7":"This is Simple Sprite.","cases/01_graphics/01_sprite/SlicedSprite.fire.7":"This is Sliced Sprite.","cases/01_graphics/01_sprite/TiledSprite.fire.6":"This is Tiled Sprite.","cases/01_graphics/01_sprite/ChangeColor.fire.1":"Draw Call should be changed when change color.","cases/01_graphics/01_sprite/TrimmedSprite.fire.7":"TRIMMED ","cases/01_graphics/01_sprite/TrimmedSprite.fire.12":"No TRIMMED","cases/01_graphics/02_particle/AutoRemoveParticle.fire.9":'Particle 1\n"Auto Remove On Finish" disabled',"cases/01_graphics/02_particle/AutoRemoveParticle.fire.13":'Particle 2\n"Auto Remove On Finish" enabled',"cases/01_graphics/02_particle/ToggleParticle.fire.6":'Press "Button" to toggle particle play',"cases/02_ui/01_widget/AdvancedWidget.fire.7":"Top Left","cases/02_ui/01_widget/AdvancedWidget.fire.9":"top: 10% left: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.14":"Top Left","cases/02_ui/01_widget/AdvancedWidget.fire.16":"top: -34px","cases/02_ui/01_widget/AdvancedWidget.fire.21":"Top Right","cases/02_ui/01_widget/AdvancedWidget.fire.23":"top: 10% right: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.28":"Left","cases/02_ui/01_widget/AdvancedWidget.fire.30":"left: -50px","cases/02_ui/01_widget/AdvancedWidget.fire.35":"Right","cases/02_ui/01_widget/AdvancedWidget.fire.37":"right: -50px","cases/02_ui/01_widget/AdvancedWidget.fire.42":"Bottom Left","cases/02_ui/01_widget/AdvancedWidget.fire.44":"bottom: 10% left: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.49":"Bottom","cases/02_ui/01_widget/AdvancedWidget.fire.51":"bottom: -34px","cases/02_ui/01_widget/AdvancedWidget.fire.56":"Bottom Right","cases/02_ui/01_widget/AdvancedWidget.fire.58":"bottom:10% right:6%","cases/02_ui/01_widget/AdvancedWidget.fire.63":"This is Advanced WIdget.","cases/02_ui/01_widget/AlignOnceWidget.fire.1":"AlignOne is false, It is always aligns","cases/02_ui/01_widget/AlignOnceWidget.fire.2":"AlignOne is true, It aligns only once","cases/02_ui/01_widget/AnimatedWidget.fire.9":"This is Animation Widget.","cases/02_ui/01_widget/AutoResize.fire.13":"This is Widget Auto Resize.","cases/02_ui/01_widget/WidgetAlign.fire.18":"This is Widget Align.","cases/02_ui/02_label/GoldBeatingAnime.js.1":"0","cases/02_ui/02_label/AlignFontLabel.fire.6":"Align Label","cases/02_ui/02_label/AlignFontLabel.fire.9":"Horizontal Align","cases/02_ui/02_label/AlignFontLabel.fire.14":"Hello! \nWelcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.16":"Align: LEFT","cases/02_ui/02_label/AlignFontLabel.fire.21":"Hello! \nWelcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.23":"Align: CENTER","cases/02_ui/02_label/AlignFontLabel.fire.28":"Hello! \nWelcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.30":"Align: RIGHT","cases/02_ui/02_label/AlignFontLabel.fire.33":"Vertical Align","cases/02_ui/02_label/AlignFontLabel.fire.38":"Welcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.40":"Align: TOP","cases/02_ui/02_label/AlignFontLabel.fire.45":"Welcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.47":"Align: CENTER","cases/02_ui/02_label/AlignFontLabel.fire.52":"Welcome Come To \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.54":"Align: BOTTOM","cases/02_ui/02_label/SystemFontLabel.fire.6":"System Font","cases/02_ui/02_label/SystemFontLabel.fire.9":"Wrap","cases/02_ui/02_label/SystemFontLabel.fire.14":"This is System Font","cases/02_ui/02_label/SystemFontLabel.fire.16":"Overflow: CLAMP","cases/02_ui/02_label/SystemFontLabel.fire.21":"This is System Font","cases/02_ui/02_label/SystemFontLabel.fire.23":"Overflow: SHRINK","cases/02_ui/02_label/SystemFontLabel.fire.26":"No Wrap","cases/02_ui/02_label/SystemFontLabel.fire.31":"This is System Font","cases/02_ui/02_label/SystemFontLabel.fire.33":"Overflow: CLAMP","cases/02_ui/02_label/SystemFontLabel.fire.38":"This is System Font","cases/02_ui/02_label/SystemFontLabel.fire.40":"Overflow: SHRINK","cases/02_ui/02_label/SystemFontLabel.fire.45":"Hello! Welcome Come To Cocos Creator","cases/02_ui/02_label/SystemFontLabel.fire.47":"Overflow: RESZIE_HEIGHT","cases/02_ui/03_button/ButtonInScroll.js.1":"Top button clicked!","cases/02_ui/03_button/ButtonInScroll.js.2":"Bottom button clicked!","cases/02_ui/03_button/ButtonInScroll.fire.21":"Which button is clicked?","cases/02_ui/03_button/ButtonInScroll.fire.27":"drag to reveal more buttons","cases/02_ui/03_button/SimpleButton.js.1":"Left button clicked!","cases/02_ui/03_button/SimpleButton.js.2":"Right button clicked!","cases/02_ui/03_button/ButtonInteractable.fire.7":"PLAY","cases/02_ui/03_button/ButtonInteractable.fire.16":"STOP","cases/02_ui/03_button/ButtonInteractable.fire.21":"interactable: true","cases/02_ui/03_button/ButtonInteractable.fire.23":"interactable: false","cases/02_ui/03_button/ButtonInteractable.js.1":"interactable: ","cases/02_ui/03_button/ButtonInteractable.js.2":"interactable: ","cases/02_ui/03_button/SimpleButton.fire.6":"Which button is clicked?","cases/02_ui/04_progressbar/progressbar.fire.7":"Horizontal bar with progress 0.3","cases/02_ui/04_progressbar/progressbar.fire.11":"Horizontal bar reverse with progress 1.0","cases/02_ui/04_progressbar/progressbar.fire.15":"Vertical bar \nfrom bottom","cases/02_ui/04_progressbar/progressbar.fire.19":"Vertical bar \nfrom top","cases/02_ui/04_progressbar/progressbar.fire.23":"Progress bar with sprite","cases/02_ui/04_progressbar/progressbar.fire.28":"Progress bar with child sprite","cases/02_ui/05_scrollView/Item.js.1":"Tmpl#","cases/02_ui/05_scrollView/ListView.fire.23":"Item #00","cases/02_ui/05_scrollView/ScrollView.fire.7":"Scrollview full functionality","cases/02_ui/05_scrollView/ScrollView.fire.30":"Scrollview without inertia","cases/02_ui/05_scrollView/ScrollView.fire.53":"Scrollview without elastic","cases/02_ui/05_scrollView/ScrollView.fire.76":"Scrollview horizontal scroll only","cases/02_ui/05_scrollView/ScrollView.fire.93":"Scrollview vertical only","cases/02_ui/05_scrollView/ScrollView.fire.110":"Scrollview no scrollbar","cases/02_ui/06_layout/LayoutResizeContainer.fire.6":"Basic","cases/02_ui/06_layout/LayoutResizeContainer.fire.31":"Horizontal","cases/02_ui/06_layout/LayoutResizeContainer.fire.36":"Vertical","cases/02_ui/06_layout/LayoutResizeContainer.fire.41":"Grid Layout Axis horizontal","cases/02_ui/06_layout/LayoutResizeContainer.fire.46":"Grid Layout Axis vertical","cases/02_ui/06_layout/LayoutResizeChildren.fire.6":"Horizontal layout none","cases/02_ui/06_layout/LayoutResizeChildren.fire.31":"Vertical layout none","cases/02_ui/06_layout/LayoutResizeChildren.fire.48":"Grid start axis horizontal none","cases/02_ui/06_layout/LayoutResizeChildren.fire.85":"Grid start axis vertical none","cases/02_ui/06_layout/LayoutInScrollView.fire.6":"ScrollView with vertical  layout","cases/02_ui/06_layout/LayoutInScrollView.fire.40":"ScrollView with horizontal layout","cases/02_ui/06_layout/LayoutInScrollView.fire.74":"ScrollView with Grid Layout\nstart axis: horizontal ","cases/02_ui/06_layout/LayoutInScrollView.fire.144":"ScrollView with Grid Layout\nstart axis: vertical ","cases/02_ui/06_layout/LayoutNone.fire.6":"Basic layout, Type: None\nResize container","cases/02_ui/06_layout/LayoutNone.fire.35":"Horizontal layout None\nNo resize","cases/02_ui/06_layout/LayoutNone.fire.60":"Vertical layout, Type: None\nNo resize","cases/02_ui/06_layout/LayoutNone.fire.77":"Grid start axis: horizontal, Type: None\nNo resize","cases/02_ui/06_layout/LayoutNone.fire.142":"Grid start axis: vertical, Type: None\nNo resize","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.8":"x:0, y:0","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.12":"x:480, y:320","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.16":"x:960, y:640","cases/02_ui/07_editBox/editbox.js.1":"Enter Text: ","cases/02_ui/07_editBox/EditBox.fire.25":"Single Line Password:","cases/02_ui/07_editBox/EditBox.fire.27":"Single Line Text:","cases/02_ui/07_editBox/EditBox.fire.29":"Mutiple Line Text:","cases/02_ui/07_editBox/EditBox.fire.32":"Click","cases/02_ui/07_editBox/EditBox.fire.38":"Button must be on top of EditBox, \nand it should enable click.","cases/02_ui/09_videoplayer/fullscreenVideo.fire":"When you touch the screen, video will be played. \n It will be removed when video complete.","cases/02_ui/09_videoplayer/videoPlayer.nonsupport_fullscreen":"currect device does nonsupport fullscreen.","cases/03_gameplay/01_player_control/EventManager/KeyboardInput.fire.6":"Press 'A' or 'D' to control sheep","cases/03_gameplay/01_player_control/On/OnTouchCtrl.js.1":"touch (","cases/03_gameplay/01_player_control/On/OnTouchInput.fire.10":"Try touching anywhere.","cases/03_gameplay/01_player_control/On/OnMultiTouchInput.fire.20":"The sample can only be effective on mobile platforms!","cases/03_gameplay/01_player_control/On/OnMultiTouchInput.fire.21":"Use your fingers to zoom image!","cases/03_gameplay/01_player_control/On/DeviceMotion.fire.1":"Open Accelerometer","cases/03_gameplay/01_player_control/On/DeviceMotion.fire.2":"Close Accelerometer","cases/03_gameplay/02_actions/SimpleAction.fire.13":"This is Simple Action.","cases/03_gameplay/03_animation/AnimateCustomProperty.fire.14":"Label","cases/03_gameplay/03_animation/AnimateCustomProperty.fire.18":"This is Animate Custom Property.","cases/03_gameplay/03_animation/AnimationEvent.fire.6":"Start the first animation","cases/03_gameplay/03_animation/AnimationEvent.fire.14":"This is Animation Event.","cases/03_gameplay/03_animation/AnimationEvent.js.1":"Start the","cases/03_gameplay/03_animation/MoveAnimation.fire.11":"Linear","cases/03_gameplay/03_animation/MoveAnimation.fire.17":"Case In Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.23":"Case Out Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.29":"Case Out In Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.35":"Back Forward","cases/03_gameplay/03_animation/MoveAnimation.fire.41":"This is Move Animation.","cases/03_gameplay/03_animation/SpriteAnimation.fire.9":"This is SprieFrame Animation.","cases/03_gameplay/03_animation/CreateClip.fire.1":"Dynamic Creating AnimationClip","cases/04_audio/SimpleAudio.fire.6":"Enjoy the music!","cases/05_scripting/01_properties/NodeArray.fire.14":"This is Node Array.","cases/05_scripting/01_properties/NonSerialized.fire.6":"Label","cases/05_scripting/01_properties/NonSerialized.fire.8":"Label","cases/05_scripting/01_properties/NonSerialized.fire.10":"This is Non Serialized.","cases/05_scripting/01_properties/ReferenceType.fire.8":"Label","cases/05_scripting/01_properties/ReferenceType.fire.11":"This example does not include the runtime demonstration","cases/05_scripting/01_properties/ValueType.fire.6":"This example does not include the runtime demonstration","cases/05_scripting/02_prefab/InstantiatePrefab.fire.7":"This is Instantiate Prefab.","cases/05_scripting/03_events/EventInMask.fire.23":"Change order of nodes","cases/05_scripting/03_events/SimpleEvent.fire.19":"Touch event can support click","cases/05_scripting/03_events/SimpleEvent.fire.21":"Mouse event can support click, hover, wheel","cases/05_scripting/03_events/SimpleEvent.fire.23":"Custom event can be triggered manually\n(Click button above)","cases/05_scripting/03_events/SimpleEvent.fire.25":"This is Simple Event.","cases/05_scripting/03_events/TouchPropagation.fire.15":"This is Touch Propagation.","cases/05_scripting/03_events/MousePropagation.fire.1":"This is Mouse Propagation.","cases/05_scripting/04_scheduler/scheduleCallbacks.js.1":"5.00 s","cases/05_scripting/04_scheduler/scheduler.fire.9":"5.00 s","cases/05_scripting/04_scheduler/scheduler.fire.12":"Repeat Schedule","cases/05_scripting/04_scheduler/scheduler.fire.18":"Cancel Schedules","cases/05_scripting/04_scheduler/scheduler.fire.24":"Schedule Once","cases/05_scripting/04_scheduler/scheduler.fire.29":"Counter use update function to change string value each frame","cases/05_scripting/04_scheduler/scheduler.fire.31":"This is Scheduler.","cases/05_scripting/04_scheduler/recursiveScheduler.fire.0":"Click button to start recursive tasks, you should see task2 invoked at last.","cases/05_scripting/04_scheduler/recursiveScheduler.fire.1":"Task1 invoked","cases/05_scripting/04_scheduler/recursiveScheduler.fire.2":"Task2 invoked","cases/05_scripting/04_scheduler/recursiveScheduler.fire.3":"Start tasks","cases/05_scripting/05_cross_reference/CrossReference.fire.7":"Label","cases/05_scripting/05_cross_reference/CrossReference.fire.12":"Label","cases/05_scripting/05_cross_reference/CrossReference.fire.14":"This is Cross Reference.","cases/05_scripting/06_life_cycle/life_cycle.fire.6":"This is Life cycle.","cases/05_scripting/07_asset_loading/AssetLoading.fire.5":"Asset Loading","cases/05_scripting/07_asset_loading/AssetLoading.fire.9":"Load SpriteFrame","cases/05_scripting/07_asset_loading/AssetLoading.fire.15":"Load Texture","cases/05_scripting/07_asset_loading/AssetLoading.fire.21":"Load Audio","cases/05_scripting/07_asset_loading/AssetLoading.fire.27":"Load Txt","cases/05_scripting/07_asset_loading/AssetLoading.fire.33":"Load Font","cases/05_scripting/07_asset_loading/AssetLoading.fire.39":"Load Plist","cases/05_scripting/07_asset_loading/AssetLoading.fire.45":"Load Prefab","cases/05_scripting/07_asset_loading/AssetLoading.fire.51":"Load Scene","cases/05_scripting/07_asset_loading/AssetLoading.fire.57":"Load Animation","cases/05_scripting/07_asset_loading/AssetLoading.fire.59":"Load Spine","cases/05_scripting/07_asset_loading/AssetLoading.fire.65":"Not currently loaded Entity.","cases/05_scripting/07_asset_loading/AssetLoading.js.1":"Loaded ","cases/05_scripting/07_asset_loading/AssetLoading.js.2":"Play ","cases/05_scripting/07_asset_loading/AssetLoading.js.3":"Create ","cases/05_scripting/07_asset_loading/AssetLoading.js.4":"Playing Music.","cases/05_scripting/07_asset_loading/AssetLoading.js.5":"This is Font!","cases/05_scripting/07_asset_loading/LoadRes.fire.7":"By Type","cases/05_scripting/07_asset_loading/LoadRes.fire.10":"Load SpriteFrame","cases/05_scripting/07_asset_loading/LoadRes.fire.17":"By Url","cases/05_scripting/07_asset_loading/LoadRes.fire.20":"Load Prefab","cases/05_scripting/07_asset_loading/LoadResAll.fire.6":"LoadResDir","cases/05_scripting/07_asset_loading/LoadResAll.fire.24":"Load All","cases/05_scripting/07_asset_loading/LoadResAll.fire.30":"Load SpriteFrame All","cases/05_scripting/07_asset_loading/LoadResAll.fire.36":"Clear All","cases/05_scripting/08_module/load_module.fire.6":"Load Module","cases/05_scripting/08_module/load_module.fire.10":"Create Monster","cases/05_scripting/09_singleton/Singleton.fire.6":"This example does not include the runtime demonstration","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.1":"download complete!!","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.2":"dowloading: ","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.3":"click anywhere to download...","cases/05_scripting/10_loadingBar/loadingBar.fire.7":"Loading Completed","cases/05_scripting/10_loadingBar/loadingBar.fire.18":"Dowloading","cases/05_scripting/11_network/NetworkCtrl.js.1":"waiting...","cases/05_scripting/11_network/NetworkCtrl.js.2":"waiting...","cases/05_scripting/11_network/NetworkCtrl.js.3":"waiting...","cases/05_scripting/11_network/NetworkCtrl.js.4":"waiting...","cases/05_scripting/11_network/NetworkCtrl.js.5":"WebSocket\\nSend Binary WS was opened.","cases/05_scripting/11_network/NetworkCtrl.js.6":"WebSocket\\nResponse get.","cases/05_scripting/11_network/NetworkCtrl.js.7":"WebSocket\\nsendBinary Error was fired.","cases/05_scripting/11_network/NetworkCtrl.js.8":"WebSocket\\nwebsocket instance closed.","cases/05_scripting/11_network/NetworkCtrl.js.9":"WebSocket\\nSend Binary WS is waiting...","cases/05_scripting/11_network/NetworkCtrl.js.10":"WebSocket\\n","cases/05_scripting/11_network/NetworkCtrl.js.11":"SocketIO\\n","cases/05_scripting/11_network/NetworkCtrl.js.12":"SocketIO\\n","cases/05_scripting/11_network/NetworkCtrl.js.13":"SocketIO\\n","cases/05_scripting/11_network/NetworkCtrl.js.14":"SocketIO\\n","cases/05_scripting/11_network/network.fire.7":"Label","cases/05_scripting/11_network/network.fire.6":"XMLHttpRequest","cases/05_scripting/11_network/network.fire.11":"Label","cases/05_scripting/11_network/network.fire.10":"XMLHttpRequest (ArrayBuffer)","cases/05_scripting/11_network/network.fire.15":"Label","cases/05_scripting/11_network/network.fire.14":"WebSocket","cases/05_scripting/11_network/network.fire.19":"Label","cases/05_scripting/11_network/network.fire.18":"SocketIO","cases/05_scripting/11_network/download-web.fire.1.1":"Remote Audio DownLoad","cases/05_scripting/11_network/download-web.fire.1.2":"Remote Picture DownLoad","cases/05_scripting/11_network/download-web.fire.2":"Wait For DownLoading...","cases/05_scripting/11_network/download-web.fire.3":"DownLoad Process\uff1a","cases/05_scripting/11_network/download-web.fire.4.1":"Audio DownLoad Completed","cases/05_scripting/11_network/download-web.fire.4.2":"Picture DownLoad Completed","cases/05_scripting/11_network/download-web.fire.5.1":"Audio DownLoad Failed","cases/05_scripting/11_network/download-web.fire.5.2":"Picture DownLoad Failed","cases/05_scripting/11_network/download-web.fire.6":"Remote Url:","cases/05_scripting/11_network/download-web.fire.7":"download","cases/05_scripting/11_network/download-web.fire.8":"SlideToNext","cases/05_scripting/11_network/download-web.fire.9":"SlideToPreview","cases/05_scripting/11_network/download-web.fire.10":"Url Is Unavailable","cases/native_call/native_call.fire.1":"JS to JAVA reflection only works Android mobile platform!","cases/native_call/native_call.fire.2":"Click on the button calls the static method!","cases/native_call/native_call.fire.3":"Click","cases/collider/Category.fire.3":"Group: Collider","cases/collider/Category.fire.5":"Group: Collider","cases/collider/Category.fire.7":"Group: Collider","cases/collider/Category.fire.9":"Group: Default","cases/collider/Shape.fire.20":"Show Polygon","cases/collider/Shape.fire.27":"Show Circle","cases/collider/Shape.fire.34":"Show Box","cases/collider/Shape.fire.43":"Show Polygon","cases/collider/Shape.fire.50":"Show Circle","cases/collider/Shape.fire.57":"Show Box","cases/motionStreak/MotionStreak.fire.1":"Change MotionStreak","cases/spine/SpineBoy.fire.11":"Debug Slots","cases/spine/SpineBoy.fire.18":"Debug Bones","cases/spine/SpineBoy.fire.25":"Time Scale","cases/spine/SpineBoy.fire.36":"Stop","cases/spine/SpineBoy.fire.43":"Walk","cases/spine/SpineBoy.fire.50":"Run","cases/spine/SpineBoy.fire.58":"Jump","cases/spine/SpineBoy.fire.65":"Shoot","cases/tiledmap/Puzzle.fire.18":"You Win","cases/tiledmap/Puzzle.fire.21":"Restart","cases/tiledmap/Dynamic-Tiledmap.fire.22":"Dynamically created TiledMap","res/prefabs/ListItem.prefab.2":"Label ssss","res/prefabs/Monster.prefab.3":"Name:","res/prefabs/Monster.prefab.11":"Level :","res/prefabs/Monster.prefab.19":"Hp :","res/prefabs/Monster.prefab.27":"Attack :","res/prefabs/Monster.prefab.35":"Defense :","res/prefabs/loadItem.prefab.1":"Label","resources/test_assets/prefab.prefab.2":"This is Prefab","resources/test_assets/scene.fire.3":"Return Asset Loading Scene","resources/test_assets/scene.fire.6":"Return","scripts/Global/Menu.js.1":"Temporary lack of introduction","cases/subpackage":"Load Subpackage","cases/subpackage.loaded":"Subpackage is loaded","cases/subpackage.failed":"Failed to load the package, please check the console for details","scripts/AudioCtrl_Play":"Play","scripts/AUdioCtrl_Stop":"Stop","scripts/AUdioCtrl_Pause":"Pause","scripts/AUdioCtrl_Resume":"Resume","scripts/AUdioCtrl_StopAll":"StopAll","scripts/AUdioCtrl_PauseAll":"PauseAll","scripts/AUdioCtrl_ResumeAll":"ResumeAll",sprite_loadRes_asset_success:"Load Success",sprite_loadRes_asset_failed:"Load Failed"},cc._RF.pop()},{}],i18n:[function(e,t,i){"use strict";cc._RF.push(t,"93789C/shtIL6entYsZPjee","i18n");var o=e("polyglot"),s="zh"===cc.sys.language?e("zh"):e("en"),n=new o({phrases:s,allowMissing:!0});t.exports={init:function(t){lang=t,s=e("zh"===t?"zh":"en"),n.replace(s)},t:function(e,t){return n.t(e,t)}},cc._RF.pop()},{en:"en",polyglot:"polyglot",zh:"zh"}],levelEditor:[function(e,t,i){"use strict";cc._RF.push(t,"2c85fTr7H1Pj6xUh68zFNUp","levelEditor");var o=e("EnumDefine").CellType,s=e("EnumDefine").LevelEditorID,n=e("EnumDefine").ChestType,a=e("EnumDefine").StarLevelKind,c=e("EnumDefine").MonsterShieldType,r=e("EnumDefine").SaliveKind,l=e("EnumDefine").MonsterSkillKind,h=e("Utils").NUMROWS,u=(e("Utils").NUMCOLUMNS,e("JsonData"),e("PoolMng"),e("Utils"),92*h),d=92*h;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.leveltarget=this.node.getChildByName("\u5173\u5361\u76ee\u6807"),this.levelProbability=this.node.getChildByName("\u4e0b\u843d\u6982\u7387"),this.levelBoard=this.node.getChildByName("\u5143\u7d20\u5e03\u5c40"),this.levelMonsters=this.node.getChildByName("\u602a\u7269\u5e03\u5c40"),this._map={};var e={},t="\u5143\u7d201",i={celltype:o.Cell1,lv:1};e[t]=i,t="\u5143\u7d202",i={celltype:o.Cell2,lv:1},e[t]=i,t="\u5143\u7d203",i={celltype:o.Cell3,lv:1},e[t]=i,t="\u5143\u7d204",i={celltype:o.Cell4,lv:1},e[t]=i,t="\u5143\u7d205",i={celltype:o.Cell5,lv:1},e[t]=i,t="\u7a7a\u5143\u7d20",i={celltype:o.NoneCell,lv:1},e[t]=i,t="\u56fa\u6001\u5143\u7d20",i={celltype:o.SolidCell,lv:1},e[t]=i,t="\u6742\u8349\u56fa\u5b9a\u5143\u7d20",i={celltype:o.SolidCell,lv:1},e[t]=i,t="\u6e05\u5c4f\u70b8\u5f39",i={celltype:o.ClearBombProp,lv:1},e[t]=i,t="\u7ea2\u8272\u6a2a\u6761\u6280\u80fd",i={celltype:o.One_Horinal1,lv:1},e[t]=i,t="\u4e0b\u843d\u7269\u4f53",i={celltype:o.DropBottomBox,lv:1},e[t]=i,t="\u6742\u83491",i={celltype:o.Weeds,lv:1},e[t]=i,t="\u6742\u83492",i={celltype:o.Weeds,lv:2},e[t]=i,t="\u6742\u83493",i={celltype:o.Weeds,lv:3},e[t]=i,t="\u6811\u68691",i={celltype:o.Stakes,lv:1},e[t]=i,t="\u6811\u68692",i={celltype:o.Stakes,lv:2},e[t]=i,t="\u6811\u68693",i={celltype:o.Stakes,lv:3},e[t]=i,t="\u7bf1\u7b061",i={celltype:o.Fence,lv:1},e[t]=i,t="\u7bf1\u7b062",i={celltype:o.Fence,lv:2},e[t]=i,t="\u7bf1\u7b063",i={celltype:o.Fence,lv:3},e[t]=i,t="\u7c98\u6db2\u8986\u76d6\u72691",i={celltype:o.BlockCover,lv:1},e[t]=i,t="\u7c98\u6db2\u8986\u76d6\u72692",i={celltype:o.BlockCover,lv:2},e[t]=i,t="\u7c98\u6db2\u8986\u76d6\u72693",i={celltype:o.BlockCover,lv:3},e[t]=i,t="\u94a5\u5319\u4e0a",i={celltype:o.KeyUp,lv:1},e[t]=i,t="\u94a5\u5319\u4e0b",i={celltype:o.KeyDown,lv:1},e[t]=i,t="\u94a5\u5319\u5de6",i={celltype:o.KeyLeft,lv:1},e[t]=i,t="\u94a5\u5319\u53f3",i={celltype:o.KeyRight,lv:1},e[t]=i,t="\u9053\u5177\u5b9d\u7bb1",i={celltype:o.Chest,lv:1,type:n.Prop},e[t]=i,t="\u6280\u80fd\u5b9d\u7bb1",i={celltype:o.Chest,lv:1,type:n.Skill},e[t]=i,t="\u91d1\u5e01\u5b9d\u7bb1",i={celltype:o.Chest,lv:1,type:n.Coin},e[t]=i,t="\u94bb\u77f3\u5b9d\u7bb1",i={celltype:o.Chest,lv:1,type:n.Diamond},e[t]=i,t="\u94bb\u77f3",i={celltype:o.BlockDiamond,lv:1},e[t]=i,t="\u9694\u79bb\u6761\u4e0a1\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:1,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u4e0a2\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:2,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u4e0a3\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:3,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u4e0b1\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:0,bcnt:1},e[t]=i,t="\u9694\u79bb\u6761\u4e0b2\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:0,bcnt:2},e[t]=i,t="\u9694\u79bb\u6761\u4e0b3\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:0,tcnt:0,bcnt:3},e[t]=i,t="\u9694\u79bb\u6761\u5de61\u7ea7",i={celltype:o.BlockSide,lcnt:1,rcnt:0,tcnt:0,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u5de62\u7ea7",i={celltype:o.BlockSide,lcnt:2,rcnt:0,tcnt:0,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u5de63\u7ea7",i={celltype:o.BlockSide,lcnt:3,rcnt:0,tcnt:0,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u53f31\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:1,tcnt:0,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u53f32\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:2,tcnt:0,bcnt:0},e[t]=i,t="\u9694\u79bb\u6761\u53f33\u7ea7",i={celltype:o.BlockSide,lcnt:0,rcnt:3,tcnt:0,bcnt:0},e[t]=i,this._map=e},start:function(){},readBoardCells:function(){var e=[],t=[],i=[];if(this.levelBoard)for(var s=this.levelBoard.children,n=0;n<s.length;n++){var a=s[n],c=a.name,r=this._map[c];if(r){var l={},h=a.position,p=(h.x+u/2-46)/92,v=(h.y+d/2-46)/92;switch(p=Math.round(p),v=Math.round(v),l.ID=r.celltype,l.ID){case o.Chest:l.column=p,l.row=v,l.lv=r.lv,l.ChestType=r.type,this.pushCellData(l,e);break;case o.BlockCover:l.column=p,l.row=v,l.lv=r.lv,this.pushCellData(l,i);break;case o.BlockSide:if(this.checkSameID(p,v,t))for(var f=0;f<t.length;f++){var m=t[f];m.row===v&&m.column===p&&(m.sideLNum+=r.lcnt,m.sideRNum+=r.rcnt,m.sideTNum+=r.tcnt,m.sideBNum+=r.bcnt,m.sideLNum=m.sideLNum>=3?3:m.sideLNum,m.sideRNum=m.sideRNum>=3?3:m.sideRNum,m.sideTNum=m.sideTNum>=3?3:m.sideTNum,m.sideBNum=m.sideBNum>=3?3:m.sideBNum)}else l.column=p,l.row=v,l.sideLNum=r.lcnt,l.sideRNum=r.rcnt,l.sideTNum=r.tcnt,l.sideBNum=r.bcnt,t.push(l);break;default:l.column=p,l.row=v,l.lv=r.lv,this.pushCellData(l,e)}}}var g={};return g.listCell=e,g.listSideCell=t,g.listCover=i,g},readGoles:function(){if(this.leveltarget){var e,t,i,o,n,a,c,r,l,h,u=this.leveltarget.getChildByName("\u6b65\u6570").getComponent("cc.Label").string;h=parseInt(u),a=this.getCellNum(this.leveltarget,"\u5ba0\u7269\u76d2\u5b50"),c=this.getCellNum(this.leveltarget,"\u5168\u5c4f\u70b8\u5f39"),r=this.getCellNum(this.leveltarget,"\u5b9d\u7bb1"),n=this.getCellNum(this.leveltarget,"\u6a59\u5b50"),e=this.getCellNum(this.leveltarget,"\u82f9\u679c"),i=this.getCellNum(this.leveltarget,"\u8304\u5b50"),o=this.getCellNum(this.leveltarget,"\u841d\u535c"),t=this.getCellNum(this.leveltarget,"\u897f\u7ea2\u67ff"),l=this.getCellNum(this.leveltarget,"\u963b\u6321\u7269\u4f53");var d={};d[s.Cell1]=t,d[s.Cell2]=i,d[s.Cell3]=n,d[s.Cell4]=e,d[s.Cell5]=o,d[s.DropBox]=a,d[s.Chest]=r,d[s.ClearBomb]=c,d[s.Step]=h,d[s.Block]=l;var p=this.readWaves(),v=this.readWaveTaskEvent(),f={};return f.TaskEvents=v,f.WaveDatas=p,f.WaveNum=p.length,f.GoleCells=d,f.CellsSpinVal=this.readDropCellsSpinVal(),f.StarLevel=this.readStarsGole(),f}},getCellNum:function(e,t){if(!e)return 0;var i=e.getChildByName(t),o=0;if(i&&i.active){var s=i.getChildByName("num").getComponent("cc.Label").string;o=parseInt(s)}return o},readDropCellsSpinVal:function(){var e=this.getCellNum(this.levelProbability,"\u897f\u7ea2\u67ff"),t=this.getCellNum(this.levelProbability,"\u8304\u5b50"),i=this.getCellNum(this.levelProbability,"\u6a59\u5b50"),s=this.getCellNum(this.levelProbability,"\u82f9\u679c"),n=this.getCellNum(this.levelProbability,"\u841d\u535c"),a={};return a[o.Cell1]=e,a[o.Cell2]=t,a[o.Cell3]=i,a[o.Cell4]=s,a[o.Cell5]=n,a},readWaveTaskEvent:function(){for(var e={},t=this.levelMonsters.children,i=0;i<t.length;i++){var o=t[i];if(o)if("\u4e8b\u4ef6\u6ce2"===o.name)e[i+""]=!0}return e},readWaves:function(){for(var e=[],t=this.levelMonsters.children,i=0;i<t.length;i++){var o=t[i];if(o&&o.active){var s=this.readWave(o);s&&e.push(s)}}return e},readWave:function(e){for(var t=[],i=e.children,s=0;s<i.length;s++){var n=i[s],a={},c=n.name;a.MonsterName=c;var r,l,h=o.UnKnown,u=o.UnKnown,d=this.readOneMonster(n);r=d[0],l=d[1];var p=d[2],v=d[3];"\u5143\u7d201"===r?h=o.Cell1:"\u5143\u7d202"===r?h=o.Cell2:"\u5143\u7d203"===r?h=o.Cell3:"\u5143\u7d204"===r?h=o.Cell4:"\u5143\u7d205"===r&&(h=o.Cell5),"\u5143\u7d201"===l?u=o.Cell1:"\u5143\u7d202"===l?u=o.Cell2:"\u5143\u7d203"===l?u=o.Cell3:"\u5143\u7d204"===l?u=o.Cell4:"\u5143\u7d205"===l&&(u=o.Cell5),a.addtionCellType=h,a.defenceCellType=u,a.skillData=p,a.shieldlist=v,t.push(a)}return 0===t.length?null:t},readOneMonster:function(e){for(var t=e.children,i=-1,o=-1,s=[],n={},a=0;a<t.length;a++){var r=t[a],h=r.name;if("\u52a0\u6210"===h){if(r.children)i=r.children[0].name}else if("\u9632\u5fa1"===h){if(r.children)o=r.children[0].name}else if("\u553e\u6db2\u6280\u80fd1"===h)n=this.parseMonsterSkill(r,1,l.Salive);else if("\u553e\u6db2\u6280\u80fd2"===h)n=this.parseMonsterSkill(r,2,l.Salive);else if("\u553e\u6db2\u6280\u80fd3"===h)n=this.parseMonsterSkill(r,3,l.Salive);else if("\u8718\u86db\u7f51\u6280\u80fd1"===h)n=this.parseMonsterSkill(r,1,l.SpiderWeb);else if("\u8718\u86db\u7f51\u6280\u80fd2"===h)n=this.parseMonsterSkill(r,2,l.SpiderWeb);else if("\u8718\u86db\u7f51\u6280\u80fd3"===h)n=this.parseMonsterSkill(r,3,l.SpiderWeb);else if("\u7ea2\u8272\u602a\u7269\u76fe\u724c"===h){var u=r.getChildByName("num").getComponent("cc.Label").string,d=parseInt(u),p={};p.type=c.Cell1,p.num=d,s.push(p)}else if("\u84dd\u8272\u602a\u7269\u76fe\u724c"===h){var v=r.getChildByName("num").getComponent("cc.Label").string,f=parseInt(v),m={};m.type=c.Cell2,m.num=f,s.push(m)}else if("\u9ec4\u8272\u602a\u7269\u76fe\u724c"===h){var g=r.getChildByName("num").getComponent("cc.Label").string,C=parseInt(g),S={};S.type=c.Cell3,S.num=C,s.push(S)}else if("\u7eff\u8272\u602a\u7269\u76fe\u724c"===h){var b=r.getChildByName("num").getComponent("cc.Label").string,k=parseInt(b),_={};_.type=c.Cell4,_.num=k,s.push(_)}else if("\u6de1\u8272\u602a\u7269\u76fe\u724c"===h){var w=r.getChildByName("num").getComponent("cc.Label").string,B=parseInt(w),D={};D.type=c.Cell5,D.num=B,s.push(D)}}return[i,o,n,s]},parseMonsterSkill:function(e,t,i){for(var o={},s=[],n=0,a=0,c=e.children,l=0;l<c.length;l++){var h=c[l],u=h.name;if("\u553e\u6db2"===u)s.push(r.Normal);else if("\u4f20\u67d3\u553e\u6db2"===u)s.push(r.Invasion);else if("\u8718\u86db\u7f51"===u)s.push(r.Normal);else if("\u56de\u5408\u6570"===u){var d=h.getComponent("cc.Label").string;n=parseInt(d)}else if("\u653b\u51fb\u6b21\u6570"===u){var p=h.getComponent("cc.Label").string;a=parseInt(p)}}return o.skillKind=i,o.lv=t,o.round=n,o.shootSkill=a,o.skills=s,o},pushCellData:function(e,t){this.checkSameID(e.column,e.row,t)||t.push(e)},checkSameID:function(e,t,i){for(var o=0;o<i.length;o++){var s=i[o];if(s.row===t&&s.column===e)return!0}return!1},readStarsGole:function(){var e=this.node.getChildByName("\u661f\u7ea7\u76ee\u6807");if(e){var t=e.getChildByName("1\u661f\u76ee\u6807"),i=e.getChildByName("2\u661f\u76ee\u6807"),o=e.getChildByName("3\u661f\u76ee\u6807"),s={};return s[1]=this.readStarGole(t),s[2]=this.readStarGole(i),s[3]=this.readStarGole(o),s}},readStarGole:function(e){for(var t=e.children,i=[],o=0;o<t.length;o++){var s=t[o];switch(s.name){case"\u602a\u7269":var n=this.readOneStarNode(s,a.Monster);i.push(n);break;case"\u70b8\u5f39":var c=this.readOneStarNode(s,a.Bomb);i.push(c);break;case"\u963b\u6321\u7269\u4f53":var r=this.readOneStarNode(s,a.Block);i.push(r);break;case"\u5b9d\u7bb1":var l=this.readOneStarNode(s,a.Chest);i.push(l);break;case"\u7ea2\u8272\u65b9\u5757":var h=this.readOneStarNode(s,a.Cell1);i.push(h);break;case"\u7eff\u8272\u65b9\u5757":var u=this.readOneStarNode(s,a.Cell4);i.push(u);break;case"\u9ec4\u8272\u65b9\u5757":var d=this.readOneStarNode(s,a.Cell3);i.push(d);break;case"\u7d2b\u8272\u65b9\u5757":var p=this.readOneStarNode(s,a.Cell2);i.push(p);break;case"\u767d\u8272\u65b9\u5757":var v=this.readOneStarNode(s,a.Cell5);i.push(v)}}return i},readOneStarNode:function(e,t){var i=e.getChildByName("\u4e2a\u6570").getComponent(cc.Label),o=i.string,s=parseInt(o);return o=(i=e.getChildByName("\u6b65\u6570").getComponent(cc.Label)).string,{num:s,step:parseInt(o),kind:t}}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",PoolMng:"PoolMng",Utils:"Utils"}],loadCartoon:[function(e,t,i){"use strict";cc._RF.push(t,"0c8abprachLYo8ZCtwojoAE","loadCartoon");e("Utils");cc.Class({extends:cc.Component,properties:{cartoonPrefab:cc.Prefab},onLoad:function(){},show:function(e){if(e){var t=parseInt(e.cartoonID),i=parseInt(e.explorationID),o=this.cartoonPrefab,s=cc.instantiate(o);s.parent=this.node,s.getComponent("Cartoon").show(t,i)}}}),cc._RF.pop()},{Utils:"Utils"}],loadSpinChest:[function(e,t,i){"use strict";cc._RF.push(t,"014d8ZtCYZGYrCqVyF2rTmA","loadSpinChest");e("Utils");var o=e("CommonUtil");e("EnumDefine");cc.Class({extends:cc.Component,properties:{SpinChest:cc.Prefab},onLoad:function(){var e=cc.director.getScene()._children[0],t=cc.instantiate(this.SpinChest);t.active=!0,t.parent=e;var i=t.getChildByName("game").getComponent("SpinChest");if(i){var s=function(){o.enterCartoonScene()}.bind(this);i.closeFunc=s}}}),cc._RF.pop()},{CommonUtil:"CommonUtil",EnumDefine:"EnumDefine",Utils:"Utils"}],loadStory:[function(e,t,i){"use strict";cc._RF.push(t,"2b04aQTSB1JWKhc8i6/9oaO","loadStory");e("Utils");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){}}),cc._RF.pop()},{Utils:"Utils"}],moveAction:[function(e,t,i){"use strict";cc._RF.push(t,"6cbe1a/8lVIeahA043aMiv9","moveAction"),cc.Class({extends:cc.Component,properties:{midbk:cc.Node},onLoad:function(){var e=cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeBounceOut(3)),t=cc.callFunc(function(){},this);this.midbk.runAction(cc.sequence(e,t))},start:function(){}}),cc._RF.pop()},{}],moveNode:[function(e,t,i){"use strict";cc._RF.push(t,"be07bR9MQJAM6c+i+Ae/Znz","moveNode");var o=!1,s=cc.v2(),n=cc.v2();cc.Class({extends:cc.Component,properties:{cameraNode:{default:null,type:cc.Node},NodesWidth:0},onLoad:function(){this.camera=this.cameraNode.getComponent(cc.Camera),this.pos1=cc.v2(),this.pos2=cc.v2()},start:function(){this.node.getContentSize(),cc.view.getVisibleOrigin(),cc.view.getVisibleSize();this.pos1=this.pos2=this.node.parent.convertToWorldSpace(this.node.getPosition())},moveNode:function(){this.camera.getWorldToCameraPoint(this.pos1,s),0==o&&(this.camera.getWorldToCameraPoint(this.pos2,n),o=!0);cc.visibleRect.width,this.camera.zoomRatio,this.node.getContentSize().width;this.node.x=this.node.x+2880,o=!1,this.pos1=this.pos2=this.node.parent.convertToWorldSpace(this.node.getPosition())},moveLeft:function(){var e=this.node.getContentSize(),t=this.node.parent.convertToWorldSpace(this.node.getPosition());t.x=t.x+e.width/2;var i=cc.v2();this.camera.getWorldToCameraPoint(t,i),i.x<0&&(this.node.x+=this.NodesWidth)},moveRight:function(){var e=cc.view.getVisibleOrigin(),t=cc.view.getVisibleSize(),i=this.node.getContentSize(),o=this.node.parent.convertToWorldSpace(this.node.getPosition());o.x=o.x-i.width/2;var s=cc.v2();this.camera.getWorldToCameraPoint(o,s),s.x>e.x+t.width&&(this.node.x-=this.NodesWidth)},lateUpdate:function(e){this.moveLeft(),this.moveRight()}}),cc._RF.pop()},{}],polyglot:[function(e,t,i){(function(e){"use strict";cc._RF.push(t,"69decSgpRlE1rzEKp0RzG3V","polyglot");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e,s){"function"==typeof define&&define.amd?define([],function(){return s(e)}):"object"===(void 0===i?"undefined":o(i))?t.exports=s(e):e.Polyglot=s(e)})(void 0!==e?e:void 0,function(e){var t=String.prototype.replace;function i(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||m}i.VERSION="1.0.0",i.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},i.prototype.extend=function(e,t){var i;for(var s in e)e.hasOwnProperty(s)&&(i=e[s],t&&(s=t+"."+s),"object"===(void 0===i?"undefined":o(i))?this.extend(i,s):this.phrases[s]=i)},i.prototype.unset=function(e,t){var i;if("string"==typeof e)delete this.phrases[e];else for(var s in e)e.hasOwnProperty(s)&&(i=e[s],t&&(s=t+"."+s),"object"===(void 0===i?"undefined":o(i))?this.unset(i,s):delete this.phrases[s])},i.prototype.clear=function(){this.phrases={}},i.prototype.replace=function(e){this.clear(),this.extend(e)},i.prototype.t=function(e,t){var i,o;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?i=this.phrases[e]:"string"==typeof t._?i=t._:this.allowMissing?i=e:(this.warn('Missing translation for key: "'+e+'"'),o=e),"string"==typeof i&&(t=g(t),o=f(o=h(i,this.currentLocale,t.smart_count),t)),o},i.prototype.has=function(e){return e in this.phrases};var s="||||",n={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},a={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]};function c(e){var t,i,o,s={};for(t in e)if(e.hasOwnProperty(t))for(o in i=e[t])s[i[o]]=t;return s}var r=/^\s+|\s+$/g;function l(e){return t.call(e,r,"")}function h(e,t,i){var o;return null!=i&&e?l((o=e.split(s))[d(t,i)]||o[0]):e}function u(e){var t=c(a);return t[e]||t.en}function d(e,t){return n[u(e)](t)}var p=/\$/g,v="$$$$";function f(e,i){for(var o in i)if("_"!==o&&i.hasOwnProperty(o)){var s=i[o];"string"==typeof s&&(s=t.call(i[o],p,v)),e=t.call(e,new RegExp("%\\{"+o+"\\}","g"),s)}return e}function m(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function g(e){var t={};for(var i in e)t[i]=e[i];return t}return i}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],skillItem:[function(e,t,i){"use strict";cc._RF.push(t,"07592M8yrZEQLpu4pt/T3hX","skillItem");var o=e("Utils");e("EnumDefine").ActorType,e("LocalStorage"),e("JsonData");cc.Class({extends:cc.Component,properties:{stageName:cc.Label,gou:cc.Node,choose:cc.Node,lockNode:cc.Node,levelNode:cc.Node,level:cc.Label,stage:cc.Label},onLoad:function(){this.gou.active=!1,this.lockNode.active=!1,this.levelNode.active=!1,this.choose.active=!1},start:function(){},show:function(e){this.lock=e,this.gou.zIndex=2,this.lockNode.zIndex=2,this.lock?(this.lockNode.active=!0,this.levelNode.active=!0):(this.lockNode.active=!1,this.levelNode.active=!1)},init:function(e,t,i,s){this.RolePage=s,this.roleID=e,this.index=i,this.gou.zIndex=2,this.lockNode.zIndex=2,this.level.string=t+"",this.stage.string=i+1+"";var n="prefab/roleSkillcell/"+o.GetRoleSkillName(e,t),a=this;cc.loader.loadRes(n,function(e,t){e&&cc.error(e);var i=cc.instantiate(t);i.parent=a.node,i.scale=1.2,i.position=cc.v2(-4,-37)})}}),cc._RF.pop()},{EnumDefine:"EnumDefine",JsonData:"JsonData",LocalStorage:"LocalStorage",Utils:"Utils"}],zh:[function(e,t,i){"use strict";cc._RF.push(t,"87f1fs0gohHDIfNg4aePXbt","zh"),t.exports={example_case_tips_content:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301\u5f53\u524d\u5e73\u53f0",example_case_nonsupport_native_desktop_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 Mac \u5e73\u53f0\u548c Windows \u5e73\u53f0",example_case_nonsupport_runtime_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 Runtime \u5e73\u53f0",example_case_nonsupport_mobile_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301\u79fb\u52a8\u5e73\u53f0",example_case_nonsupport_web_canvas_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 Canvas \u6a21\u5f0f",example_case_nonsupport_wechat_game_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 wechatGame \u5e73\u53f0",example_case_support_webGl_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u53ea\u652f\u6301 WebGL \u6a21\u5f0f",example_case_support_mobile_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u53ea\u652f\u6301\u79fb\u52a8\u5e73\u53f0",example_case_support_mobile_android_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u53ea\u652f\u6301 Android \u79fb\u52a8\u5e73\u53f0",example_case_support_native_chrome_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u53ea\u652f\u6301 PC \u5e73\u53f0\u4e0a\u7684 Chrome \u6d4f\u89c8\u5668",example_case_support_native_desktop_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u53ea\u652f\u6301 Mac \u5e73\u53f0\u548c Windows \u5e73\u53f0",example_case_support_wechat_game_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u652f\u6301 wechatGame \u5e73\u53f0",example_case_nonsupport_qqplay_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 QQplay \u5e73\u53f0",example_case_nonsupport_Wechatgame_tips:"\u8be5\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u652f\u6301 Wechatgame \u5e73\u53f0","cases/01_graphics/01_sprite/AtlasSprite.fire.7":"\u8fd9\u4e2a\u7cbe\u7075\u6765\u81ea\u5355\u5f20\u56fe\u7247","cases/01_graphics/01_sprite/AtlasSprite.fire.11":"\u8fd9\u4e2a\u7cbe\u7075\u6765\u81ea\u56fe\u96c6","cases/01_graphics/01_sprite/FilledSprite.fire.9":"\u586b\u5145\u7c7b\u578b\uff1a\u6c34\u5e73","cases/01_graphics/01_sprite/FilledSprite.fire.15":"\u586b\u5145\u7c7b\u578b\uff1a\u5782\u76f4","cases/01_graphics/01_sprite/FilledSprite.fire.23":"\u586b\u5145\u7c7b\u578b\uff1a\u5706\u5f62","cases/01_graphics/01_sprite/SimpleSprite.fire.7":"\u8fd9\u662f\u666e\u901a\u7cbe\u7075","cases/01_graphics/01_sprite/SlicedSprite.fire.7":"\u8fd9\u662f\u4e5d\u5bab\u683c\u7cbe\u7075","cases/01_graphics/01_sprite/TiledSprite.fire.6":"\u8fd9\u662f\u5e73\u94fa\u7cbe\u7075","cases/01_graphics/01_sprite/ChangeColor.fire.1":"\u6539\u53d8\u989c\u8272\u5c06\u4f1a\u6539\u53d8 Draw Call","cases/01_graphics/01_sprite/TrimmedSprite.fire.7":"\u81ea\u52a8\u526a\u88c1 ","cases/01_graphics/01_sprite/TrimmedSprite.fire.12":"\u672a\u81ea\u52a8\u526a\u88c1","cases/01_graphics/02_particle/AutoRemoveParticle.fire.9":'\u7c92\u5b50 1\n"\u5b8c\u6210\u65f6\u81ea\u52a8\u79fb\u9664" \u7981\u6b62',"cases/01_graphics/02_particle/AutoRemoveParticle.fire.13":'\u7c92\u5b50 2\n"\u5b8c\u6210\u65f6\u81ea\u52a8\u79fb\u9664" \u5f00\u542f',"cases/01_graphics/02_particle/ToggleParticle.fire.6":'\u6309 "\u6309\u94ae" \u8fdb\u884c\u5f00\u5173\u7c92\u5b50\u64ad\u653e',"cases/02_ui/01_widget/AdvancedWidget.fire.7":"\u5de6\u4e0a","cases/02_ui/01_widget/AdvancedWidget.fire.9":"top: 10% left: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.14":"\u4e0a","cases/02_ui/01_widget/AdvancedWidget.fire.16":"top: -34px","cases/02_ui/01_widget/AdvancedWidget.fire.21":"\u53f3\u4e0a","cases/02_ui/01_widget/AdvancedWidget.fire.23":"top: 10% right: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.28":"\u5de6","cases/02_ui/01_widget/AdvancedWidget.fire.30":"left: -50px","cases/02_ui/01_widget/AdvancedWidget.fire.35":"\u53f3","cases/02_ui/01_widget/AdvancedWidget.fire.37":"right: -50px","cases/02_ui/01_widget/AdvancedWidget.fire.42":"\u5de6\u4e0b","cases/02_ui/01_widget/AdvancedWidget.fire.44":"bottom: 10% left: 6%","cases/02_ui/01_widget/AdvancedWidget.fire.49":"\u4e0b","cases/02_ui/01_widget/AdvancedWidget.fire.51":"bottom: -34px","cases/02_ui/01_widget/AdvancedWidget.fire.56":"\u53f3\u4e0b","cases/02_ui/01_widget/AdvancedWidget.fire.58":"bottom:10% right:6%","cases/02_ui/01_widget/AdvancedWidget.fire.63":"\u9ad8\u7ea7\u6302\u4ef6","cases/02_ui/01_widget/AlignOnceWidget.fire.1":"AlignOne \u4e3a false \u65f6\uff0c\u4f1a\u4e00\u76f4\u4fdd\u6301\u5bf9\u9f50","cases/02_ui/01_widget/AlignOnceWidget.fire.2":"AlignOne \u4e3a true \u65f6\uff0c\u53ea\u5728 Widget \u751f\u6548\u65f6\u5bf9\u9f50\u4e00\u6b21","cases/02_ui/01_widget/AnimatedWidget.fire.9":"\u52a8\u753b\u6302\u4ef6\u3002","cases/02_ui/01_widget/WidgetAlign.fire.18":"\u6302\u4ef6\u5bf9\u9f50\u65b9\u5f0f\u3002","cases/02_ui/01_widget/AutoResize.fire.13":"\u6302\u4ef6\u81ea\u52a8\u8c03\u6574\u5927\u5c0f\u3002","cases/02_ui/02_label/GoldBeatingAnime.js.1":"0","cases/02_ui/02_label/AlignFontLabel.fire.6":"\u6587\u672c\u5bf9\u9f50","cases/02_ui/02_label/AlignFontLabel.fire.9":"\u6c34\u5e73\u5bf9\u9f50","cases/02_ui/02_label/AlignFontLabel.fire.14":"\u54c8\u5570\uff01\n\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.16":"\u5bf9\u9f50: \u9760\u5de6","cases/02_ui/02_label/AlignFontLabel.fire.21":"\u54c8\u5570\uff01\n\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.23":"\u5bf9\u9f50: \u5c45\u4e2d","cases/02_ui/02_label/AlignFontLabel.fire.28":"\u54c8\u5570\uff01\n\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.30":"\u5bf9\u9f50: \u9760\u53f3","cases/02_ui/02_label/AlignFontLabel.fire.33":"\u5782\u76f4\u5bf9\u9f50","cases/02_ui/02_label/AlignFontLabel.fire.38":"\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.40":"\u5bf9\u9f50: \u9876\u90e8","cases/02_ui/02_label/AlignFontLabel.fire.45":"\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.47":"\u5bf9\u9f50: \u5c45\u4e2d","cases/02_ui/02_label/AlignFontLabel.fire.52":"\u6b22\u8fce\u4f7f\u7528 \nCocos Creator","cases/02_ui/02_label/AlignFontLabel.fire.54":"\u5bf9\u9f50: \u5e95\u90e8","cases/02_ui/02_label/SystemFontLabel.fire.6":"\u7cfb\u7edf\u5b57\u4f53","cases/02_ui/02_label/SystemFontLabel.fire.9":"\u6362\u884c","cases/02_ui/02_label/SystemFontLabel.fire.14":"\u8fd9\u662f\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53","cases/02_ui/02_label/SystemFontLabel.fire.16":"Overflow: CLAMP","cases/02_ui/02_label/SystemFontLabel.fire.21":"\u8fd9\u662f\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53","cases/02_ui/02_label/SystemFontLabel.fire.23":"Overflow: SHRINK","cases/02_ui/02_label/SystemFontLabel.fire.26":"\u4e0d\u6362\u884c","cases/02_ui/02_label/SystemFontLabel.fire.31":"\u8fd9\u662f\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53","cases/02_ui/02_label/SystemFontLabel.fire.33":"Overflow: CLAMP","cases/02_ui/02_label/SystemFontLabel.fire.38":"\u8fd9\u662f\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53","cases/02_ui/02_label/SystemFontLabel.fire.40":"Overflow: SHRINK","cases/02_ui/02_label/SystemFontLabel.fire.45":"\u54c8\u55bd! \u6b22\u8fce\u4f7f\u7528 Cocos Creator","cases/02_ui/02_label/SystemFontLabel.fire.47":"Overflow: RESZIE_HEIGHT","cases/02_ui/03_button/ButtonInScroll.js.1":"\u9876\u90e8\u6309\u94ae\u88ab\u70b9\u51fb\uff01","cases/02_ui/03_button/ButtonInScroll.js.2":"\u5e95\u90e8\u6309\u94ae\u88ab\u70b9\u51fb\uff01","cases/02_ui/03_button/ButtonInScroll.fire.21":"\u54ea\u4e2a\u6309\u94ae\u88ab\u70b9\u51fb\uff1f","cases/02_ui/03_button/ButtonInScroll.fire.27":"\u62d6\u52a8\u663e\u793a\u66f4\u591a\u6309\u94ae","cases/02_ui/03_button/SimpleButton.js.1":"\u5de6\u8fb9\u7684\u6309\u94ae\u88ab\u70b9\u51fb\uff01","cases/02_ui/03_button/SimpleButton.js.2":"\u53f3\u8fb9\u7684\u6309\u94ae\u88ab\u70b9\u51fb\uff01","cases/02_ui/03_button/ButtonInteractable.fire.7":"\u64ad\u653e","cases/02_ui/03_button/ButtonInteractable.fire.16":"\u505c\u6b62","cases/02_ui/03_button/ButtonInteractable.fire.21":"\u4ea4\u4e92(interactable): true","cases/02_ui/03_button/ButtonInteractable.fire.23":"\u4ea4\u4e92(interactable): false","cases/02_ui/03_button/ButtonInteractable.js.1":"\u4ea4\u4e92(interactable): ","cases/02_ui/03_button/ButtonInteractable.js.2":"\u4ea4\u4e92(interactable): ","cases/02_ui/03_button/SimpleButton.fire.6":"\u54ea\u4e2a\u6309\u94ae\u88ab\u70b9\u51fb\uff1f","cases/02_ui/05_scrollView/Item.js.1":"Tmpl#","cases/02_ui/04_progressbar/progressbar.fire.7":"\u6c34\u5e73\u8fdb\u5ea6\u6761\uff0c\u8fdb\u5ea6 0.3","cases/02_ui/04_progressbar/progressbar.fire.11":"\u53cd\u5411\u6c34\u5e73\u8fdb\u5ea6\u6761\uff0c\u8fdb\u5ea6 1.0","cases/02_ui/04_progressbar/progressbar.fire.15":"\u5782\u76f4\u8fdb\u5ea6\u6761 \n\u4ece\u4e0b\u5411\u4e0a","cases/02_ui/04_progressbar/progressbar.fire.19":"\u5782\u76f4\u8fdb\u5ea6\u6761 \n\u4ece\u4e0a\u5411\u4e0b","cases/02_ui/04_progressbar/progressbar.fire.23":"\u8bbe\u7f6e\u4e86\u7cbe\u7075\u7684\u8fdb\u5ea6\u6761","cases/02_ui/04_progressbar/progressbar.fire.28":"\u8bbe\u7f6e\u4e86\u7cbe\u7075\uff08\u5b50\u63a7\u4ef6\uff09\u7684\u8fdb\u5ea6\u6761","cases/02_ui/05_scrollView/ListView.fire.23":"Item #00","cases/02_ui/05_scrollView/ScrollView.fire.7":"Scrollview \u5b8c\u6574\u529f\u80fd","cases/02_ui/05_scrollView/ScrollView.fire.30":"Scrollview \u6ca1\u6709\u60ef\u6027","cases/02_ui/05_scrollView/ScrollView.fire.53":"Scrollview \u6ca1\u6709\u5f39\u6027","cases/02_ui/05_scrollView/ScrollView.fire.76":"Scrollview \u53ea\u80fd\u6c34\u5e73\u6eda\u52a8","cases/02_ui/05_scrollView/ScrollView.fire.93":"Scrollview \u53ea\u80fd\u5782\u76f4\u6eda\u52a8","cases/02_ui/05_scrollView/ScrollView.fire.110":"Scrollview \u6ca1\u6709\u6eda\u52a8\u6761","cases/02_ui/06_layout/LayoutInScrollView.fire.6":"ScrollView \u548c\u5782\u76f4\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutInScrollView.fire.40":"ScrollView \u548c\u6c34\u5e73\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutInScrollView.fire.74":"ScrollView \u548c\u6a2a\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668 ","cases/02_ui/06_layout/LayoutInScrollView.fire.144":"ScrollView \u548c\u7eb5\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668 ","cases/02_ui/06_layout/LayoutResizeChildren.fire.6":"\u6c34\u5e73\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutResizeChildren.fire.31":"\u5782\u76f4\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutResizeChildren.fire.48":"\u6a2a\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutResizeChildren.fire.85":"\u7eb5\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutResizeContainer.fire.6":"\u57fa\u672c","cases/02_ui/06_layout/LayoutResizeContainer.fire.31":"\u6c34\u5e73","cases/02_ui/06_layout/LayoutResizeContainer.fire.36":"\u5782\u76f4","cases/02_ui/06_layout/LayoutResizeContainer.fire.41":"\u6a2a\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668","cases/02_ui/06_layout/LayoutResizeContainer.fire.46":"\u7eb5\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.8":"x:0, y:0","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.12":"x:480, y:320","cases/02_ui/07_change_canvas_anchor/BottomLeftAnchor.fire.16":"x:960, y:640","cases/02_ui/07_editBox/editbox.js.1":"\u8f93\u5165\u6587\u672c: ","cases/02_ui/06_layout/LayoutNone.fire.6":"\u57fa\u672c\u5e03\u5c40\u5bb9\u5668, \u7c7b\u578b: None\n\u81ea\u52a8\u8c03\u6574\u5927\u5c0f","cases/02_ui/06_layout/LayoutNone.fire.35":"\u6c34\u5e73\u5e03\u5c40\u5bb9\u5668\uff0c\u7c7b\u578b: None\n\u4e0d\u81ea\u52a8\u8c03\u6574\u5927\u5c0f","cases/02_ui/06_layout/LayoutNone.fire.60":"\u5782\u76f4\u5e03\u5c40\u5bb9\u5668\uff0c\u7c7b\u578b: None\n\u4e0d\u81ea\u52a8\u8c03\u6574\u5927\u5c0f","cases/02_ui/06_layout/LayoutNone.fire.77":"\u6a2a\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668\uff0c\u7c7b\u578b: None\n\u4e0d\u81ea\u52a8\u8c03\u6574\u5927\u5c0f","cases/02_ui/06_layout/LayoutNone.fire.142":"\u7eb5\u5411\u7f51\u683c\u5e03\u5c40\u5bb9\u5668\uff0c\u7c7b\u578b: None\n\u4e0d\u81ea\u52a8\u8c03\u6574\u5927\u5c0f","cases/02_ui/07_editBox/EditBox.fire.25":"\u5355\u884c\u5bc6\u7801\u6846:","cases/02_ui/07_editBox/EditBox.fire.27":"\u5355\u884c\u6587\u672c\u6846:","cases/02_ui/07_editBox/EditBox.fire.29":"\u591a\u884c\u6587\u672c\u6846:","cases/02_ui/07_editBox/EditBox.fire.32":"\u70b9\u51fb","cases/02_ui/07_editBox/EditBox.fire.38":"\u6309\u94ae\u5fc5\u987b\u5728 EditBox \u7684\u4e0a\u9762, \n\u5e76\u4e14\u5b83\u5e94\u8be5\u5141\u8bb8\u70b9\u51fb.","cases/02_ui/09_videoplayer/fullscreenVideo.fire":"\u5f53\u60a8\u89e6\u6478\u5c4f\u5e55\u65f6\uff0c\u5c06\u64ad\u653e\u89c6\u9891\u3002\n \u89c6\u9891\u5b8c\u6210\u540e\uff0c\u5b83\u5c06\u88ab\u5220\u9664\u3002","cases/02_ui/09_videoplayer/videoPlayer.nonsupport_fullscreen":"\u5f53\u524d\u8bbe\u5907\u4e0d\u652f\u6301\u5168\u5c4f\u64ad\u653e","cases/03_gameplay/01_player_control/EventManager/KeyboardInput.fire.6":"\u6309 'A' \u6216 'D' \u952e\u63a7\u5236\u5c0f\u7ef5\u7f8a","cases/03_gameplay/01_player_control/On/OnTouchCtrl.js.1":"touch (","cases/03_gameplay/01_player_control/On/OnTouchInput.fire.10":"\u8bf7\u89e6\u6478\u4efb\u610f\u4f4d\u7f6e\u8bd5\u8bd5","cases/03_gameplay/01_player_control/On/OnMultiTouchInput.fire.20":"\u7528\u4f60\u7684\u624b\u6307\u653e\u7f29\u56fe\u7247\uff01","cases/03_gameplay/01_player_control/On/DeviceMotion.fire.1":"\u5f00\u542f \u91cd\u529b\u611f\u5e94","cases/03_gameplay/01_player_control/On/DeviceMotion.fire.2":"\u5173\u95ed \u91cd\u529b\u611f\u5e94","cases/03_gameplay/02_actions/SimpleAction.fire.13":"\u7b80\u5355\u7684\u52a8\u4f5c","cases/03_gameplay/03_animation/AnimateCustomProperty.fire.14":"Label","cases/03_gameplay/03_animation/AnimateCustomProperty.fire.18":"\u81ea\u5b9a\u4e49\u52a8\u753b\u5c5e\u6027","cases/03_gameplay/03_animation/AnimationEvent.js.1":"\u5f00\u59cb\u7b2c","cases/03_gameplay/03_animation/AnimationEvent.fire.6":"\u5f00\u59cb\u7b2c1\u4e2a\u52a8\u753b","cases/03_gameplay/03_animation/AnimationEvent.fire.14":"\u52a8\u753b\u4e8b\u4ef6","cases/03_gameplay/03_animation/MoveAnimation.fire.11":"Linear","cases/03_gameplay/03_animation/MoveAnimation.fire.17":"Case In Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.23":"Case Out Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.29":"Case Out In Expo","cases/03_gameplay/03_animation/MoveAnimation.fire.35":"Back Forward","cases/03_gameplay/03_animation/MoveAnimation.fire.41":"\u8fd9\u662f\u4e00\u4e2a\u79fb\u52a8\u52a8\u753b\u3002","cases/03_gameplay/03_animation/SpriteAnimation.fire.9":"\u8fd9\u662f\u7cbe\u7075\u5e27\u52a8\u753b","cases/03_gameplay/03_animation/CreateClip.fire.1":"\u52a8\u6001\u521b\u5efa\u52a8\u753b\u526a\u8f91","cases/04_audio/SimpleAudio.fire.6":"\u4eab\u53d7\u97f3\u4e50!","cases/05_scripting/01_properties/NodeArray.fire.14":"\u8fd9\u662f\u8282\u70b9\u6570\u7ec4","cases/05_scripting/01_properties/NonSerialized.fire.6":"Label","cases/05_scripting/01_properties/NonSerialized.fire.8":"Label","cases/05_scripting/01_properties/NonSerialized.fire.10":"\u8fd9\u662f\u975e\u5e8f\u5217\u5316","cases/05_scripting/01_properties/ReferenceType.fire.8":"Label","cases/05_scripting/01_properties/ReferenceType.fire.11":"\u8fd9\u4e2a\u4f8b\u5b50\u4e0d\u5305\u62ec\u8fd0\u884c\u65f6\u6f14\u793a","cases/05_scripting/01_properties/ValueType.fire.6":"\u8fd9\u4e2a\u4f8b\u5b50\u4e0d\u5305\u62ec\u8fd0\u884c\u65f6\u6f14\u793a","cases/05_scripting/02_prefab/InstantiatePrefab.fire.7":"\u5b9e\u4f8b\u5316\u9884\u5236\u8d44\u6e90","cases/05_scripting/03_events/EventInMask.fire.23":"\u66f4\u6539\u8282\u70b9\u6392\u5e8f","cases/05_scripting/03_events/SimpleEvent.fire.19":"\u89e6\u6478\u4e8b\u4ef6\u53ef\u4ee5\u652f\u6301\u70b9\u51fb","cases/05_scripting/03_events/SimpleEvent.fire.21":"\u9f20\u6807\u4e8b\u4ef6\u53ef\u4ee5\u652f\u6301\u5355\u51fb\u3001\u60ac\u505c\u3001\u6eda\u8f6e","cases/05_scripting/03_events/SimpleEvent.fire.23":"\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53ef\u4ee5\u624b\u52a8\u89e6\u53d1\n(\u70b9\u51fb\u4e0a\u9762\u7684\u6309\u94ae)","cases/05_scripting/03_events/SimpleEvent.fire.25":"\u57fa\u672c\u4e8b\u4ef6","cases/05_scripting/03_events/TouchPropagation.fire.15":"\u89e6\u6478\u4e8b\u4ef6\u5192\u6ce1","cases/05_scripting/03_events/MousePropagation.fire.1":"\u9f20\u6807\u4e8b\u4ef6\u5192\u6ce1","cases/05_scripting/04_scheduler/scheduleCallbacks.js.1":"5.00 s","cases/05_scripting/04_scheduler/scheduler.fire.9":"5.00 s","cases/05_scripting/04_scheduler/scheduler.fire.12":"\u91cd\u590d\u5b9a\u65f6\u5668","cases/05_scripting/04_scheduler/scheduler.fire.18":"\u53d6\u6d88\u5b9a\u65f6\u5668","cases/05_scripting/04_scheduler/scheduler.fire.24":"\u5b9a\u65f6\u6267\u884c1\u6b21","cases/05_scripting/04_scheduler/scheduler.fire.29":"\u4f7f\u7528 update \u51fd\u6570\u6bcf\u5e27\u66f4\u65b0\u8ba1\u6570","cases/05_scripting/04_scheduler/scheduler.fire.31":"\u5b9a\u65f6\u5668","cases/05_scripting/04_scheduler/recursiveScheduler.fire.0":"\u70b9\u51fb\u6309\u94ae\u5f00\u59cb\u6267\u884c\u9012\u5f52\u4efb\u52a1\uff0c\u4f60\u6700\u7ec8\u5e94\u8be5\u770b\u5230'\u4efb\u52a12\u6267\u884c\u5b8c\u6210'","cases/05_scripting/04_scheduler/recursiveScheduler.fire.1":"\u4efb\u52a11\u6267\u884c\u5b8c\u6210","cases/05_scripting/04_scheduler/recursiveScheduler.fire.2":"\u4efb\u52a12\u6267\u884c\u5b8c\u6210","cases/05_scripting/04_scheduler/recursiveScheduler.fire.3":"\u5f00\u59cb\u4efb\u52a1","cases/05_scripting/05_cross_reference/CrossReference.fire.7":"Label","cases/05_scripting/05_cross_reference/CrossReference.fire.12":"Label","cases/05_scripting/05_cross_reference/CrossReference.fire.14":"\u4ea4\u53c9\u5f15\u7528","cases/05_scripting/06_life_cycle/life_cycle.fire.6":"\u751f\u547d\u5468\u671f","cases/05_scripting/07_asset_loading/AssetLoading.fire.5":"\u8d44\u6e90\u52a0\u8f7d","cases/05_scripting/07_asset_loading/AssetLoading.fire.9":"\u52a0\u8f7d SpriteFrame","cases/05_scripting/07_asset_loading/AssetLoading.fire.15":"\u52a0\u8f7d Texture","cases/05_scripting/07_asset_loading/AssetLoading.fire.21":"\u52a0\u8f7d Audio","cases/05_scripting/07_asset_loading/AssetLoading.fire.27":"\u52a0\u8f7d Txt","cases/05_scripting/07_asset_loading/AssetLoading.fire.33":"\u52a0\u8f7d Font","cases/05_scripting/07_asset_loading/AssetLoading.fire.39":"\u52a0\u8f7d Plist","cases/05_scripting/07_asset_loading/AssetLoading.fire.45":"\u52a0\u8f7d Prefab","cases/05_scripting/07_asset_loading/AssetLoading.fire.51":"\u52a0\u8f7d Scene","cases/05_scripting/07_asset_loading/AssetLoading.fire.57":"\u52a0\u8f7d Animation","cases/05_scripting/07_asset_loading/AssetLoading.fire.59":"\u52a0\u8f7d Spine","cases/05_scripting/07_asset_loading/AssetLoading.fire.65":"\u5f53\u524d\u5c1a\u65e0\u52a0\u8f7d\u3002","cases/05_scripting/07_asset_loading/AssetLoading.js.1":"\u5df2\u52a0\u8f7d ","cases/05_scripting/07_asset_loading/AssetLoading.js.2":"\u64ad\u653e ","cases/05_scripting/07_asset_loading/AssetLoading.js.3":"\u521b\u5efa ","cases/05_scripting/07_asset_loading/AssetLoading.js.4":"\u64ad\u653e\u97f3\u4e50\u3002","cases/05_scripting/07_asset_loading/AssetLoading.js.5":"\u8fd9\u662f\u5b57\u4f53\uff01","cases/05_scripting/07_asset_loading/LoadRes.fire.7":"\u6309\u7c7b\u578b","cases/05_scripting/07_asset_loading/LoadRes.fire.10":"\u52a0\u8f7d SpriteFrame","cases/05_scripting/07_asset_loading/LoadRes.fire.17":"\u6309 Url","cases/05_scripting/07_asset_loading/LoadRes.fire.20":"\u52a0\u8f7d\u9884\u5236\u8d44\u6e90","cases/05_scripting/07_asset_loading/LoadResAll.fire.6":"\u8fd9\u4e2a\u4f8b\u5b50\u4e0d\u5305\u62ec\u8fd0\u884c\u65f6\u6f14\u793a","cases/05_scripting/07_asset_loading/LoadResAll.fire.24":"\u5168\u90e8\u52a0\u8f7d","cases/05_scripting/07_asset_loading/LoadResAll.fire.30":"\u52a0\u8f7d\u5168\u90e8\u7684SpriteFrame","cases/05_scripting/07_asset_loading/LoadResAll.fire.36":"\u6e05\u7a7a","cases/05_scripting/08_module/load_module.fire.6":"\u52a0\u8f7d\u6a21\u5757","cases/05_scripting/08_module/load_module.fire.10":"\u521b\u5efa\u602a\u7269","cases/05_scripting/09_singleton/Singleton.fire.6":"\u8fd9\u4f8b\u5b50\u4e0d\u5305\u542b\u8fd0\u884c\u65f6\u6f14\u793a","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.1":"\u4e0b\u8f7d\u5b8c\u6210!!","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.2":"\u6b63\u5728\u4e0b\u8f7d: ","cases/05_scripting/10_loadingBar/LoadingBarCtrl.js.3":"\u70b9\u51fb\u4efb\u610f\u5730\u65b9\u8fdb\u884c\u4e0b\u8f7d...","cases/05_scripting/10_loadingBar/loadingBar.fire.7":"\u52a0\u8f7d\u5b8c\u6210","cases/05_scripting/10_loadingBar/loadingBar.fire.18":"\u6b63\u5728\u4e0b\u8f7d","cases/05_scripting/11_network/NetworkCtrl.js.1":"\u8bf7\u7a0d\u7b49...","cases/05_scripting/11_network/NetworkCtrl.js.2":"\u8bf7\u7a0d\u7b49...","cases/05_scripting/11_network/NetworkCtrl.js.3":"\u8bf7\u7a0d\u7b49...","cases/05_scripting/11_network/NetworkCtrl.js.4":"\u8bf7\u7a0d\u7b49...","cases/05_scripting/11_network/NetworkCtrl.js.5":"WebSocket\n\u53d1\u9001\u4e8c\u8fdb\u5236WS\u5df2\u6253\u5f00.","cases/05_scripting/11_network/NetworkCtrl.js.6":"WebSocket\n\u6536\u5230\u54cd\u5e94.","cases/05_scripting/11_network/NetworkCtrl.js.7":"WebSocket\n\u53d1\u9001\u4e8c\u8fdb\u5236\u9047\u5230\u9519\u8bef.","cases/05_scripting/11_network/NetworkCtrl.js.8":"WebSocket\nwebsocket \u5b9e\u4f8b\u5df2\u5173\u95ed.","cases/05_scripting/11_network/NetworkCtrl.js.9":"WebSocket\n\u53d1\u9001\u4e8c\u8fdb\u5236WS\u7b49\u5f85\u4e2d...","cases/05_scripting/11_network/NetworkCtrl.js.10":"WebSocket\n","cases/05_scripting/11_network/NetworkCtrl.js.11":"SocketIO\n","cases/05_scripting/11_network/NetworkCtrl.js.12":"SocketIO\n","cases/05_scripting/11_network/NetworkCtrl.js.13":"SocketIO\n","cases/05_scripting/11_network/NetworkCtrl.js.14":"SocketIO\n","cases/05_scripting/11_network/network.fire.7":"Label","cases/05_scripting/11_network/network.fire.6":"XMLHttpRequest","cases/05_scripting/11_network/network.fire.11":"Label","cases/05_scripting/11_network/network.fire.10":"XMLHttpRequest (ArrayBuffer)","cases/05_scripting/11_network/network.fire.15":"Label","cases/05_scripting/11_network/network.fire.14":"WebSocket","cases/05_scripting/11_network/network.fire.19":"Label","cases/05_scripting/11_network/network.fire.18":"SocketIO","cases/05_scripting/11_network/download-web.fire.1.1":"\u8fdc\u7a0b\u97f3\u9891\u8d44\u6e90\u4e0b\u8f7d","cases/05_scripting/11_network/download-web.fire.1.2":"\u8fdc\u7a0b\u56fe\u7247\u8d44\u6e90\u4e0b\u8f7d","cases/05_scripting/11_network/download-web.fire.2":"\u7b49\u5f85\u4e0b\u8f7d\u4e2d...","cases/05_scripting/11_network/download-web.fire.3":"\u4e0b\u8f7d\u8fdb\u5ea6\uff1a","cases/05_scripting/11_network/download-web.fire.4.1":"\u8fdc\u7a0b\u97f3\u9891\u8d44\u6e90\u4e0b\u8f7d\u5b8c\u6210","cases/05_scripting/11_network/download-web.fire.4.2":"\u8fdc\u7a0b\u56fe\u7247\u8d44\u6e90\u4e0b\u8f7d\u5b8c\u6210","cases/05_scripting/11_network/download-web.fire.5.1":"\u8fdc\u7a0b\u97f3\u9891\u8d44\u6e90\u4e0b\u8f7d\u5931\u8d25","cases/05_scripting/11_network/download-web.fire.5.2":"\u8fdc\u7a0b\u56fe\u7247\u8d44\u6e90\u4e0b\u8f7d\u5931\u8d25","cases/05_scripting/11_network/download-web.fire.6":"\u8d44\u6e90\u5730\u5740\uff1a","cases/05_scripting/11_network/download-web.fire.7":"\u4e0b\u8f7d","cases/05_scripting/11_network/download-web.fire.8":"\u6ed1\u52a8\u5230\u4e0b\u4e00\u9875","cases/05_scripting/11_network/download-web.fire.9":"\u6ed1\u52a8\u5230\u4e0a\u4e00\u9875","cases/05_scripting/11_network/download-web.fire.10":"\u52a0\u8f7d\u5730\u5740\u65e0\u6548","cases/native_call/native_call.fire.1":"\u70b9\u51fb\u6309\u94ae\u8c03\u7528\u9759\u6001\u65b9\u6cd5\uff01","cases/native_call/native_call.fire.2":"\u70b9\u51fb","cases/collider/Category.fire.3":"\u7ec4: \u78b0\u649e","cases/collider/Category.fire.5":"\u7ec4: \u78b0\u649e","cases/collider/Category.fire.7":"\u7ec4: \u78b0\u649e","cases/collider/Category.fire.9":"\u7ec4: \u9ed8\u8ba4","cases/collider/Shape.fire.20":"\u663e\u793a\u591a\u8fb9\u5f62","cases/collider/Shape.fire.27":"\u663e\u793a\u5706","cases/collider/Shape.fire.34":"\u663e\u793a\u76d2\u5b50","cases/collider/Shape.fire.43":"\u663e\u793a\u591a\u8fb9\u5f62","cases/collider/Shape.fire.50":"\u663e\u793a\u5706","cases/collider/Shape.fire.57":"\u663e\u793a\u76d2\u5b50","cases/motionStreak/MotionStreak.fire.1":"\u6539\u53d8\u62d6\u5c3e","cases/spine/SpineBoy.fire.11":"\u8c03\u8bd5\u63d2\u69fd","cases/spine/SpineBoy.fire.18":"\u8c03\u8bd5\u5173\u8282","cases/spine/SpineBoy.fire.25":"\u65f6\u95f4\u7f29\u653e","cases/spine/SpineBoy.fire.36":"\u505c\u6b62","cases/spine/SpineBoy.fire.43":"\u8d70","cases/spine/SpineBoy.fire.50":"\u8dd1","cases/spine/SpineBoy.fire.58":"\u8df3","cases/spine/SpineBoy.fire.65":"\u5c04\u51fb","cases/tiledmap/Puzzle.fire.18":"\u4f60\u8d62\u4e86","cases/tiledmap/Puzzle.fire.21":"\u91cd\u65b0\u5f00\u59cb","cases/tiledmap/Dynamic-Tiledmap.fire.22":"\u52a8\u6001\u521b\u5efa TiledMap","res/prefabs/ListItem.prefab.2":"Label ssss","res/prefabs/Monster.prefab.3":"\u540d\u5b57:","res/prefabs/Monster.prefab.11":"\u7b49\u7ea7 :","res/prefabs/Monster.prefab.19":"\u8840\u91cf :","res/prefabs/Monster.prefab.27":"\u653b\u51fb :","res/prefabs/Monster.prefab.35":"\u9632\u5fa1 :","res/prefabs/loadItem.prefab.1":"Label","resources/test_assets/prefab.prefab.2":"\u8fd9\u662f\u4e00\u4e2a\u9884\u5236","resources/test_assets/scene.fire.3":"\u8fd4\u56de\u8d44\u6e90\u52a0\u8f7d\u573a\u666f","resources/test_assets/scene.fire.6":"\u8fd4\u56de","scripts/Global/Menu.js.1":"\u8bf4\u660e\u6682\u7f3a","cases/subpackage":"\u52a0\u8f7d\u5b50\u5305","cases/subpackage.loaded":"\u5b50\u5305\u5df2\u7ecf\u6210\u529f\u52a0\u8f7d","scripts/AudioCtrl_Play":"\u64ad\u653e","scripts/AUdioCtrl_Stop":"\u505c\u6b62","scripts/AUdioCtrl_Pause":"\u6682\u505c","scripts/AUdioCtrl_Resume":"\u6062\u590d","scripts/AUdioCtrl_StopAll":"\u505c\u6b62\u6240\u6709","scripts/AUdioCtrl_PauseAll":"\u6682\u505c\u6240\u6709","scripts/AUdioCtrl_ResumeAll":"\u6062\u590d\u6240\u6709",sprite_loadRes_asset_success:"\u8d44\u6e90\u52a0\u8f7d\u6210\u529f",sprite_loadRes_asset_failed:"\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"},cc._RF.pop()},{}]},{},["LabelLocalized","en","zh","i18n","polyglot","LoadingBarCtrl","CardinalSplineToXX","Sort","AudioEngineControl","AudioSourceControl","PlayBkAudios","PlayFightAudio","UISoundAudio","BlurMask","BlockCover","BlockSide","Board","BossRoad","Boxes","Cell","CellAttack","CellBlood","CellsAnimation","CheckSideCells","DetectDrawlines","DrawLine","DropCell","DropFromSide","FarmLevelGole","HurtCell","Portal","ProcessBoardCell","PropCellAttackArea","PropHVSkill","RemoveCells","Rocket","RolePetSkills","Salive","SideCell","SidePropSkill","SpawnCells","Spider","StepAward","SwitchRoleSkill","TriggerCellsSkill","CameraControl","CameraZoom","MoveCamera","MoveCameraShot","moveNode","CanvasInit","AllCards","CDCard","CoinDiamondCards","PetCard","PetsCard","Cartoon","CartoonMonster","loadCartoon","CloudMove","CommonUtil","ExplosionBig","ExplosionSmall","ChestPop","Endless","EndlessLoadlevelEditor","EndlessPunish","EndlessReward","EndlessShoot","EndlessSpin","EndlessStory","EndlessUtil","EndlessWinLose","LoadEndlessLevel","TaskEndPop","TaskPop","TaskRoad","TaskUI","EnumDefine","FloatSp","FloatWord","Game","AttackMonsterGuide","BoardGuide","JustWordGuide","TouchGuide","IIIustration","LoadingBar","LoadlevelEditor","ChestReWard","Exploration","ExplortaionStory","Flag","LevelBtn","LevelGole","LevelNode","MapFlag","MapStage","MapUI","ReWardStar","RewardStarItem","StageButton","StageUI","BackgroundAdapter","CloseToBorderComponent","ContentAdapter","MultiResoultionCompat","OpenSdk","SwipeDustCard","PlayAnimation","BulletPool","CDPool","CardPool","CellBloodPool","CellPool","CoinPool","ExplosionPool","PoolMng","PropCellPool","SpinPoolPng","XPoolMng","Actor","ActorShoot","ActorSkill","BattleRoleBox","Bullet","Monster","MonsterMove","MonsterShield","MonsterSkill","PetRPG","PetRoleBox","PetSkill","PetSkillX","ProcessGameDone","RPG","RoleMove","ShootBullet","ShootSaliveTip","Singleton","SpawnActor","SpawnChest","SpawnMonster","Pig","ShootSkill","ShowTip","CameraManager","JsonData","LocalStorage","RPGManager","Chest","ChestBox","ChestCards","ProcessSpinData","Spin","SpinCD","SpinCards","SpinChest","SpinPet","SpinPetExtraction","SpinReward","loadSpinChest","BattleRoot","ChestCardStory","ProcessStory","ShowFloatWord","Win","Touch","TouchNode","Achieve","AchieveItem","AchieveManager","Achievement","AchievementEndless","ActorNews","ActorUI","NormalPetContent","NormalRoleContent","PageViewCtrl","Pet","PetCardInfo","PetExtraction","PetItem","Pets","RoleAndPets","RoleCardInfo","RoleGrass","RolePetItem","RolePetUI","RoleSkillUI","UpGradeContent","UpGradeRoleContent","skillItem","AddTime","BaseUI","DayReWard","DoubleRequest","EndlessAddStep","EveryDayLogin","FightUI","LookVideoReWard","MainUI","PauseUI","PetSkillUI","Set","StepUI","StoryUI","Tip","CoinUI","DiamondUI","LifeTime","LifeUI","UIBase","moveAction","Utils","Words","levelEditor","loadStory"]);